var Ky=Object.defineProperty;var Qy=(i,t,o)=>t in i?Ky(i,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):i[t]=o;var Rh=(i,t,o)=>Qy(i,typeof t!="symbol"?t+"":t,o);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))a(d);new MutationObserver(d=>{for(const u of d)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&a(f)}).observe(document,{childList:!0,subtree:!0});function o(d){const u={};return d.integrity&&(u.integrity=d.integrity),d.referrerPolicy&&(u.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?u.credentials="include":d.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function a(d){if(d.ep)return;d.ep=!0;const u=o(d);fetch(d.href,u)}})();var y1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ud(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var a0={exports:{}},ac={},u0={exports:{}},Ze={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v1;function Jy(){if(v1)return Ze;v1=1;var i=Symbol.for("react.element"),t=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),f=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),P=Symbol.iterator;function _(F){return F===null||typeof F!="object"?null:(F=P&&F[P]||F["@@iterator"],typeof F=="function"?F:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,N={};function I(F,J,Z){this.props=F,this.context=J,this.refs=N,this.updater=Z||k}I.prototype.isReactComponent={},I.prototype.setState=function(F,J){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,J,"setState")},I.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function j(){}j.prototype=I.prototype;function T(F,J,Z){this.props=F,this.context=J,this.refs=N,this.updater=Z||k}var S=T.prototype=new j;S.constructor=T,C(S,I.prototype),S.isPureReactComponent=!0;var L=Array.isArray,M=Object.prototype.hasOwnProperty,b={current:null},Y={key:!0,ref:!0,__self:!0,__source:!0};function A(F,J,Z){var he,me={},le=null,q=null;if(J!=null)for(he in J.ref!==void 0&&(q=J.ref),J.key!==void 0&&(le=""+J.key),J)M.call(J,he)&&!Y.hasOwnProperty(he)&&(me[he]=J[he]);var se=arguments.length-2;if(se===1)me.children=Z;else if(1<se){for(var ye=Array(se),xe=0;xe<se;xe++)ye[xe]=arguments[xe+2];me.children=ye}if(F&&F.defaultProps)for(he in se=F.defaultProps,se)me[he]===void 0&&(me[he]=se[he]);return{$$typeof:i,type:F,key:le,ref:q,props:me,_owner:b.current}}function U(F,J){return{$$typeof:i,type:F.type,key:J,ref:F.ref,props:F.props,_owner:F._owner}}function B(F){return typeof F=="object"&&F!==null&&F.$$typeof===i}function V(F){var J={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(Z){return J[Z]})}var X=/\/+/g;function $(F,J){return typeof F=="object"&&F!==null&&F.key!=null?V(""+F.key):J.toString(36)}function ne(F,J,Z,he,me){var le=typeof F;(le==="undefined"||le==="boolean")&&(F=null);var q=!1;if(F===null)q=!0;else switch(le){case"string":case"number":q=!0;break;case"object":switch(F.$$typeof){case i:case t:q=!0}}if(q)return q=F,me=me(q),F=he===""?"."+$(q,0):he,L(me)?(Z="",F!=null&&(Z=F.replace(X,"$&/")+"/"),ne(me,J,Z,"",function(xe){return xe})):me!=null&&(B(me)&&(me=U(me,Z+(!me.key||q&&q.key===me.key?"":(""+me.key).replace(X,"$&/")+"/")+F)),J.push(me)),1;if(q=0,he=he===""?".":he+":",L(F))for(var se=0;se<F.length;se++){le=F[se];var ye=he+$(le,se);q+=ne(le,J,Z,ye,me)}else if(ye=_(F),typeof ye=="function")for(F=ye.call(F),se=0;!(le=F.next()).done;)le=le.value,ye=he+$(le,se++),q+=ne(le,J,Z,ye,me);else if(le==="object")throw J=String(F),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.");return q}function ee(F,J,Z){if(F==null)return F;var he=[],me=0;return ne(F,he,"","",function(le){return J.call(Z,le,me++)}),he}function pe(F){if(F._status===-1){var J=F._result;J=J(),J.then(function(Z){(F._status===0||F._status===-1)&&(F._status=1,F._result=Z)},function(Z){(F._status===0||F._status===-1)&&(F._status=2,F._result=Z)}),F._status===-1&&(F._status=0,F._result=J)}if(F._status===1)return F._result.default;throw F._result}var D={current:null},z={transition:null},W={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:z,ReactCurrentOwner:b};function G(){throw Error("act(...) is not supported in production builds of React.")}return Ze.Children={map:ee,forEach:function(F,J,Z){ee(F,function(){J.apply(this,arguments)},Z)},count:function(F){var J=0;return ee(F,function(){J++}),J},toArray:function(F){return ee(F,function(J){return J})||[]},only:function(F){if(!B(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},Ze.Component=I,Ze.Fragment=o,Ze.Profiler=d,Ze.PureComponent=T,Ze.StrictMode=a,Ze.Suspense=m,Ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W,Ze.act=G,Ze.cloneElement=function(F,J,Z){if(F==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+F+".");var he=C({},F.props),me=F.key,le=F.ref,q=F._owner;if(J!=null){if(J.ref!==void 0&&(le=J.ref,q=b.current),J.key!==void 0&&(me=""+J.key),F.type&&F.type.defaultProps)var se=F.type.defaultProps;for(ye in J)M.call(J,ye)&&!Y.hasOwnProperty(ye)&&(he[ye]=J[ye]===void 0&&se!==void 0?se[ye]:J[ye])}var ye=arguments.length-2;if(ye===1)he.children=Z;else if(1<ye){se=Array(ye);for(var xe=0;xe<ye;xe++)se[xe]=arguments[xe+2];he.children=se}return{$$typeof:i,type:F.type,key:me,ref:le,props:he,_owner:q}},Ze.createContext=function(F){return F={$$typeof:f,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},F.Provider={$$typeof:u,_context:F},F.Consumer=F},Ze.createElement=A,Ze.createFactory=function(F){var J=A.bind(null,F);return J.type=F,J},Ze.createRef=function(){return{current:null}},Ze.forwardRef=function(F){return{$$typeof:p,render:F}},Ze.isValidElement=B,Ze.lazy=function(F){return{$$typeof:x,_payload:{_status:-1,_result:F},_init:pe}},Ze.memo=function(F,J){return{$$typeof:v,type:F,compare:J===void 0?null:J}},Ze.startTransition=function(F){var J=z.transition;z.transition={};try{F()}finally{z.transition=J}},Ze.unstable_act=G,Ze.useCallback=function(F,J){return D.current.useCallback(F,J)},Ze.useContext=function(F){return D.current.useContext(F)},Ze.useDebugValue=function(){},Ze.useDeferredValue=function(F){return D.current.useDeferredValue(F)},Ze.useEffect=function(F,J){return D.current.useEffect(F,J)},Ze.useId=function(){return D.current.useId()},Ze.useImperativeHandle=function(F,J,Z){return D.current.useImperativeHandle(F,J,Z)},Ze.useInsertionEffect=function(F,J){return D.current.useInsertionEffect(F,J)},Ze.useLayoutEffect=function(F,J){return D.current.useLayoutEffect(F,J)},Ze.useMemo=function(F,J){return D.current.useMemo(F,J)},Ze.useReducer=function(F,J,Z){return D.current.useReducer(F,J,Z)},Ze.useRef=function(F){return D.current.useRef(F)},Ze.useState=function(F){return D.current.useState(F)},Ze.useSyncExternalStore=function(F,J,Z){return D.current.useSyncExternalStore(F,J,Z)},Ze.useTransition=function(){return D.current.useTransition()},Ze.version="18.3.1",Ze}var _1;function tu(){return _1||(_1=1,u0.exports=Jy()),u0.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S1;function Zy(){if(S1)return ac;S1=1;var i=tu(),t=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,d=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function f(p,m,v){var x,P={},_=null,k=null;v!==void 0&&(_=""+v),m.key!==void 0&&(_=""+m.key),m.ref!==void 0&&(k=m.ref);for(x in m)a.call(m,x)&&!u.hasOwnProperty(x)&&(P[x]=m[x]);if(p&&p.defaultProps)for(x in m=p.defaultProps,m)P[x]===void 0&&(P[x]=m[x]);return{$$typeof:t,type:p,key:_,ref:k,props:P,_owner:d.current}}return ac.Fragment=o,ac.jsx=f,ac.jsxs=f,ac}var w1;function $y(){return w1||(w1=1,a0.exports=Zy()),a0.exports}var K=$y(),ve=tu();const Yn=ud(ve);var Lh={},c0={exports:{}},Mr={},d0={exports:{}},h0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k1;function ev(){return k1||(k1=1,(function(i){function t(z,W){var G=z.length;z.push(W);e:for(;0<G;){var F=G-1>>>1,J=z[F];if(0<d(J,W))z[F]=W,z[G]=J,G=F;else break e}}function o(z){return z.length===0?null:z[0]}function a(z){if(z.length===0)return null;var W=z[0],G=z.pop();if(G!==W){z[0]=G;e:for(var F=0,J=z.length,Z=J>>>1;F<Z;){var he=2*(F+1)-1,me=z[he],le=he+1,q=z[le];if(0>d(me,G))le<J&&0>d(q,me)?(z[F]=q,z[le]=G,F=le):(z[F]=me,z[he]=G,F=he);else if(le<J&&0>d(q,G))z[F]=q,z[le]=G,F=le;else break e}}return W}function d(z,W){var G=z.sortIndex-W.sortIndex;return G!==0?G:z.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var f=Date,p=f.now();i.unstable_now=function(){return f.now()-p}}var m=[],v=[],x=1,P=null,_=3,k=!1,C=!1,N=!1,I=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(z){for(var W=o(v);W!==null;){if(W.callback===null)a(v);else if(W.startTime<=z)a(v),W.sortIndex=W.expirationTime,t(m,W);else break;W=o(v)}}function L(z){if(N=!1,S(z),!C)if(o(m)!==null)C=!0,pe(M);else{var W=o(v);W!==null&&D(L,W.startTime-z)}}function M(z,W){C=!1,N&&(N=!1,j(A),A=-1),k=!0;var G=_;try{for(S(W),P=o(m);P!==null&&(!(P.expirationTime>W)||z&&!V());){var F=P.callback;if(typeof F=="function"){P.callback=null,_=P.priorityLevel;var J=F(P.expirationTime<=W);W=i.unstable_now(),typeof J=="function"?P.callback=J:P===o(m)&&a(m),S(W)}else a(m);P=o(m)}if(P!==null)var Z=!0;else{var he=o(v);he!==null&&D(L,he.startTime-W),Z=!1}return Z}finally{P=null,_=G,k=!1}}var b=!1,Y=null,A=-1,U=5,B=-1;function V(){return!(i.unstable_now()-B<U)}function X(){if(Y!==null){var z=i.unstable_now();B=z;var W=!0;try{W=Y(!0,z)}finally{W?$():(b=!1,Y=null)}}else b=!1}var $;if(typeof T=="function")$=function(){T(X)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,ee=ne.port2;ne.port1.onmessage=X,$=function(){ee.postMessage(null)}}else $=function(){I(X,0)};function pe(z){Y=z,b||(b=!0,$())}function D(z,W){A=I(function(){z(i.unstable_now())},W)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(z){z.callback=null},i.unstable_continueExecution=function(){C||k||(C=!0,pe(M))},i.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<z?Math.floor(1e3/z):5},i.unstable_getCurrentPriorityLevel=function(){return _},i.unstable_getFirstCallbackNode=function(){return o(m)},i.unstable_next=function(z){switch(_){case 1:case 2:case 3:var W=3;break;default:W=_}var G=_;_=W;try{return z()}finally{_=G}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(z,W){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var G=_;_=z;try{return W()}finally{_=G}},i.unstable_scheduleCallback=function(z,W,G){var F=i.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?F+G:F):G=F,z){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=G+J,z={id:x++,callback:W,priorityLevel:z,startTime:G,expirationTime:J,sortIndex:-1},G>F?(z.sortIndex=G,t(v,z),o(m)===null&&z===o(v)&&(N?(j(A),A=-1):N=!0,D(L,G-F))):(z.sortIndex=J,t(m,z),C||k||(C=!0,pe(M))),z},i.unstable_shouldYield=V,i.unstable_wrapCallback=function(z){var W=_;return function(){var G=_;_=W;try{return z.apply(this,arguments)}finally{_=G}}}})(h0)),h0}var x1;function ip(){return x1||(x1=1,d0.exports=ev()),d0.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C1;function tv(){if(C1)return Mr;C1=1;var i=tu(),t=ip();function o(e){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+e,l=1;l<arguments.length;l++)n+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,d={};function u(e,n){f(e,n),f(e+"Capture",n)}function f(e,n){for(d[e]=n,e=0;e<n.length;e++)a.add(n[e])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,x={},P={};function _(e){return m.call(P,e)?!0:m.call(x,e)?!1:v.test(e)?P[e]=!0:(x[e]=!0,!1)}function k(e,n,l,h){if(l!==null&&l.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return h?!1:l!==null?!l.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function C(e,n,l,h){if(n===null||typeof n>"u"||k(e,n,l,h))return!0;if(h)return!1;if(l!==null)switch(l.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function N(e,n,l,h,y,E,O){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=h,this.attributeNamespace=y,this.mustUseProperty=l,this.propertyName=e,this.type=n,this.sanitizeURL=E,this.removeEmptyString=O}var I={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){I[e]=new N(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var n=e[0];I[n]=new N(n,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){I[e]=new N(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){I[e]=new N(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){I[e]=new N(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){I[e]=new N(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){I[e]=new N(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){I[e]=new N(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){I[e]=new N(e,5,!1,e.toLowerCase(),null,!1,!1)});var j=/[\-:]([a-z])/g;function T(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var n=e.replace(j,T);I[n]=new N(n,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var n=e.replace(j,T);I[n]=new N(n,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var n=e.replace(j,T);I[n]=new N(n,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){I[e]=new N(e,1,!1,e.toLowerCase(),null,!1,!1)}),I.xlinkHref=new N("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){I[e]=new N(e,1,!1,e.toLowerCase(),null,!0,!0)});function S(e,n,l,h){var y=I.hasOwnProperty(n)?I[n]:null;(y!==null?y.type!==0:h||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(C(n,l,y,h)&&(l=null),h||y===null?_(n)&&(l===null?e.removeAttribute(n):e.setAttribute(n,""+l)):y.mustUseProperty?e[y.propertyName]=l===null?y.type===3?!1:"":l:(n=y.attributeName,h=y.attributeNamespace,l===null?e.removeAttribute(n):(y=y.type,l=y===3||y===4&&l===!0?"":""+l,h?e.setAttributeNS(h,n,l):e.setAttribute(n,l))))}var L=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,M=Symbol.for("react.element"),b=Symbol.for("react.portal"),Y=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),V=Symbol.for("react.context"),X=Symbol.for("react.forward_ref"),$=Symbol.for("react.suspense"),ne=Symbol.for("react.suspense_list"),ee=Symbol.for("react.memo"),pe=Symbol.for("react.lazy"),D=Symbol.for("react.offscreen"),z=Symbol.iterator;function W(e){return e===null||typeof e!="object"?null:(e=z&&e[z]||e["@@iterator"],typeof e=="function"?e:null)}var G=Object.assign,F;function J(e){if(F===void 0)try{throw Error()}catch(l){var n=l.stack.trim().match(/\n( *(at )?)/);F=n&&n[1]||""}return`
`+F+e}var Z=!1;function he(e,n){if(!e||Z)return"";Z=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(de){var h=de}Reflect.construct(e,[],n)}else{try{n.call()}catch(de){h=de}e.call(n.prototype)}else{try{throw Error()}catch(de){h=de}e()}}catch(de){if(de&&h&&typeof de.stack=="string"){for(var y=de.stack.split(`
`),E=h.stack.split(`
`),O=y.length-1,Q=E.length-1;1<=O&&0<=Q&&y[O]!==E[Q];)Q--;for(;1<=O&&0<=Q;O--,Q--)if(y[O]!==E[Q]){if(O!==1||Q!==1)do if(O--,Q--,0>Q||y[O]!==E[Q]){var te=`
`+y[O].replace(" at new "," at ");return e.displayName&&te.includes("<anonymous>")&&(te=te.replace("<anonymous>",e.displayName)),te}while(1<=O&&0<=Q);break}}}finally{Z=!1,Error.prepareStackTrace=l}return(e=e?e.displayName||e.name:"")?J(e):""}function me(e){switch(e.tag){case 5:return J(e.type);case 16:return J("Lazy");case 13:return J("Suspense");case 19:return J("SuspenseList");case 0:case 2:case 15:return e=he(e.type,!1),e;case 11:return e=he(e.type.render,!1),e;case 1:return e=he(e.type,!0),e;default:return""}}function le(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Y:return"Fragment";case b:return"Portal";case U:return"Profiler";case A:return"StrictMode";case $:return"Suspense";case ne:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case V:return(e.displayName||"Context")+".Consumer";case B:return(e._context.displayName||"Context")+".Provider";case X:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ee:return n=e.displayName||null,n!==null?n:le(e.type)||"Memo";case pe:n=e._payload,e=e._init;try{return le(e(n))}catch{}}return null}function q(e){var n=e.type;switch(e.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=n.render,e=e.displayName||e.name||"",n.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return le(n);case 8:return n===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function se(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ye(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function xe(e){var n=ye(e)?"checked":"value",l=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),h=""+e[n];if(!e.hasOwnProperty(n)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var y=l.get,E=l.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return y.call(this)},set:function(O){h=""+O,E.call(this,O)}}),Object.defineProperty(e,n,{enumerable:l.enumerable}),{getValue:function(){return h},setValue:function(O){h=""+O},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function Pe(e){e._valueTracker||(e._valueTracker=xe(e))}function Ue(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var l=n.getValue(),h="";return e&&(h=ye(e)?e.checked?"true":"false":e.value),e=h,e!==l?(n.setValue(e),!0):!1}function Oe(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function rt(e,n){var l=n.checked;return G({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??e._wrapperState.initialChecked})}function Ge(e,n){var l=n.defaultValue==null?"":n.defaultValue,h=n.checked!=null?n.checked:n.defaultChecked;l=se(n.value!=null?n.value:l),e._wrapperState={initialChecked:h,initialValue:l,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function Ut(e,n){n=n.checked,n!=null&&S(e,"checked",n,!1)}function ot(e,n){Ut(e,n);var l=se(n.value),h=n.type;if(l!=null)h==="number"?(l===0&&e.value===""||e.value!=l)&&(e.value=""+l):e.value!==""+l&&(e.value=""+l);else if(h==="submit"||h==="reset"){e.removeAttribute("value");return}n.hasOwnProperty("value")?Hr(e,n.type,l):n.hasOwnProperty("defaultValue")&&Hr(e,n.type,se(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(e.defaultChecked=!!n.defaultChecked)}function Et(e,n,l){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var h=n.type;if(!(h!=="submit"&&h!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+e._wrapperState.initialValue,l||n===e.value||(e.value=n),e.defaultValue=n}l=e.name,l!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,l!==""&&(e.name=l)}function Hr(e,n,l){(n!=="number"||Oe(e.ownerDocument)!==e)&&(l==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+l&&(e.defaultValue=""+l))}var Dt=Array.isArray;function wr(e,n,l,h){if(e=e.options,n){n={};for(var y=0;y<l.length;y++)n["$"+l[y]]=!0;for(l=0;l<e.length;l++)y=n.hasOwnProperty("$"+e[l].value),e[l].selected!==y&&(e[l].selected=y),y&&h&&(e[l].defaultSelected=!0)}else{for(l=""+se(l),n=null,y=0;y<e.length;y++){if(e[y].value===l){e[y].selected=!0,h&&(e[y].defaultSelected=!0);return}n!==null||e[y].disabled||(n=e[y])}n!==null&&(n.selected=!0)}}function ft(e,n){if(n.dangerouslySetInnerHTML!=null)throw Error(o(91));return G({},n,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Xn(e,n){var l=n.value;if(l==null){if(l=n.children,n=n.defaultValue,l!=null){if(n!=null)throw Error(o(92));if(Dt(l)){if(1<l.length)throw Error(o(93));l=l[0]}n=l}n==null&&(n=""),l=n}e._wrapperState={initialValue:se(l)}}function cn(e,n){var l=se(n.value),h=se(n.defaultValue);l!=null&&(l=""+l,l!==e.value&&(e.value=l),n.defaultValue==null&&e.defaultValue!==l&&(e.defaultValue=l)),h!=null&&(e.defaultValue=""+h)}function Wr(e){var n=e.textContent;n===e._wrapperState.initialValue&&n!==""&&n!==null&&(e.value=n)}function dn(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function kr(e,n){return e==null||e==="http://www.w3.org/1999/xhtml"?dn(n):e==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var wn,or=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,l,h,y){MSApp.execUnsafeLocalFunction(function(){return e(n,l,h,y)})}:e})(function(e,n){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=n;else{for(wn=wn||document.createElement("div"),wn.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=wn.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;n.firstChild;)e.appendChild(n.firstChild)}});function jt(e,n){if(n){var l=e.firstChild;if(l&&l===e.lastChild&&l.nodeType===3){l.nodeValue=n;return}}e.textContent=n}var Bt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ns=["Webkit","ms","Moz","O"];Object.keys(Bt).forEach(function(e){ns.forEach(function(n){n=n+e.charAt(0).toUpperCase()+e.substring(1),Bt[n]=Bt[e]})});function Vo(e,n,l){return n==null||typeof n=="boolean"||n===""?"":l||typeof n!="number"||n===0||Bt.hasOwnProperty(e)&&Bt[e]?(""+n).trim():n+"px"}function rs(e,n){e=e.style;for(var l in n)if(n.hasOwnProperty(l)){var h=l.indexOf("--")===0,y=Vo(l,n[l],h);l==="float"&&(l="cssFloat"),h?e.setProperty(l,y):e[l]=y}}var au=G({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ho(e,n){if(n){if(au[e]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(o(137,e));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(o(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(o(61))}if(n.style!=null&&typeof n.style!="object")throw Error(o(62))}}function Ol(e,n){if(e.indexOf("-")===-1)return typeof n.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var uu=null;function cu(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var du=null,Bs=null,Gs=null;function vd(e){if(e=ul(e)){if(typeof du!="function")throw Error(o(280));var n=e.stateNode;n&&(n=on(n),du(e.stateNode,e.type,n))}}function hu(e){Bs?Gs?Gs.push(e):Gs=[e]:Bs=e}function fu(){if(Bs){var e=Bs,n=Gs;if(Gs=Bs=null,vd(e),n)for(e=0;e<n.length;e++)vd(n[e])}}function _d(e,n){return e(n)}function zl(){}var bl=!1;function pu(e,n,l){if(bl)return e(n,l);bl=!0;try{return _d(e,n,l)}finally{bl=!1,(Bs!==null||Gs!==null)&&(zl(),fu())}}function Wo(e,n){var l=e.stateNode;if(l===null)return null;var h=on(l);if(h===null)return null;l=h[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(e=e.type,h=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!h;break e;default:e=!1}if(e)return null;if(l&&typeof l!="function")throw Error(o(231,n,typeof l));return l}var gu=!1;if(p)try{var Yo={};Object.defineProperty(Yo,"passive",{get:function(){gu=!0}}),window.addEventListener("test",Yo,Yo),window.removeEventListener("test",Yo,Yo)}catch{gu=!1}function Sd(e,n,l,h,y,E,O,Q,te){var de=Array.prototype.slice.call(arguments,3);try{n.apply(l,de)}catch(Se){this.onError(Se)}}var is=!1,Ul=null,jl=!1,Vs=null,Cf={onError:function(e){is=!0,Ul=e}};function Ef(e,n,l,h,y,E,O,Q,te){is=!1,Ul=null,Sd.apply(Cf,arguments)}function Pf(e,n,l,h,y,E,O,Q,te){if(Ef.apply(this,arguments),is){if(is){var de=Ul;is=!1,Ul=null}else throw Error(o(198));jl||(jl=!0,Vs=de)}}function ss(e){var n=e,l=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(l=n.return),e=n.return;while(e)}return n.tag===3?l:null}function wd(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function kd(e){if(ss(e)!==e)throw Error(o(188))}function Nf(e){var n=e.alternate;if(!n){if(n=ss(e),n===null)throw Error(o(188));return n!==e?null:e}for(var l=e,h=n;;){var y=l.return;if(y===null)break;var E=y.alternate;if(E===null){if(h=y.return,h!==null){l=h;continue}break}if(y.child===E.child){for(E=y.child;E;){if(E===l)return kd(y),e;if(E===h)return kd(y),n;E=E.sibling}throw Error(o(188))}if(l.return!==h.return)l=y,h=E;else{for(var O=!1,Q=y.child;Q;){if(Q===l){O=!0,l=y,h=E;break}if(Q===h){O=!0,h=y,l=E;break}Q=Q.sibling}if(!O){for(Q=E.child;Q;){if(Q===l){O=!0,l=E,h=y;break}if(Q===h){O=!0,h=E,l=y;break}Q=Q.sibling}if(!O)throw Error(o(189))}}if(l.alternate!==h)throw Error(o(190))}if(l.tag!==3)throw Error(o(188));return l.stateNode.current===l?e:n}function xd(e){return e=Nf(e),e!==null?Cd(e):null}function Cd(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var n=Cd(e);if(n!==null)return n;e=e.sibling}return null}var Ed=t.unstable_scheduleCallback,Pd=t.unstable_cancelCallback,Tf=t.unstable_shouldYield,Rf=t.unstable_requestPaint,Ft=t.unstable_now,mu=t.unstable_getCurrentPriorityLevel,os=t.unstable_ImmediatePriority,Bl=t.unstable_UserBlockingPriority,Hs=t.unstable_NormalPriority,Lf=t.unstable_LowPriority,Gl=t.unstable_IdlePriority,ui=null,hn=null;function wt(e){if(hn&&typeof hn.onCommitFiberRoot=="function")try{hn.onCommitFiberRoot(ui,e,void 0,(e.current.flags&128)===128)}catch{}}var Qe=Math.clz32?Math.clz32:Kn,Ti=Math.log,kn=Math.LN2;function Kn(e){return e>>>=0,e===0?32:31-(Ti(e)/kn|0)|0}var Yr=64,ci=4194304;function nn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ls(e,n){var l=e.pendingLanes;if(l===0)return 0;var h=0,y=e.suspendedLanes,E=e.pingedLanes,O=l&268435455;if(O!==0){var Q=O&~y;Q!==0?h=nn(Q):(E&=O,E!==0&&(h=nn(E)))}else O=l&~y,O!==0?h=nn(O):E!==0&&(h=nn(E));if(h===0)return 0;if(n!==0&&n!==h&&(n&y)===0&&(y=h&-h,E=n&-n,y>=E||y===16&&(E&4194240)!==0))return n;if((h&4)!==0&&(h|=l&16),n=e.entangledLanes,n!==0)for(e=e.entanglements,n&=h;0<n;)l=31-Qe(n),y=1<<l,h|=e[l],n&=~y;return h}function Nd(e,n){switch(e){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Td(e,n){for(var l=e.suspendedLanes,h=e.pingedLanes,y=e.expirationTimes,E=e.pendingLanes;0<E;){var O=31-Qe(E),Q=1<<O,te=y[O];te===-1?((Q&l)===0||(Q&h)!==0)&&(y[O]=Nd(Q,n)):te<=n&&(e.expiredLanes|=Q),E&=~Q}}function Ws(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function yu(){var e=Yr;return Yr<<=1,(Yr&4194240)===0&&(Yr=64),e}function lr(e){for(var n=[],l=0;31>l;l++)n.push(e);return n}function qo(e,n,l){e.pendingLanes|=n,n!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,n=31-Qe(n),e[n]=l}function Mf(e,n){var l=e.pendingLanes&~n;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=n,e.mutableReadLanes&=n,e.entangledLanes&=n,n=e.entanglements;var h=e.eventTimes;for(e=e.expirationTimes;0<l;){var y=31-Qe(l),E=1<<y;n[y]=0,h[y]=-1,e[y]=-1,l&=~E}}function vu(e,n){var l=e.entangledLanes|=n;for(e=e.entanglements;l;){var h=31-Qe(l),y=1<<h;y&n|e[h]&n&&(e[h]|=n),l&=~y}}var st=0;function Xo(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Ys,qs,Rd,Ld,Vl,Hl=!1,Xs=[],xr=null,Ri=null,qr=null,Je=new Map,Ks=new Map,Xr=[],Md="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dd(e,n){switch(e){case"focusin":case"focusout":xr=null;break;case"dragenter":case"dragleave":Ri=null;break;case"mouseover":case"mouseout":qr=null;break;case"pointerover":case"pointerout":Je.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ks.delete(n.pointerId)}}function Ko(e,n,l,h,y,E){return e===null||e.nativeEvent!==E?(e={blockedOn:n,domEventName:l,eventSystemFlags:h,nativeEvent:E,targetContainers:[y]},n!==null&&(n=ul(n),n!==null&&qs(n)),e):(e.eventSystemFlags|=h,n=e.targetContainers,y!==null&&n.indexOf(y)===-1&&n.push(y),e)}function rn(e,n,l,h,y){switch(n){case"focusin":return xr=Ko(xr,e,n,l,h,y),!0;case"dragenter":return Ri=Ko(Ri,e,n,l,h,y),!0;case"mouseover":return qr=Ko(qr,e,n,l,h,y),!0;case"pointerover":var E=y.pointerId;return Je.set(E,Ko(Je.get(E)||null,e,n,l,h,y)),!0;case"gotpointercapture":return E=y.pointerId,Ks.set(E,Ko(Ks.get(E)||null,e,n,l,h,y)),!0}return!1}function Wl(e){var n=Ui(e.target);if(n!==null){var l=ss(n);if(l!==null){if(n=l.tag,n===13){if(n=wd(l),n!==null){e.blockedOn=n,Vl(e.priority,function(){Rd(l)});return}}else if(n===3&&l.stateNode.current.memoizedState.isDehydrated){e.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Yl(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var l=Kl(e.domEventName,e.eventSystemFlags,n[0],e.nativeEvent);if(l===null){l=e.nativeEvent;var h=new l.constructor(l.type,l);uu=h,l.target.dispatchEvent(h),uu=null}else return n=ul(l),n!==null&&qs(n),e.blockedOn=l,!1;n.shift()}return!0}function ql(e,n,l){Yl(e)&&l.delete(n)}function Df(){Hl=!1,xr!==null&&Yl(xr)&&(xr=null),Ri!==null&&Yl(Ri)&&(Ri=null),qr!==null&&Yl(qr)&&(qr=null),Je.forEach(ql),Ks.forEach(ql)}function Li(e,n){e.blockedOn===n&&(e.blockedOn=null,Hl||(Hl=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Df)))}function Qn(e){function n(y){return Li(y,e)}if(0<Xs.length){Li(Xs[0],e);for(var l=1;l<Xs.length;l++){var h=Xs[l];h.blockedOn===e&&(h.blockedOn=null)}}for(xr!==null&&Li(xr,e),Ri!==null&&Li(Ri,e),qr!==null&&Li(qr,e),Je.forEach(n),Ks.forEach(n),l=0;l<Xr.length;l++)h=Xr[l],h.blockedOn===e&&(h.blockedOn=null);for(;0<Xr.length&&(l=Xr[0],l.blockedOn===null);)Wl(l),l.blockedOn===null&&Xr.shift()}var Qs=L.ReactCurrentBatchConfig,Xl=!0;function Fr(e,n,l,h){var y=st,E=Qs.transition;Qs.transition=null;try{st=1,Js(e,n,l,h)}finally{st=y,Qs.transition=E}}function di(e,n,l,h){var y=st,E=Qs.transition;Qs.transition=null;try{st=4,Js(e,n,l,h)}finally{st=y,Qs.transition=E}}function Js(e,n,l,h){if(Xl){var y=Kl(e,n,l,h);if(y===null)da(e,n,h,Zs,l),Dd(e,h);else if(rn(y,e,n,l,h))h.stopPropagation();else if(Dd(e,h),n&4&&-1<Md.indexOf(e)){for(;y!==null;){var E=ul(y);if(E!==null&&Ys(E),E=Kl(e,n,l,h),E===null&&da(e,n,h,Zs,l),E===y)break;y=E}y!==null&&h.stopPropagation()}else da(e,n,h,null,l)}}var Zs=null;function Kl(e,n,l,h){if(Zs=null,e=cu(h),e=Ui(e),e!==null)if(n=ss(e),n===null)e=null;else if(l=n.tag,l===13){if(e=wd(n),e!==null)return e;e=null}else if(l===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null);return Zs=e,null}function Id(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(mu()){case os:return 1;case Bl:return 4;case Hs:case Lf:return 16;case Gl:return 536870912;default:return 16}default:return 16}}var fn=null,Mi=null,hi=null;function Qo(){if(hi)return hi;var e,n=Mi,l=n.length,h,y="value"in fn?fn.value:fn.textContent,E=y.length;for(e=0;e<l&&n[e]===y[e];e++);var O=l-e;for(h=1;h<=O&&n[l-h]===y[E-h];h++);return hi=y.slice(e,1<h?1-h:void 0)}function as(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function On(){return!0}function ar(){return!1}function qt(e){function n(l,h,y,E,O){this._reactName=l,this._targetInst=y,this.type=h,this.nativeEvent=E,this.target=O,this.currentTarget=null;for(var Q in e)e.hasOwnProperty(Q)&&(l=e[Q],this[Q]=l?l(E):E[Q]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?On:ar,this.isPropagationStopped=ar,this}return G(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=On)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=On)},persist:function(){},isPersistent:On}),n}var Jn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Or=qt(Jn),zr=G({},Jn,{view:0,detail:0}),Ad=qt(zr),Jo,Zo,pn,zn=G({},zr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cs,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==pn&&(pn&&e.type==="mousemove"?(Jo=e.screenX-pn.screenX,Zo=e.screenY-pn.screenY):Zo=Jo=0,pn=e),Jo)},movementY:function(e){return"movementY"in e?e.movementY:Zo}}),kt=qt(zn),$o=G({},zn,{dataTransfer:0}),br=qt($o),Fd=G({},zr,{relatedTarget:0}),Ql=qt(Fd),_u=G({},Jn,{animationName:0,elapsedTime:0,pseudoElement:0}),Su=qt(_u),Od=G({},Jn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Jl=qt(Od),zd=G({},Jn,{data:0}),us=qt(zd),wu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},If={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Zl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Af(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=Zl[e])?!!n[e]:!1}function cs(){return Af}var $l=G({},zr,{key:function(e){if(e.key){var n=wu[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=as(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?If[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cs,charCode:function(e){return e.type==="keypress"?as(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?as(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),bd=qt($l),Ud=G({},zn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ds=qt(Ud),jd=G({},zr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cs}),ea=qt(jd),ta=G({},Jn,{propertyName:0,elapsedTime:0,pseudoElement:0}),$s=qt(ta),ku=G({},zn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),xu=qt(ku),Bd=[9,13,27,32],el=p&&"CompositionEvent"in window,hs=null;p&&"documentMode"in document&&(hs=document.documentMode);var eo=p&&"TextEvent"in window&&!hs,ur=p&&(!el||hs&&8<hs&&11>=hs),Di=" ",na=!1;function Cu(e,n){switch(e){case"keyup":return Bd.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ur(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var cr=!1;function Eu(e,n){switch(e){case"compositionend":return Ur(n);case"keypress":return n.which!==32?null:(na=!0,Di);case"textInput":return e=n.data,e===Di&&na?null:e;default:return null}}function Gd(e,n){if(cr)return e==="compositionend"||!el&&Cu(e,n)?(e=Qo(),hi=Mi=fn=null,cr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return ur&&n.locale!=="ko"?null:n.data;default:return null}}var fi={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pi(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!fi[e.type]:n==="textarea"}function tl(e,n,l,h){hu(h),n=ha(n,"onChange"),0<n.length&&(l=new Or("onChange","change",null,l,h),e.push({event:l,listeners:n}))}var to=null,Ii=null;function Vd(e){Ou(e,0)}function Ai(e){var n=Kt(e);if(Ue(n))return e}function Cr(e,n){if(e==="change")return n}var no=!1;if(p){var Fi;if(p){var Er="oninput"in document;if(!Er){var ra=document.createElement("div");ra.setAttribute("oninput","return;"),Er=typeof ra.oninput=="function"}Fi=Er}else Fi=!1;no=Fi&&(!document.documentMode||9<document.documentMode)}function fs(){to&&(to.detachEvent("onpropertychange",Pu),Ii=to=null)}function Pu(e){if(e.propertyName==="value"&&Ai(Ii)){var n=[];tl(n,Ii,e,cu(e)),pu(Vd,n)}}function Nu(e,n,l){e==="focusin"?(fs(),to=n,Ii=l,to.attachEvent("onpropertychange",Pu)):e==="focusout"&&fs()}function Mt(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ai(Ii)}function ia(e,n){if(e==="click")return Ai(n)}function Tu(e,n){if(e==="input"||e==="change")return Ai(n)}function Ru(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var Zn=typeof Object.is=="function"?Object.is:Ru;function ps(e,n){if(Zn(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var l=Object.keys(e),h=Object.keys(n);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var y=l[h];if(!m.call(n,y)||!Zn(e[y],n[y]))return!1}return!0}function Oi(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Pt(e,n){var l=Oi(e);e=0;for(var h;l;){if(l.nodeType===3){if(h=e+l.textContent.length,e<=n&&h>=n)return{node:l,offset:n-e};e=h}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Oi(l)}}function Gt(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?Gt(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function Xt(){for(var e=window,n=Oe();n instanceof e.HTMLIFrameElement;){try{var l=typeof n.contentWindow.location.href=="string"}catch{l=!1}if(l)e=n.contentWindow;else break;n=Oe(e.document)}return n}function ro(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}function nl(e){var n=Xt(),l=e.focusedElem,h=e.selectionRange;if(n!==l&&l&&l.ownerDocument&&Gt(l.ownerDocument.documentElement,l)){if(h!==null&&ro(l)){if(n=h.start,e=h.end,e===void 0&&(e=n),"selectionStart"in l)l.selectionStart=n,l.selectionEnd=Math.min(e,l.value.length);else if(e=(n=l.ownerDocument||document)&&n.defaultView||window,e.getSelection){e=e.getSelection();var y=l.textContent.length,E=Math.min(h.start,y);h=h.end===void 0?E:Math.min(h.end,y),!e.extend&&E>h&&(y=h,h=E,E=y),y=Pt(l,E);var O=Pt(l,h);y&&O&&(e.rangeCount!==1||e.anchorNode!==y.node||e.anchorOffset!==y.offset||e.focusNode!==O.node||e.focusOffset!==O.offset)&&(n=n.createRange(),n.setStart(y.node,y.offset),e.removeAllRanges(),E>h?(e.addRange(n),e.extend(O.node,O.offset)):(n.setEnd(O.node,O.offset),e.addRange(n)))}}for(n=[],e=l;e=e.parentNode;)e.nodeType===1&&n.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<n.length;l++)e=n[l],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var rl=p&&"documentMode"in document&&11>=document.documentMode,io=null,sn=null,gs=null,il=!1;function sa(e,n,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;il||io==null||io!==Oe(h)||(h=io,"selectionStart"in h&&ro(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),gs&&ps(gs,h)||(gs=h,h=ha(sn,"onSelect"),0<h.length&&(n=new Or("onSelect","select",null,n,l),e.push({event:n,listeners:h}),n.target=io)))}function dr(e,n){var l={};return l[e.toLowerCase()]=n.toLowerCase(),l["Webkit"+e]="webkit"+n,l["Moz"+e]="moz"+n,l}var gn={animationend:dr("Animation","AnimationEnd"),animationiteration:dr("Animation","AnimationIteration"),animationstart:dr("Animation","AnimationStart"),transitionend:dr("Transition","TransitionEnd")},ms={},oa={};p&&(oa=document.createElement("div").style,"AnimationEvent"in window||(delete gn.animationend.animation,delete gn.animationiteration.animation,delete gn.animationstart.animation),"TransitionEvent"in window||delete gn.transitionend.transition);function so(e){if(ms[e])return ms[e];if(!gn[e])return e;var n=gn[e],l;for(l in n)if(n.hasOwnProperty(l)&&l in oa)return ms[e]=n[l];return e}var Lu=so("animationend"),Mu=so("animationiteration"),Du=so("animationstart"),Iu=so("transitionend"),Au=new Map,Fu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gi(e,n){Au.set(e,n),u(n,[e])}for(var la=0;la<Fu.length;la++){var ys=Fu[la],Hd=ys.toLowerCase(),aa=ys[0].toUpperCase()+ys.slice(1);gi(Hd,"on"+aa)}gi(Lu,"onAnimationEnd"),gi(Mu,"onAnimationIteration"),gi(Du,"onAnimationStart"),gi("dblclick","onDoubleClick"),gi("focusin","onFocus"),gi("focusout","onBlur"),gi(Iu,"onTransitionEnd"),f("onMouseEnter",["mouseout","mouseover"]),f("onMouseLeave",["mouseout","mouseover"]),f("onPointerEnter",["pointerout","pointerover"]),f("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Wd=new Set("cancel close invalid load scroll toggle".split(" ").concat(zi));function ua(e,n,l){var h=e.type||"unknown-event";e.currentTarget=l,Pf(h,n,void 0,e),e.currentTarget=null}function Ou(e,n){n=(n&4)!==0;for(var l=0;l<e.length;l++){var h=e[l],y=h.event;h=h.listeners;e:{var E=void 0;if(n)for(var O=h.length-1;0<=O;O--){var Q=h[O],te=Q.instance,de=Q.currentTarget;if(Q=Q.listener,te!==E&&y.isPropagationStopped())break e;ua(y,Q,de),E=te}else for(O=0;O<h.length;O++){if(Q=h[O],te=Q.instance,de=Q.currentTarget,Q=Q.listener,te!==E&&y.isPropagationStopped())break e;ua(y,Q,de),E=te}}}if(jl)throw e=Vs,jl=!1,Vs=null,e}function yt(e,n){var l=n[pa];l===void 0&&(l=n[pa]=new Set);var h=e+"__bubble";l.has(h)||(zu(n,e,2,!1),l.add(h))}function ca(e,n,l){var h=0;n&&(h|=4),zu(l,e,h,n)}var sl="_reactListening"+Math.random().toString(36).slice(2);function vs(e){if(!e[sl]){e[sl]=!0,a.forEach(function(l){l!=="selectionchange"&&(Wd.has(l)||ca(l,!1,e),ca(l,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[sl]||(n[sl]=!0,ca("selectionchange",!1,n))}}function zu(e,n,l,h){switch(Id(n)){case 1:var y=Fr;break;case 4:y=di;break;default:y=Js}l=y.bind(null,n,l,e),y=void 0,!gu||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(y=!0),h?y!==void 0?e.addEventListener(n,l,{capture:!0,passive:y}):e.addEventListener(n,l,!0):y!==void 0?e.addEventListener(n,l,{passive:y}):e.addEventListener(n,l,!1)}function da(e,n,l,h,y){var E=h;if((n&1)===0&&(n&2)===0&&h!==null)e:for(;;){if(h===null)return;var O=h.tag;if(O===3||O===4){var Q=h.stateNode.containerInfo;if(Q===y||Q.nodeType===8&&Q.parentNode===y)break;if(O===4)for(O=h.return;O!==null;){var te=O.tag;if((te===3||te===4)&&(te=O.stateNode.containerInfo,te===y||te.nodeType===8&&te.parentNode===y))return;O=O.return}for(;Q!==null;){if(O=Ui(Q),O===null)return;if(te=O.tag,te===5||te===6){h=E=O;continue e}Q=Q.parentNode}}h=h.return}pu(function(){var de=E,Se=cu(l),we=[];e:{var _e=Au.get(e);if(_e!==void 0){var Re=Or,Ie=e;switch(e){case"keypress":if(as(l)===0)break e;case"keydown":case"keyup":Re=bd;break;case"focusin":Ie="focus",Re=Ql;break;case"focusout":Ie="blur",Re=Ql;break;case"beforeblur":case"afterblur":Re=Ql;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Re=kt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Re=br;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Re=ea;break;case Lu:case Mu:case Du:Re=Su;break;case Iu:Re=$s;break;case"scroll":Re=Ad;break;case"wheel":Re=xu;break;case"copy":case"cut":case"paste":Re=Jl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Re=ds}var Ae=(n&4)!==0,$t=!Ae&&e==="scroll",ae=Ae?_e!==null?_e+"Capture":null:_e;Ae=[];for(var re=de,ue;re!==null;){ue=re;var Ce=ue.stateNode;if(ue.tag===5&&Ce!==null&&(ue=Ce,ae!==null&&(Ce=Wo(re,ae),Ce!=null&&Ae.push(oo(re,Ce,ue)))),$t)break;re=re.return}0<Ae.length&&(_e=new Re(_e,Ie,null,l,Se),we.push({event:_e,listeners:Ae}))}}if((n&7)===0){e:{if(_e=e==="mouseover"||e==="pointerover",Re=e==="mouseout"||e==="pointerout",_e&&l!==uu&&(Ie=l.relatedTarget||l.fromElement)&&(Ui(Ie)||Ie[Qr]))break e;if((Re||_e)&&(_e=Se.window===Se?Se:(_e=Se.ownerDocument)?_e.defaultView||_e.parentWindow:window,Re?(Ie=l.relatedTarget||l.toElement,Re=de,Ie=Ie?Ui(Ie):null,Ie!==null&&($t=ss(Ie),Ie!==$t||Ie.tag!==5&&Ie.tag!==6)&&(Ie=null)):(Re=null,Ie=de),Re!==Ie)){if(Ae=kt,Ce="onMouseLeave",ae="onMouseEnter",re="mouse",(e==="pointerout"||e==="pointerover")&&(Ae=ds,Ce="onPointerLeave",ae="onPointerEnter",re="pointer"),$t=Re==null?_e:Kt(Re),ue=Ie==null?_e:Kt(Ie),_e=new Ae(Ce,re+"leave",Re,l,Se),_e.target=$t,_e.relatedTarget=ue,Ce=null,Ui(Se)===de&&(Ae=new Ae(ae,re+"enter",Ie,l,Se),Ae.target=ue,Ae.relatedTarget=$t,Ce=Ae),$t=Ce,Re&&Ie)t:{for(Ae=Re,ae=Ie,re=0,ue=Ae;ue;ue=_s(ue))re++;for(ue=0,Ce=ae;Ce;Ce=_s(Ce))ue++;for(;0<re-ue;)Ae=_s(Ae),re--;for(;0<ue-re;)ae=_s(ae),ue--;for(;re--;){if(Ae===ae||ae!==null&&Ae===ae.alternate)break t;Ae=_s(Ae),ae=_s(ae)}Ae=null}else Ae=null;Re!==null&&Yd(we,_e,Re,Ae,!1),Ie!==null&&$t!==null&&Yd(we,$t,Ie,Ae,!0)}}e:{if(_e=de?Kt(de):window,Re=_e.nodeName&&_e.nodeName.toLowerCase(),Re==="select"||Re==="input"&&_e.type==="file")var Fe=Cr;else if(pi(_e))if(no)Fe=Tu;else{Fe=Mt;var je=Nu}else(Re=_e.nodeName)&&Re.toLowerCase()==="input"&&(_e.type==="checkbox"||_e.type==="radio")&&(Fe=ia);if(Fe&&(Fe=Fe(e,de))){tl(we,Fe,l,Se);break e}je&&je(e,_e,de),e==="focusout"&&(je=_e._wrapperState)&&je.controlled&&_e.type==="number"&&Hr(_e,"number",_e.value)}switch(je=de?Kt(de):window,e){case"focusin":(pi(je)||je.contentEditable==="true")&&(io=je,sn=de,gs=null);break;case"focusout":gs=sn=io=null;break;case"mousedown":il=!0;break;case"contextmenu":case"mouseup":case"dragend":il=!1,sa(we,l,Se);break;case"selectionchange":if(rl)break;case"keydown":case"keyup":sa(we,l,Se)}var Be;if(el)e:{switch(e){case"compositionstart":var Ve="onCompositionStart";break e;case"compositionend":Ve="onCompositionEnd";break e;case"compositionupdate":Ve="onCompositionUpdate";break e}Ve=void 0}else cr?Cu(e,l)&&(Ve="onCompositionEnd"):e==="keydown"&&l.keyCode===229&&(Ve="onCompositionStart");Ve&&(ur&&l.locale!=="ko"&&(cr||Ve!=="onCompositionStart"?Ve==="onCompositionEnd"&&cr&&(Be=Qo()):(fn=Se,Mi="value"in fn?fn.value:fn.textContent,cr=!0)),je=ha(de,Ve),0<je.length&&(Ve=new us(Ve,e,null,l,Se),we.push({event:Ve,listeners:je}),Be?Ve.data=Be:(Be=Ur(l),Be!==null&&(Ve.data=Be)))),(Be=eo?Eu(e,l):Gd(e,l))&&(de=ha(de,"onBeforeInput"),0<de.length&&(Se=new us("onBeforeInput","beforeinput",null,l,Se),we.push({event:Se,listeners:de}),Se.data=Be))}Ou(we,n)})}function oo(e,n,l){return{instance:e,listener:n,currentTarget:l}}function ha(e,n){for(var l=n+"Capture",h=[];e!==null;){var y=e,E=y.stateNode;y.tag===5&&E!==null&&(y=E,E=Wo(e,l),E!=null&&h.unshift(oo(e,E,y)),E=Wo(e,n),E!=null&&h.push(oo(e,E,y))),e=e.return}return h}function _s(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Yd(e,n,l,h,y){for(var E=n._reactName,O=[];l!==null&&l!==h;){var Q=l,te=Q.alternate,de=Q.stateNode;if(te!==null&&te===h)break;Q.tag===5&&de!==null&&(Q=de,y?(te=Wo(l,E),te!=null&&O.unshift(oo(l,te,Q))):y||(te=Wo(l,E),te!=null&&O.push(oo(l,te,Q)))),l=l.return}O.length!==0&&e.push({event:n,listeners:O})}var Ff=/\r\n?/g,qd=/\u0000|\uFFFD/g;function bu(e){return(typeof e=="string"?e:""+e).replace(Ff,`
`).replace(qd,"")}function ol(e,n,l){if(n=bu(n),bu(e)!==n&&l)throw Error(o(425))}function Ss(){}var Uu=null,ju=null;function Bu(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var hr=typeof setTimeout=="function"?setTimeout:void 0,Gu=typeof clearTimeout=="function"?clearTimeout:void 0,ll=typeof Promise=="function"?Promise:void 0,Xd=typeof queueMicrotask=="function"?queueMicrotask:typeof ll<"u"?function(e){return ll.resolve(null).then(e).catch(Kd)}:hr;function Kd(e){setTimeout(function(){throw e})}function fa(e,n){var l=n,h=0;do{var y=l.nextSibling;if(e.removeChild(l),y&&y.nodeType===8)if(l=y.data,l==="/$"){if(h===0){e.removeChild(y),Qn(n);return}h--}else l!=="$"&&l!=="$?"&&l!=="$!"||h++;l=y}while(l);Qn(n)}function Kr(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return e}function ws(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var l=e.data;if(l==="$"||l==="$!"||l==="$?"){if(n===0)return e;n--}else l==="/$"&&n++}e=e.previousSibling}return null}var bi=Math.random().toString(36).slice(2),Pr="__reactFiber$"+bi,al="__reactProps$"+bi,Qr="__reactContainer$"+bi,pa="__reactEvents$"+bi,Qd="__reactListeners$"+bi,Jd="__reactHandles$"+bi;function Ui(e){var n=e[Pr];if(n)return n;for(var l=e.parentNode;l;){if(n=l[Qr]||l[Pr]){if(l=n.alternate,n.child!==null||l!==null&&l.child!==null)for(e=ws(e);e!==null;){if(l=e[Pr])return l;e=ws(e)}return n}e=l,l=e.parentNode}return null}function ul(e){return e=e[Pr]||e[Qr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Kt(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(o(33))}function on(e){return e[al]||null}var ga=[],ks=-1;function mi(e){return{current:e}}function vt(e){0>ks||(e.current=ga[ks],ga[ks]=null,ks--)}function gt(e,n){ks++,ga[ks]=e.current,e.current=n}var Jr={},mn=mi(Jr),xn=mi(!1),ji=Jr;function xs(e,n){var l=e.type.contextTypes;if(!l)return Jr;var h=e.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===n)return h.__reactInternalMemoizedMaskedChildContext;var y={},E;for(E in l)y[E]=n[E];return h&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=y),y}function Cn(e){return e=e.childContextTypes,e!=null}function lo(){vt(xn),vt(mn)}function Vu(e,n,l){if(mn.current!==Jr)throw Error(o(168));gt(mn,n),gt(xn,l)}function ma(e,n,l){var h=e.stateNode;if(n=n.childContextTypes,typeof h.getChildContext!="function")return l;h=h.getChildContext();for(var y in h)if(!(y in n))throw Error(o(108,q(e)||"Unknown",y));return G({},l,h)}function Cs(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Jr,ji=mn.current,gt(mn,e),gt(xn,xn.current),!0}function Zd(e,n,l){var h=e.stateNode;if(!h)throw Error(o(169));l?(e=ma(e,n,ji),h.__reactInternalMemoizedMergedChildContext=e,vt(xn),vt(mn),gt(mn,e)):vt(xn),gt(xn,l)}var Zr=null,ao=!1,ya=!1;function cl(e){Zr===null?Zr=[e]:Zr.push(e)}function yi(e){ao=!0,cl(e)}function Bi(){if(!ya&&Zr!==null){ya=!0;var e=0,n=st;try{var l=Zr;for(st=1;e<l.length;e++){var h=l[e];do h=h(!0);while(h!==null)}Zr=null,ao=!1}catch(y){throw Zr!==null&&(Zr=Zr.slice(e+1)),Ed(os,Bi),y}finally{st=n,ya=!1}}return null}var bn=[],Es=0,Gi=null,Vi=0,Un=[],jn=0,Hi=null,fr=1,Nt="";function Ps(e,n){bn[Es++]=Vi,bn[Es++]=Gi,Gi=e,Vi=n}function $d(e,n,l){Un[jn++]=fr,Un[jn++]=Nt,Un[jn++]=Hi,Hi=e;var h=fr;e=Nt;var y=32-Qe(h)-1;h&=~(1<<y),l+=1;var E=32-Qe(n)+y;if(30<E){var O=y-y%5;E=(h&(1<<O)-1).toString(32),h>>=O,y-=O,fr=1<<32-Qe(n)+y|l<<y|h,Nt=E+e}else fr=1<<E|l<<y|h,Nt=e}function uo(e){e.return!==null&&(Ps(e,1),$d(e,1,0))}function ln(e){for(;e===Gi;)Gi=bn[--Es],bn[Es]=null,Vi=bn[--Es],bn[Es]=null;for(;e===Hi;)Hi=Un[--jn],Un[jn]=null,Nt=Un[--jn],Un[jn]=null,fr=Un[--jn],Un[jn]=null}var pr=null,Ee=null,ct=!1,gr=null;function Hu(e,n){var l=si(5,null,null,0);l.elementType="DELETED",l.stateNode=n,l.return=e,n=e.deletions,n===null?(e.deletions=[l],e.flags|=16):n.push(l)}function eh(e,n){switch(e.tag){case 5:var l=e.type;return n=n.nodeType!==1||l.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(e.stateNode=n,pr=e,Ee=Kr(n.firstChild),!0):!1;case 6:return n=e.pendingProps===""||n.nodeType!==3?null:n,n!==null?(e.stateNode=n,pr=e,Ee=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(l=Hi!==null?{id:fr,overflow:Nt}:null,e.memoizedState={dehydrated:n,treeContext:l,retryLane:1073741824},l=si(18,null,null,0),l.stateNode=n,l.return=e,e.child=l,pr=e,Ee=null,!0):!1;default:return!1}}function Ns(e){return(e.mode&1)!==0&&(e.flags&128)===0}function co(e){if(ct){var n=Ee;if(n){var l=n;if(!eh(e,n)){if(Ns(e))throw Error(o(418));n=Kr(l.nextSibling);var h=pr;n&&eh(e,n)?Hu(h,l):(e.flags=e.flags&-4097|2,ct=!1,pr=e)}}else{if(Ns(e))throw Error(o(418));e.flags=e.flags&-4097|2,ct=!1,pr=e}}}function va(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;pr=e}function dl(e){if(e!==pr)return!1;if(!ct)return va(e),ct=!0,!1;var n;if((n=e.tag!==3)&&!(n=e.tag!==5)&&(n=e.type,n=n!=="head"&&n!=="body"&&!Bu(e.type,e.memoizedProps)),n&&(n=Ee)){if(Ns(e))throw Wu(),Error(o(418));for(;n;)Hu(e,n),n=Kr(n.nextSibling)}if(va(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));e:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8){var l=e.data;if(l==="/$"){if(n===0){Ee=Kr(e.nextSibling);break e}n--}else l!=="$"&&l!=="$!"&&l!=="$?"||n++}e=e.nextSibling}Ee=null}}else Ee=pr?Kr(e.stateNode.nextSibling):null;return!0}function Wu(){for(var e=Ee;e;)e=Kr(e.nextSibling)}function Ts(){Ee=pr=null,ct=!1}function hl(e){gr===null?gr=[e]:gr.push(e)}var Yu=L.ReactCurrentBatchConfig;function Ot(e,n,l){if(e=l.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(o(309));var h=l.stateNode}if(!h)throw Error(o(147,e));var y=h,E=""+e;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===E?n.ref:(n=function(O){var Q=y.refs;O===null?delete Q[E]:Q[E]=O},n._stringRef=E,n)}if(typeof e!="string")throw Error(o(284));if(!l._owner)throw Error(o(290,e))}return e}function $n(e,n){throw e=Object.prototype.toString.call(n),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e))}function jr(e){var n=e._init;return n(e._payload)}function _a(e){function n(ae,re){if(e){var ue=ae.deletions;ue===null?(ae.deletions=[re],ae.flags|=16):ue.push(re)}}function l(ae,re){if(!e)return null;for(;re!==null;)n(ae,re),re=re.sibling;return null}function h(ae,re){for(ae=new Map;re!==null;)re.key!==null?ae.set(re.key,re):ae.set(re.index,re),re=re.sibling;return ae}function y(ae,re){return ae=Mo(ae,re),ae.index=0,ae.sibling=null,ae}function E(ae,re,ue){return ae.index=ue,e?(ue=ae.alternate,ue!==null?(ue=ue.index,ue<re?(ae.flags|=2,re):ue):(ae.flags|=2,re)):(ae.flags|=1048576,re)}function O(ae){return e&&ae.alternate===null&&(ae.flags|=2),ae}function Q(ae,re,ue,Ce){return re===null||re.tag!==6?(re=n0(ue,ae.mode,Ce),re.return=ae,re):(re=y(re,ue),re.return=ae,re)}function te(ae,re,ue,Ce){var Fe=ue.type;return Fe===Y?Se(ae,re,ue.props.children,Ce,ue.key):re!==null&&(re.elementType===Fe||typeof Fe=="object"&&Fe!==null&&Fe.$$typeof===pe&&jr(Fe)===re.type)?(Ce=y(re,ue.props),Ce.ref=Ot(ae,re,ue),Ce.return=ae,Ce):(Ce=wh(ue.type,ue.key,ue.props,null,ae.mode,Ce),Ce.ref=Ot(ae,re,ue),Ce.return=ae,Ce)}function de(ae,re,ue,Ce){return re===null||re.tag!==4||re.stateNode.containerInfo!==ue.containerInfo||re.stateNode.implementation!==ue.implementation?(re=r0(ue,ae.mode,Ce),re.return=ae,re):(re=y(re,ue.children||[]),re.return=ae,re)}function Se(ae,re,ue,Ce,Fe){return re===null||re.tag!==7?(re=xl(ue,ae.mode,Ce,Fe),re.return=ae,re):(re=y(re,ue),re.return=ae,re)}function we(ae,re,ue){if(typeof re=="string"&&re!==""||typeof re=="number")return re=n0(""+re,ae.mode,ue),re.return=ae,re;if(typeof re=="object"&&re!==null){switch(re.$$typeof){case M:return ue=wh(re.type,re.key,re.props,null,ae.mode,ue),ue.ref=Ot(ae,null,re),ue.return=ae,ue;case b:return re=r0(re,ae.mode,ue),re.return=ae,re;case pe:var Ce=re._init;return we(ae,Ce(re._payload),ue)}if(Dt(re)||W(re))return re=xl(re,ae.mode,ue,null),re.return=ae,re;$n(ae,re)}return null}function _e(ae,re,ue,Ce){var Fe=re!==null?re.key:null;if(typeof ue=="string"&&ue!==""||typeof ue=="number")return Fe!==null?null:Q(ae,re,""+ue,Ce);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case M:return ue.key===Fe?te(ae,re,ue,Ce):null;case b:return ue.key===Fe?de(ae,re,ue,Ce):null;case pe:return Fe=ue._init,_e(ae,re,Fe(ue._payload),Ce)}if(Dt(ue)||W(ue))return Fe!==null?null:Se(ae,re,ue,Ce,null);$n(ae,ue)}return null}function Re(ae,re,ue,Ce,Fe){if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number")return ae=ae.get(ue)||null,Q(re,ae,""+Ce,Fe);if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case M:return ae=ae.get(Ce.key===null?ue:Ce.key)||null,te(re,ae,Ce,Fe);case b:return ae=ae.get(Ce.key===null?ue:Ce.key)||null,de(re,ae,Ce,Fe);case pe:var je=Ce._init;return Re(ae,re,ue,je(Ce._payload),Fe)}if(Dt(Ce)||W(Ce))return ae=ae.get(ue)||null,Se(re,ae,Ce,Fe,null);$n(re,Ce)}return null}function Ie(ae,re,ue,Ce){for(var Fe=null,je=null,Be=re,Ve=re=0,Ln=null;Be!==null&&Ve<ue.length;Ve++){Be.index>Ve?(Ln=Be,Be=null):Ln=Be.sibling;var at=_e(ae,Be,ue[Ve],Ce);if(at===null){Be===null&&(Be=Ln);break}e&&Be&&at.alternate===null&&n(ae,Be),re=E(at,re,Ve),je===null?Fe=at:je.sibling=at,je=at,Be=Ln}if(Ve===ue.length)return l(ae,Be),ct&&Ps(ae,Ve),Fe;if(Be===null){for(;Ve<ue.length;Ve++)Be=we(ae,ue[Ve],Ce),Be!==null&&(re=E(Be,re,Ve),je===null?Fe=Be:je.sibling=Be,je=Be);return ct&&Ps(ae,Ve),Fe}for(Be=h(ae,Be);Ve<ue.length;Ve++)Ln=Re(Be,ae,Ve,ue[Ve],Ce),Ln!==null&&(e&&Ln.alternate!==null&&Be.delete(Ln.key===null?Ve:Ln.key),re=E(Ln,re,Ve),je===null?Fe=Ln:je.sibling=Ln,je=Ln);return e&&Be.forEach(function(Do){return n(ae,Do)}),ct&&Ps(ae,Ve),Fe}function Ae(ae,re,ue,Ce){var Fe=W(ue);if(typeof Fe!="function")throw Error(o(150));if(ue=Fe.call(ue),ue==null)throw Error(o(151));for(var je=Fe=null,Be=re,Ve=re=0,Ln=null,at=ue.next();Be!==null&&!at.done;Ve++,at=ue.next()){Be.index>Ve?(Ln=Be,Be=null):Ln=Be.sibling;var Do=_e(ae,Be,at.value,Ce);if(Do===null){Be===null&&(Be=Ln);break}e&&Be&&Do.alternate===null&&n(ae,Be),re=E(Do,re,Ve),je===null?Fe=Do:je.sibling=Do,je=Do,Be=Ln}if(at.done)return l(ae,Be),ct&&Ps(ae,Ve),Fe;if(Be===null){for(;!at.done;Ve++,at=ue.next())at=we(ae,at.value,Ce),at!==null&&(re=E(at,re,Ve),je===null?Fe=at:je.sibling=at,je=at);return ct&&Ps(ae,Ve),Fe}for(Be=h(ae,Be);!at.done;Ve++,at=ue.next())at=Re(Be,ae,Ve,at.value,Ce),at!==null&&(e&&at.alternate!==null&&Be.delete(at.key===null?Ve:at.key),re=E(at,re,Ve),je===null?Fe=at:je.sibling=at,je=at);return e&&Be.forEach(function(Xy){return n(ae,Xy)}),ct&&Ps(ae,Ve),Fe}function $t(ae,re,ue,Ce){if(typeof ue=="object"&&ue!==null&&ue.type===Y&&ue.key===null&&(ue=ue.props.children),typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case M:e:{for(var Fe=ue.key,je=re;je!==null;){if(je.key===Fe){if(Fe=ue.type,Fe===Y){if(je.tag===7){l(ae,je.sibling),re=y(je,ue.props.children),re.return=ae,ae=re;break e}}else if(je.elementType===Fe||typeof Fe=="object"&&Fe!==null&&Fe.$$typeof===pe&&jr(Fe)===je.type){l(ae,je.sibling),re=y(je,ue.props),re.ref=Ot(ae,je,ue),re.return=ae,ae=re;break e}l(ae,je);break}else n(ae,je);je=je.sibling}ue.type===Y?(re=xl(ue.props.children,ae.mode,Ce,ue.key),re.return=ae,ae=re):(Ce=wh(ue.type,ue.key,ue.props,null,ae.mode,Ce),Ce.ref=Ot(ae,re,ue),Ce.return=ae,ae=Ce)}return O(ae);case b:e:{for(je=ue.key;re!==null;){if(re.key===je)if(re.tag===4&&re.stateNode.containerInfo===ue.containerInfo&&re.stateNode.implementation===ue.implementation){l(ae,re.sibling),re=y(re,ue.children||[]),re.return=ae,ae=re;break e}else{l(ae,re);break}else n(ae,re);re=re.sibling}re=r0(ue,ae.mode,Ce),re.return=ae,ae=re}return O(ae);case pe:return je=ue._init,$t(ae,re,je(ue._payload),Ce)}if(Dt(ue))return Ie(ae,re,ue,Ce);if(W(ue))return Ae(ae,re,ue,Ce);$n(ae,ue)}return typeof ue=="string"&&ue!==""||typeof ue=="number"?(ue=""+ue,re!==null&&re.tag===6?(l(ae,re.sibling),re=y(re,ue),re.return=ae,ae=re):(l(ae,re),re=n0(ue,ae.mode,Ce),re.return=ae,ae=re),O(ae)):l(ae,re)}return $t}var Rs=_a(!0),Nr=_a(!1),fl=mi(null),mr=null,ho=null,Sa=null;function wa(){Sa=ho=mr=null}function ka(e){var n=fl.current;vt(fl),e._currentValue=n}function xa(e,n,l){for(;e!==null;){var h=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,h!==null&&(h.childLanes|=n)):h!==null&&(h.childLanes&n)!==n&&(h.childLanes|=n),e===l)break;e=e.return}}function vi(e,n){mr=e,Sa=ho=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&n)!==0&&(R=!0),e.firstContext=null)}function Bn(e){var n=e._currentValue;if(Sa!==e)if(e={context:e,memoizedValue:n,next:null},ho===null){if(mr===null)throw Error(o(308));ho=e,mr.dependencies={lanes:0,firstContext:e}}else ho=ho.next=e;return n}var $r=null;function fo(e){$r===null?$r=[e]:$r.push(e)}function pl(e,n,l,h){var y=n.interleaved;return y===null?(l.next=l,fo(n)):(l.next=y.next,y.next=l),n.interleaved=l,yr(e,h)}function yr(e,n){e.lanes|=n;var l=e.alternate;for(l!==null&&(l.lanes|=n),l=e,e=e.return;e!==null;)e.childLanes|=n,l=e.alternate,l!==null&&(l.childLanes|=n),l=e,e=e.return;return l.tag===3?l.stateNode:null}var ei=!1;function gl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ca(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ti(e,n){return{eventTime:e,lane:n,tag:0,payload:null,callback:null,next:null}}function ni(e,n,l){var h=e.updateQueue;if(h===null)return null;if(h=h.shared,(lt&2)!==0){var y=h.pending;return y===null?n.next=n:(n.next=y.next,y.next=n),h.pending=n,yr(e,l)}return y=h.interleaved,y===null?(n.next=n,fo(h)):(n.next=y.next,y.next=n),h.interleaved=n,yr(e,l)}function Ea(e,n,l){if(n=n.updateQueue,n!==null&&(n=n.shared,(l&4194240)!==0)){var h=n.lanes;h&=e.pendingLanes,l|=h,n.lanes=l,vu(e,l)}}function ml(e,n){var l=e.updateQueue,h=e.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var y=null,E=null;if(l=l.firstBaseUpdate,l!==null){do{var O={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};E===null?y=E=O:E=E.next=O,l=l.next}while(l!==null);E===null?y=E=n:E=E.next=n}else y=E=n;l={baseState:h.baseState,firstBaseUpdate:y,lastBaseUpdate:E,shared:h.shared,effects:h.effects},e.updateQueue=l;return}e=l.lastBaseUpdate,e===null?l.firstBaseUpdate=n:e.next=n,l.lastBaseUpdate=n}function po(e,n,l,h){var y=e.updateQueue;ei=!1;var E=y.firstBaseUpdate,O=y.lastBaseUpdate,Q=y.shared.pending;if(Q!==null){y.shared.pending=null;var te=Q,de=te.next;te.next=null,O===null?E=de:O.next=de,O=te;var Se=e.alternate;Se!==null&&(Se=Se.updateQueue,Q=Se.lastBaseUpdate,Q!==O&&(Q===null?Se.firstBaseUpdate=de:Q.next=de,Se.lastBaseUpdate=te))}if(E!==null){var we=y.baseState;O=0,Se=de=te=null,Q=E;do{var _e=Q.lane,Re=Q.eventTime;if((h&_e)===_e){Se!==null&&(Se=Se.next={eventTime:Re,lane:0,tag:Q.tag,payload:Q.payload,callback:Q.callback,next:null});e:{var Ie=e,Ae=Q;switch(_e=n,Re=l,Ae.tag){case 1:if(Ie=Ae.payload,typeof Ie=="function"){we=Ie.call(Re,we,_e);break e}we=Ie;break e;case 3:Ie.flags=Ie.flags&-65537|128;case 0:if(Ie=Ae.payload,_e=typeof Ie=="function"?Ie.call(Re,we,_e):Ie,_e==null)break e;we=G({},we,_e);break e;case 2:ei=!0}}Q.callback!==null&&Q.lane!==0&&(e.flags|=64,_e=y.effects,_e===null?y.effects=[Q]:_e.push(Q))}else Re={eventTime:Re,lane:_e,tag:Q.tag,payload:Q.payload,callback:Q.callback,next:null},Se===null?(de=Se=Re,te=we):Se=Se.next=Re,O|=_e;if(Q=Q.next,Q===null){if(Q=y.shared.pending,Q===null)break;_e=Q,Q=_e.next,_e.next=null,y.lastBaseUpdate=_e,y.shared.pending=null}}while(!0);if(Se===null&&(te=we),y.baseState=te,y.firstBaseUpdate=de,y.lastBaseUpdate=Se,n=y.shared.interleaved,n!==null){y=n;do O|=y.lane,y=y.next;while(y!==n)}else E===null&&(y.shared.lanes=0);_l|=O,e.lanes=O,e.memoizedState=we}}function It(e,n,l){if(e=n.effects,n.effects=null,e!==null)for(n=0;n<e.length;n++){var h=e[n],y=h.callback;if(y!==null){if(h.callback=null,h=l,typeof y!="function")throw Error(o(191,y));y.call(h)}}}var Ye={},mt=mi(Ye),Tt=mi(Ye),zt=mi(Ye);function Qt(e){if(e===Ye)throw Error(o(174));return e}function Wi(e,n){switch(gt(zt,n),gt(Tt,e),gt(mt,Ye),e=n.nodeType,e){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:kr(null,"");break;default:e=e===8?n.parentNode:n,n=e.namespaceURI||null,e=e.tagName,n=kr(n,e)}vt(mt),gt(mt,n)}function Rt(){vt(mt),vt(Tt),vt(zt)}function go(e){Qt(zt.current);var n=Qt(mt.current),l=kr(n,e.type);n!==l&&(gt(Tt,e),gt(mt,l))}function _i(e){Tt.current===e&&(vt(mt),vt(Tt))}var _t=mi(0);function mo(e){for(var n=e;n!==null;){if(n.tag===13){var l=n.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Ls=[];function En(){for(var e=0;e<Ls.length;e++)Ls[e]._workInProgressVersionPrimary=null;Ls.length=0}var yo=L.ReactCurrentDispatcher,yl=L.ReactCurrentBatchConfig,Gn=0,pt=null,At=null,Vt=null,Br=!1,Yi=!1,Tr=0,Pa=0;function Ht(){throw Error(o(321))}function vl(e,n){if(n===null)return!1;for(var l=0;l<n.length&&l<e.length;l++)if(!Zn(e[l],n[l]))return!1;return!0}function vo(e,n,l,h,y,E){if(Gn=E,pt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,yo.current=e===null||e.memoizedState===null?zf:Ki,e=l(h,y),Yi){E=0;do{if(Yi=!1,Tr=0,25<=E)throw Error(o(301));E+=1,Vt=At=null,n.updateQueue=null,yo.current=Ma,e=l(h,y)}while(Yi)}if(yo.current=ko,n=At!==null&&At.next!==null,Gn=0,Vt=At=pt=null,Br=!1,n)throw Error(o(300));return e}function _o(){var e=Tr!==0;return Tr=0,e}function xt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vt===null?pt.memoizedState=Vt=e:Vt=Vt.next=e,Vt}function Jt(){if(At===null){var e=pt.alternate;e=e!==null?e.memoizedState:null}else e=At.next;var n=Vt===null?pt.memoizedState:Vt.next;if(n!==null)Vt=n,At=e;else{if(e===null)throw Error(o(310));At=e,e={memoizedState:At.memoizedState,baseState:At.baseState,baseQueue:At.baseQueue,queue:At.queue,next:null},Vt===null?pt.memoizedState=Vt=e:Vt=Vt.next=e}return Vt}function Pn(e,n){return typeof n=="function"?n(e):n}function Nn(e){var n=Jt(),l=n.queue;if(l===null)throw Error(o(311));l.lastRenderedReducer=e;var h=At,y=h.baseQueue,E=l.pending;if(E!==null){if(y!==null){var O=y.next;y.next=E.next,E.next=O}h.baseQueue=y=E,l.pending=null}if(y!==null){E=y.next,h=h.baseState;var Q=O=null,te=null,de=E;do{var Se=de.lane;if((Gn&Se)===Se)te!==null&&(te=te.next={lane:0,action:de.action,hasEagerState:de.hasEagerState,eagerState:de.eagerState,next:null}),h=de.hasEagerState?de.eagerState:e(h,de.action);else{var we={lane:Se,action:de.action,hasEagerState:de.hasEagerState,eagerState:de.eagerState,next:null};te===null?(Q=te=we,O=h):te=te.next=we,pt.lanes|=Se,_l|=Se}de=de.next}while(de!==null&&de!==E);te===null?O=h:te.next=Q,Zn(h,n.memoizedState)||(R=!0),n.memoizedState=h,n.baseState=O,n.baseQueue=te,l.lastRenderedState=h}if(e=l.interleaved,e!==null){y=e;do E=y.lane,pt.lanes|=E,_l|=E,y=y.next;while(y!==e)}else y===null&&(l.lanes=0);return[n.memoizedState,l.dispatch]}function Na(e){var n=Jt(),l=n.queue;if(l===null)throw Error(o(311));l.lastRenderedReducer=e;var h=l.dispatch,y=l.pending,E=n.memoizedState;if(y!==null){l.pending=null;var O=y=y.next;do E=e(E,O.action),O=O.next;while(O!==y);Zn(E,n.memoizedState)||(R=!0),n.memoizedState=E,n.baseQueue===null&&(n.baseState=E),l.lastRenderedState=E}return[E,h]}function Ta(){}function Ra(e,n){var l=pt,h=Jt(),y=n(),E=!Zn(h.memoizedState,y);if(E&&(h.memoizedState=y,R=!0),h=h.queue,Qu(qu.bind(null,l,h,e),[e]),h.getSnapshot!==n||E||Vt!==null&&Vt.memoizedState.tag&1){if(l.flags|=2048,So(9,Si.bind(null,l,h,y,n),void 0,null),Rn===null)throw Error(o(349));(Gn&30)!==0||th(l,n,y)}return y}function th(e,n,l){e.flags|=16384,e={getSnapshot:n,value:l},n=pt.updateQueue,n===null?(n={lastEffect:null,stores:null},pt.updateQueue=n,n.stores=[e]):(l=n.stores,l===null?n.stores=[e]:l.push(e))}function Si(e,n,l,h){n.value=l,n.getSnapshot=h,Xu(n)&&La(e)}function qu(e,n,l){return l(function(){Xu(n)&&La(e)})}function Xu(e){var n=e.getSnapshot;e=e.value;try{var l=n();return!Zn(e,l)}catch{return!0}}function La(e){var n=yr(e,1);n!==null&&Ci(n,e,1,-1)}function qi(e){var n=xt();return typeof e=="function"&&(e=e()),n.memoizedState=n.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Pn,lastRenderedState:e},n.queue=e,e=e.dispatch=lh.bind(null,pt,e),[n.memoizedState,e]}function So(e,n,l,h){return e={tag:e,create:n,destroy:l,deps:h,next:null},n=pt.updateQueue,n===null?(n={lastEffect:null,stores:null},pt.updateQueue=n,n.lastEffect=e.next=e):(l=n.lastEffect,l===null?n.lastEffect=e.next=e:(h=l.next,l.next=e,e.next=h,n.lastEffect=e)),e}function Ku(){return Jt().memoizedState}function wo(e,n,l,h){var y=xt();pt.flags|=e,y.memoizedState=So(1|n,l,void 0,h===void 0?null:h)}function Ms(e,n,l,h){var y=Jt();h=h===void 0?null:h;var E=void 0;if(At!==null){var O=At.memoizedState;if(E=O.destroy,h!==null&&vl(h,O.deps)){y.memoizedState=So(n,l,E,h);return}}pt.flags|=e,y.memoizedState=So(1|n,l,E,h)}function nh(e,n){return wo(8390656,8,e,n)}function Qu(e,n){return Ms(2048,8,e,n)}function Ju(e,n){return Ms(4,2,e,n)}function Zu(e,n){return Ms(4,4,e,n)}function Xi(e,n){if(typeof n=="function")return e=e(),n(e),function(){n(null)};if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function rh(e,n,l){return l=l!=null?l.concat([e]):null,Ms(4,4,Xi.bind(null,n,e),l)}function wi(){}function $u(e,n){var l=Jt();n=n===void 0?null:n;var h=l.memoizedState;return h!==null&&n!==null&&vl(n,h[1])?h[0]:(l.memoizedState=[e,n],e)}function Ct(e,n){var l=Jt();n=n===void 0?null:n;var h=l.memoizedState;return h!==null&&n!==null&&vl(n,h[1])?h[0]:(e=e(),l.memoizedState=[e,n],e)}function ih(e,n,l){return(Gn&21)===0?(e.baseState&&(e.baseState=!1,R=!0),e.memoizedState=l):(Zn(l,n)||(l=yu(),pt.lanes|=l,_l|=l,e.baseState=!0),n)}function sh(e,n){var l=st;st=l!==0&&4>l?l:4,e(!0);var h=yl.transition;yl.transition={};try{e(!1),n()}finally{st=l,yl.transition=h}}function oh(){return Jt().memoizedState}function Of(e,n,l){var h=Ro(e);if(l={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null},ec(e))ah(n,l);else if(l=pl(e,n,l,h),l!==null){var y=_r();Ci(l,e,h,y),vr(l,n,h)}}function lh(e,n,l){var h=Ro(e),y={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null};if(ec(e))ah(n,y);else{var E=e.alternate;if(e.lanes===0&&(E===null||E.lanes===0)&&(E=n.lastRenderedReducer,E!==null))try{var O=n.lastRenderedState,Q=E(O,l);if(y.hasEagerState=!0,y.eagerState=Q,Zn(Q,O)){var te=n.interleaved;te===null?(y.next=y,fo(n)):(y.next=te.next,te.next=y),n.interleaved=y;return}}catch{}finally{}l=pl(e,n,y,h),l!==null&&(y=_r(),Ci(l,e,h,y),vr(l,n,h))}}function ec(e){var n=e.alternate;return e===pt||n!==null&&n===pt}function ah(e,n){Yi=Br=!0;var l=e.pending;l===null?n.next=n:(n.next=l.next,l.next=n),e.pending=n}function vr(e,n,l){if((l&4194240)!==0){var h=n.lanes;h&=e.pendingLanes,l|=h,n.lanes=l,vu(e,l)}}var ko={readContext:Bn,useCallback:Ht,useContext:Ht,useEffect:Ht,useImperativeHandle:Ht,useInsertionEffect:Ht,useLayoutEffect:Ht,useMemo:Ht,useReducer:Ht,useRef:Ht,useState:Ht,useDebugValue:Ht,useDeferredValue:Ht,useTransition:Ht,useMutableSource:Ht,useSyncExternalStore:Ht,useId:Ht,unstable_isNewReconciler:!1},zf={readContext:Bn,useCallback:function(e,n){return xt().memoizedState=[e,n===void 0?null:n],e},useContext:Bn,useEffect:nh,useImperativeHandle:function(e,n,l){return l=l!=null?l.concat([e]):null,wo(4194308,4,Xi.bind(null,n,e),l)},useLayoutEffect:function(e,n){return wo(4194308,4,e,n)},useInsertionEffect:function(e,n){return wo(4,2,e,n)},useMemo:function(e,n){var l=xt();return n=n===void 0?null:n,e=e(),l.memoizedState=[e,n],e},useReducer:function(e,n,l){var h=xt();return n=l!==void 0?l(n):n,h.memoizedState=h.baseState=n,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},h.queue=e,e=e.dispatch=Of.bind(null,pt,e),[h.memoizedState,e]},useRef:function(e){var n=xt();return e={current:e},n.memoizedState=e},useState:qi,useDebugValue:wi,useDeferredValue:function(e){return xt().memoizedState=e},useTransition:function(){var e=qi(!1),n=e[0];return e=sh.bind(null,e[1]),xt().memoizedState=e,[n,e]},useMutableSource:function(){},useSyncExternalStore:function(e,n,l){var h=pt,y=xt();if(ct){if(l===void 0)throw Error(o(407));l=l()}else{if(l=n(),Rn===null)throw Error(o(349));(Gn&30)!==0||th(h,n,l)}y.memoizedState=l;var E={value:l,getSnapshot:n};return y.queue=E,nh(qu.bind(null,h,E,e),[e]),h.flags|=2048,So(9,Si.bind(null,h,E,l,n),void 0,null),l},useId:function(){var e=xt(),n=Rn.identifierPrefix;if(ct){var l=Nt,h=fr;l=(h&~(1<<32-Qe(h)-1)).toString(32)+l,n=":"+n+"R"+l,l=Tr++,0<l&&(n+="H"+l.toString(32)),n+=":"}else l=Pa++,n=":"+n+"r"+l.toString(32)+":";return e.memoizedState=n},unstable_isNewReconciler:!1},Ki={readContext:Bn,useCallback:$u,useContext:Bn,useEffect:Qu,useImperativeHandle:rh,useInsertionEffect:Ju,useLayoutEffect:Zu,useMemo:Ct,useReducer:Nn,useRef:Ku,useState:function(){return Nn(Pn)},useDebugValue:wi,useDeferredValue:function(e){var n=Jt();return ih(n,At.memoizedState,e)},useTransition:function(){var e=Nn(Pn)[0],n=Jt().memoizedState;return[e,n]},useMutableSource:Ta,useSyncExternalStore:Ra,useId:oh,unstable_isNewReconciler:!1},Ma={readContext:Bn,useCallback:$u,useContext:Bn,useEffect:Qu,useImperativeHandle:rh,useInsertionEffect:Ju,useLayoutEffect:Zu,useMemo:Ct,useReducer:Na,useRef:Ku,useState:function(){return Na(Pn)},useDebugValue:wi,useDeferredValue:function(e){var n=Jt();return At===null?n.memoizedState=e:ih(n,At.memoizedState,e)},useTransition:function(){var e=Na(Pn)[0],n=Jt().memoizedState;return[e,n]},useMutableSource:Ta,useSyncExternalStore:Ra,useId:oh,unstable_isNewReconciler:!1};function yn(e,n){if(e&&e.defaultProps){n=G({},n),e=e.defaultProps;for(var l in e)n[l]===void 0&&(n[l]=e[l]);return n}return n}function xo(e,n,l,h){n=e.memoizedState,l=l(h,n),l=l==null?n:G({},n,l),e.memoizedState=l,e.lanes===0&&(e.updateQueue.baseState=l)}var Co={isMounted:function(e){return(e=e._reactInternals)?ss(e)===e:!1},enqueueSetState:function(e,n,l){e=e._reactInternals;var h=_r(),y=Ro(e),E=ti(h,y);E.payload=n,l!=null&&(E.callback=l),n=ni(e,E,y),n!==null&&(Ci(n,e,y,h),Ea(n,e,y))},enqueueReplaceState:function(e,n,l){e=e._reactInternals;var h=_r(),y=Ro(e),E=ti(h,y);E.tag=1,E.payload=n,l!=null&&(E.callback=l),n=ni(e,E,y),n!==null&&(Ci(n,e,y,h),Ea(n,e,y))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var l=_r(),h=Ro(e),y=ti(l,h);y.tag=2,n!=null&&(y.callback=n),n=ni(e,y,h),n!==null&&(Ci(n,e,h,l),Ea(n,e,h))}};function Da(e,n,l,h,y,E,O){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(h,E,O):n.prototype&&n.prototype.isPureReactComponent?!ps(l,h)||!ps(y,E):!0}function uh(e,n,l){var h=!1,y=Jr,E=n.contextType;return typeof E=="object"&&E!==null?E=Bn(E):(y=Cn(n)?ji:mn.current,h=n.contextTypes,E=(h=h!=null)?xs(e,y):Jr),n=new n(l,E),e.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=Co,e.stateNode=n,n._reactInternals=e,h&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=y,e.__reactInternalMemoizedMaskedChildContext=E),n}function tc(e,n,l,h){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(l,h),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(l,h),n.state!==e&&Co.enqueueReplaceState(n,n.state,null)}function Ia(e,n,l,h){var y=e.stateNode;y.props=l,y.state=e.memoizedState,y.refs={},gl(e);var E=n.contextType;typeof E=="object"&&E!==null?y.context=Bn(E):(E=Cn(n)?ji:mn.current,y.context=xs(e,E)),y.state=e.memoizedState,E=n.getDerivedStateFromProps,typeof E=="function"&&(xo(e,n,E,l),y.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(n=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),n!==y.state&&Co.enqueueReplaceState(y,y.state,null),po(e,l,y,h),y.state=e.memoizedState),typeof y.componentDidMount=="function"&&(e.flags|=4194308)}function Ds(e,n){try{var l="",h=n;do l+=me(h),h=h.return;while(h);var y=l}catch(E){y=`
Error generating stack: `+E.message+`
`+E.stack}return{value:e,source:n,stack:y,digest:null}}function Aa(e,n,l){return{value:e,source:null,stack:l??null,digest:n??null}}function Eo(e,n){try{console.error(n.value)}catch(l){setTimeout(function(){throw l})}}var bf=typeof WeakMap=="function"?WeakMap:Map;function ch(e,n,l){l=ti(-1,l),l.tag=3,l.payload={element:null};var h=n.value;return l.callback=function(){gh||(gh=!0,Xf=h),Eo(e,n)},l}function r(e,n,l){l=ti(-1,l),l.tag=3;var h=e.type.getDerivedStateFromError;if(typeof h=="function"){var y=n.value;l.payload=function(){return h(y)},l.callback=function(){Eo(e,n)}}var E=e.stateNode;return E!==null&&typeof E.componentDidCatch=="function"&&(l.callback=function(){Eo(e,n),typeof h!="function"&&(No===null?No=new Set([this]):No.add(this));var O=n.stack;this.componentDidCatch(n.value,{componentStack:O!==null?O:""})}),l}function s(e,n,l){var h=e.pingCache;if(h===null){h=e.pingCache=new bf;var y=new Set;h.set(n,y)}else y=h.get(n),y===void 0&&(y=new Set,h.set(n,y));y.has(l)||(y.add(l),e=zy.bind(null,e,n,l),n.then(e,e))}function c(e){do{var n;if((n=e.tag===13)&&(n=e.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return e;e=e.return}while(e!==null);return null}function g(e,n,l,h,y){return(e.mode&1)===0?(e===n?e.flags|=65536:(e.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(n=ti(-1,1),n.tag=2,ni(l,n,1))),l.lanes|=1),e):(e.flags|=65536,e.lanes=y,e)}var w=L.ReactCurrentOwner,R=!1;function H(e,n,l,h){n.child=e===null?Nr(n,null,l,h):Rs(n,e.child,l,h)}function ie(e,n,l,h,y){l=l.render;var E=n.ref;return vi(n,y),h=vo(e,n,l,h,E,y),l=_o(),e!==null&&!R?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~y,Tn(e,n,y)):(ct&&l&&uo(n),n.flags|=1,H(e,n,h,y),n.child)}function fe(e,n,l,h,y){if(e===null){var E=l.type;return typeof E=="function"&&!t0(E)&&E.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(n.tag=15,n.type=E,ke(e,n,E,h,y)):(e=wh(l.type,null,h,n,n.mode,y),e.ref=n.ref,e.return=n,n.child=e)}if(E=e.child,(e.lanes&y)===0){var O=E.memoizedProps;if(l=l.compare,l=l!==null?l:ps,l(O,h)&&e.ref===n.ref)return Tn(e,n,y)}return n.flags|=1,e=Mo(E,h),e.ref=n.ref,e.return=n,n.child=e}function ke(e,n,l,h,y){if(e!==null){var E=e.memoizedProps;if(ps(E,h)&&e.ref===n.ref)if(R=!1,n.pendingProps=h=E,(e.lanes&y)!==0)(e.flags&131072)!==0&&(R=!0);else return n.lanes=e.lanes,Tn(e,n,y)}return Ne(e,n,l,h,y)}function Le(e,n,l){var h=n.pendingProps,y=h.children,E=e!==null?e.memoizedState:null;if(h.mode==="hidden")if((n.mode&1)===0)n.memoizedState={baseLanes:0,cachePool:null,transitions:null},gt(Oa,Gr),Gr|=l;else{if((l&1073741824)===0)return e=E!==null?E.baseLanes|l:l,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:e,cachePool:null,transitions:null},n.updateQueue=null,gt(Oa,Gr),Gr|=e,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=E!==null?E.baseLanes:l,gt(Oa,Gr),Gr|=h}else E!==null?(h=E.baseLanes|l,n.memoizedState=null):h=l,gt(Oa,Gr),Gr|=h;return H(e,n,y,l),n.child}function He(e,n){var l=n.ref;(e===null&&l!==null||e!==null&&e.ref!==l)&&(n.flags|=512,n.flags|=2097152)}function Ne(e,n,l,h,y){var E=Cn(l)?ji:mn.current;return E=xs(n,E),vi(n,y),l=vo(e,n,l,h,E,y),h=_o(),e!==null&&!R?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~y,Tn(e,n,y)):(ct&&h&&uo(n),n.flags|=1,H(e,n,l,y),n.child)}function St(e,n,l,h,y){if(Cn(l)){var E=!0;Cs(n)}else E=!1;if(vi(n,y),n.stateNode===null)$e(e,n),uh(n,l,h),Ia(n,l,h,y),h=!0;else if(e===null){var O=n.stateNode,Q=n.memoizedProps;O.props=Q;var te=O.context,de=l.contextType;typeof de=="object"&&de!==null?de=Bn(de):(de=Cn(l)?ji:mn.current,de=xs(n,de));var Se=l.getDerivedStateFromProps,we=typeof Se=="function"||typeof O.getSnapshotBeforeUpdate=="function";we||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(Q!==h||te!==de)&&tc(n,O,h,de),ei=!1;var _e=n.memoizedState;O.state=_e,po(n,h,O,y),te=n.memoizedState,Q!==h||_e!==te||xn.current||ei?(typeof Se=="function"&&(xo(n,l,Se,h),te=n.memoizedState),(Q=ei||Da(n,l,Q,h,_e,te,de))?(we||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(n.flags|=4194308)):(typeof O.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=h,n.memoizedState=te),O.props=h,O.state=te,O.context=de,h=Q):(typeof O.componentDidMount=="function"&&(n.flags|=4194308),h=!1)}else{O=n.stateNode,Ca(e,n),Q=n.memoizedProps,de=n.type===n.elementType?Q:yn(n.type,Q),O.props=de,we=n.pendingProps,_e=O.context,te=l.contextType,typeof te=="object"&&te!==null?te=Bn(te):(te=Cn(l)?ji:mn.current,te=xs(n,te));var Re=l.getDerivedStateFromProps;(Se=typeof Re=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(Q!==we||_e!==te)&&tc(n,O,h,te),ei=!1,_e=n.memoizedState,O.state=_e,po(n,h,O,y);var Ie=n.memoizedState;Q!==we||_e!==Ie||xn.current||ei?(typeof Re=="function"&&(xo(n,l,Re,h),Ie=n.memoizedState),(de=ei||Da(n,l,de,h,_e,Ie,te)||!1)?(Se||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(h,Ie,te),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(h,Ie,te)),typeof O.componentDidUpdate=="function"&&(n.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof O.componentDidUpdate!="function"||Q===e.memoizedProps&&_e===e.memoizedState||(n.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||Q===e.memoizedProps&&_e===e.memoizedState||(n.flags|=1024),n.memoizedProps=h,n.memoizedState=Ie),O.props=h,O.state=Ie,O.context=te,h=de):(typeof O.componentDidUpdate!="function"||Q===e.memoizedProps&&_e===e.memoizedState||(n.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||Q===e.memoizedProps&&_e===e.memoizedState||(n.flags|=1024),h=!1)}return dt(e,n,l,h,E,y)}function dt(e,n,l,h,y,E){He(e,n);var O=(n.flags&128)!==0;if(!h&&!O)return y&&Zd(n,l,!1),Tn(e,n,E);h=n.stateNode,w.current=n;var Q=O&&typeof l.getDerivedStateFromError!="function"?null:h.render();return n.flags|=1,e!==null&&O?(n.child=Rs(n,e.child,null,E),n.child=Rs(n,null,Q,E)):H(e,n,Q,E),n.memoizedState=h.state,y&&Zd(n,l,!0),n.child}function Vn(e){var n=e.stateNode;n.pendingContext?Vu(e,n.pendingContext,n.pendingContext!==n.context):n.context&&Vu(e,n.context,!1),Wi(e,n.containerInfo)}function ri(e,n,l,h,y){return Ts(),hl(y),n.flags|=256,H(e,n,l,h),n.child}var ce={dehydrated:null,treeContext:null,retryLane:0};function oe(e){return{baseLanes:e,cachePool:null,transitions:null}}function ge(e,n,l){var h=n.pendingProps,y=_t.current,E=!1,O=(n.flags&128)!==0,Q;if((Q=O)||(Q=e!==null&&e.memoizedState===null?!1:(y&2)!==0),Q?(E=!0,n.flags&=-129):(e===null||e.memoizedState!==null)&&(y|=1),gt(_t,y&1),e===null)return co(n),e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((n.mode&1)===0?n.lanes=1:e.data==="$!"?n.lanes=8:n.lanes=1073741824,null):(O=h.children,e=h.fallback,E?(h=n.mode,E=n.child,O={mode:"hidden",children:O},(h&1)===0&&E!==null?(E.childLanes=0,E.pendingProps=O):E=kh(O,h,0,null),e=xl(e,h,l,null),E.return=n,e.return=n,E.sibling=e,n.child=E,n.child.memoizedState=oe(l),n.memoizedState=ce,e):Te(n,O));if(y=e.memoizedState,y!==null&&(Q=y.dehydrated,Q!==null))return Xe(e,n,O,h,Q,y,l);if(E){E=h.fallback,O=n.mode,y=e.child,Q=y.sibling;var te={mode:"hidden",children:h.children};return(O&1)===0&&n.child!==y?(h=n.child,h.childLanes=0,h.pendingProps=te,n.deletions=null):(h=Mo(y,te),h.subtreeFlags=y.subtreeFlags&14680064),Q!==null?E=Mo(Q,E):(E=xl(E,O,l,null),E.flags|=2),E.return=n,h.return=n,h.sibling=E,n.child=h,h=E,E=n.child,O=e.child.memoizedState,O=O===null?oe(l):{baseLanes:O.baseLanes|l,cachePool:null,transitions:O.transitions},E.memoizedState=O,E.childLanes=e.childLanes&~l,n.memoizedState=ce,h}return E=e.child,e=E.sibling,h=Mo(E,{mode:"visible",children:h.children}),(n.mode&1)===0&&(h.lanes=l),h.return=n,h.sibling=null,e!==null&&(l=n.deletions,l===null?(n.deletions=[e],n.flags|=16):l.push(e)),n.child=h,n.memoizedState=null,h}function Te(e,n){return n=kh({mode:"visible",children:n},e.mode,0,null),n.return=e,e.child=n}function ze(e,n,l,h){return h!==null&&hl(h),Rs(n,e.child,null,l),e=Te(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function Xe(e,n,l,h,y,E,O){if(l)return n.flags&256?(n.flags&=-257,h=Aa(Error(o(422))),ze(e,n,O,h)):n.memoizedState!==null?(n.child=e.child,n.flags|=128,null):(E=h.fallback,y=n.mode,h=kh({mode:"visible",children:h.children},y,0,null),E=xl(E,y,O,null),E.flags|=2,h.return=n,E.return=n,h.sibling=E,n.child=h,(n.mode&1)!==0&&Rs(n,e.child,null,O),n.child.memoizedState=oe(O),n.memoizedState=ce,E);if((n.mode&1)===0)return ze(e,n,O,null);if(y.data==="$!"){if(h=y.nextSibling&&y.nextSibling.dataset,h)var Q=h.dgst;return h=Q,E=Error(o(419)),h=Aa(E,h,void 0),ze(e,n,O,h)}if(Q=(O&e.childLanes)!==0,R||Q){if(h=Rn,h!==null){switch(O&-O){case 4:y=2;break;case 16:y=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:y=32;break;case 536870912:y=268435456;break;default:y=0}y=(y&(h.suspendedLanes|O))!==0?0:y,y!==0&&y!==E.retryLane&&(E.retryLane=y,yr(e,y),Ci(h,e,y,-1))}return e0(),h=Aa(Error(o(421))),ze(e,n,O,h)}return y.data==="$?"?(n.flags|=128,n.child=e.child,n=by.bind(null,e),y._reactRetry=n,null):(e=E.treeContext,Ee=Kr(y.nextSibling),pr=n,ct=!0,gr=null,e!==null&&(Un[jn++]=fr,Un[jn++]=Nt,Un[jn++]=Hi,fr=e.id,Nt=e.overflow,Hi=n),n=Te(n,h.children),n.flags|=4096,n)}function We(e,n,l){e.lanes|=n;var h=e.alternate;h!==null&&(h.lanes|=n),xa(e.return,n,l)}function tt(e,n,l,h,y){var E=e.memoizedState;E===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:y}:(E.isBackwards=n,E.rendering=null,E.renderingStartTime=0,E.last=h,E.tail=l,E.tailMode=y)}function Zt(e,n,l){var h=n.pendingProps,y=h.revealOrder,E=h.tail;if(H(e,n,h.children,l),h=_t.current,(h&2)!==0)h=h&1|2,n.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&We(e,l,n);else if(e.tag===19)We(e,l,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}h&=1}if(gt(_t,h),(n.mode&1)===0)n.memoizedState=null;else switch(y){case"forwards":for(l=n.child,y=null;l!==null;)e=l.alternate,e!==null&&mo(e)===null&&(y=l),l=l.sibling;l=y,l===null?(y=n.child,n.child=null):(y=l.sibling,l.sibling=null),tt(n,!1,y,l,E);break;case"backwards":for(l=null,y=n.child,n.child=null;y!==null;){if(e=y.alternate,e!==null&&mo(e)===null){n.child=y;break}e=y.sibling,y.sibling=l,l=y,y=e}tt(n,!0,l,null,E);break;case"together":tt(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function $e(e,n){(n.mode&1)===0&&e!==null&&(e.alternate=null,n.alternate=null,n.flags|=2)}function Tn(e,n,l){if(e!==null&&(n.dependencies=e.dependencies),_l|=n.lanes,(l&n.childLanes)===0)return null;if(e!==null&&n.child!==e.child)throw Error(o(153));if(n.child!==null){for(e=n.child,l=Mo(e,e.pendingProps),n.child=l,l.return=n;e.sibling!==null;)e=e.sibling,l=l.sibling=Mo(e,e.pendingProps),l.return=n;l.sibling=null}return n.child}function Uf(e,n,l){switch(n.tag){case 3:Vn(n),Ts();break;case 5:go(n);break;case 1:Cn(n.type)&&Cs(n);break;case 4:Wi(n,n.stateNode.containerInfo);break;case 10:var h=n.type._context,y=n.memoizedProps.value;gt(fl,h._currentValue),h._currentValue=y;break;case 13:if(h=n.memoizedState,h!==null)return h.dehydrated!==null?(gt(_t,_t.current&1),n.flags|=128,null):(l&n.child.childLanes)!==0?ge(e,n,l):(gt(_t,_t.current&1),e=Tn(e,n,l),e!==null?e.sibling:null);gt(_t,_t.current&1);break;case 19:if(h=(l&n.childLanes)!==0,(e.flags&128)!==0){if(h)return Zt(e,n,l);n.flags|=128}if(y=n.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),gt(_t,_t.current),h)break;return null;case 22:case 23:return n.lanes=0,Le(e,n,l)}return Tn(e,n,l)}var Gp,jf,Vp,Hp;Gp=function(e,n){for(var l=n.child;l!==null;){if(l.tag===5||l.tag===6)e.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===n)break;for(;l.sibling===null;){if(l.return===null||l.return===n)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},jf=function(){},Vp=function(e,n,l,h){var y=e.memoizedProps;if(y!==h){e=n.stateNode,Qt(mt.current);var E=null;switch(l){case"input":y=rt(e,y),h=rt(e,h),E=[];break;case"select":y=G({},y,{value:void 0}),h=G({},h,{value:void 0}),E=[];break;case"textarea":y=ft(e,y),h=ft(e,h),E=[];break;default:typeof y.onClick!="function"&&typeof h.onClick=="function"&&(e.onclick=Ss)}Ho(l,h);var O;l=null;for(de in y)if(!h.hasOwnProperty(de)&&y.hasOwnProperty(de)&&y[de]!=null)if(de==="style"){var Q=y[de];for(O in Q)Q.hasOwnProperty(O)&&(l||(l={}),l[O]="")}else de!=="dangerouslySetInnerHTML"&&de!=="children"&&de!=="suppressContentEditableWarning"&&de!=="suppressHydrationWarning"&&de!=="autoFocus"&&(d.hasOwnProperty(de)?E||(E=[]):(E=E||[]).push(de,null));for(de in h){var te=h[de];if(Q=y!=null?y[de]:void 0,h.hasOwnProperty(de)&&te!==Q&&(te!=null||Q!=null))if(de==="style")if(Q){for(O in Q)!Q.hasOwnProperty(O)||te&&te.hasOwnProperty(O)||(l||(l={}),l[O]="");for(O in te)te.hasOwnProperty(O)&&Q[O]!==te[O]&&(l||(l={}),l[O]=te[O])}else l||(E||(E=[]),E.push(de,l)),l=te;else de==="dangerouslySetInnerHTML"?(te=te?te.__html:void 0,Q=Q?Q.__html:void 0,te!=null&&Q!==te&&(E=E||[]).push(de,te)):de==="children"?typeof te!="string"&&typeof te!="number"||(E=E||[]).push(de,""+te):de!=="suppressContentEditableWarning"&&de!=="suppressHydrationWarning"&&(d.hasOwnProperty(de)?(te!=null&&de==="onScroll"&&yt("scroll",e),E||Q===te||(E=[])):(E=E||[]).push(de,te))}l&&(E=E||[]).push("style",l);var de=E;(n.updateQueue=de)&&(n.flags|=4)}},Hp=function(e,n,l,h){l!==h&&(n.flags|=4)};function nc(e,n){if(!ct)switch(e.tailMode){case"hidden":n=e.tail;for(var l=null;n!==null;)n.alternate!==null&&(l=n),n=n.sibling;l===null?e.tail=null:l.sibling=null;break;case"collapsed":l=e.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:h.sibling=null}}function er(e){var n=e.alternate!==null&&e.alternate.child===e.child,l=0,h=0;if(n)for(var y=e.child;y!==null;)l|=y.lanes|y.childLanes,h|=y.subtreeFlags&14680064,h|=y.flags&14680064,y.return=e,y=y.sibling;else for(y=e.child;y!==null;)l|=y.lanes|y.childLanes,h|=y.subtreeFlags,h|=y.flags,y.return=e,y=y.sibling;return e.subtreeFlags|=h,e.childLanes=l,n}function Ny(e,n,l){var h=n.pendingProps;switch(ln(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return er(n),null;case 1:return Cn(n.type)&&lo(),er(n),null;case 3:return h=n.stateNode,Rt(),vt(xn),vt(mn),En(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(e===null||e.child===null)&&(dl(n)?n.flags|=4:e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,gr!==null&&(Jf(gr),gr=null))),jf(e,n),er(n),null;case 5:_i(n);var y=Qt(zt.current);if(l=n.type,e!==null&&n.stateNode!=null)Vp(e,n,l,h,y),e.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!h){if(n.stateNode===null)throw Error(o(166));return er(n),null}if(e=Qt(mt.current),dl(n)){h=n.stateNode,l=n.type;var E=n.memoizedProps;switch(h[Pr]=n,h[al]=E,e=(n.mode&1)!==0,l){case"dialog":yt("cancel",h),yt("close",h);break;case"iframe":case"object":case"embed":yt("load",h);break;case"video":case"audio":for(y=0;y<zi.length;y++)yt(zi[y],h);break;case"source":yt("error",h);break;case"img":case"image":case"link":yt("error",h),yt("load",h);break;case"details":yt("toggle",h);break;case"input":Ge(h,E),yt("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!E.multiple},yt("invalid",h);break;case"textarea":Xn(h,E),yt("invalid",h)}Ho(l,E),y=null;for(var O in E)if(E.hasOwnProperty(O)){var Q=E[O];O==="children"?typeof Q=="string"?h.textContent!==Q&&(E.suppressHydrationWarning!==!0&&ol(h.textContent,Q,e),y=["children",Q]):typeof Q=="number"&&h.textContent!==""+Q&&(E.suppressHydrationWarning!==!0&&ol(h.textContent,Q,e),y=["children",""+Q]):d.hasOwnProperty(O)&&Q!=null&&O==="onScroll"&&yt("scroll",h)}switch(l){case"input":Pe(h),Et(h,E,!0);break;case"textarea":Pe(h),Wr(h);break;case"select":case"option":break;default:typeof E.onClick=="function"&&(h.onclick=Ss)}h=y,n.updateQueue=h,h!==null&&(n.flags|=4)}else{O=y.nodeType===9?y:y.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=dn(l)),e==="http://www.w3.org/1999/xhtml"?l==="script"?(e=O.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof h.is=="string"?e=O.createElement(l,{is:h.is}):(e=O.createElement(l),l==="select"&&(O=e,h.multiple?O.multiple=!0:h.size&&(O.size=h.size))):e=O.createElementNS(e,l),e[Pr]=n,e[al]=h,Gp(e,n,!1,!1),n.stateNode=e;e:{switch(O=Ol(l,h),l){case"dialog":yt("cancel",e),yt("close",e),y=h;break;case"iframe":case"object":case"embed":yt("load",e),y=h;break;case"video":case"audio":for(y=0;y<zi.length;y++)yt(zi[y],e);y=h;break;case"source":yt("error",e),y=h;break;case"img":case"image":case"link":yt("error",e),yt("load",e),y=h;break;case"details":yt("toggle",e),y=h;break;case"input":Ge(e,h),y=rt(e,h),yt("invalid",e);break;case"option":y=h;break;case"select":e._wrapperState={wasMultiple:!!h.multiple},y=G({},h,{value:void 0}),yt("invalid",e);break;case"textarea":Xn(e,h),y=ft(e,h),yt("invalid",e);break;default:y=h}Ho(l,y),Q=y;for(E in Q)if(Q.hasOwnProperty(E)){var te=Q[E];E==="style"?rs(e,te):E==="dangerouslySetInnerHTML"?(te=te?te.__html:void 0,te!=null&&or(e,te)):E==="children"?typeof te=="string"?(l!=="textarea"||te!=="")&&jt(e,te):typeof te=="number"&&jt(e,""+te):E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&E!=="autoFocus"&&(d.hasOwnProperty(E)?te!=null&&E==="onScroll"&&yt("scroll",e):te!=null&&S(e,E,te,O))}switch(l){case"input":Pe(e),Et(e,h,!1);break;case"textarea":Pe(e),Wr(e);break;case"option":h.value!=null&&e.setAttribute("value",""+se(h.value));break;case"select":e.multiple=!!h.multiple,E=h.value,E!=null?wr(e,!!h.multiple,E,!1):h.defaultValue!=null&&wr(e,!!h.multiple,h.defaultValue,!0);break;default:typeof y.onClick=="function"&&(e.onclick=Ss)}switch(l){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return er(n),null;case 6:if(e&&n.stateNode!=null)Hp(e,n,e.memoizedProps,h);else{if(typeof h!="string"&&n.stateNode===null)throw Error(o(166));if(l=Qt(zt.current),Qt(mt.current),dl(n)){if(h=n.stateNode,l=n.memoizedProps,h[Pr]=n,(E=h.nodeValue!==l)&&(e=pr,e!==null))switch(e.tag){case 3:ol(h.nodeValue,l,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ol(h.nodeValue,l,(e.mode&1)!==0)}E&&(n.flags|=4)}else h=(l.nodeType===9?l:l.ownerDocument).createTextNode(h),h[Pr]=n,n.stateNode=h}return er(n),null;case 13:if(vt(_t),h=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ct&&Ee!==null&&(n.mode&1)!==0&&(n.flags&128)===0)Wu(),Ts(),n.flags|=98560,E=!1;else if(E=dl(n),h!==null&&h.dehydrated!==null){if(e===null){if(!E)throw Error(o(318));if(E=n.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(o(317));E[Pr]=n}else Ts(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;er(n),E=!1}else gr!==null&&(Jf(gr),gr=null),E=!0;if(!E)return n.flags&65536?n:null}return(n.flags&128)!==0?(n.lanes=l,n):(h=h!==null,h!==(e!==null&&e.memoizedState!==null)&&h&&(n.child.flags|=8192,(n.mode&1)!==0&&(e===null||(_t.current&1)!==0?vn===0&&(vn=3):e0())),n.updateQueue!==null&&(n.flags|=4),er(n),null);case 4:return Rt(),jf(e,n),e===null&&vs(n.stateNode.containerInfo),er(n),null;case 10:return ka(n.type._context),er(n),null;case 17:return Cn(n.type)&&lo(),er(n),null;case 19:if(vt(_t),E=n.memoizedState,E===null)return er(n),null;if(h=(n.flags&128)!==0,O=E.rendering,O===null)if(h)nc(E,!1);else{if(vn!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(O=mo(e),O!==null){for(n.flags|=128,nc(E,!1),h=O.updateQueue,h!==null&&(n.updateQueue=h,n.flags|=4),n.subtreeFlags=0,h=l,l=n.child;l!==null;)E=l,e=h,E.flags&=14680066,O=E.alternate,O===null?(E.childLanes=0,E.lanes=e,E.child=null,E.subtreeFlags=0,E.memoizedProps=null,E.memoizedState=null,E.updateQueue=null,E.dependencies=null,E.stateNode=null):(E.childLanes=O.childLanes,E.lanes=O.lanes,E.child=O.child,E.subtreeFlags=0,E.deletions=null,E.memoizedProps=O.memoizedProps,E.memoizedState=O.memoizedState,E.updateQueue=O.updateQueue,E.type=O.type,e=O.dependencies,E.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),l=l.sibling;return gt(_t,_t.current&1|2),n.child}e=e.sibling}E.tail!==null&&Ft()>za&&(n.flags|=128,h=!0,nc(E,!1),n.lanes=4194304)}else{if(!h)if(e=mo(O),e!==null){if(n.flags|=128,h=!0,l=e.updateQueue,l!==null&&(n.updateQueue=l,n.flags|=4),nc(E,!0),E.tail===null&&E.tailMode==="hidden"&&!O.alternate&&!ct)return er(n),null}else 2*Ft()-E.renderingStartTime>za&&l!==1073741824&&(n.flags|=128,h=!0,nc(E,!1),n.lanes=4194304);E.isBackwards?(O.sibling=n.child,n.child=O):(l=E.last,l!==null?l.sibling=O:n.child=O,E.last=O)}return E.tail!==null?(n=E.tail,E.rendering=n,E.tail=n.sibling,E.renderingStartTime=Ft(),n.sibling=null,l=_t.current,gt(_t,h?l&1|2:l&1),n):(er(n),null);case 22:case 23:return $f(),h=n.memoizedState!==null,e!==null&&e.memoizedState!==null!==h&&(n.flags|=8192),h&&(n.mode&1)!==0?(Gr&1073741824)!==0&&(er(n),n.subtreeFlags&6&&(n.flags|=8192)):er(n),null;case 24:return null;case 25:return null}throw Error(o(156,n.tag))}function Ty(e,n){switch(ln(n),n.tag){case 1:return Cn(n.type)&&lo(),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Rt(),vt(xn),vt(mn),En(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 5:return _i(n),null;case 13:if(vt(_t),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(o(340));Ts()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return vt(_t),null;case 4:return Rt(),null;case 10:return ka(n.type._context),null;case 22:case 23:return $f(),null;case 24:return null;default:return null}}var dh=!1,tr=!1,Ry=typeof WeakSet=="function"?WeakSet:Set,Me=null;function Fa(e,n){var l=e.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(h){Wt(e,n,h)}else l.current=null}function Bf(e,n,l){try{l()}catch(h){Wt(e,n,h)}}var Wp=!1;function Ly(e,n){if(Uu=Xl,e=Xt(),ro(e)){if("selectionStart"in e)var l={start:e.selectionStart,end:e.selectionEnd};else e:{l=(l=e.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var y=h.anchorOffset,E=h.focusNode;h=h.focusOffset;try{l.nodeType,E.nodeType}catch{l=null;break e}var O=0,Q=-1,te=-1,de=0,Se=0,we=e,_e=null;t:for(;;){for(var Re;we!==l||y!==0&&we.nodeType!==3||(Q=O+y),we!==E||h!==0&&we.nodeType!==3||(te=O+h),we.nodeType===3&&(O+=we.nodeValue.length),(Re=we.firstChild)!==null;)_e=we,we=Re;for(;;){if(we===e)break t;if(_e===l&&++de===y&&(Q=O),_e===E&&++Se===h&&(te=O),(Re=we.nextSibling)!==null)break;we=_e,_e=we.parentNode}we=Re}l=Q===-1||te===-1?null:{start:Q,end:te}}else l=null}l=l||{start:0,end:0}}else l=null;for(ju={focusedElem:e,selectionRange:l},Xl=!1,Me=n;Me!==null;)if(n=Me,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,Me=e;else for(;Me!==null;){n=Me;try{var Ie=n.alternate;if((n.flags&1024)!==0)switch(n.tag){case 0:case 11:case 15:break;case 1:if(Ie!==null){var Ae=Ie.memoizedProps,$t=Ie.memoizedState,ae=n.stateNode,re=ae.getSnapshotBeforeUpdate(n.elementType===n.type?Ae:yn(n.type,Ae),$t);ae.__reactInternalSnapshotBeforeUpdate=re}break;case 3:var ue=n.stateNode.containerInfo;ue.nodeType===1?ue.textContent="":ue.nodeType===9&&ue.documentElement&&ue.removeChild(ue.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(Ce){Wt(n,n.return,Ce)}if(e=n.sibling,e!==null){e.return=n.return,Me=e;break}Me=n.return}return Ie=Wp,Wp=!1,Ie}function rc(e,n,l){var h=n.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var y=h=h.next;do{if((y.tag&e)===e){var E=y.destroy;y.destroy=void 0,E!==void 0&&Bf(n,l,E)}y=y.next}while(y!==h)}}function hh(e,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var l=n=n.next;do{if((l.tag&e)===e){var h=l.create;l.destroy=h()}l=l.next}while(l!==n)}}function Gf(e){var n=e.ref;if(n!==null){var l=e.stateNode;switch(e.tag){case 5:e=l;break;default:e=l}typeof n=="function"?n(e):n.current=e}}function Yp(e){var n=e.alternate;n!==null&&(e.alternate=null,Yp(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&(delete n[Pr],delete n[al],delete n[pa],delete n[Qd],delete n[Jd])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function qp(e){return e.tag===5||e.tag===3||e.tag===4}function Xp(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||qp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Vf(e,n,l){var h=e.tag;if(h===5||h===6)e=e.stateNode,n?l.nodeType===8?l.parentNode.insertBefore(e,n):l.insertBefore(e,n):(l.nodeType===8?(n=l.parentNode,n.insertBefore(e,l)):(n=l,n.appendChild(e)),l=l._reactRootContainer,l!=null||n.onclick!==null||(n.onclick=Ss));else if(h!==4&&(e=e.child,e!==null))for(Vf(e,n,l),e=e.sibling;e!==null;)Vf(e,n,l),e=e.sibling}function Hf(e,n,l){var h=e.tag;if(h===5||h===6)e=e.stateNode,n?l.insertBefore(e,n):l.appendChild(e);else if(h!==4&&(e=e.child,e!==null))for(Hf(e,n,l),e=e.sibling;e!==null;)Hf(e,n,l),e=e.sibling}var Hn=null,ki=!1;function Po(e,n,l){for(l=l.child;l!==null;)Kp(e,n,l),l=l.sibling}function Kp(e,n,l){if(hn&&typeof hn.onCommitFiberUnmount=="function")try{hn.onCommitFiberUnmount(ui,l)}catch{}switch(l.tag){case 5:tr||Fa(l,n);case 6:var h=Hn,y=ki;Hn=null,Po(e,n,l),Hn=h,ki=y,Hn!==null&&(ki?(e=Hn,l=l.stateNode,e.nodeType===8?e.parentNode.removeChild(l):e.removeChild(l)):Hn.removeChild(l.stateNode));break;case 18:Hn!==null&&(ki?(e=Hn,l=l.stateNode,e.nodeType===8?fa(e.parentNode,l):e.nodeType===1&&fa(e,l),Qn(e)):fa(Hn,l.stateNode));break;case 4:h=Hn,y=ki,Hn=l.stateNode.containerInfo,ki=!0,Po(e,n,l),Hn=h,ki=y;break;case 0:case 11:case 14:case 15:if(!tr&&(h=l.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){y=h=h.next;do{var E=y,O=E.destroy;E=E.tag,O!==void 0&&((E&2)!==0||(E&4)!==0)&&Bf(l,n,O),y=y.next}while(y!==h)}Po(e,n,l);break;case 1:if(!tr&&(Fa(l,n),h=l.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=l.memoizedProps,h.state=l.memoizedState,h.componentWillUnmount()}catch(Q){Wt(l,n,Q)}Po(e,n,l);break;case 21:Po(e,n,l);break;case 22:l.mode&1?(tr=(h=tr)||l.memoizedState!==null,Po(e,n,l),tr=h):Po(e,n,l);break;default:Po(e,n,l)}}function Qp(e){var n=e.updateQueue;if(n!==null){e.updateQueue=null;var l=e.stateNode;l===null&&(l=e.stateNode=new Ry),n.forEach(function(h){var y=Uy.bind(null,e,h);l.has(h)||(l.add(h),h.then(y,y))})}}function xi(e,n){var l=n.deletions;if(l!==null)for(var h=0;h<l.length;h++){var y=l[h];try{var E=e,O=n,Q=O;e:for(;Q!==null;){switch(Q.tag){case 5:Hn=Q.stateNode,ki=!1;break e;case 3:Hn=Q.stateNode.containerInfo,ki=!0;break e;case 4:Hn=Q.stateNode.containerInfo,ki=!0;break e}Q=Q.return}if(Hn===null)throw Error(o(160));Kp(E,O,y),Hn=null,ki=!1;var te=y.alternate;te!==null&&(te.return=null),y.return=null}catch(de){Wt(y,n,de)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)Jp(n,e),n=n.sibling}function Jp(e,n){var l=e.alternate,h=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(xi(n,e),Qi(e),h&4){try{rc(3,e,e.return),hh(3,e)}catch(Ae){Wt(e,e.return,Ae)}try{rc(5,e,e.return)}catch(Ae){Wt(e,e.return,Ae)}}break;case 1:xi(n,e),Qi(e),h&512&&l!==null&&Fa(l,l.return);break;case 5:if(xi(n,e),Qi(e),h&512&&l!==null&&Fa(l,l.return),e.flags&32){var y=e.stateNode;try{jt(y,"")}catch(Ae){Wt(e,e.return,Ae)}}if(h&4&&(y=e.stateNode,y!=null)){var E=e.memoizedProps,O=l!==null?l.memoizedProps:E,Q=e.type,te=e.updateQueue;if(e.updateQueue=null,te!==null)try{Q==="input"&&E.type==="radio"&&E.name!=null&&Ut(y,E),Ol(Q,O);var de=Ol(Q,E);for(O=0;O<te.length;O+=2){var Se=te[O],we=te[O+1];Se==="style"?rs(y,we):Se==="dangerouslySetInnerHTML"?or(y,we):Se==="children"?jt(y,we):S(y,Se,we,de)}switch(Q){case"input":ot(y,E);break;case"textarea":cn(y,E);break;case"select":var _e=y._wrapperState.wasMultiple;y._wrapperState.wasMultiple=!!E.multiple;var Re=E.value;Re!=null?wr(y,!!E.multiple,Re,!1):_e!==!!E.multiple&&(E.defaultValue!=null?wr(y,!!E.multiple,E.defaultValue,!0):wr(y,!!E.multiple,E.multiple?[]:"",!1))}y[al]=E}catch(Ae){Wt(e,e.return,Ae)}}break;case 6:if(xi(n,e),Qi(e),h&4){if(e.stateNode===null)throw Error(o(162));y=e.stateNode,E=e.memoizedProps;try{y.nodeValue=E}catch(Ae){Wt(e,e.return,Ae)}}break;case 3:if(xi(n,e),Qi(e),h&4&&l!==null&&l.memoizedState.isDehydrated)try{Qn(n.containerInfo)}catch(Ae){Wt(e,e.return,Ae)}break;case 4:xi(n,e),Qi(e);break;case 13:xi(n,e),Qi(e),y=e.child,y.flags&8192&&(E=y.memoizedState!==null,y.stateNode.isHidden=E,!E||y.alternate!==null&&y.alternate.memoizedState!==null||(qf=Ft())),h&4&&Qp(e);break;case 22:if(Se=l!==null&&l.memoizedState!==null,e.mode&1?(tr=(de=tr)||Se,xi(n,e),tr=de):xi(n,e),Qi(e),h&8192){if(de=e.memoizedState!==null,(e.stateNode.isHidden=de)&&!Se&&(e.mode&1)!==0)for(Me=e,Se=e.child;Se!==null;){for(we=Me=Se;Me!==null;){switch(_e=Me,Re=_e.child,_e.tag){case 0:case 11:case 14:case 15:rc(4,_e,_e.return);break;case 1:Fa(_e,_e.return);var Ie=_e.stateNode;if(typeof Ie.componentWillUnmount=="function"){h=_e,l=_e.return;try{n=h,Ie.props=n.memoizedProps,Ie.state=n.memoizedState,Ie.componentWillUnmount()}catch(Ae){Wt(h,l,Ae)}}break;case 5:Fa(_e,_e.return);break;case 22:if(_e.memoizedState!==null){e1(we);continue}}Re!==null?(Re.return=_e,Me=Re):e1(we)}Se=Se.sibling}e:for(Se=null,we=e;;){if(we.tag===5){if(Se===null){Se=we;try{y=we.stateNode,de?(E=y.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none"):(Q=we.stateNode,te=we.memoizedProps.style,O=te!=null&&te.hasOwnProperty("display")?te.display:null,Q.style.display=Vo("display",O))}catch(Ae){Wt(e,e.return,Ae)}}}else if(we.tag===6){if(Se===null)try{we.stateNode.nodeValue=de?"":we.memoizedProps}catch(Ae){Wt(e,e.return,Ae)}}else if((we.tag!==22&&we.tag!==23||we.memoizedState===null||we===e)&&we.child!==null){we.child.return=we,we=we.child;continue}if(we===e)break e;for(;we.sibling===null;){if(we.return===null||we.return===e)break e;Se===we&&(Se=null),we=we.return}Se===we&&(Se=null),we.sibling.return=we.return,we=we.sibling}}break;case 19:xi(n,e),Qi(e),h&4&&Qp(e);break;case 21:break;default:xi(n,e),Qi(e)}}function Qi(e){var n=e.flags;if(n&2){try{e:{for(var l=e.return;l!==null;){if(qp(l)){var h=l;break e}l=l.return}throw Error(o(160))}switch(h.tag){case 5:var y=h.stateNode;h.flags&32&&(jt(y,""),h.flags&=-33);var E=Xp(e);Hf(e,E,y);break;case 3:case 4:var O=h.stateNode.containerInfo,Q=Xp(e);Vf(e,Q,O);break;default:throw Error(o(161))}}catch(te){Wt(e,e.return,te)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function My(e,n,l){Me=e,Zp(e)}function Zp(e,n,l){for(var h=(e.mode&1)!==0;Me!==null;){var y=Me,E=y.child;if(y.tag===22&&h){var O=y.memoizedState!==null||dh;if(!O){var Q=y.alternate,te=Q!==null&&Q.memoizedState!==null||tr;Q=dh;var de=tr;if(dh=O,(tr=te)&&!de)for(Me=y;Me!==null;)O=Me,te=O.child,O.tag===22&&O.memoizedState!==null?t1(y):te!==null?(te.return=O,Me=te):t1(y);for(;E!==null;)Me=E,Zp(E),E=E.sibling;Me=y,dh=Q,tr=de}$p(e)}else(y.subtreeFlags&8772)!==0&&E!==null?(E.return=y,Me=E):$p(e)}}function $p(e){for(;Me!==null;){var n=Me;if((n.flags&8772)!==0){var l=n.alternate;try{if((n.flags&8772)!==0)switch(n.tag){case 0:case 11:case 15:tr||hh(5,n);break;case 1:var h=n.stateNode;if(n.flags&4&&!tr)if(l===null)h.componentDidMount();else{var y=n.elementType===n.type?l.memoizedProps:yn(n.type,l.memoizedProps);h.componentDidUpdate(y,l.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var E=n.updateQueue;E!==null&&It(n,E,h);break;case 3:var O=n.updateQueue;if(O!==null){if(l=null,n.child!==null)switch(n.child.tag){case 5:l=n.child.stateNode;break;case 1:l=n.child.stateNode}It(n,O,l)}break;case 5:var Q=n.stateNode;if(l===null&&n.flags&4){l=Q;var te=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":te.autoFocus&&l.focus();break;case"img":te.src&&(l.src=te.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var de=n.alternate;if(de!==null){var Se=de.memoizedState;if(Se!==null){var we=Se.dehydrated;we!==null&&Qn(we)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(o(163))}tr||n.flags&512&&Gf(n)}catch(_e){Wt(n,n.return,_e)}}if(n===e){Me=null;break}if(l=n.sibling,l!==null){l.return=n.return,Me=l;break}Me=n.return}}function e1(e){for(;Me!==null;){var n=Me;if(n===e){Me=null;break}var l=n.sibling;if(l!==null){l.return=n.return,Me=l;break}Me=n.return}}function t1(e){for(;Me!==null;){var n=Me;try{switch(n.tag){case 0:case 11:case 15:var l=n.return;try{hh(4,n)}catch(te){Wt(n,l,te)}break;case 1:var h=n.stateNode;if(typeof h.componentDidMount=="function"){var y=n.return;try{h.componentDidMount()}catch(te){Wt(n,y,te)}}var E=n.return;try{Gf(n)}catch(te){Wt(n,E,te)}break;case 5:var O=n.return;try{Gf(n)}catch(te){Wt(n,O,te)}}}catch(te){Wt(n,n.return,te)}if(n===e){Me=null;break}var Q=n.sibling;if(Q!==null){Q.return=n.return,Me=Q;break}Me=n.return}}var Dy=Math.ceil,fh=L.ReactCurrentDispatcher,Wf=L.ReactCurrentOwner,ii=L.ReactCurrentBatchConfig,lt=0,Rn=null,an=null,Wn=0,Gr=0,Oa=mi(0),vn=0,ic=null,_l=0,ph=0,Yf=0,sc=null,Rr=null,qf=0,za=1/0,Is=null,gh=!1,Xf=null,No=null,mh=!1,To=null,yh=0,oc=0,Kf=null,vh=-1,_h=0;function _r(){return(lt&6)!==0?Ft():vh!==-1?vh:vh=Ft()}function Ro(e){return(e.mode&1)===0?1:(lt&2)!==0&&Wn!==0?Wn&-Wn:Yu.transition!==null?(_h===0&&(_h=yu()),_h):(e=st,e!==0||(e=window.event,e=e===void 0?16:Id(e.type)),e)}function Ci(e,n,l,h){if(50<oc)throw oc=0,Kf=null,Error(o(185));qo(e,l,h),((lt&2)===0||e!==Rn)&&(e===Rn&&((lt&2)===0&&(ph|=l),vn===4&&Lo(e,Wn)),Lr(e,h),l===1&&lt===0&&(n.mode&1)===0&&(za=Ft()+500,ao&&Bi()))}function Lr(e,n){var l=e.callbackNode;Td(e,n);var h=ls(e,e===Rn?Wn:0);if(h===0)l!==null&&Pd(l),e.callbackNode=null,e.callbackPriority=0;else if(n=h&-h,e.callbackPriority!==n){if(l!=null&&Pd(l),n===1)e.tag===0?yi(r1.bind(null,e)):cl(r1.bind(null,e)),Xd(function(){(lt&6)===0&&Bi()}),l=null;else{switch(Xo(h)){case 1:l=os;break;case 4:l=Bl;break;case 16:l=Hs;break;case 536870912:l=Gl;break;default:l=Hs}l=d1(l,n1.bind(null,e))}e.callbackPriority=n,e.callbackNode=l}}function n1(e,n){if(vh=-1,_h=0,(lt&6)!==0)throw Error(o(327));var l=e.callbackNode;if(ba()&&e.callbackNode!==l)return null;var h=ls(e,e===Rn?Wn:0);if(h===0)return null;if((h&30)!==0||(h&e.expiredLanes)!==0||n)n=Sh(e,h);else{n=h;var y=lt;lt|=2;var E=s1();(Rn!==e||Wn!==n)&&(Is=null,za=Ft()+500,wl(e,n));do try{Fy();break}catch(Q){i1(e,Q)}while(!0);wa(),fh.current=E,lt=y,an!==null?n=0:(Rn=null,Wn=0,n=vn)}if(n!==0){if(n===2&&(y=Ws(e),y!==0&&(h=y,n=Qf(e,y))),n===1)throw l=ic,wl(e,0),Lo(e,h),Lr(e,Ft()),l;if(n===6)Lo(e,h);else{if(y=e.current.alternate,(h&30)===0&&!Iy(y)&&(n=Sh(e,h),n===2&&(E=Ws(e),E!==0&&(h=E,n=Qf(e,E))),n===1))throw l=ic,wl(e,0),Lo(e,h),Lr(e,Ft()),l;switch(e.finishedWork=y,e.finishedLanes=h,n){case 0:case 1:throw Error(o(345));case 2:kl(e,Rr,Is);break;case 3:if(Lo(e,h),(h&130023424)===h&&(n=qf+500-Ft(),10<n)){if(ls(e,0)!==0)break;if(y=e.suspendedLanes,(y&h)!==h){_r(),e.pingedLanes|=e.suspendedLanes&y;break}e.timeoutHandle=hr(kl.bind(null,e,Rr,Is),n);break}kl(e,Rr,Is);break;case 4:if(Lo(e,h),(h&4194240)===h)break;for(n=e.eventTimes,y=-1;0<h;){var O=31-Qe(h);E=1<<O,O=n[O],O>y&&(y=O),h&=~E}if(h=y,h=Ft()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*Dy(h/1960))-h,10<h){e.timeoutHandle=hr(kl.bind(null,e,Rr,Is),h);break}kl(e,Rr,Is);break;case 5:kl(e,Rr,Is);break;default:throw Error(o(329))}}}return Lr(e,Ft()),e.callbackNode===l?n1.bind(null,e):null}function Qf(e,n){var l=sc;return e.current.memoizedState.isDehydrated&&(wl(e,n).flags|=256),e=Sh(e,n),e!==2&&(n=Rr,Rr=l,n!==null&&Jf(n)),e}function Jf(e){Rr===null?Rr=e:Rr.push.apply(Rr,e)}function Iy(e){for(var n=e;;){if(n.flags&16384){var l=n.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var h=0;h<l.length;h++){var y=l[h],E=y.getSnapshot;y=y.value;try{if(!Zn(E(),y))return!1}catch{return!1}}}if(l=n.child,n.subtreeFlags&16384&&l!==null)l.return=n,n=l;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Lo(e,n){for(n&=~Yf,n&=~ph,e.suspendedLanes|=n,e.pingedLanes&=~n,e=e.expirationTimes;0<n;){var l=31-Qe(n),h=1<<l;e[l]=-1,n&=~h}}function r1(e){if((lt&6)!==0)throw Error(o(327));ba();var n=ls(e,0);if((n&1)===0)return Lr(e,Ft()),null;var l=Sh(e,n);if(e.tag!==0&&l===2){var h=Ws(e);h!==0&&(n=h,l=Qf(e,h))}if(l===1)throw l=ic,wl(e,0),Lo(e,n),Lr(e,Ft()),l;if(l===6)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=n,kl(e,Rr,Is),Lr(e,Ft()),null}function Zf(e,n){var l=lt;lt|=1;try{return e(n)}finally{lt=l,lt===0&&(za=Ft()+500,ao&&Bi())}}function Sl(e){To!==null&&To.tag===0&&(lt&6)===0&&ba();var n=lt;lt|=1;var l=ii.transition,h=st;try{if(ii.transition=null,st=1,e)return e()}finally{st=h,ii.transition=l,lt=n,(lt&6)===0&&Bi()}}function $f(){Gr=Oa.current,vt(Oa)}function wl(e,n){e.finishedWork=null,e.finishedLanes=0;var l=e.timeoutHandle;if(l!==-1&&(e.timeoutHandle=-1,Gu(l)),an!==null)for(l=an.return;l!==null;){var h=l;switch(ln(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&lo();break;case 3:Rt(),vt(xn),vt(mn),En();break;case 5:_i(h);break;case 4:Rt();break;case 13:vt(_t);break;case 19:vt(_t);break;case 10:ka(h.type._context);break;case 22:case 23:$f()}l=l.return}if(Rn=e,an=e=Mo(e.current,null),Wn=Gr=n,vn=0,ic=null,Yf=ph=_l=0,Rr=sc=null,$r!==null){for(n=0;n<$r.length;n++)if(l=$r[n],h=l.interleaved,h!==null){l.interleaved=null;var y=h.next,E=l.pending;if(E!==null){var O=E.next;E.next=y,h.next=O}l.pending=h}$r=null}return e}function i1(e,n){do{var l=an;try{if(wa(),yo.current=ko,Br){for(var h=pt.memoizedState;h!==null;){var y=h.queue;y!==null&&(y.pending=null),h=h.next}Br=!1}if(Gn=0,Vt=At=pt=null,Yi=!1,Tr=0,Wf.current=null,l===null||l.return===null){vn=1,ic=n,an=null;break}e:{var E=e,O=l.return,Q=l,te=n;if(n=Wn,Q.flags|=32768,te!==null&&typeof te=="object"&&typeof te.then=="function"){var de=te,Se=Q,we=Se.tag;if((Se.mode&1)===0&&(we===0||we===11||we===15)){var _e=Se.alternate;_e?(Se.updateQueue=_e.updateQueue,Se.memoizedState=_e.memoizedState,Se.lanes=_e.lanes):(Se.updateQueue=null,Se.memoizedState=null)}var Re=c(O);if(Re!==null){Re.flags&=-257,g(Re,O,Q,E,n),Re.mode&1&&s(E,de,n),n=Re,te=de;var Ie=n.updateQueue;if(Ie===null){var Ae=new Set;Ae.add(te),n.updateQueue=Ae}else Ie.add(te);break e}else{if((n&1)===0){s(E,de,n),e0();break e}te=Error(o(426))}}else if(ct&&Q.mode&1){var $t=c(O);if($t!==null){($t.flags&65536)===0&&($t.flags|=256),g($t,O,Q,E,n),hl(Ds(te,Q));break e}}E=te=Ds(te,Q),vn!==4&&(vn=2),sc===null?sc=[E]:sc.push(E),E=O;do{switch(E.tag){case 3:E.flags|=65536,n&=-n,E.lanes|=n;var ae=ch(E,te,n);ml(E,ae);break e;case 1:Q=te;var re=E.type,ue=E.stateNode;if((E.flags&128)===0&&(typeof re.getDerivedStateFromError=="function"||ue!==null&&typeof ue.componentDidCatch=="function"&&(No===null||!No.has(ue)))){E.flags|=65536,n&=-n,E.lanes|=n;var Ce=r(E,Q,n);ml(E,Ce);break e}}E=E.return}while(E!==null)}l1(l)}catch(Fe){n=Fe,an===l&&l!==null&&(an=l=l.return);continue}break}while(!0)}function s1(){var e=fh.current;return fh.current=ko,e===null?ko:e}function e0(){(vn===0||vn===3||vn===2)&&(vn=4),Rn===null||(_l&268435455)===0&&(ph&268435455)===0||Lo(Rn,Wn)}function Sh(e,n){var l=lt;lt|=2;var h=s1();(Rn!==e||Wn!==n)&&(Is=null,wl(e,n));do try{Ay();break}catch(y){i1(e,y)}while(!0);if(wa(),lt=l,fh.current=h,an!==null)throw Error(o(261));return Rn=null,Wn=0,vn}function Ay(){for(;an!==null;)o1(an)}function Fy(){for(;an!==null&&!Tf();)o1(an)}function o1(e){var n=c1(e.alternate,e,Gr);e.memoizedProps=e.pendingProps,n===null?l1(e):an=n,Wf.current=null}function l1(e){var n=e;do{var l=n.alternate;if(e=n.return,(n.flags&32768)===0){if(l=Ny(l,n,Gr),l!==null){an=l;return}}else{if(l=Ty(l,n),l!==null){l.flags&=32767,an=l;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{vn=6,an=null;return}}if(n=n.sibling,n!==null){an=n;return}an=n=e}while(n!==null);vn===0&&(vn=5)}function kl(e,n,l){var h=st,y=ii.transition;try{ii.transition=null,st=1,Oy(e,n,l,h)}finally{ii.transition=y,st=h}return null}function Oy(e,n,l,h){do ba();while(To!==null);if((lt&6)!==0)throw Error(o(327));l=e.finishedWork;var y=e.finishedLanes;if(l===null)return null;if(e.finishedWork=null,e.finishedLanes=0,l===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var E=l.lanes|l.childLanes;if(Mf(e,E),e===Rn&&(an=Rn=null,Wn=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||mh||(mh=!0,d1(Hs,function(){return ba(),null})),E=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||E){E=ii.transition,ii.transition=null;var O=st;st=1;var Q=lt;lt|=4,Wf.current=null,Ly(e,l),Jp(l,e),nl(ju),Xl=!!Uu,ju=Uu=null,e.current=l,My(l),Rf(),lt=Q,st=O,ii.transition=E}else e.current=l;if(mh&&(mh=!1,To=e,yh=y),E=e.pendingLanes,E===0&&(No=null),wt(l.stateNode),Lr(e,Ft()),n!==null)for(h=e.onRecoverableError,l=0;l<n.length;l++)y=n[l],h(y.value,{componentStack:y.stack,digest:y.digest});if(gh)throw gh=!1,e=Xf,Xf=null,e;return(yh&1)!==0&&e.tag!==0&&ba(),E=e.pendingLanes,(E&1)!==0?e===Kf?oc++:(oc=0,Kf=e):oc=0,Bi(),null}function ba(){if(To!==null){var e=Xo(yh),n=ii.transition,l=st;try{if(ii.transition=null,st=16>e?16:e,To===null)var h=!1;else{if(e=To,To=null,yh=0,(lt&6)!==0)throw Error(o(331));var y=lt;for(lt|=4,Me=e.current;Me!==null;){var E=Me,O=E.child;if((Me.flags&16)!==0){var Q=E.deletions;if(Q!==null){for(var te=0;te<Q.length;te++){var de=Q[te];for(Me=de;Me!==null;){var Se=Me;switch(Se.tag){case 0:case 11:case 15:rc(8,Se,E)}var we=Se.child;if(we!==null)we.return=Se,Me=we;else for(;Me!==null;){Se=Me;var _e=Se.sibling,Re=Se.return;if(Yp(Se),Se===de){Me=null;break}if(_e!==null){_e.return=Re,Me=_e;break}Me=Re}}}var Ie=E.alternate;if(Ie!==null){var Ae=Ie.child;if(Ae!==null){Ie.child=null;do{var $t=Ae.sibling;Ae.sibling=null,Ae=$t}while(Ae!==null)}}Me=E}}if((E.subtreeFlags&2064)!==0&&O!==null)O.return=E,Me=O;else e:for(;Me!==null;){if(E=Me,(E.flags&2048)!==0)switch(E.tag){case 0:case 11:case 15:rc(9,E,E.return)}var ae=E.sibling;if(ae!==null){ae.return=E.return,Me=ae;break e}Me=E.return}}var re=e.current;for(Me=re;Me!==null;){O=Me;var ue=O.child;if((O.subtreeFlags&2064)!==0&&ue!==null)ue.return=O,Me=ue;else e:for(O=re;Me!==null;){if(Q=Me,(Q.flags&2048)!==0)try{switch(Q.tag){case 0:case 11:case 15:hh(9,Q)}}catch(Fe){Wt(Q,Q.return,Fe)}if(Q===O){Me=null;break e}var Ce=Q.sibling;if(Ce!==null){Ce.return=Q.return,Me=Ce;break e}Me=Q.return}}if(lt=y,Bi(),hn&&typeof hn.onPostCommitFiberRoot=="function")try{hn.onPostCommitFiberRoot(ui,e)}catch{}h=!0}return h}finally{st=l,ii.transition=n}}return!1}function a1(e,n,l){n=Ds(l,n),n=ch(e,n,1),e=ni(e,n,1),n=_r(),e!==null&&(qo(e,1,n),Lr(e,n))}function Wt(e,n,l){if(e.tag===3)a1(e,e,l);else for(;n!==null;){if(n.tag===3){a1(n,e,l);break}else if(n.tag===1){var h=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(No===null||!No.has(h))){e=Ds(l,e),e=r(n,e,1),n=ni(n,e,1),e=_r(),n!==null&&(qo(n,1,e),Lr(n,e));break}}n=n.return}}function zy(e,n,l){var h=e.pingCache;h!==null&&h.delete(n),n=_r(),e.pingedLanes|=e.suspendedLanes&l,Rn===e&&(Wn&l)===l&&(vn===4||vn===3&&(Wn&130023424)===Wn&&500>Ft()-qf?wl(e,0):Yf|=l),Lr(e,n)}function u1(e,n){n===0&&((e.mode&1)===0?n=1:(n=ci,ci<<=1,(ci&130023424)===0&&(ci=4194304)));var l=_r();e=yr(e,n),e!==null&&(qo(e,n,l),Lr(e,l))}function by(e){var n=e.memoizedState,l=0;n!==null&&(l=n.retryLane),u1(e,l)}function Uy(e,n){var l=0;switch(e.tag){case 13:var h=e.stateNode,y=e.memoizedState;y!==null&&(l=y.retryLane);break;case 19:h=e.stateNode;break;default:throw Error(o(314))}h!==null&&h.delete(n),u1(e,l)}var c1;c1=function(e,n,l){if(e!==null)if(e.memoizedProps!==n.pendingProps||xn.current)R=!0;else{if((e.lanes&l)===0&&(n.flags&128)===0)return R=!1,Uf(e,n,l);R=(e.flags&131072)!==0}else R=!1,ct&&(n.flags&1048576)!==0&&$d(n,Vi,n.index);switch(n.lanes=0,n.tag){case 2:var h=n.type;$e(e,n),e=n.pendingProps;var y=xs(n,mn.current);vi(n,l),y=vo(null,n,h,e,y,l);var E=_o();return n.flags|=1,typeof y=="object"&&y!==null&&typeof y.render=="function"&&y.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,Cn(h)?(E=!0,Cs(n)):E=!1,n.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,gl(n),y.updater=Co,n.stateNode=y,y._reactInternals=n,Ia(n,h,e,l),n=dt(null,n,h,!0,E,l)):(n.tag=0,ct&&E&&uo(n),H(null,n,y,l),n=n.child),n;case 16:h=n.elementType;e:{switch($e(e,n),e=n.pendingProps,y=h._init,h=y(h._payload),n.type=h,y=n.tag=By(h),e=yn(h,e),y){case 0:n=Ne(null,n,h,e,l);break e;case 1:n=St(null,n,h,e,l);break e;case 11:n=ie(null,n,h,e,l);break e;case 14:n=fe(null,n,h,yn(h.type,e),l);break e}throw Error(o(306,h,""))}return n;case 0:return h=n.type,y=n.pendingProps,y=n.elementType===h?y:yn(h,y),Ne(e,n,h,y,l);case 1:return h=n.type,y=n.pendingProps,y=n.elementType===h?y:yn(h,y),St(e,n,h,y,l);case 3:e:{if(Vn(n),e===null)throw Error(o(387));h=n.pendingProps,E=n.memoizedState,y=E.element,Ca(e,n),po(n,h,null,l);var O=n.memoizedState;if(h=O.element,E.isDehydrated)if(E={element:h,isDehydrated:!1,cache:O.cache,pendingSuspenseBoundaries:O.pendingSuspenseBoundaries,transitions:O.transitions},n.updateQueue.baseState=E,n.memoizedState=E,n.flags&256){y=Ds(Error(o(423)),n),n=ri(e,n,h,l,y);break e}else if(h!==y){y=Ds(Error(o(424)),n),n=ri(e,n,h,l,y);break e}else for(Ee=Kr(n.stateNode.containerInfo.firstChild),pr=n,ct=!0,gr=null,l=Nr(n,null,h,l),n.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Ts(),h===y){n=Tn(e,n,l);break e}H(e,n,h,l)}n=n.child}return n;case 5:return go(n),e===null&&co(n),h=n.type,y=n.pendingProps,E=e!==null?e.memoizedProps:null,O=y.children,Bu(h,y)?O=null:E!==null&&Bu(h,E)&&(n.flags|=32),He(e,n),H(e,n,O,l),n.child;case 6:return e===null&&co(n),null;case 13:return ge(e,n,l);case 4:return Wi(n,n.stateNode.containerInfo),h=n.pendingProps,e===null?n.child=Rs(n,null,h,l):H(e,n,h,l),n.child;case 11:return h=n.type,y=n.pendingProps,y=n.elementType===h?y:yn(h,y),ie(e,n,h,y,l);case 7:return H(e,n,n.pendingProps,l),n.child;case 8:return H(e,n,n.pendingProps.children,l),n.child;case 12:return H(e,n,n.pendingProps.children,l),n.child;case 10:e:{if(h=n.type._context,y=n.pendingProps,E=n.memoizedProps,O=y.value,gt(fl,h._currentValue),h._currentValue=O,E!==null)if(Zn(E.value,O)){if(E.children===y.children&&!xn.current){n=Tn(e,n,l);break e}}else for(E=n.child,E!==null&&(E.return=n);E!==null;){var Q=E.dependencies;if(Q!==null){O=E.child;for(var te=Q.firstContext;te!==null;){if(te.context===h){if(E.tag===1){te=ti(-1,l&-l),te.tag=2;var de=E.updateQueue;if(de!==null){de=de.shared;var Se=de.pending;Se===null?te.next=te:(te.next=Se.next,Se.next=te),de.pending=te}}E.lanes|=l,te=E.alternate,te!==null&&(te.lanes|=l),xa(E.return,l,n),Q.lanes|=l;break}te=te.next}}else if(E.tag===10)O=E.type===n.type?null:E.child;else if(E.tag===18){if(O=E.return,O===null)throw Error(o(341));O.lanes|=l,Q=O.alternate,Q!==null&&(Q.lanes|=l),xa(O,l,n),O=E.sibling}else O=E.child;if(O!==null)O.return=E;else for(O=E;O!==null;){if(O===n){O=null;break}if(E=O.sibling,E!==null){E.return=O.return,O=E;break}O=O.return}E=O}H(e,n,y.children,l),n=n.child}return n;case 9:return y=n.type,h=n.pendingProps.children,vi(n,l),y=Bn(y),h=h(y),n.flags|=1,H(e,n,h,l),n.child;case 14:return h=n.type,y=yn(h,n.pendingProps),y=yn(h.type,y),fe(e,n,h,y,l);case 15:return ke(e,n,n.type,n.pendingProps,l);case 17:return h=n.type,y=n.pendingProps,y=n.elementType===h?y:yn(h,y),$e(e,n),n.tag=1,Cn(h)?(e=!0,Cs(n)):e=!1,vi(n,l),uh(n,h,y),Ia(n,h,y,l),dt(null,n,h,!0,e,l);case 19:return Zt(e,n,l);case 22:return Le(e,n,l)}throw Error(o(156,n.tag))};function d1(e,n){return Ed(e,n)}function jy(e,n,l,h){this.tag=e,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function si(e,n,l,h){return new jy(e,n,l,h)}function t0(e){return e=e.prototype,!(!e||!e.isReactComponent)}function By(e){if(typeof e=="function")return t0(e)?1:0;if(e!=null){if(e=e.$$typeof,e===X)return 11;if(e===ee)return 14}return 2}function Mo(e,n){var l=e.alternate;return l===null?(l=si(e.tag,n,e.key,e.mode),l.elementType=e.elementType,l.type=e.type,l.stateNode=e.stateNode,l.alternate=e,e.alternate=l):(l.pendingProps=n,l.type=e.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=e.flags&14680064,l.childLanes=e.childLanes,l.lanes=e.lanes,l.child=e.child,l.memoizedProps=e.memoizedProps,l.memoizedState=e.memoizedState,l.updateQueue=e.updateQueue,n=e.dependencies,l.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},l.sibling=e.sibling,l.index=e.index,l.ref=e.ref,l}function wh(e,n,l,h,y,E){var O=2;if(h=e,typeof e=="function")t0(e)&&(O=1);else if(typeof e=="string")O=5;else e:switch(e){case Y:return xl(l.children,y,E,n);case A:O=8,y|=8;break;case U:return e=si(12,l,n,y|2),e.elementType=U,e.lanes=E,e;case $:return e=si(13,l,n,y),e.elementType=$,e.lanes=E,e;case ne:return e=si(19,l,n,y),e.elementType=ne,e.lanes=E,e;case D:return kh(l,y,E,n);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case B:O=10;break e;case V:O=9;break e;case X:O=11;break e;case ee:O=14;break e;case pe:O=16,h=null;break e}throw Error(o(130,e==null?e:typeof e,""))}return n=si(O,l,n,y),n.elementType=e,n.type=h,n.lanes=E,n}function xl(e,n,l,h){return e=si(7,e,h,n),e.lanes=l,e}function kh(e,n,l,h){return e=si(22,e,h,n),e.elementType=D,e.lanes=l,e.stateNode={isHidden:!1},e}function n0(e,n,l){return e=si(6,e,null,n),e.lanes=l,e}function r0(e,n,l){return n=si(4,e.children!==null?e.children:[],e.key,n),n.lanes=l,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function Gy(e,n,l,h,y){this.tag=n,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=lr(0),this.expirationTimes=lr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=lr(0),this.identifierPrefix=h,this.onRecoverableError=y,this.mutableSourceEagerHydrationData=null}function i0(e,n,l,h,y,E,O,Q,te){return e=new Gy(e,n,l,Q,te),n===1?(n=1,E===!0&&(n|=8)):n=0,E=si(3,null,null,n),e.current=E,E.stateNode=e,E.memoizedState={element:h,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},gl(E),e}function Vy(e,n,l){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:b,key:h==null?null:""+h,children:e,containerInfo:n,implementation:l}}function h1(e){if(!e)return Jr;e=e._reactInternals;e:{if(ss(e)!==e||e.tag!==1)throw Error(o(170));var n=e;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(Cn(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(o(171))}if(e.tag===1){var l=e.type;if(Cn(l))return ma(e,l,n)}return n}function f1(e,n,l,h,y,E,O,Q,te){return e=i0(l,h,!0,e,y,E,O,Q,te),e.context=h1(null),l=e.current,h=_r(),y=Ro(l),E=ti(h,y),E.callback=n??null,ni(l,E,y),e.current.lanes=y,qo(e,y,h),Lr(e,h),e}function xh(e,n,l,h){var y=n.current,E=_r(),O=Ro(y);return l=h1(l),n.context===null?n.context=l:n.pendingContext=l,n=ti(E,O),n.payload={element:e},h=h===void 0?null:h,h!==null&&(n.callback=h),e=ni(y,n,O),e!==null&&(Ci(e,y,O,E),Ea(e,y,O)),O}function Ch(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function p1(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var l=e.retryLane;e.retryLane=l!==0&&l<n?l:n}}function s0(e,n){p1(e,n),(e=e.alternate)&&p1(e,n)}function Hy(){return null}var g1=typeof reportError=="function"?reportError:function(e){console.error(e)};function o0(e){this._internalRoot=e}Eh.prototype.render=o0.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(o(409));xh(e,n,null,null)},Eh.prototype.unmount=o0.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;Sl(function(){xh(null,e,null,null)}),n[Qr]=null}};function Eh(e){this._internalRoot=e}Eh.prototype.unstable_scheduleHydration=function(e){if(e){var n=Ld();e={blockedOn:null,target:e,priority:n};for(var l=0;l<Xr.length&&n!==0&&n<Xr[l].priority;l++);Xr.splice(l,0,e),l===0&&Wl(e)}};function l0(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ph(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function m1(){}function Wy(e,n,l,h,y){if(y){if(typeof h=="function"){var E=h;h=function(){var de=Ch(O);E.call(de)}}var O=f1(n,h,e,0,null,!1,!1,"",m1);return e._reactRootContainer=O,e[Qr]=O.current,vs(e.nodeType===8?e.parentNode:e),Sl(),O}for(;y=e.lastChild;)e.removeChild(y);if(typeof h=="function"){var Q=h;h=function(){var de=Ch(te);Q.call(de)}}var te=i0(e,0,!1,null,null,!1,!1,"",m1);return e._reactRootContainer=te,e[Qr]=te.current,vs(e.nodeType===8?e.parentNode:e),Sl(function(){xh(n,te,l,h)}),te}function Nh(e,n,l,h,y){var E=l._reactRootContainer;if(E){var O=E;if(typeof y=="function"){var Q=y;y=function(){var te=Ch(O);Q.call(te)}}xh(n,O,e,y)}else O=Wy(l,n,e,y,h);return Ch(O)}Ys=function(e){switch(e.tag){case 3:var n=e.stateNode;if(n.current.memoizedState.isDehydrated){var l=nn(n.pendingLanes);l!==0&&(vu(n,l|1),Lr(n,Ft()),(lt&6)===0&&(za=Ft()+500,Bi()))}break;case 13:Sl(function(){var h=yr(e,1);if(h!==null){var y=_r();Ci(h,e,1,y)}}),s0(e,1)}},qs=function(e){if(e.tag===13){var n=yr(e,134217728);if(n!==null){var l=_r();Ci(n,e,134217728,l)}s0(e,134217728)}},Rd=function(e){if(e.tag===13){var n=Ro(e),l=yr(e,n);if(l!==null){var h=_r();Ci(l,e,n,h)}s0(e,n)}},Ld=function(){return st},Vl=function(e,n){var l=st;try{return st=e,n()}finally{st=l}},du=function(e,n,l){switch(n){case"input":if(ot(e,l),n=l.name,l.type==="radio"&&n!=null){for(l=e;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<l.length;n++){var h=l[n];if(h!==e&&h.form===e.form){var y=on(h);if(!y)throw Error(o(90));Ue(h),ot(h,y)}}}break;case"textarea":cn(e,l);break;case"select":n=l.value,n!=null&&wr(e,!!l.multiple,n,!1)}},_d=Zf,zl=Sl;var Yy={usingClientEntryPoint:!1,Events:[ul,Kt,on,hu,fu,Zf]},lc={findFiberByHostInstance:Ui,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},qy={bundleType:lc.bundleType,version:lc.version,rendererPackageName:lc.rendererPackageName,rendererConfig:lc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:L.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=xd(e),e===null?null:e.stateNode},findFiberByHostInstance:lc.findFiberByHostInstance||Hy,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Th=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Th.isDisabled&&Th.supportsFiber)try{ui=Th.inject(qy),hn=Th}catch{}}return Mr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Yy,Mr.createPortal=function(e,n){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!l0(n))throw Error(o(200));return Vy(e,n,null,l)},Mr.createRoot=function(e,n){if(!l0(e))throw Error(o(299));var l=!1,h="",y=g1;return n!=null&&(n.unstable_strictMode===!0&&(l=!0),n.identifierPrefix!==void 0&&(h=n.identifierPrefix),n.onRecoverableError!==void 0&&(y=n.onRecoverableError)),n=i0(e,1,!1,null,null,l,!1,h,y),e[Qr]=n.current,vs(e.nodeType===8?e.parentNode:e),new o0(n)},Mr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=xd(n),e=e===null?null:e.stateNode,e},Mr.flushSync=function(e){return Sl(e)},Mr.hydrate=function(e,n,l){if(!Ph(n))throw Error(o(200));return Nh(null,e,n,!0,l)},Mr.hydrateRoot=function(e,n,l){if(!l0(e))throw Error(o(405));var h=l!=null&&l.hydratedSources||null,y=!1,E="",O=g1;if(l!=null&&(l.unstable_strictMode===!0&&(y=!0),l.identifierPrefix!==void 0&&(E=l.identifierPrefix),l.onRecoverableError!==void 0&&(O=l.onRecoverableError)),n=f1(n,null,e,1,l??null,y,!1,E,O),e[Qr]=n.current,vs(e),h)for(e=0;e<h.length;e++)l=h[e],y=l._getVersion,y=y(l._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[l,y]:n.mutableSourceEagerHydrationData.push(l,y);return new Eh(n)},Mr.render=function(e,n,l){if(!Ph(n))throw Error(o(200));return Nh(null,e,n,!1,l)},Mr.unmountComponentAtNode=function(e){if(!Ph(e))throw Error(o(40));return e._reactRootContainer?(Sl(function(){Nh(null,null,e,!1,function(){e._reactRootContainer=null,e[Qr]=null})}),!0):!1},Mr.unstable_batchedUpdates=Zf,Mr.unstable_renderSubtreeIntoContainer=function(e,n,l,h){if(!Ph(l))throw Error(o(200));if(e==null||e._reactInternals===void 0)throw Error(o(38));return Nh(e,n,l,!1,h)},Mr.version="18.3.1-next-f1338f8080-20240426",Mr}var E1;function nv(){if(E1)return c0.exports;E1=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),c0.exports=tv(),c0.exports}var P1;function rv(){if(P1)return Lh;P1=1;var i=nv();return Lh.createRoot=i.createRoot,Lh.hydrateRoot=i.hydrateRoot,Lh}var iv=rv();const sv=ud(iv);var zh={exports:{}},uc={},f0={},p0={},N1;function Ke(){return N1||(N1=1,(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i._registerNode=i.Konva=i.glob=void 0;const t=Math.PI/180;function o(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}i.glob=typeof y1<"u"?y1:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},i.Konva={_global:i.glob,version:"9.3.22",isBrowser:o(),isUnminified:/param/.test((function(d){}).toString()),dblClickWindow:400,getAngle(d){return i.Konva.angleDeg?d*t:d},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return i.Konva.DD.isDragging},isTransforming(){var d;return(d=i.Konva.Transformer)===null||d===void 0?void 0:d.isTransforming()},isDragReady(){return!!i.Konva.DD.node},releaseCanvasOnDestroy:!0,document:i.glob.document,_injectGlobal(d){i.glob.Konva=d}};const a=d=>{i.Konva[d.prototype.getClassName()]=d};i._registerNode=a,i.Konva._injectGlobal(i.Konva)})(p0)),p0}var g0={},T1;function Yt(){return T1||(T1=1,(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.Util=i.Transform=void 0;const t=Ke();class o{constructor(L=[1,0,0,1,0,0]){this.dirty=!1,this.m=L&&L.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new o(this.m)}copyInto(L){L.m[0]=this.m[0],L.m[1]=this.m[1],L.m[2]=this.m[2],L.m[3]=this.m[3],L.m[4]=this.m[4],L.m[5]=this.m[5]}point(L){const M=this.m;return{x:M[0]*L.x+M[2]*L.y+M[4],y:M[1]*L.x+M[3]*L.y+M[5]}}translate(L,M){return this.m[4]+=this.m[0]*L+this.m[2]*M,this.m[5]+=this.m[1]*L+this.m[3]*M,this}scale(L,M){return this.m[0]*=L,this.m[1]*=L,this.m[2]*=M,this.m[3]*=M,this}rotate(L){const M=Math.cos(L),b=Math.sin(L),Y=this.m[0]*M+this.m[2]*b,A=this.m[1]*M+this.m[3]*b,U=this.m[0]*-b+this.m[2]*M,B=this.m[1]*-b+this.m[3]*M;return this.m[0]=Y,this.m[1]=A,this.m[2]=U,this.m[3]=B,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(L,M){const b=this.m[0]+this.m[2]*M,Y=this.m[1]+this.m[3]*M,A=this.m[2]+this.m[0]*L,U=this.m[3]+this.m[1]*L;return this.m[0]=b,this.m[1]=Y,this.m[2]=A,this.m[3]=U,this}multiply(L){const M=this.m[0]*L.m[0]+this.m[2]*L.m[1],b=this.m[1]*L.m[0]+this.m[3]*L.m[1],Y=this.m[0]*L.m[2]+this.m[2]*L.m[3],A=this.m[1]*L.m[2]+this.m[3]*L.m[3],U=this.m[0]*L.m[4]+this.m[2]*L.m[5]+this.m[4],B=this.m[1]*L.m[4]+this.m[3]*L.m[5]+this.m[5];return this.m[0]=M,this.m[1]=b,this.m[2]=Y,this.m[3]=A,this.m[4]=U,this.m[5]=B,this}invert(){const L=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),M=this.m[3]*L,b=-this.m[1]*L,Y=-this.m[2]*L,A=this.m[0]*L,U=L*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),B=L*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=M,this.m[1]=b,this.m[2]=Y,this.m[3]=A,this.m[4]=U,this.m[5]=B,this}getMatrix(){return this.m}decompose(){const L=this.m[0],M=this.m[1],b=this.m[2],Y=this.m[3],A=this.m[4],U=this.m[5],B=L*Y-M*b,V={x:A,y:U,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(L!=0||M!=0){const X=Math.sqrt(L*L+M*M);V.rotation=M>0?Math.acos(L/X):-Math.acos(L/X),V.scaleX=X,V.scaleY=B/X,V.skewX=(L*b+M*Y)/B,V.skewY=0}else if(b!=0||Y!=0){const X=Math.sqrt(b*b+Y*Y);V.rotation=Math.PI/2-(Y>0?Math.acos(-b/X):-Math.acos(b/X)),V.scaleX=B/X,V.scaleY=X,V.skewX=0,V.skewY=(L*b+M*Y)/B}return V.rotation=i.Util._getRotation(V.rotation),V}}i.Transform=o;const a="[object Array]",d="[object Number]",u="[object String]",f="[object Boolean]",p=Math.PI/180,m=180/Math.PI,v="#",x="",P="0",_="Konva warning: ",k="Konva error: ",C="rgb(",N={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},I=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let j=[];const T=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(S){setTimeout(S,60)};i.Util={_isElement(S){return!!(S&&S.nodeType==1)},_isFunction(S){return!!(S&&S.constructor&&S.call&&S.apply)},_isPlainObject(S){return!!S&&S.constructor===Object},_isArray(S){return Object.prototype.toString.call(S)===a},_isNumber(S){return Object.prototype.toString.call(S)===d&&!isNaN(S)&&isFinite(S)},_isString(S){return Object.prototype.toString.call(S)===u},_isBoolean(S){return Object.prototype.toString.call(S)===f},isObject(S){return S instanceof Object},isValidSelector(S){if(typeof S!="string")return!1;const L=S[0];return L==="#"||L==="."||L===L.toUpperCase()},_sign(S){return S===0||S>0?1:-1},requestAnimFrame(S){j.push(S),j.length===1&&T(function(){const L=j;j=[],L.forEach(function(M){M()})})},createCanvasElement(){const S=document.createElement("canvas");try{S.style=S.style||{}}catch{}return S},createImageElement(){return document.createElement("img")},_isInDocument(S){for(;S=S.parentNode;)if(S==document)return!0;return!1},_urlToImage(S,L){const M=i.Util.createImageElement();M.onload=function(){L(M)},M.src=S},_rgbToHex(S,L,M){return((1<<24)+(S<<16)+(L<<8)+M).toString(16).slice(1)},_hexToRgb(S){S=S.replace(v,x);const L=parseInt(S,16);return{r:L>>16&255,g:L>>8&255,b:L&255}},getRandomColor(){let S=(Math.random()*16777215<<0).toString(16);for(;S.length<6;)S=P+S;return v+S},getRGB(S){let L;return S in N?(L=N[S],{r:L[0],g:L[1],b:L[2]}):S[0]===v?this._hexToRgb(S.substring(1)):S.substr(0,4)===C?(L=I.exec(S.replace(/ /g,"")),{r:parseInt(L[1],10),g:parseInt(L[2],10),b:parseInt(L[3],10)}):{r:0,g:0,b:0}},colorToRGBA(S){return S=S||"black",i.Util._namedColorToRBA(S)||i.Util._hex3ColorToRGBA(S)||i.Util._hex4ColorToRGBA(S)||i.Util._hex6ColorToRGBA(S)||i.Util._hex8ColorToRGBA(S)||i.Util._rgbColorToRGBA(S)||i.Util._rgbaColorToRGBA(S)||i.Util._hslColorToRGBA(S)},_namedColorToRBA(S){const L=N[S.toLowerCase()];return L?{r:L[0],g:L[1],b:L[2],a:1}:null},_rgbColorToRGBA(S){if(S.indexOf("rgb(")===0){S=S.match(/rgb\(([^)]+)\)/)[1];const L=S.split(/ *, */).map(Number);return{r:L[0],g:L[1],b:L[2],a:1}}},_rgbaColorToRGBA(S){if(S.indexOf("rgba(")===0){S=S.match(/rgba\(([^)]+)\)/)[1];const L=S.split(/ *, */).map((M,b)=>M.slice(-1)==="%"?b===3?parseInt(M)/100:parseInt(M)/100*255:Number(M));return{r:L[0],g:L[1],b:L[2],a:L[3]}}},_hex8ColorToRGBA(S){if(S[0]==="#"&&S.length===9)return{r:parseInt(S.slice(1,3),16),g:parseInt(S.slice(3,5),16),b:parseInt(S.slice(5,7),16),a:parseInt(S.slice(7,9),16)/255}},_hex6ColorToRGBA(S){if(S[0]==="#"&&S.length===7)return{r:parseInt(S.slice(1,3),16),g:parseInt(S.slice(3,5),16),b:parseInt(S.slice(5,7),16),a:1}},_hex4ColorToRGBA(S){if(S[0]==="#"&&S.length===5)return{r:parseInt(S[1]+S[1],16),g:parseInt(S[2]+S[2],16),b:parseInt(S[3]+S[3],16),a:parseInt(S[4]+S[4],16)/255}},_hex3ColorToRGBA(S){if(S[0]==="#"&&S.length===4)return{r:parseInt(S[1]+S[1],16),g:parseInt(S[2]+S[2],16),b:parseInt(S[3]+S[3],16),a:1}},_hslColorToRGBA(S){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(S)){const[L,...M]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(S),b=Number(M[0])/360,Y=Number(M[1])/100,A=Number(M[2])/100;let U,B,V;if(Y===0)return V=A*255,{r:Math.round(V),g:Math.round(V),b:Math.round(V),a:1};A<.5?U=A*(1+Y):U=A+Y-A*Y;const X=2*A-U,$=[0,0,0];for(let ne=0;ne<3;ne++)B=b+1/3*-(ne-1),B<0&&B++,B>1&&B--,6*B<1?V=X+(U-X)*6*B:2*B<1?V=U:3*B<2?V=X+(U-X)*(2/3-B)*6:V=X,$[ne]=V*255;return{r:Math.round($[0]),g:Math.round($[1]),b:Math.round($[2]),a:1}}},haveIntersection(S,L){return!(L.x>S.x+S.width||L.x+L.width<S.x||L.y>S.y+S.height||L.y+L.height<S.y)},cloneObject(S){const L={};for(const M in S)this._isPlainObject(S[M])?L[M]=this.cloneObject(S[M]):this._isArray(S[M])?L[M]=this.cloneArray(S[M]):L[M]=S[M];return L},cloneArray(S){return S.slice(0)},degToRad(S){return S*p},radToDeg(S){return S*m},_degToRad(S){return i.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),i.Util.degToRad(S)},_radToDeg(S){return i.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),i.Util.radToDeg(S)},_getRotation(S){return t.Konva.angleDeg?i.Util.radToDeg(S):S},_capitalize(S){return S.charAt(0).toUpperCase()+S.slice(1)},throw(S){throw new Error(k+S)},error(S){console.error(k+S)},warn(S){t.Konva.showWarnings&&console.warn(_+S)},each(S,L){for(const M in S)L(M,S[M])},_inRange(S,L,M){return L<=S&&S<M},_getProjectionToSegment(S,L,M,b,Y,A){let U,B,V;const X=(S-M)*(S-M)+(L-b)*(L-b);if(X==0)U=S,B=L,V=(Y-M)*(Y-M)+(A-b)*(A-b);else{const $=((Y-S)*(M-S)+(A-L)*(b-L))/X;$<0?(U=S,B=L,V=(S-Y)*(S-Y)+(L-A)*(L-A)):$>1?(U=M,B=b,V=(M-Y)*(M-Y)+(b-A)*(b-A)):(U=S+$*(M-S),B=L+$*(b-L),V=(U-Y)*(U-Y)+(B-A)*(B-A))}return[U,B,V]},_getProjectionToLine(S,L,M){const b=i.Util.cloneObject(S);let Y=Number.MAX_VALUE;return L.forEach(function(A,U){if(!M&&U===L.length-1)return;const B=L[(U+1)%L.length],V=i.Util._getProjectionToSegment(A.x,A.y,B.x,B.y,S.x,S.y),X=V[0],$=V[1],ne=V[2];ne<Y&&(b.x=X,b.y=$,Y=ne)}),b},_prepareArrayForTween(S,L,M){const b=[],Y=[];if(S.length>L.length){const U=L;L=S,S=U}for(let U=0;U<S.length;U+=2)b.push({x:S[U],y:S[U+1]});for(let U=0;U<L.length;U+=2)Y.push({x:L[U],y:L[U+1]});const A=[];return Y.forEach(function(U){const B=i.Util._getProjectionToLine(U,b,M);A.push(B.x),A.push(B.y)}),A},_prepareToStringify(S){let L;S.visitedByCircularReferenceRemoval=!0;for(const M in S)if(S.hasOwnProperty(M)&&S[M]&&typeof S[M]=="object"){if(L=Object.getOwnPropertyDescriptor(S,M),S[M].visitedByCircularReferenceRemoval||i.Util._isElement(S[M]))if(L.configurable)delete S[M];else return null;else if(i.Util._prepareToStringify(S[M])===null)if(L.configurable)delete S[M];else return null}return delete S.visitedByCircularReferenceRemoval,S},_assign(S,L){for(const M in L)S[M]=L[M];return S},_getFirstPointerId(S){return S.touches?S.changedTouches[0].identifier:S.pointerId||999},releaseCanvas(...S){t.Konva.releaseCanvasOnDestroy&&S.forEach(L=>{L.width=0,L.height=0})},drawRoundedRectPath(S,L,M,b){let Y=0,A=0,U=0,B=0;typeof b=="number"?Y=A=U=B=Math.min(b,L/2,M/2):(Y=Math.min(b[0]||0,L/2,M/2),A=Math.min(b[1]||0,L/2,M/2),B=Math.min(b[2]||0,L/2,M/2),U=Math.min(b[3]||0,L/2,M/2)),S.moveTo(Y,0),S.lineTo(L-A,0),S.arc(L-A,A,A,Math.PI*3/2,0,!1),S.lineTo(L,M-B),S.arc(L-B,M-B,B,0,Math.PI/2,!1),S.lineTo(U,M),S.arc(U,M-U,U,Math.PI/2,Math.PI,!1),S.lineTo(0,Y),S.arc(Y,Y,Y,Math.PI,Math.PI*3/2,!1)}}})(g0)),g0}var cc={},As={},Fs={},R1;function F2(){if(R1)return Fs;R1=1,Object.defineProperty(Fs,"__esModule",{value:!0}),Fs.HitContext=Fs.SceneContext=Fs.Context=void 0;const i=Yt(),t=Ke();function o(j){const T=[],S=j.length,L=i.Util;for(let M=0;M<S;M++){let b=j[M];L._isNumber(b)?b=Math.round(b*1e3)/1e3:L._isString(b)||(b=b+""),T.push(b)}return T}const a=",",d="(",u=")",f="([",p="])",m=";",v="()",x="=",P=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],_=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],k=100;let C=class{constructor(T){this.canvas=T,t.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(T){T.fillEnabled()&&this._fill(T)}_fill(T){}strokeShape(T){T.hasStroke()&&this._stroke(T)}_stroke(T){}fillStrokeShape(T){T.attrs.fillAfterStrokeEnabled?(this.strokeShape(T),this.fillShape(T)):(this.fillShape(T),this.strokeShape(T))}getTrace(T,S){let L=this.traceArr,M=L.length,b="",Y,A,U,B;for(Y=0;Y<M;Y++)A=L[Y],U=A.method,U?(B=A.args,b+=U,T?b+=v:i.Util._isArray(B[0])?b+=f+B.join(a)+p:(S&&(B=B.map(V=>typeof V=="number"?Math.floor(V):V)),b+=d+B.join(a)+u)):(b+=A.property,T||(b+=x+A.val)),b+=m;return b}clearTrace(){this.traceArr=[]}_trace(T){let S=this.traceArr,L;S.push(T),L=S.length,L>=k&&S.shift()}reset(){const T=this.getCanvas().getPixelRatio();this.setTransform(1*T,0,0,1*T,0,0)}getCanvas(){return this.canvas}clear(T){const S=this.getCanvas();T?this.clearRect(T.x||0,T.y||0,T.width||0,T.height||0):this.clearRect(0,0,S.getWidth()/S.pixelRatio,S.getHeight()/S.pixelRatio)}_applyLineCap(T){const S=T.attrs.lineCap;S&&this.setAttr("lineCap",S)}_applyOpacity(T){const S=T.getAbsoluteOpacity();S!==1&&this.setAttr("globalAlpha",S)}_applyLineJoin(T){const S=T.attrs.lineJoin;S&&this.setAttr("lineJoin",S)}setAttr(T,S){this._context[T]=S}arc(T,S,L,M,b,Y){this._context.arc(T,S,L,M,b,Y)}arcTo(T,S,L,M,b){this._context.arcTo(T,S,L,M,b)}beginPath(){this._context.beginPath()}bezierCurveTo(T,S,L,M,b,Y){this._context.bezierCurveTo(T,S,L,M,b,Y)}clearRect(T,S,L,M){this._context.clearRect(T,S,L,M)}clip(...T){this._context.clip.apply(this._context,T)}closePath(){this._context.closePath()}createImageData(T,S){const L=arguments;if(L.length===2)return this._context.createImageData(T,S);if(L.length===1)return this._context.createImageData(T)}createLinearGradient(T,S,L,M){return this._context.createLinearGradient(T,S,L,M)}createPattern(T,S){return this._context.createPattern(T,S)}createRadialGradient(T,S,L,M,b,Y){return this._context.createRadialGradient(T,S,L,M,b,Y)}drawImage(T,S,L,M,b,Y,A,U,B){const V=arguments,X=this._context;V.length===3?X.drawImage(T,S,L):V.length===5?X.drawImage(T,S,L,M,b):V.length===9&&X.drawImage(T,S,L,M,b,Y,A,U,B)}ellipse(T,S,L,M,b,Y,A,U){this._context.ellipse(T,S,L,M,b,Y,A,U)}isPointInPath(T,S,L,M){return L?this._context.isPointInPath(L,T,S,M):this._context.isPointInPath(T,S,M)}fill(...T){this._context.fill.apply(this._context,T)}fillRect(T,S,L,M){this._context.fillRect(T,S,L,M)}strokeRect(T,S,L,M){this._context.strokeRect(T,S,L,M)}fillText(T,S,L,M){M?this._context.fillText(T,S,L,M):this._context.fillText(T,S,L)}measureText(T){return this._context.measureText(T)}getImageData(T,S,L,M){return this._context.getImageData(T,S,L,M)}lineTo(T,S){this._context.lineTo(T,S)}moveTo(T,S){this._context.moveTo(T,S)}rect(T,S,L,M){this._context.rect(T,S,L,M)}roundRect(T,S,L,M,b){this._context.roundRect(T,S,L,M,b)}putImageData(T,S,L){this._context.putImageData(T,S,L)}quadraticCurveTo(T,S,L,M){this._context.quadraticCurveTo(T,S,L,M)}restore(){this._context.restore()}rotate(T){this._context.rotate(T)}save(){this._context.save()}scale(T,S){this._context.scale(T,S)}setLineDash(T){this._context.setLineDash?this._context.setLineDash(T):"mozDash"in this._context?this._context.mozDash=T:"webkitLineDash"in this._context&&(this._context.webkitLineDash=T)}getLineDash(){return this._context.getLineDash()}setTransform(T,S,L,M,b,Y){this._context.setTransform(T,S,L,M,b,Y)}stroke(T){T?this._context.stroke(T):this._context.stroke()}strokeText(T,S,L,M){this._context.strokeText(T,S,L,M)}transform(T,S,L,M,b,Y){this._context.transform(T,S,L,M,b,Y)}translate(T,S){this._context.translate(T,S)}_enableTrace(){let T=this,S=P.length,L=this.setAttr,M,b;const Y=function(A){let U=T[A],B;T[A]=function(){return b=o(Array.prototype.slice.call(arguments,0)),B=U.apply(T,arguments),T._trace({method:A,args:b}),B}};for(M=0;M<S;M++)Y(P[M]);T.setAttr=function(){L.apply(T,arguments);const A=arguments[0];let U=arguments[1];(A==="shadowOffsetX"||A==="shadowOffsetY"||A==="shadowBlur")&&(U=U/this.canvas.getPixelRatio()),T._trace({property:A,val:U})}}_applyGlobalCompositeOperation(T){const S=T.attrs.globalCompositeOperation;!S||S==="source-over"||this.setAttr("globalCompositeOperation",S)}};Fs.Context=C,_.forEach(function(j){Object.defineProperty(C.prototype,j,{get(){return this._context[j]},set(T){this._context[j]=T}})});class N extends C{constructor(T,{willReadFrequently:S=!1}={}){super(T),this._context=T._canvas.getContext("2d",{willReadFrequently:S})}_fillColor(T){const S=T.fill();this.setAttr("fillStyle",S),T._fillFunc(this)}_fillPattern(T){this.setAttr("fillStyle",T._getFillPattern()),T._fillFunc(this)}_fillLinearGradient(T){const S=T._getLinearGradient();S&&(this.setAttr("fillStyle",S),T._fillFunc(this))}_fillRadialGradient(T){const S=T._getRadialGradient();S&&(this.setAttr("fillStyle",S),T._fillFunc(this))}_fill(T){const S=T.fill(),L=T.getFillPriority();if(S&&L==="color"){this._fillColor(T);return}const M=T.getFillPatternImage();if(M&&L==="pattern"){this._fillPattern(T);return}const b=T.getFillLinearGradientColorStops();if(b&&L==="linear-gradient"){this._fillLinearGradient(T);return}const Y=T.getFillRadialGradientColorStops();if(Y&&L==="radial-gradient"){this._fillRadialGradient(T);return}S?this._fillColor(T):M?this._fillPattern(T):b?this._fillLinearGradient(T):Y&&this._fillRadialGradient(T)}_strokeLinearGradient(T){const S=T.getStrokeLinearGradientStartPoint(),L=T.getStrokeLinearGradientEndPoint(),M=T.getStrokeLinearGradientColorStops(),b=this.createLinearGradient(S.x,S.y,L.x,L.y);if(M){for(let Y=0;Y<M.length;Y+=2)b.addColorStop(M[Y],M[Y+1]);this.setAttr("strokeStyle",b)}}_stroke(T){const S=T.dash(),L=T.getStrokeScaleEnabled();if(T.hasStroke()){if(!L){this.save();const b=this.getCanvas().getPixelRatio();this.setTransform(b,0,0,b,0,0)}this._applyLineCap(T),S&&T.dashEnabled()&&(this.setLineDash(S),this.setAttr("lineDashOffset",T.dashOffset())),this.setAttr("lineWidth",T.strokeWidth()),T.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),T.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(T):this.setAttr("strokeStyle",T.stroke()),T._strokeFunc(this),L||this.restore()}}_applyShadow(T){var S,L,M;const b=(S=T.getShadowRGBA())!==null&&S!==void 0?S:"black",Y=(L=T.getShadowBlur())!==null&&L!==void 0?L:5,A=(M=T.getShadowOffset())!==null&&M!==void 0?M:{x:0,y:0},U=T.getAbsoluteScale(),B=this.canvas.getPixelRatio(),V=U.x*B,X=U.y*B;this.setAttr("shadowColor",b),this.setAttr("shadowBlur",Y*Math.min(Math.abs(V),Math.abs(X))),this.setAttr("shadowOffsetX",A.x*V),this.setAttr("shadowOffsetY",A.y*X)}}Fs.SceneContext=N;class I extends C{constructor(T){super(T),this._context=T._canvas.getContext("2d",{willReadFrequently:!0})}_fill(T){this.save(),this.setAttr("fillStyle",T.colorKey),T._fillFuncHit(this),this.restore()}strokeShape(T){T.hasHitStroke()&&this._stroke(T)}_stroke(T){if(T.hasHitStroke()){const S=T.getStrokeScaleEnabled();if(!S){this.save();const b=this.getCanvas().getPixelRatio();this.setTransform(b,0,0,b,0,0)}this._applyLineCap(T);const L=T.hitStrokeWidth(),M=L==="auto"?T.strokeWidth():L;this.setAttr("lineWidth",M),this.setAttr("strokeStyle",T.colorKey),T._strokeFuncHit(this),S||this.restore()}}}return Fs.HitContext=I,Fs}var L1;function lf(){if(L1)return As;L1=1,Object.defineProperty(As,"__esModule",{value:!0}),As.HitCanvas=As.SceneCanvas=As.Canvas=void 0;const i=Yt(),t=F2(),o=Ke();let a;function d(){if(a)return a;const m=i.Util.createCanvasElement(),v=m.getContext("2d");return a=(function(){const x=o.Konva._global.devicePixelRatio||1,P=v.webkitBackingStorePixelRatio||v.mozBackingStorePixelRatio||v.msBackingStorePixelRatio||v.oBackingStorePixelRatio||v.backingStorePixelRatio||1;return x/P})(),i.Util.releaseCanvas(m),a}class u{constructor(v){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const P=(v||{}).pixelRatio||o.Konva.pixelRatio||d();this.pixelRatio=P,this._canvas=i.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(v){const x=this.pixelRatio;this.pixelRatio=v,this.setSize(this.getWidth()/x,this.getHeight()/x)}setWidth(v){this.width=this._canvas.width=v*this.pixelRatio,this._canvas.style.width=v+"px";const x=this.pixelRatio;this.getContext()._context.scale(x,x)}setHeight(v){this.height=this._canvas.height=v*this.pixelRatio,this._canvas.style.height=v+"px";const x=this.pixelRatio;this.getContext()._context.scale(x,x)}getWidth(){return this.width}getHeight(){return this.height}setSize(v,x){this.setWidth(v||0),this.setHeight(x||0)}toDataURL(v,x){try{return this._canvas.toDataURL(v,x)}catch{try{return this._canvas.toDataURL()}catch(_){return i.Util.error("Unable to get data URL. "+_.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}As.Canvas=u;class f extends u{constructor(v={width:0,height:0,willReadFrequently:!1}){super(v),this.context=new t.SceneContext(this,{willReadFrequently:v.willReadFrequently}),this.setSize(v.width,v.height)}}As.SceneCanvas=f;class p extends u{constructor(v={width:0,height:0}){super(v),this.hitCanvas=!0,this.context=new t.HitContext(this),this.setSize(v.width,v.height)}}return As.HitCanvas=p,As}var m0={},M1;function sp(){return M1||(M1=1,(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.DD=void 0;const t=Ke(),o=Yt();i.DD={get isDragging(){let a=!1;return i.DD._dragElements.forEach(d=>{d.dragStatus==="dragging"&&(a=!0)}),a},justDragged:!1,get node(){let a;return i.DD._dragElements.forEach(d=>{a=d.node}),a},_dragElements:new Map,_drag(a){const d=[];i.DD._dragElements.forEach((u,f)=>{const{node:p}=u,m=p.getStage();m.setPointersPositions(a),u.pointerId===void 0&&(u.pointerId=o.Util._getFirstPointerId(a));const v=m._changedPointerPositions.find(x=>x.id===u.pointerId);if(v){if(u.dragStatus!=="dragging"){const x=p.dragDistance();if(Math.max(Math.abs(v.x-u.startPointerPos.x),Math.abs(v.y-u.startPointerPos.y))<x||(p.startDrag({evt:a}),!p.isDragging()))return}p._setDragPosition(a,u),d.push(p)}}),d.forEach(u=>{u.fire("dragmove",{type:"dragmove",target:u,evt:a},!0)})},_endDragBefore(a){const d=[];i.DD._dragElements.forEach(u=>{const{node:f}=u,p=f.getStage();if(a&&p.setPointersPositions(a),!p._changedPointerPositions.find(x=>x.id===u.pointerId))return;(u.dragStatus==="dragging"||u.dragStatus==="stopped")&&(i.DD.justDragged=!0,t.Konva._mouseListenClick=!1,t.Konva._touchListenClick=!1,t.Konva._pointerListenClick=!1,u.dragStatus="stopped");const v=u.node.getLayer()||u.node instanceof t.Konva.Stage&&u.node;v&&d.indexOf(v)===-1&&d.push(v)}),d.forEach(u=>{u.draw()})},_endDragAfter(a){i.DD._dragElements.forEach((d,u)=>{d.dragStatus==="stopped"&&d.node.fire("dragend",{type:"dragend",target:d.node,evt:a},!0),d.dragStatus!=="dragging"&&i.DD._dragElements.delete(u)})}},t.Konva.isBrowser&&(window.addEventListener("mouseup",i.DD._endDragBefore,!0),window.addEventListener("touchend",i.DD._endDragBefore,!0),window.addEventListener("touchcancel",i.DD._endDragBefore,!0),window.addEventListener("mousemove",i.DD._drag),window.addEventListener("touchmove",i.DD._drag),window.addEventListener("mouseup",i.DD._endDragAfter,!1),window.addEventListener("touchend",i.DD._endDragAfter,!1),window.addEventListener("touchcancel",i.DD._endDragAfter,!1))})(m0)),m0}var y0={},Dr={},D1;function nt(){if(D1)return Dr;D1=1,Object.defineProperty(Dr,"__esModule",{value:!0}),Dr.RGBComponent=a,Dr.alphaComponent=d,Dr.getNumberValidator=u,Dr.getNumberOrArrayOfNumbersValidator=f,Dr.getNumberOrAutoValidator=p,Dr.getStringValidator=m,Dr.getStringOrGradientValidator=v,Dr.getFunctionValidator=x,Dr.getNumberArrayValidator=P,Dr.getBooleanValidator=_,Dr.getComponentValidator=k;const i=Ke(),t=Yt();function o(C){return t.Util._isString(C)?'"'+C+'"':Object.prototype.toString.call(C)==="[object Number]"||t.Util._isBoolean(C)?C:Object.prototype.toString.call(C)}function a(C){return C>255?255:C<0?0:Math.round(C)}function d(C){return C>1?1:C<1e-4?1e-4:C}function u(){if(i.Konva.isUnminified)return function(C,N){return t.Util._isNumber(C)||t.Util.warn(o(C)+' is a not valid value for "'+N+'" attribute. The value should be a number.'),C}}function f(C){if(i.Konva.isUnminified)return function(N,I){let j=t.Util._isNumber(N),T=t.Util._isArray(N)&&N.length==C;return!j&&!T&&t.Util.warn(o(N)+' is a not valid value for "'+I+'" attribute. The value should be a number or Array<number>('+C+")"),N}}function p(){if(i.Konva.isUnminified)return function(C,N){return t.Util._isNumber(C)||C==="auto"||t.Util.warn(o(C)+' is a not valid value for "'+N+'" attribute. The value should be a number or "auto".'),C}}function m(){if(i.Konva.isUnminified)return function(C,N){return t.Util._isString(C)||t.Util.warn(o(C)+' is a not valid value for "'+N+'" attribute. The value should be a string.'),C}}function v(){if(i.Konva.isUnminified)return function(C,N){const I=t.Util._isString(C),j=Object.prototype.toString.call(C)==="[object CanvasGradient]"||C&&C.addColorStop;return I||j||t.Util.warn(o(C)+' is a not valid value for "'+N+'" attribute. The value should be a string or a native gradient.'),C}}function x(){if(i.Konva.isUnminified)return function(C,N){return t.Util._isFunction(C)||t.Util.warn(o(C)+' is a not valid value for "'+N+'" attribute. The value should be a function.'),C}}function P(){if(i.Konva.isUnminified)return function(C,N){const I=Int8Array?Object.getPrototypeOf(Int8Array):null;return I&&C instanceof I||(t.Util._isArray(C)?C.forEach(function(j){t.Util._isNumber(j)||t.Util.warn('"'+N+'" attribute has non numeric element '+j+". Make sure that all elements are numbers.")}):t.Util.warn(o(C)+' is a not valid value for "'+N+'" attribute. The value should be a array of numbers.')),C}}function _(){if(i.Konva.isUnminified)return function(C,N){return C===!0||C===!1||t.Util.warn(o(C)+' is a not valid value for "'+N+'" attribute. The value should be a boolean.'),C}}function k(C){if(i.Konva.isUnminified)return function(N,I){return N==null||t.Util.isObject(N)||t.Util.warn(o(N)+' is a not valid value for "'+I+'" attribute. The value should be an object with properties '+C),N}}return Dr}var I1;function et(){return I1||(I1=1,(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.Factory=void 0;const t=Yt(),o=nt(),a="get",d="set";i.Factory={addGetterSetter(u,f,p,m,v){i.Factory.addGetter(u,f,p),i.Factory.addSetter(u,f,m,v),i.Factory.addOverloadedGetterSetter(u,f)},addGetter(u,f,p){const m=a+t.Util._capitalize(f);u.prototype[m]=u.prototype[m]||function(){const v=this.attrs[f];return v===void 0?p:v}},addSetter(u,f,p,m){const v=d+t.Util._capitalize(f);u.prototype[v]||i.Factory.overWriteSetter(u,f,p,m)},overWriteSetter(u,f,p,m){const v=d+t.Util._capitalize(f);u.prototype[v]=function(x){return p&&x!==void 0&&x!==null&&(x=p.call(this,x,f)),this._setAttr(f,x),m&&m.call(this),this}},addComponentsGetterSetter(u,f,p,m,v){const x=p.length,P=t.Util._capitalize,_=a+P(f),k=d+P(f);u.prototype[_]=function(){const N={};for(let I=0;I<x;I++){const j=p[I];N[j]=this.getAttr(f+P(j))}return N};const C=(0,o.getComponentValidator)(p);u.prototype[k]=function(N){const I=this.attrs[f];m&&(N=m.call(this,N,f)),C&&C.call(this,N,f);for(const j in N)N.hasOwnProperty(j)&&this._setAttr(f+P(j),N[j]);return N||p.forEach(j=>{this._setAttr(f+P(j),void 0)}),this._fireChangeEvent(f,I,N),v&&v.call(this),this},i.Factory.addOverloadedGetterSetter(u,f)},addOverloadedGetterSetter(u,f){const p=t.Util._capitalize(f),m=d+p,v=a+p;u.prototype[f]=function(){return arguments.length?(this[m](arguments[0]),this):this[v]()}},addDeprecatedGetterSetter(u,f,p,m){t.Util.error("Adding deprecated "+f);const v=a+t.Util._capitalize(f),x=f+" property is deprecated and will be removed soon. Look at Konva change log for more information.";u.prototype[v]=function(){t.Util.error(x);const P=this.attrs[f];return P===void 0?p:P},i.Factory.addSetter(u,f,m,function(){t.Util.error(x)}),i.Factory.addOverloadedGetterSetter(u,f)},backCompat(u,f){t.Util.each(f,function(p,m){const v=u.prototype[m],x=a+t.Util._capitalize(p),P=d+t.Util._capitalize(p);function _(){v.apply(this,arguments),t.Util.error('"'+p+'" method is deprecated and will be removed soon. Use ""'+m+'" instead.')}u.prototype[p]=_,u.prototype[x]=_,u.prototype[P]=_})},afterSetFilter(){this._filterUpToDate=!1}}})(y0)),y0}var A1;function tn(){if(A1)return cc;A1=1,Object.defineProperty(cc,"__esModule",{value:!0}),cc.Node=void 0;const i=lf(),t=sp(),o=et(),a=Ke(),d=Yt(),u=nt(),f="absoluteOpacity",p="allEventListeners",m="absoluteTransform",v="absoluteScale",x="canvas",P="Change",_="children",k="konva",C="listening",N="mouseenter",I="mouseleave",j="pointerenter",T="pointerleave",S="touchenter",L="touchleave",M="set",b="Shape",Y=" ",A="stage",U="transform",B="Stage",V="visible",X=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(Y);let $=1,ne=class V0{constructor(D){this._id=$++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(D),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(D){(D===U||D===m)&&this._cache.get(D)?this._cache.get(D).dirty=!0:D?this._cache.delete(D):this._cache.clear()}_getCache(D,z){let W=this._cache.get(D);return(W===void 0||(D===U||D===m)&&W.dirty===!0)&&(W=z.call(this),this._cache.set(D,W)),W}_calculate(D,z,W){if(!this._attachedDepsListeners.get(D)){const G=z.map(F=>F+"Change.konva").join(Y);this.on(G,()=>{this._clearCache(D)}),this._attachedDepsListeners.set(D,!0)}return this._getCache(D,W)}_getCanvasCache(){return this._cache.get(x)}_clearSelfAndDescendantCache(D){this._clearCache(D),D===m&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(x)){const{scene:D,filter:z,hit:W,buffer:G}=this._cache.get(x);d.Util.releaseCanvas(D,z,W,G),this._cache.delete(x)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(D){const z=D||{};let W={};(z.x===void 0||z.y===void 0||z.width===void 0||z.height===void 0)&&(W=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let G=Math.ceil(z.width||W.width),F=Math.ceil(z.height||W.height),J=z.pixelRatio,Z=z.x===void 0?Math.floor(W.x):z.x,he=z.y===void 0?Math.floor(W.y):z.y,me=z.offset||0,le=z.drawBorder||!1,q=z.hitCanvasPixelRatio||1;if(!G||!F){d.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const se=Math.abs(Math.round(W.x)-Z)>.5?1:0,ye=Math.abs(Math.round(W.y)-he)>.5?1:0;G+=me*2+se,F+=me*2+ye,Z-=me,he-=me;const xe=new i.SceneCanvas({pixelRatio:J,width:G,height:F}),Pe=new i.SceneCanvas({pixelRatio:J,width:0,height:0,willReadFrequently:!0}),Ue=new i.HitCanvas({pixelRatio:q,width:G,height:F}),Oe=xe.getContext(),rt=Ue.getContext(),Ge=new i.SceneCanvas({width:xe.width/xe.pixelRatio+Math.abs(Z),height:xe.height/xe.pixelRatio+Math.abs(he),pixelRatio:xe.pixelRatio}),Ut=Ge.getContext();return Ue.isCache=!0,xe.isCache=!0,this._cache.delete(x),this._filterUpToDate=!1,z.imageSmoothingEnabled===!1&&(xe.getContext()._context.imageSmoothingEnabled=!1,Pe.getContext()._context.imageSmoothingEnabled=!1),Oe.save(),rt.save(),Ut.save(),Oe.translate(-Z,-he),rt.translate(-Z,-he),Ut.translate(-Z,-he),Ge.x=Z,Ge.y=he,this._isUnderCache=!0,this._clearSelfAndDescendantCache(f),this._clearSelfAndDescendantCache(v),this.drawScene(xe,this,Ge),this.drawHit(Ue,this),this._isUnderCache=!1,Oe.restore(),rt.restore(),le&&(Oe.save(),Oe.beginPath(),Oe.rect(0,0,G,F),Oe.closePath(),Oe.setAttr("strokeStyle","red"),Oe.setAttr("lineWidth",5),Oe.stroke(),Oe.restore()),this._cache.set(x,{scene:xe,filter:Pe,hit:Ue,buffer:Ge,x:Z,y:he}),this._requestDraw(),this}isCached(){return this._cache.has(x)}getClientRect(D){throw new Error('abstract "getClientRect" method call')}_transformedRect(D,z){const W=[{x:D.x,y:D.y},{x:D.x+D.width,y:D.y},{x:D.x+D.width,y:D.y+D.height},{x:D.x,y:D.y+D.height}];let G=1/0,F=1/0,J=-1/0,Z=-1/0;const he=this.getAbsoluteTransform(z);return W.forEach(function(me){const le=he.point(me);G===void 0&&(G=J=le.x,F=Z=le.y),G=Math.min(G,le.x),F=Math.min(F,le.y),J=Math.max(J,le.x),Z=Math.max(Z,le.y)}),{x:G,y:F,width:J-G,height:Z-F}}_drawCachedSceneCanvas(D){D.save(),D._applyOpacity(this),D._applyGlobalCompositeOperation(this);const z=this._getCanvasCache();D.translate(z.x,z.y);const W=this._getCachedSceneCanvas(),G=W.pixelRatio;D.drawImage(W._canvas,0,0,W.width/G,W.height/G),D.restore()}_drawCachedHitCanvas(D){const z=this._getCanvasCache(),W=z.hit;D.save(),D.translate(z.x,z.y),D.drawImage(W._canvas,0,0,W.width/W.pixelRatio,W.height/W.pixelRatio),D.restore()}_getCachedSceneCanvas(){let D=this.filters(),z=this._getCanvasCache(),W=z.scene,G=z.filter,F=G.getContext(),J,Z,he,me;if(D){if(!this._filterUpToDate){const le=W.pixelRatio;G.setSize(W.width/W.pixelRatio,W.height/W.pixelRatio);try{for(J=D.length,F.clear(),F.drawImage(W._canvas,0,0,W.getWidth()/le,W.getHeight()/le),Z=F.getImageData(0,0,G.getWidth(),G.getHeight()),he=0;he<J;he++){if(me=D[he],typeof me!="function"){d.Util.error("Filter should be type of function, but got "+typeof me+" instead. Please check correct filters");continue}me.call(this,Z),F.putImageData(Z,0,0)}}catch(q){d.Util.error("Unable to apply filter. "+q.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return G}return W}on(D,z){if(this._cache&&this._cache.delete(p),arguments.length===3)return this._delegate.apply(this,arguments);const W=D.split(Y);for(let G=0;G<W.length;G++){const J=W[G].split("."),Z=J[0],he=J[1]||"";this.eventListeners[Z]||(this.eventListeners[Z]=[]),this.eventListeners[Z].push({name:he,handler:z})}return this}off(D,z){let W=(D||"").split(Y),G=W.length,F,J,Z,he,me,le;if(this._cache&&this._cache.delete(p),!D)for(J in this.eventListeners)this._off(J);for(F=0;F<G;F++)if(Z=W[F],he=Z.split("."),me=he[0],le=he[1],me)this.eventListeners[me]&&this._off(me,le,z);else for(J in this.eventListeners)this._off(J,le,z);return this}dispatchEvent(D){const z={target:this,type:D.type,evt:D};return this.fire(D.type,z),this}addEventListener(D,z){return this.on(D,function(W){z.call(this,W.evt)}),this}removeEventListener(D){return this.off(D),this}_delegate(D,z,W){const G=this;this.on(D,function(F){const J=F.target.findAncestors(z,!0,G);for(let Z=0;Z<J.length;Z++)F=d.Util.cloneObject(F),F.currentTarget=J[Z],W.call(J[Z],F)})}remove(){return this.isDragging()&&this.stopDrag(),t.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(m),this._clearSelfAndDescendantCache(f),this._clearSelfAndDescendantCache(v),this._clearSelfAndDescendantCache(A),this._clearSelfAndDescendantCache(V),this._clearSelfAndDescendantCache(C)}_remove(){this._clearCaches();const D=this.getParent();D&&D.children&&(D.children.splice(this.index,1),D._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(D){const z="get"+d.Util._capitalize(D);return d.Util._isFunction(this[z])?this[z]():this.attrs[D]}getAncestors(){let D=this.getParent(),z=[];for(;D;)z.push(D),D=D.getParent();return z}getAttrs(){return this.attrs||{}}setAttrs(D){return this._batchTransformChanges(()=>{let z,W;if(!D)return this;for(z in D)z!==_&&(W=M+d.Util._capitalize(z),d.Util._isFunction(this[W])?this[W](D[z]):this._setAttr(z,D[z]))}),this}isListening(){return this._getCache(C,this._isListening)}_isListening(D){if(!this.listening())return!1;const W=this.getParent();return W&&W!==D&&this!==D?W._isListening(D):!0}isVisible(){return this._getCache(V,this._isVisible)}_isVisible(D){if(!this.visible())return!1;const W=this.getParent();return W&&W!==D&&this!==D?W._isVisible(D):!0}shouldDrawHit(D,z=!1){if(D)return this._isVisible(D)&&this._isListening(D);const W=this.getLayer();let G=!1;t.DD._dragElements.forEach(J=>{J.dragStatus==="dragging"&&(J.node.nodeType==="Stage"||J.node.getLayer()===W)&&(G=!0)});const F=!z&&!a.Konva.hitOnDragEnabled&&(G||a.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!F}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let D=this.getDepth(),z=this,W=0,G,F,J,Z;function he(le){for(G=[],F=le.length,J=0;J<F;J++)Z=le[J],W++,Z.nodeType!==b&&(G=G.concat(Z.getChildren().slice())),Z._id===z._id&&(J=F);G.length>0&&G[0].getDepth()<=D&&he(G)}const me=this.getStage();return z.nodeType!==B&&me&&he(me.getChildren()),W}getDepth(){let D=0,z=this.parent;for(;z;)D++,z=z.parent;return D}_batchTransformChanges(D){this._batchingTransformChange=!0,D(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(U),this._clearSelfAndDescendantCache(m)),this._needClearTransformCache=!1}setPosition(D){return this._batchTransformChanges(()=>{this.x(D.x),this.y(D.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const D=this.getStage();if(!D)return null;const z=D.getPointerPosition();if(!z)return null;const W=this.getAbsoluteTransform().copy();return W.invert(),W.point(z)}getAbsolutePosition(D){let z=!1,W=this.parent;for(;W;){if(W.isCached()){z=!0;break}W=W.parent}z&&!D&&(D=!0);const G=this.getAbsoluteTransform(D).getMatrix(),F=new d.Transform,J=this.offset();return F.m=G.slice(),F.translate(J.x,J.y),F.getTranslation()}setAbsolutePosition(D){const{x:z,y:W,...G}=this._clearTransform();this.attrs.x=z,this.attrs.y=W,this._clearCache(U);const F=this._getAbsoluteTransform().copy();return F.invert(),F.translate(D.x,D.y),D={x:this.attrs.x+F.getTranslation().x,y:this.attrs.y+F.getTranslation().y},this._setTransform(G),this.setPosition({x:D.x,y:D.y}),this._clearCache(U),this._clearSelfAndDescendantCache(m),this}_setTransform(D){let z;for(z in D)this.attrs[z]=D[z]}_clearTransform(){const D={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,D}move(D){let z=D.x,W=D.y,G=this.x(),F=this.y();return z!==void 0&&(G+=z),W!==void 0&&(F+=W),this.setPosition({x:G,y:F}),this}_eachAncestorReverse(D,z){let W=[],G=this.getParent(),F,J;if(!(z&&z._id===this._id)){for(W.unshift(this);G&&(!z||G._id!==z._id);)W.unshift(G),G=G.parent;for(F=W.length,J=0;J<F;J++)D(W[J])}}rotate(D){return this.rotation(this.rotation()+D),this}moveToTop(){if(!this.parent)return d.Util.warn("Node has no parent. moveToTop function is ignored."),!1;const D=this.index,z=this.parent.getChildren().length;return D<z-1?(this.parent.children.splice(D,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return d.Util.warn("Node has no parent. moveUp function is ignored."),!1;const D=this.index,z=this.parent.getChildren().length;return D<z-1?(this.parent.children.splice(D,1),this.parent.children.splice(D+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return d.Util.warn("Node has no parent. moveDown function is ignored."),!1;const D=this.index;return D>0?(this.parent.children.splice(D,1),this.parent.children.splice(D-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return d.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const D=this.index;return D>0?(this.parent.children.splice(D,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(D){if(!this.parent)return d.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(D<0||D>=this.parent.children.length)&&d.Util.warn("Unexpected value "+D+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const z=this.index;return this.parent.children.splice(z,1),this.parent.children.splice(D,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(f,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let D=this.opacity();const z=this.getParent();return z&&!z._isUnderCache&&(D*=z.getAbsoluteOpacity()),D}moveTo(D){return this.getParent()!==D&&(this._remove(),D.add(this)),this}toObject(){let D=this.getAttrs(),z,W,G,F,J;const Z={attrs:{},className:this.getClassName()};for(z in D)W=D[z],J=d.Util.isObject(W)&&!d.Util._isPlainObject(W)&&!d.Util._isArray(W),!J&&(G=typeof this[z]=="function"&&this[z],delete D[z],F=G?G.call(this):null,D[z]=W,F!==W&&(Z.attrs[z]=W));return d.Util._prepareToStringify(Z)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(D,z,W){const G=[];z&&this._isMatch(D)&&G.push(this);let F=this.parent;for(;F;){if(F===W)return G;F._isMatch(D)&&G.push(F),F=F.parent}return G}isAncestorOf(D){return!1}findAncestor(D,z,W){return this.findAncestors(D,z,W)[0]}_isMatch(D){if(!D)return!1;if(typeof D=="function")return D(this);let z=D.replace(/ /g,"").split(","),W=z.length,G,F;for(G=0;G<W;G++)if(F=z[G],d.Util.isValidSelector(F)||(d.Util.warn('Selector "'+F+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),d.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),d.Util.warn("Konva is awesome, right?")),F.charAt(0)==="#"){if(this.id()===F.slice(1))return!0}else if(F.charAt(0)==="."){if(this.hasName(F.slice(1)))return!0}else if(this.className===F||this.nodeType===F)return!0;return!1}getLayer(){const D=this.getParent();return D?D.getLayer():null}getStage(){return this._getCache(A,this._getStage)}_getStage(){const D=this.getParent();return D?D.getStage():null}fire(D,z={},W){return z.target=z.target||this,W?this._fireAndBubble(D,z):this._fire(D,z),this}getAbsoluteTransform(D){return D?this._getAbsoluteTransform(D):this._getCache(m,this._getAbsoluteTransform)}_getAbsoluteTransform(D){let z;if(D)return z=new d.Transform,this._eachAncestorReverse(function(W){const G=W.transformsEnabled();G==="all"?z.multiply(W.getTransform()):G==="position"&&z.translate(W.x()-W.offsetX(),W.y()-W.offsetY())},D),z;{z=this._cache.get(m)||new d.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(z):z.reset();const W=this.transformsEnabled();if(W==="all")z.multiply(this.getTransform());else if(W==="position"){const G=this.attrs.x||0,F=this.attrs.y||0,J=this.attrs.offsetX||0,Z=this.attrs.offsetY||0;z.translate(G-J,F-Z)}return z.dirty=!1,z}}getAbsoluteScale(D){let z=this;for(;z;)z._isUnderCache&&(D=z),z=z.getParent();const G=this.getAbsoluteTransform(D).decompose();return{x:G.scaleX,y:G.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(U,this._getTransform)}_getTransform(){var D,z;const W=this._cache.get(U)||new d.Transform;W.reset();const G=this.x(),F=this.y(),J=a.Konva.getAngle(this.rotation()),Z=(D=this.attrs.scaleX)!==null&&D!==void 0?D:1,he=(z=this.attrs.scaleY)!==null&&z!==void 0?z:1,me=this.attrs.skewX||0,le=this.attrs.skewY||0,q=this.attrs.offsetX||0,se=this.attrs.offsetY||0;return(G!==0||F!==0)&&W.translate(G,F),J!==0&&W.rotate(J),(me!==0||le!==0)&&W.skew(me,le),(Z!==1||he!==1)&&W.scale(Z,he),(q!==0||se!==0)&&W.translate(-1*q,-1*se),W.dirty=!1,W}clone(D){let z=d.Util.cloneObject(this.attrs),W,G,F,J,Z;for(W in D)z[W]=D[W];const he=new this.constructor(z);for(W in this.eventListeners)for(G=this.eventListeners[W],F=G.length,J=0;J<F;J++)Z=G[J],Z.name.indexOf(k)<0&&(he.eventListeners[W]||(he.eventListeners[W]=[]),he.eventListeners[W].push(Z));return he}_toKonvaCanvas(D){D=D||{};const z=this.getClientRect(),W=this.getStage(),G=D.x!==void 0?D.x:Math.floor(z.x),F=D.y!==void 0?D.y:Math.floor(z.y),J=D.pixelRatio||1,Z=new i.SceneCanvas({width:D.width||Math.ceil(z.width)||(W?W.width():0),height:D.height||Math.ceil(z.height)||(W?W.height():0),pixelRatio:J}),he=Z.getContext(),me=new i.SceneCanvas({width:Z.width/Z.pixelRatio+Math.abs(G),height:Z.height/Z.pixelRatio+Math.abs(F),pixelRatio:Z.pixelRatio});return D.imageSmoothingEnabled===!1&&(he._context.imageSmoothingEnabled=!1),he.save(),(G||F)&&he.translate(-1*G,-1*F),this.drawScene(Z,void 0,me),he.restore(),Z}toCanvas(D){return this._toKonvaCanvas(D)._canvas}toDataURL(D){D=D||{};const z=D.mimeType||null,W=D.quality||null,G=this._toKonvaCanvas(D).toDataURL(z,W);return D.callback&&D.callback(G),G}toImage(D){return new Promise((z,W)=>{try{const G=D==null?void 0:D.callback;G&&delete D.callback,d.Util._urlToImage(this.toDataURL(D),function(F){z(F),G==null||G(F)})}catch(G){W(G)}})}toBlob(D){return new Promise((z,W)=>{try{const G=D==null?void 0:D.callback;G&&delete D.callback,this.toCanvas(D).toBlob(F=>{z(F),G==null||G(F)},D==null?void 0:D.mimeType,D==null?void 0:D.quality)}catch(G){W(G)}})}setSize(D){return this.width(D.width),this.height(D.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():a.Konva.dragDistance}_off(D,z,W){let G=this.eventListeners[D],F,J,Z;for(F=0;F<G.length;F++)if(J=G[F].name,Z=G[F].handler,(J!=="konva"||z==="konva")&&(!z||J===z)&&(!W||W===Z)){if(G.splice(F,1),G.length===0){delete this.eventListeners[D];break}F--}}_fireChangeEvent(D,z,W){this._fire(D+P,{oldVal:z,newVal:W})}addName(D){if(!this.hasName(D)){const z=this.name(),W=z?z+" "+D:D;this.name(W)}return this}hasName(D){if(!D)return!1;const z=this.name();return z?(z||"").split(/\s/g).indexOf(D)!==-1:!1}removeName(D){const z=(this.name()||"").split(/\s/g),W=z.indexOf(D);return W!==-1&&(z.splice(W,1),this.name(z.join(" "))),this}setAttr(D,z){const W=this[M+d.Util._capitalize(D)];return d.Util._isFunction(W)?W.call(this,z):this._setAttr(D,z),this}_requestDraw(){if(a.Konva.autoDrawEnabled){const D=this.getLayer()||this.getStage();D==null||D.batchDraw()}}_setAttr(D,z){const W=this.attrs[D];W===z&&!d.Util.isObject(z)||(z==null?delete this.attrs[D]:this.attrs[D]=z,this._shouldFireChangeEvents&&this._fireChangeEvent(D,W,z),this._requestDraw())}_setComponentAttr(D,z,W){let G;W!==void 0&&(G=this.attrs[D],G||(this.attrs[D]=this.getAttr(D)),this.attrs[D][z]=W,this._fireChangeEvent(D,G,W))}_fireAndBubble(D,z,W){z&&this.nodeType===b&&(z.target=this);const G=[N,I,j,T,S,L];if(!(G.indexOf(D)!==-1&&(W&&(this===W||this.isAncestorOf&&this.isAncestorOf(W))||this.nodeType==="Stage"&&!W))){this._fire(D,z);const J=G.indexOf(D)!==-1&&W&&W.isAncestorOf&&W.isAncestorOf(this)&&!W.isAncestorOf(this.parent);(z&&!z.cancelBubble||!z)&&this.parent&&this.parent.isListening()&&!J&&(W&&W.parent?this._fireAndBubble.call(this.parent,D,z,W):this._fireAndBubble.call(this.parent,D,z))}}_getProtoListeners(D){var z,W,G;const F=(z=this._cache.get(p))!==null&&z!==void 0?z:{};let J=F==null?void 0:F[D];if(J===void 0){J=[];let Z=Object.getPrototypeOf(this);for(;Z;){const he=(G=(W=Z.eventListeners)===null||W===void 0?void 0:W[D])!==null&&G!==void 0?G:[];J.push(...he),Z=Object.getPrototypeOf(Z)}F[D]=J,this._cache.set(p,F)}return J}_fire(D,z){z=z||{},z.currentTarget=this,z.type=D;const W=this._getProtoListeners(D);if(W)for(let F=0;F<W.length;F++)W[F].handler.call(this,z);const G=this.eventListeners[D];if(G)for(let F=0;F<G.length;F++)G[F].handler.call(this,z)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(D){const z=D?D.pointerId:void 0,W=this.getStage(),G=this.getAbsolutePosition();if(!W)return;const F=W._getPointerById(z)||W._changedPointerPositions[0]||G;t.DD._dragElements.set(this._id,{node:this,startPointerPos:F,offset:{x:F.x-G.x,y:F.y-G.y},dragStatus:"ready",pointerId:z})}startDrag(D,z=!0){t.DD._dragElements.has(this._id)||this._createDragElement(D);const W=t.DD._dragElements.get(this._id);W.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:D&&D.evt},z)}_setDragPosition(D,z){const W=this.getStage()._getPointerById(z.pointerId);if(!W)return;let G={x:W.x-z.offset.x,y:W.y-z.offset.y};const F=this.dragBoundFunc();if(F!==void 0){const J=F.call(this,G,D);J?G=J:d.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==G.x||this._lastPos.y!==G.y)&&(this.setAbsolutePosition(G),this._requestDraw()),this._lastPos=G}stopDrag(D){const z=t.DD._dragElements.get(this._id);z&&(z.dragStatus="stopped"),t.DD._endDragBefore(D),t.DD._endDragAfter(D)}setDraggable(D){this._setAttr("draggable",D),this._dragChange()}isDragging(){const D=t.DD._dragElements.get(this._id);return D?D.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(D){if(!(!(D.evt.button!==void 0)||a.Konva.dragButtons.indexOf(D.evt.button)>=0)||this.isDragging())return;let G=!1;t.DD._dragElements.forEach(F=>{this.isAncestorOf(F.node)&&(G=!0)}),G||this._createDragElement(D)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const z=t.DD._dragElements.get(this._id),W=z&&z.dragStatus==="dragging",G=z&&z.dragStatus==="ready";W?this.stopDrag():G&&t.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(D={x:0,y:0}){const z=this.getStage();if(!z)return!1;const W={x:-D.x,y:-D.y,width:z.width()+2*D.x,height:z.height()+2*D.y};return d.Util.haveIntersection(W,this.getClientRect())}static create(D,z){return d.Util._isString(D)&&(D=JSON.parse(D)),this._createNode(D,z)}static _createNode(D,z){let W=V0.prototype.getClassName.call(D),G=D.children,F,J,Z;z&&(D.attrs.container=z),a.Konva[W]||(d.Util.warn('Can not find a node with class name "'+W+'". Fallback to "Shape".'),W="Shape");const he=a.Konva[W];if(F=new he(D.attrs),G)for(J=G.length,Z=0;Z<J;Z++)F.add(V0._createNode(G[Z]));return F}};cc.Node=ne,ne.prototype.nodeType="Node",ne.prototype._attrsAffectingSize=[],ne.prototype.eventListeners={},ne.prototype.on.call(ne.prototype,X,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(U),this._clearSelfAndDescendantCache(m)}),ne.prototype.on.call(ne.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(V)}),ne.prototype.on.call(ne.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(C)}),ne.prototype.on.call(ne.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(f)});const ee=o.Factory.addGetterSetter;return ee(ne,"zIndex"),ee(ne,"absolutePosition"),ee(ne,"position"),ee(ne,"x",0,(0,u.getNumberValidator)()),ee(ne,"y",0,(0,u.getNumberValidator)()),ee(ne,"globalCompositeOperation","source-over",(0,u.getStringValidator)()),ee(ne,"opacity",1,(0,u.getNumberValidator)()),ee(ne,"name","",(0,u.getStringValidator)()),ee(ne,"id","",(0,u.getStringValidator)()),ee(ne,"rotation",0,(0,u.getNumberValidator)()),o.Factory.addComponentsGetterSetter(ne,"scale",["x","y"]),ee(ne,"scaleX",1,(0,u.getNumberValidator)()),ee(ne,"scaleY",1,(0,u.getNumberValidator)()),o.Factory.addComponentsGetterSetter(ne,"skew",["x","y"]),ee(ne,"skewX",0,(0,u.getNumberValidator)()),ee(ne,"skewY",0,(0,u.getNumberValidator)()),o.Factory.addComponentsGetterSetter(ne,"offset",["x","y"]),ee(ne,"offsetX",0,(0,u.getNumberValidator)()),ee(ne,"offsetY",0,(0,u.getNumberValidator)()),ee(ne,"dragDistance",void 0,(0,u.getNumberValidator)()),ee(ne,"width",0,(0,u.getNumberValidator)()),ee(ne,"height",0,(0,u.getNumberValidator)()),ee(ne,"listening",!0,(0,u.getBooleanValidator)()),ee(ne,"preventDefault",!0,(0,u.getBooleanValidator)()),ee(ne,"filters",void 0,function(pe){return this._filterUpToDate=!1,pe}),ee(ne,"visible",!0,(0,u.getBooleanValidator)()),ee(ne,"transformsEnabled","all",(0,u.getStringValidator)()),ee(ne,"size"),ee(ne,"dragBoundFunc"),ee(ne,"draggable",!1,(0,u.getBooleanValidator)()),o.Factory.backCompat(ne,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),cc}var dc={},F1;function af(){if(F1)return dc;F1=1,Object.defineProperty(dc,"__esModule",{value:!0}),dc.Container=void 0;const i=et(),t=tn(),o=nt();let a=class extends t.Node{constructor(){super(...arguments),this.children=[]}getChildren(u){const f=this.children||[];return u?f.filter(u):f}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(u=>{u.parent=null,u.index=0,u.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(u=>{u.parent=null,u.index=0,u.destroy()}),this.children=[],this._requestDraw(),this}add(...u){if(u.length===0)return this;if(u.length>1){for(let p=0;p<u.length;p++)this.add(u[p]);return this}const f=u[0];return f.getParent()?(f.moveTo(this),this):(this._validateAdd(f),f.index=this.getChildren().length,f.parent=this,f._clearCaches(),this.getChildren().push(f),this._fire("add",{child:f}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(u){return this._generalFind(u,!1)}findOne(u){const f=this._generalFind(u,!0);return f.length>0?f[0]:void 0}_generalFind(u,f){const p=[];return this._descendants(m=>{const v=m._isMatch(u);return v&&p.push(m),!!(v&&f)}),p}_descendants(u){let f=!1;const p=this.getChildren();for(const m of p){if(f=u(m),f)return!0;if(m.hasChildren()&&(f=m._descendants(u),f))return!0}return!1}toObject(){const u=t.Node.prototype.toObject.call(this);return u.children=[],this.getChildren().forEach(f=>{u.children.push(f.toObject())}),u}isAncestorOf(u){let f=u.getParent();for(;f;){if(f._id===this._id)return!0;f=f.getParent()}return!1}clone(u){const f=t.Node.prototype.clone.call(this,u);return this.getChildren().forEach(function(p){f.add(p.clone())}),f}getAllIntersections(u){const f=[];return this.find("Shape").forEach(p=>{p.isVisible()&&p.intersects(u)&&f.push(p)}),f}_clearSelfAndDescendantCache(u){var f;super._clearSelfAndDescendantCache(u),!this.isCached()&&((f=this.children)===null||f===void 0||f.forEach(function(p){p._clearSelfAndDescendantCache(u)}))}_setChildrenIndices(){var u;(u=this.children)===null||u===void 0||u.forEach(function(f,p){f.index=p}),this._requestDraw()}drawScene(u,f,p){const m=this.getLayer(),v=u||m&&m.getCanvas(),x=v&&v.getContext(),P=this._getCanvasCache(),_=P&&P.scene,k=v&&v.isCache;if(!this.isVisible()&&!k)return this;if(_){x.save();const C=this.getAbsoluteTransform(f).getMatrix();x.transform(C[0],C[1],C[2],C[3],C[4],C[5]),this._drawCachedSceneCanvas(x),x.restore()}else this._drawChildren("drawScene",v,f,p);return this}drawHit(u,f){if(!this.shouldDrawHit(f))return this;const p=this.getLayer(),m=u||p&&p.hitCanvas,v=m&&m.getContext(),x=this._getCanvasCache();if(x&&x.hit){v.save();const _=this.getAbsoluteTransform(f).getMatrix();v.transform(_[0],_[1],_[2],_[3],_[4],_[5]),this._drawCachedHitCanvas(v),v.restore()}else this._drawChildren("drawHit",m,f);return this}_drawChildren(u,f,p,m){var v;const x=f&&f.getContext(),P=this.clipWidth(),_=this.clipHeight(),k=this.clipFunc(),C=typeof P=="number"&&typeof _=="number"||k,N=p===this;if(C){x.save();const j=this.getAbsoluteTransform(p);let T=j.getMatrix();x.transform(T[0],T[1],T[2],T[3],T[4],T[5]),x.beginPath();let S;if(k)S=k.call(this,x,this);else{const L=this.clipX(),M=this.clipY();x.rect(L||0,M||0,P,_)}x.clip.apply(x,S),T=j.copy().invert().getMatrix(),x.transform(T[0],T[1],T[2],T[3],T[4],T[5])}const I=!N&&this.globalCompositeOperation()!=="source-over"&&u==="drawScene";I&&(x.save(),x._applyGlobalCompositeOperation(this)),(v=this.children)===null||v===void 0||v.forEach(function(j){j[u](f,p,m)}),I&&x.restore(),C&&x.restore()}getClientRect(u={}){var f;const p=u.skipTransform,m=u.relativeTo;let v,x,P,_,k={x:1/0,y:1/0,width:0,height:0};const C=this;(f=this.children)===null||f===void 0||f.forEach(function(j){if(!j.visible())return;const T=j.getClientRect({relativeTo:C,skipShadow:u.skipShadow,skipStroke:u.skipStroke});T.width===0&&T.height===0||(v===void 0?(v=T.x,x=T.y,P=T.x+T.width,_=T.y+T.height):(v=Math.min(v,T.x),x=Math.min(x,T.y),P=Math.max(P,T.x+T.width),_=Math.max(_,T.y+T.height)))});const N=this.find("Shape");let I=!1;for(let j=0;j<N.length;j++)if(N[j]._isVisible(this)){I=!0;break}return I&&v!==void 0?k={x:v,y:x,width:P-v,height:_-x}:k={x:0,y:0,width:0,height:0},p?k:this._transformedRect(k,m)}};return dc.Container=a,i.Factory.addComponentsGetterSetter(a,"clip",["x","y","width","height"]),i.Factory.addGetterSetter(a,"clipX",void 0,(0,o.getNumberValidator)()),i.Factory.addGetterSetter(a,"clipY",void 0,(0,o.getNumberValidator)()),i.Factory.addGetterSetter(a,"clipWidth",void 0,(0,o.getNumberValidator)()),i.Factory.addGetterSetter(a,"clipHeight",void 0,(0,o.getNumberValidator)()),i.Factory.addGetterSetter(a,"clipFunc"),dc}var v0={},Io={},O1;function O2(){if(O1)return Io;O1=1,Object.defineProperty(Io,"__esModule",{value:!0}),Io.getCapturedShape=a,Io.createEvent=d,Io.hasPointerCapture=u,Io.setPointerCapture=f,Io.releaseCapture=p;const i=Ke(),t=new Map,o=i.Konva._global.PointerEvent!==void 0;function a(m){return t.get(m)}function d(m){return{evt:m,pointerId:m.pointerId}}function u(m,v){return t.get(m)===v}function f(m,v){p(m),v.getStage()&&(t.set(m,v),o&&v._fire("gotpointercapture",d(new PointerEvent("gotpointercapture"))))}function p(m,v){const x=t.get(m);if(!x)return;const P=x.getStage();P&&P.content,t.delete(m),o&&x._fire("lostpointercapture",d(new PointerEvent("lostpointercapture")))}return Io}var z1;function ov(){return z1||(z1=1,(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.Stage=i.stages=void 0;const t=Yt(),o=et(),a=af(),d=Ke(),u=lf(),f=sp(),p=Ke(),m=O2(),v="Stage",x="string",P="px",_="mouseout",k="mouseleave",C="mouseover",N="mouseenter",I="mousemove",j="mousedown",T="mouseup",S="pointermove",L="pointerdown",M="pointerup",b="pointercancel",Y="lostpointercapture",A="pointerout",U="pointerleave",B="pointerover",V="pointerenter",X="contextmenu",$="touchstart",ne="touchend",ee="touchmove",pe="touchcancel",D="wheel",z=5,W=[[N,"_pointerenter"],[j,"_pointerdown"],[I,"_pointermove"],[T,"_pointerup"],[k,"_pointerleave"],[$,"_pointerdown"],[ee,"_pointermove"],[ne,"_pointerup"],[pe,"_pointercancel"],[C,"_pointerover"],[D,"_wheel"],[X,"_contextmenu"],[L,"_pointerdown"],[S,"_pointermove"],[M,"_pointerup"],[b,"_pointercancel"],[U,"_pointerleave"],[Y,"_lostpointercapture"]],G={mouse:{[A]:_,[U]:k,[B]:C,[V]:N,[S]:I,[L]:j,[M]:T,[b]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[A]:"touchout",[U]:"touchleave",[B]:"touchover",[V]:"touchenter",[S]:ee,[L]:$,[M]:ne,[b]:pe,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[A]:A,[U]:U,[B]:B,[V]:V,[S]:S,[L]:L,[M]:M,[b]:b,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},F=le=>le.indexOf("pointer")>=0?"pointer":le.indexOf("touch")>=0?"touch":"mouse",J=le=>{const q=F(le);if(q==="pointer")return d.Konva.pointerEventsEnabled&&G.pointer;if(q==="touch")return G.touch;if(q==="mouse")return G.mouse};function Z(le={}){return(le.clipFunc||le.clipWidth||le.clipHeight)&&t.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),le}const he="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";i.stages=[];class me extends a.Container{constructor(q){super(Z(q)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),i.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{Z(this.attrs)}),this._checkVisibility()}_validateAdd(q){const se=q.getType()==="Layer",ye=q.getType()==="FastLayer";se||ye||t.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const q=this.visible()?"":"none";this.content.style.display=q}setContainer(q){if(typeof q===x){let se;if(q.charAt(0)==="."){const ye=q.slice(1);q=document.getElementsByClassName(ye)[0]}else q.charAt(0)!=="#"?se=q:se=q.slice(1),q=document.getElementById(se);if(!q)throw"Can not find container in document with id "+se}return this._setAttr("container",q),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),q.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const q=this.children,se=q.length;for(let ye=0;ye<se;ye++)q[ye].clear();return this}clone(q){return q||(q={}),q.container=typeof document<"u"&&document.createElement("div"),a.Container.prototype.clone.call(this,q)}destroy(){super.destroy();const q=this.content;q&&t.Util._isInDocument(q)&&this.container().removeChild(q);const se=i.stages.indexOf(this);return se>-1&&i.stages.splice(se,1),t.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const q=this._pointerPositions[0]||this._changedPointerPositions[0];return q?{x:q.x,y:q.y}:(t.Util.warn(he),null)}_getPointerById(q){return this._pointerPositions.find(se=>se.id===q)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(q){q=q||{},q.x=q.x||0,q.y=q.y||0,q.width=q.width||this.width(),q.height=q.height||this.height();const se=new u.SceneCanvas({width:q.width,height:q.height,pixelRatio:q.pixelRatio||1}),ye=se.getContext()._context,xe=this.children;return(q.x||q.y)&&ye.translate(-1*q.x,-1*q.y),xe.forEach(function(Pe){if(!Pe.isVisible())return;const Ue=Pe._toKonvaCanvas(q);ye.drawImage(Ue._canvas,q.x,q.y,Ue.getWidth()/Ue.getPixelRatio(),Ue.getHeight()/Ue.getPixelRatio())}),se}getIntersection(q){if(!q)return null;const se=this.children,ye=se.length,xe=ye-1;for(let Pe=xe;Pe>=0;Pe--){const Ue=se[Pe].getIntersection(q);if(Ue)return Ue}return null}_resizeDOM(){const q=this.width(),se=this.height();this.content&&(this.content.style.width=q+P,this.content.style.height=se+P),this.bufferCanvas.setSize(q,se),this.bufferHitCanvas.setSize(q,se),this.children.forEach(ye=>{ye.setSize({width:q,height:se}),ye.draw()})}add(q,...se){if(arguments.length>1){for(let xe=0;xe<arguments.length;xe++)this.add(arguments[xe]);return this}super.add(q);const ye=this.children.length;return ye>z&&t.Util.warn("The stage has "+ye+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),q.setSize({width:this.width(),height:this.height()}),q.draw(),d.Konva.isBrowser&&this.content.appendChild(q.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(q){return m.hasPointerCapture(q,this)}setPointerCapture(q){m.setPointerCapture(q,this)}releaseCapture(q){m.releaseCapture(q,this)}getLayers(){return this.children}_bindContentEvents(){d.Konva.isBrowser&&W.forEach(([q,se])=>{this.content.addEventListener(q,ye=>{this[se](ye)},{passive:!1})})}_pointerenter(q){this.setPointersPositions(q);const se=J(q.type);se&&this._fire(se.pointerenter,{evt:q,target:this,currentTarget:this})}_pointerover(q){this.setPointersPositions(q);const se=J(q.type);se&&this._fire(se.pointerover,{evt:q,target:this,currentTarget:this})}_getTargetShape(q){let se=this[q+"targetShape"];return se&&!se.getStage()&&(se=null),se}_pointerleave(q){const se=J(q.type),ye=F(q.type);if(!se)return;this.setPointersPositions(q);const xe=this._getTargetShape(ye),Pe=!(d.Konva.isDragging()||d.Konva.isTransforming())||d.Konva.hitOnDragEnabled;xe&&Pe?(xe._fireAndBubble(se.pointerout,{evt:q}),xe._fireAndBubble(se.pointerleave,{evt:q}),this._fire(se.pointerleave,{evt:q,target:this,currentTarget:this}),this[ye+"targetShape"]=null):Pe&&(this._fire(se.pointerleave,{evt:q,target:this,currentTarget:this}),this._fire(se.pointerout,{evt:q,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(q){const se=J(q.type),ye=F(q.type);if(!se)return;this.setPointersPositions(q);let xe=!1;this._changedPointerPositions.forEach(Pe=>{const Ue=this.getIntersection(Pe);if(f.DD.justDragged=!1,d.Konva["_"+ye+"ListenClick"]=!0,!Ue||!Ue.isListening()){this[ye+"ClickStartShape"]=void 0;return}d.Konva.capturePointerEventsEnabled&&Ue.setPointerCapture(Pe.id),this[ye+"ClickStartShape"]=Ue,Ue._fireAndBubble(se.pointerdown,{evt:q,pointerId:Pe.id}),xe=!0;const Oe=q.type.indexOf("touch")>=0;Ue.preventDefault()&&q.cancelable&&Oe&&q.preventDefault()}),xe||this._fire(se.pointerdown,{evt:q,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(q){const se=J(q.type),ye=F(q.type);if(!se||(d.Konva.isDragging()&&f.DD.node.preventDefault()&&q.cancelable&&q.preventDefault(),this.setPointersPositions(q),!(!(d.Konva.isDragging()||d.Konva.isTransforming())||d.Konva.hitOnDragEnabled)))return;const Pe={};let Ue=!1;const Oe=this._getTargetShape(ye);this._changedPointerPositions.forEach(rt=>{const Ge=m.getCapturedShape(rt.id)||this.getIntersection(rt),Ut=rt.id,ot={evt:q,pointerId:Ut},Et=Oe!==Ge;if(Et&&Oe&&(Oe._fireAndBubble(se.pointerout,{...ot},Ge),Oe._fireAndBubble(se.pointerleave,{...ot},Ge)),Ge){if(Pe[Ge._id])return;Pe[Ge._id]=!0}Ge&&Ge.isListening()?(Ue=!0,Et&&(Ge._fireAndBubble(se.pointerover,{...ot},Oe),Ge._fireAndBubble(se.pointerenter,{...ot},Oe),this[ye+"targetShape"]=Ge),Ge._fireAndBubble(se.pointermove,{...ot})):Oe&&(this._fire(se.pointerover,{evt:q,target:this,currentTarget:this,pointerId:Ut}),this[ye+"targetShape"]=null)}),Ue||this._fire(se.pointermove,{evt:q,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(q){const se=J(q.type),ye=F(q.type);if(!se)return;this.setPointersPositions(q);const xe=this[ye+"ClickStartShape"],Pe=this[ye+"ClickEndShape"],Ue={};let Oe=!1;this._changedPointerPositions.forEach(rt=>{const Ge=m.getCapturedShape(rt.id)||this.getIntersection(rt);if(Ge){if(Ge.releaseCapture(rt.id),Ue[Ge._id])return;Ue[Ge._id]=!0}const Ut=rt.id,ot={evt:q,pointerId:Ut};let Et=!1;d.Konva["_"+ye+"InDblClickWindow"]?(Et=!0,clearTimeout(this[ye+"DblTimeout"])):f.DD.justDragged||(d.Konva["_"+ye+"InDblClickWindow"]=!0,clearTimeout(this[ye+"DblTimeout"])),this[ye+"DblTimeout"]=setTimeout(function(){d.Konva["_"+ye+"InDblClickWindow"]=!1},d.Konva.dblClickWindow),Ge&&Ge.isListening()?(Oe=!0,this[ye+"ClickEndShape"]=Ge,Ge._fireAndBubble(se.pointerup,{...ot}),d.Konva["_"+ye+"ListenClick"]&&xe&&xe===Ge&&(Ge._fireAndBubble(se.pointerclick,{...ot}),Et&&Pe&&Pe===Ge&&Ge._fireAndBubble(se.pointerdblclick,{...ot}))):(this[ye+"ClickEndShape"]=null,d.Konva["_"+ye+"ListenClick"]&&this._fire(se.pointerclick,{evt:q,target:this,currentTarget:this,pointerId:Ut}),Et&&this._fire(se.pointerdblclick,{evt:q,target:this,currentTarget:this,pointerId:Ut}))}),Oe||this._fire(se.pointerup,{evt:q,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),d.Konva["_"+ye+"ListenClick"]=!1,q.cancelable&&ye!=="touch"&&ye!=="pointer"&&q.preventDefault()}_contextmenu(q){this.setPointersPositions(q);const se=this.getIntersection(this.getPointerPosition());se&&se.isListening()?se._fireAndBubble(X,{evt:q}):this._fire(X,{evt:q,target:this,currentTarget:this})}_wheel(q){this.setPointersPositions(q);const se=this.getIntersection(this.getPointerPosition());se&&se.isListening()?se._fireAndBubble(D,{evt:q}):this._fire(D,{evt:q,target:this,currentTarget:this})}_pointercancel(q){this.setPointersPositions(q);const se=m.getCapturedShape(q.pointerId)||this.getIntersection(this.getPointerPosition());se&&se._fireAndBubble(M,m.createEvent(q)),m.releaseCapture(q.pointerId)}_lostpointercapture(q){m.releaseCapture(q.pointerId)}setPointersPositions(q){const se=this._getContentPosition();let ye=null,xe=null;q=q||window.event,q.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(q.touches,Pe=>{this._pointerPositions.push({id:Pe.identifier,x:(Pe.clientX-se.left)/se.scaleX,y:(Pe.clientY-se.top)/se.scaleY})}),Array.prototype.forEach.call(q.changedTouches||q.touches,Pe=>{this._changedPointerPositions.push({id:Pe.identifier,x:(Pe.clientX-se.left)/se.scaleX,y:(Pe.clientY-se.top)/se.scaleY})})):(ye=(q.clientX-se.left)/se.scaleX,xe=(q.clientY-se.top)/se.scaleY,this.pointerPos={x:ye,y:xe},this._pointerPositions=[{x:ye,y:xe,id:t.Util._getFirstPointerId(q)}],this._changedPointerPositions=[{x:ye,y:xe,id:t.Util._getFirstPointerId(q)}])}_setPointerPosition(q){t.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(q)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const q=this.content.getBoundingClientRect();return{top:q.top,left:q.left,scaleX:q.width/this.content.clientWidth||1,scaleY:q.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new u.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new u.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!d.Konva.isBrowser)return;const q=this.container();if(!q)throw"Stage has no container. A container is required.";q.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),q.appendChild(this.content),this._resizeDOM()}cache(){return t.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(q){q.batchDraw()}),this}}i.Stage=me,me.prototype.nodeType=v,(0,p._registerNode)(me),o.Factory.addGetterSetter(me,"container"),d.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{i.stages.forEach(le=>{le.batchDraw()})})})(v0)),v0}var hc={},_0={},b1;function An(){return b1||(b1=1,(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.Shape=i.shapes=void 0;const t=Ke(),o=Yt(),a=et(),d=tn(),u=nt(),f=Ke(),p=O2(),m="hasShadow",v="shadowRGBA",x="patternImage",P="linearGradient",_="radialGradient";let k;function C(){return k||(k=o.Util.createCanvasElement().getContext("2d"),k)}i.shapes={};function N(U){const B=this.attrs.fillRule;B?U.fill(B):U.fill()}function I(U){U.stroke()}function j(U){const B=this.attrs.fillRule;B?U.fill(B):U.fill()}function T(U){U.stroke()}function S(){this._clearCache(m)}function L(){this._clearCache(v)}function M(){this._clearCache(x)}function b(){this._clearCache(P)}function Y(){this._clearCache(_)}class A extends d.Node{constructor(B){super(B);let V;for(;V=o.Util.getRandomColor(),!(V&&!(V in i.shapes)););this.colorKey=V,i.shapes[V]=this}getContext(){return o.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return o.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(m,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(x,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const V=C().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(V&&V.setTransform){const X=new o.Transform;X.translate(this.fillPatternX(),this.fillPatternY()),X.rotate(t.Konva.getAngle(this.fillPatternRotation())),X.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),X.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const $=X.getMatrix(),ne=typeof DOMMatrix>"u"?{a:$[0],b:$[1],c:$[2],d:$[3],e:$[4],f:$[5]}:new DOMMatrix($);V.setTransform(ne)}return V}}_getLinearGradient(){return this._getCache(P,this.__getLinearGradient)}__getLinearGradient(){const B=this.fillLinearGradientColorStops();if(B){const V=C(),X=this.fillLinearGradientStartPoint(),$=this.fillLinearGradientEndPoint(),ne=V.createLinearGradient(X.x,X.y,$.x,$.y);for(let ee=0;ee<B.length;ee+=2)ne.addColorStop(B[ee],B[ee+1]);return ne}}_getRadialGradient(){return this._getCache(_,this.__getRadialGradient)}__getRadialGradient(){const B=this.fillRadialGradientColorStops();if(B){const V=C(),X=this.fillRadialGradientStartPoint(),$=this.fillRadialGradientEndPoint(),ne=V.createRadialGradient(X.x,X.y,this.fillRadialGradientStartRadius(),$.x,$.y,this.fillRadialGradientEndRadius());for(let ee=0;ee<B.length;ee+=2)ne.addColorStop(B[ee],B[ee+1]);return ne}}getShadowRGBA(){return this._getCache(v,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const B=o.Util.colorToRGBA(this.shadowColor());if(B)return"rgba("+B.r+","+B.g+","+B.b+","+B.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const B=this.hitStrokeWidth();return B==="auto"?this.hasStroke():this.strokeEnabled()&&!!B}intersects(B){const V=this.getStage();if(!V)return!1;const X=V.bufferHitCanvas;return X.getContext().clear(),this.drawHit(X,void 0,!0),X.context.getImageData(Math.round(B.x),Math.round(B.y),1,1).data[3]>0}destroy(){return d.Node.prototype.destroy.call(this),delete i.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(B){var V;if(!((V=this.attrs.perfectDrawEnabled)!==null&&V!==void 0?V:!0))return!1;const $=B||this.hasFill(),ne=this.hasStroke(),ee=this.getAbsoluteOpacity()!==1;if($&&ne&&ee)return!0;const pe=this.hasShadow(),D=this.shadowForStrokeEnabled();return!!($&&ne&&pe&&D)}setStrokeHitEnabled(B){o.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),B?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const B=this.size();return{x:this._centroid?-B.width/2:0,y:this._centroid?-B.height/2:0,width:B.width,height:B.height}}getClientRect(B={}){let V=!1,X=this.getParent();for(;X;){if(X.isCached()){V=!0;break}X=X.getParent()}const $=B.skipTransform,ne=B.relativeTo||V&&this.getStage()||void 0,ee=this.getSelfRect(),D=!B.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,z=ee.width+D,W=ee.height+D,G=!B.skipShadow&&this.hasShadow(),F=G?this.shadowOffsetX():0,J=G?this.shadowOffsetY():0,Z=z+Math.abs(F),he=W+Math.abs(J),me=G&&this.shadowBlur()||0,le=Z+me*2,q=he+me*2,se={width:le,height:q,x:-(D/2+me)+Math.min(F,0)+ee.x,y:-(D/2+me)+Math.min(J,0)+ee.y};return $?se:this._transformedRect(se,ne)}drawScene(B,V,X){const $=this.getLayer(),ne=B||$.getCanvas(),ee=ne.getContext(),pe=this._getCanvasCache(),D=this.getSceneFunc(),z=this.hasShadow();let W;const G=V===this;if(!this.isVisible()&&!G)return this;if(pe){ee.save();const F=this.getAbsoluteTransform(V).getMatrix();return ee.transform(F[0],F[1],F[2],F[3],F[4],F[5]),this._drawCachedSceneCanvas(ee),ee.restore(),this}if(!D)return this;if(ee.save(),this._useBufferCanvas()){W=this.getStage();const F=X||W.bufferCanvas,J=F.getContext();J.clear(),J.save(),J._applyLineJoin(this);const Z=this.getAbsoluteTransform(V).getMatrix();J.transform(Z[0],Z[1],Z[2],Z[3],Z[4],Z[5]),D.call(this,J,this),J.restore();const he=F.pixelRatio;z&&ee._applyShadow(this),ee._applyOpacity(this),ee._applyGlobalCompositeOperation(this),ee.drawImage(F._canvas,F.x||0,F.y||0,F.width/he,F.height/he)}else{if(ee._applyLineJoin(this),!G){const F=this.getAbsoluteTransform(V).getMatrix();ee.transform(F[0],F[1],F[2],F[3],F[4],F[5]),ee._applyOpacity(this),ee._applyGlobalCompositeOperation(this)}z&&ee._applyShadow(this),D.call(this,ee,this)}return ee.restore(),this}drawHit(B,V,X=!1){if(!this.shouldDrawHit(V,X))return this;const $=this.getLayer(),ne=B||$.hitCanvas,ee=ne&&ne.getContext(),pe=this.hitFunc()||this.sceneFunc(),D=this._getCanvasCache(),z=D&&D.hit;if(this.colorKey||o.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),z){ee.save();const G=this.getAbsoluteTransform(V).getMatrix();return ee.transform(G[0],G[1],G[2],G[3],G[4],G[5]),this._drawCachedHitCanvas(ee),ee.restore(),this}if(!pe)return this;if(ee.save(),ee._applyLineJoin(this),!(this===V)){const G=this.getAbsoluteTransform(V).getMatrix();ee.transform(G[0],G[1],G[2],G[3],G[4],G[5])}return pe.call(this,ee,this),ee.restore(),this}drawHitFromCache(B=0){const V=this._getCanvasCache(),X=this._getCachedSceneCanvas(),$=V.hit,ne=$.getContext(),ee=$.getWidth(),pe=$.getHeight();ne.clear(),ne.drawImage(X._canvas,0,0,ee,pe);try{const D=ne.getImageData(0,0,ee,pe),z=D.data,W=z.length,G=o.Util._hexToRgb(this.colorKey);for(let F=0;F<W;F+=4)z[F+3]>B?(z[F]=G.r,z[F+1]=G.g,z[F+2]=G.b,z[F+3]=255):z[F+3]=0;ne.putImageData(D,0,0)}catch(D){o.Util.error("Unable to draw hit graph from cached scene canvas. "+D.message)}return this}hasPointerCapture(B){return p.hasPointerCapture(B,this)}setPointerCapture(B){p.setPointerCapture(B,this)}releaseCapture(B){p.releaseCapture(B,this)}}i.Shape=A,A.prototype._fillFunc=N,A.prototype._strokeFunc=I,A.prototype._fillFuncHit=j,A.prototype._strokeFuncHit=T,A.prototype._centroid=!1,A.prototype.nodeType="Shape",(0,f._registerNode)(A),A.prototype.eventListeners={},A.prototype.on.call(A.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",S),A.prototype.on.call(A.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",L),A.prototype.on.call(A.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",M),A.prototype.on.call(A.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",b),A.prototype.on.call(A.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",Y),a.Factory.addGetterSetter(A,"stroke",void 0,(0,u.getStringOrGradientValidator)()),a.Factory.addGetterSetter(A,"strokeWidth",2,(0,u.getNumberValidator)()),a.Factory.addGetterSetter(A,"fillAfterStrokeEnabled",!1),a.Factory.addGetterSetter(A,"hitStrokeWidth","auto",(0,u.getNumberOrAutoValidator)()),a.Factory.addGetterSetter(A,"strokeHitEnabled",!0,(0,u.getBooleanValidator)()),a.Factory.addGetterSetter(A,"perfectDrawEnabled",!0,(0,u.getBooleanValidator)()),a.Factory.addGetterSetter(A,"shadowForStrokeEnabled",!0,(0,u.getBooleanValidator)()),a.Factory.addGetterSetter(A,"lineJoin"),a.Factory.addGetterSetter(A,"lineCap"),a.Factory.addGetterSetter(A,"sceneFunc"),a.Factory.addGetterSetter(A,"hitFunc"),a.Factory.addGetterSetter(A,"dash"),a.Factory.addGetterSetter(A,"dashOffset",0,(0,u.getNumberValidator)()),a.Factory.addGetterSetter(A,"shadowColor",void 0,(0,u.getStringValidator)()),a.Factory.addGetterSetter(A,"shadowBlur",0,(0,u.getNumberValidator)()),a.Factory.addGetterSetter(A,"shadowOpacity",1,(0,u.getNumberValidator)()),a.Factory.addComponentsGetterSetter(A,"shadowOffset",["x","y"]),a.Factory.addGetterSetter(A,"shadowOffsetX",0,(0,u.getNumberValidator)()),a.Factory.addGetterSetter(A,"shadowOffsetY",0,(0,u.getNumberValidator)()),a.Factory.addGetterSetter(A,"fillPatternImage"),a.Factory.addGetterSetter(A,"fill",void 0,(0,u.getStringOrGradientValidator)()),a.Factory.addGetterSetter(A,"fillPatternX",0,(0,u.getNumberValidator)()),a.Factory.addGetterSetter(A,"fillPatternY",0,(0,u.getNumberValidator)()),a.Factory.addGetterSetter(A,"fillLinearGradientColorStops"),a.Factory.addGetterSetter(A,"strokeLinearGradientColorStops"),a.Factory.addGetterSetter(A,"fillRadialGradientStartRadius",0),a.Factory.addGetterSetter(A,"fillRadialGradientEndRadius",0),a.Factory.addGetterSetter(A,"fillRadialGradientColorStops"),a.Factory.addGetterSetter(A,"fillPatternRepeat","repeat"),a.Factory.addGetterSetter(A,"fillEnabled",!0),a.Factory.addGetterSetter(A,"strokeEnabled",!0),a.Factory.addGetterSetter(A,"shadowEnabled",!0),a.Factory.addGetterSetter(A,"dashEnabled",!0),a.Factory.addGetterSetter(A,"strokeScaleEnabled",!0),a.Factory.addGetterSetter(A,"fillPriority","color"),a.Factory.addComponentsGetterSetter(A,"fillPatternOffset",["x","y"]),a.Factory.addGetterSetter(A,"fillPatternOffsetX",0,(0,u.getNumberValidator)()),a.Factory.addGetterSetter(A,"fillPatternOffsetY",0,(0,u.getNumberValidator)()),a.Factory.addComponentsGetterSetter(A,"fillPatternScale",["x","y"]),a.Factory.addGetterSetter(A,"fillPatternScaleX",1,(0,u.getNumberValidator)()),a.Factory.addGetterSetter(A,"fillPatternScaleY",1,(0,u.getNumberValidator)()),a.Factory.addComponentsGetterSetter(A,"fillLinearGradientStartPoint",["x","y"]),a.Factory.addComponentsGetterSetter(A,"strokeLinearGradientStartPoint",["x","y"]),a.Factory.addGetterSetter(A,"fillLinearGradientStartPointX",0),a.Factory.addGetterSetter(A,"strokeLinearGradientStartPointX",0),a.Factory.addGetterSetter(A,"fillLinearGradientStartPointY",0),a.Factory.addGetterSetter(A,"strokeLinearGradientStartPointY",0),a.Factory.addComponentsGetterSetter(A,"fillLinearGradientEndPoint",["x","y"]),a.Factory.addComponentsGetterSetter(A,"strokeLinearGradientEndPoint",["x","y"]),a.Factory.addGetterSetter(A,"fillLinearGradientEndPointX",0),a.Factory.addGetterSetter(A,"strokeLinearGradientEndPointX",0),a.Factory.addGetterSetter(A,"fillLinearGradientEndPointY",0),a.Factory.addGetterSetter(A,"strokeLinearGradientEndPointY",0),a.Factory.addComponentsGetterSetter(A,"fillRadialGradientStartPoint",["x","y"]),a.Factory.addGetterSetter(A,"fillRadialGradientStartPointX",0),a.Factory.addGetterSetter(A,"fillRadialGradientStartPointY",0),a.Factory.addComponentsGetterSetter(A,"fillRadialGradientEndPoint",["x","y"]),a.Factory.addGetterSetter(A,"fillRadialGradientEndPointX",0),a.Factory.addGetterSetter(A,"fillRadialGradientEndPointY",0),a.Factory.addGetterSetter(A,"fillPatternRotation",0),a.Factory.addGetterSetter(A,"fillRule",void 0,(0,u.getStringValidator)()),a.Factory.backCompat(A,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})})(_0)),_0}var U1;function z2(){if(U1)return hc;U1=1,Object.defineProperty(hc,"__esModule",{value:!0}),hc.Layer=void 0;const i=Yt(),t=af(),o=tn(),a=et(),d=lf(),u=nt(),f=An(),p=Ke(),m="#",v="beforeDraw",x="draw",P=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],_=P.length;class k extends t.Container{constructor(N){super(N),this.canvas=new d.SceneCanvas,this.hitCanvas=new d.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(N){return this.getContext().clear(N),this.getHitCanvas().getContext().clear(N),this}setZIndex(N){super.setZIndex(N);const I=this.getStage();return I&&I.content&&(I.content.removeChild(this.getNativeCanvasElement()),N<I.children.length-1?I.content.insertBefore(this.getNativeCanvasElement(),I.children[N+1].getCanvas()._canvas):I.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){o.Node.prototype.moveToTop.call(this);const N=this.getStage();return N&&N.content&&(N.content.removeChild(this.getNativeCanvasElement()),N.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!o.Node.prototype.moveUp.call(this))return!1;const I=this.getStage();return!I||!I.content?!1:(I.content.removeChild(this.getNativeCanvasElement()),this.index<I.children.length-1?I.content.insertBefore(this.getNativeCanvasElement(),I.children[this.index+1].getCanvas()._canvas):I.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(o.Node.prototype.moveDown.call(this)){const N=this.getStage();if(N){const I=N.children;N.content&&(N.content.removeChild(this.getNativeCanvasElement()),N.content.insertBefore(this.getNativeCanvasElement(),I[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(o.Node.prototype.moveToBottom.call(this)){const N=this.getStage();if(N){const I=N.children;N.content&&(N.content.removeChild(this.getNativeCanvasElement()),N.content.insertBefore(this.getNativeCanvasElement(),I[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const N=this.getNativeCanvasElement();return o.Node.prototype.remove.call(this),N&&N.parentNode&&i.Util._isInDocument(N)&&N.parentNode.removeChild(N),this}getStage(){return this.parent}setSize({width:N,height:I}){return this.canvas.setSize(N,I),this.hitCanvas.setSize(N,I),this._setSmoothEnabled(),this}_validateAdd(N){const I=N.getType();I!=="Group"&&I!=="Shape"&&i.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(N){return N=N||{},N.width=N.width||this.getWidth(),N.height=N.height||this.getHeight(),N.x=N.x!==void 0?N.x:this.x(),N.y=N.y!==void 0?N.y:this.y(),o.Node.prototype._toKonvaCanvas.call(this,N)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){i.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){i.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,i.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(N){if(!this.isListening()||!this.isVisible())return null;let I=1,j=!1;for(;;){for(let T=0;T<_;T++){const S=P[T],L=this._getIntersection({x:N.x+S.x*I,y:N.y+S.y*I}),M=L.shape;if(M)return M;if(j=!!L.antialiased,!L.antialiased)break}if(j)I+=1;else return null}}_getIntersection(N){const I=this.hitCanvas.pixelRatio,j=this.hitCanvas.context.getImageData(Math.round(N.x*I),Math.round(N.y*I),1,1).data,T=j[3];if(T===255){const S=i.Util._rgbToHex(j[0],j[1],j[2]),L=f.shapes[m+S];return L?{shape:L}:{antialiased:!0}}else if(T>0)return{antialiased:!0};return{}}drawScene(N,I,j){const T=this.getLayer(),S=N||T&&T.getCanvas();return this._fire(v,{node:this}),this.clearBeforeDraw()&&S.getContext().clear(),t.Container.prototype.drawScene.call(this,S,I,j),this._fire(x,{node:this}),this}drawHit(N,I){const j=this.getLayer(),T=N||j&&j.hitCanvas;return j&&j.clearBeforeDraw()&&j.getHitCanvas().getContext().clear(),t.Container.prototype.drawHit.call(this,T,I),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(N){i.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(N)}getHitGraphEnabled(N){return i.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const N=this.parent;!!this.hitCanvas._canvas.parentNode?N.content.removeChild(this.hitCanvas._canvas):N.content.appendChild(this.hitCanvas._canvas)}destroy(){return i.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}}return hc.Layer=k,k.prototype.nodeType="Layer",(0,p._registerNode)(k),a.Factory.addGetterSetter(k,"imageSmoothingEnabled",!0),a.Factory.addGetterSetter(k,"clearBeforeDraw",!0),a.Factory.addGetterSetter(k,"hitGraphEnabled",!0,(0,u.getBooleanValidator)()),hc}var fc={},j1;function lv(){if(j1)return fc;j1=1,Object.defineProperty(fc,"__esModule",{value:!0}),fc.FastLayer=void 0;const i=Yt(),t=z2(),o=Ke();let a=class extends t.Layer{constructor(u){super(u),this.listening(!1),i.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}};return fc.FastLayer=a,a.prototype.nodeType="FastLayer",(0,o._registerNode)(a),fc}var pc={},B1;function op(){if(B1)return pc;B1=1,Object.defineProperty(pc,"__esModule",{value:!0}),pc.Group=void 0;const i=Yt(),t=af(),o=Ke();class a extends t.Container{_validateAdd(u){const f=u.getType();f!=="Group"&&f!=="Shape"&&i.Util.throw("You may only add groups and shapes to groups.")}}return pc.Group=a,a.prototype.nodeType="Group",(0,o._registerNode)(a),pc}var gc={},G1;function lp(){if(G1)return gc;G1=1,Object.defineProperty(gc,"__esModule",{value:!0}),gc.Animation=void 0;const i=Ke(),t=Yt(),o=(function(){return i.glob.performance&&i.glob.performance.now?function(){return i.glob.performance.now()}:function(){return new Date().getTime()}})();let a=class Ba{constructor(u,f){this.id=Ba.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:o(),frameRate:0},this.func=u,this.setLayers(f)}setLayers(u){let f=[];return u&&(f=Array.isArray(u)?u:[u]),this.layers=f,this}getLayers(){return this.layers}addLayer(u){const f=this.layers,p=f.length;for(let m=0;m<p;m++)if(f[m]._id===u._id)return!1;return this.layers.push(u),!0}isRunning(){const f=Ba.animations,p=f.length;for(let m=0;m<p;m++)if(f[m].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=o(),Ba._addAnimation(this),this}stop(){return Ba._removeAnimation(this),this}_updateFrameObject(u){this.frame.timeDiff=u-this.frame.lastTime,this.frame.lastTime=u,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(u){this.animations.push(u),this._handleAnimation()}static _removeAnimation(u){const f=u.id,p=this.animations,m=p.length;for(let v=0;v<m;v++)if(p[v].id===f){this.animations.splice(v,1);break}}static _runFrames(){const u={},f=this.animations;for(let p=0;p<f.length;p++){const m=f[p],v=m.layers,x=m.func;m._updateFrameObject(o());const P=v.length;let _;if(x?_=x.call(m,m.frame)!==!1:_=!0,!!_)for(let k=0;k<P;k++){const C=v[k];C._id!==void 0&&(u[C._id]=C)}}for(const p in u)u.hasOwnProperty(p)&&u[p].batchDraw()}static _animationLoop(){const u=Ba;u.animations.length?(u._runFrames(),t.Util.requestAnimFrame(u._animationLoop)):u.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,t.Util.requestAnimFrame(this._animationLoop))}};return gc.Animation=a,a.animations=[],a.animIdCounter=0,a.animRunning=!1,gc}var S0={},V1;function av(){return V1||(V1=1,(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.Easings=i.Tween=void 0;const t=Yt(),o=lp(),a=tn(),d=Ke(),u={node:1,duration:1,easing:1,onFinish:1,yoyo:1},f=1,p=2,m=3,v=["fill","stroke","shadowColor"];let x=0;class P{constructor(C,N,I,j,T,S,L){this.prop=C,this.propFunc=N,this.begin=j,this._pos=j,this.duration=S,this._change=0,this.prevPos=0,this.yoyo=L,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=I,this._change=T-this.begin,this.pause()}fire(C){const N=this[C];N&&N()}setTime(C){C>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():C<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=C,this.update())}getTime(){return this._time}setPosition(C){this.prevPos=this._pos,this.propFunc(C),this._pos=C}getPosition(C){return C===void 0&&(C=this._time),this.func(C,this.begin,this._change,this.duration)}play(){this.state=p,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=m,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(C){this.pause(),this._time=C,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const C=this.getTimer()-this._startTime;this.state===p?this.setTime(C):this.state===m&&this.setTime(this.duration-C)}pause(){this.state=f,this.fire("onPause")}getTimer(){return new Date().getTime()}}class _{constructor(C){const N=this,I=C.node,j=I._id,T=C.easing||i.Easings.Linear,S=!!C.yoyo;let L,M;typeof C.duration>"u"?L=.3:C.duration===0?L=.001:L=C.duration,this.node=I,this._id=x++;const b=I.getLayer()||(I instanceof d.Konva.Stage?I.getLayers():null);b||t.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new o.Animation(function(){N.tween.onEnterFrame()},b),this.tween=new P(M,function(Y){N._tweenFunc(Y)},T,0,1,L*1e3,S),this._addListeners(),_.attrs[j]||(_.attrs[j]={}),_.attrs[j][this._id]||(_.attrs[j][this._id]={}),_.tweens[j]||(_.tweens[j]={});for(M in C)u[M]===void 0&&this._addAttr(M,C[M]);this.reset(),this.onFinish=C.onFinish,this.onReset=C.onReset,this.onUpdate=C.onUpdate}_addAttr(C,N){const I=this.node,j=I._id;let T,S,L,M,b;const Y=_.tweens[j][C];Y&&delete _.attrs[j][Y][C];let A=I.getAttr(C);if(t.Util._isArray(N))if(T=[],S=Math.max(N.length,A.length),C==="points"&&N.length!==A.length&&(N.length>A.length?(M=A,A=t.Util._prepareArrayForTween(A,N,I.closed())):(L=N,N=t.Util._prepareArrayForTween(N,A,I.closed()))),C.indexOf("fill")===0)for(let U=0;U<S;U++)if(U%2===0)T.push(N[U]-A[U]);else{const B=t.Util.colorToRGBA(A[U]);b=t.Util.colorToRGBA(N[U]),A[U]=B,T.push({r:b.r-B.r,g:b.g-B.g,b:b.b-B.b,a:b.a-B.a})}else for(let U=0;U<S;U++)T.push(N[U]-A[U]);else v.indexOf(C)!==-1?(A=t.Util.colorToRGBA(A),b=t.Util.colorToRGBA(N),T={r:b.r-A.r,g:b.g-A.g,b:b.b-A.b,a:b.a-A.a}):T=N-A;_.attrs[j][this._id][C]={start:A,diff:T,end:N,trueEnd:L,trueStart:M},_.tweens[j][C]=this._id}_tweenFunc(C){const N=this.node,I=_.attrs[N._id][this._id];let j,T,S,L,M,b,Y,A;for(j in I){if(T=I[j],S=T.start,L=T.diff,A=T.end,t.Util._isArray(S))if(M=[],Y=Math.max(S.length,A.length),j.indexOf("fill")===0)for(b=0;b<Y;b++)b%2===0?M.push((S[b]||0)+L[b]*C):M.push("rgba("+Math.round(S[b].r+L[b].r*C)+","+Math.round(S[b].g+L[b].g*C)+","+Math.round(S[b].b+L[b].b*C)+","+(S[b].a+L[b].a*C)+")");else for(b=0;b<Y;b++)M.push((S[b]||0)+L[b]*C);else v.indexOf(j)!==-1?M="rgba("+Math.round(S.r+L.r*C)+","+Math.round(S.g+L.g*C)+","+Math.round(S.b+L.b*C)+","+(S.a+L.a*C)+")":M=S+L*C;N.setAttr(j,M)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const C=this.node,N=_.attrs[C._id][this._id];N.points&&N.points.trueEnd&&C.setAttr("points",N.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const C=this.node,N=_.attrs[C._id][this._id];N.points&&N.points.trueStart&&C.points(N.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(C){return this.tween.seek(C*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const C=this.node._id,N=this._id,I=_.tweens[C];this.pause(),this.anim&&this.anim.stop();for(const j in I)delete _.tweens[C][j];delete _.attrs[C][N],_.tweens[C]&&(Object.keys(_.tweens[C]).length===0&&delete _.tweens[C],Object.keys(_.attrs[C]).length===0&&delete _.attrs[C])}}i.Tween=_,_.attrs={},_.tweens={},a.Node.prototype.to=function(k){const C=k.onFinish;k.node=this,k.onFinish=function(){this.destroy(),C&&C()},new _(k).play()},i.Easings={BackEaseIn(k,C,N,I){return N*(k/=I)*k*((1.70158+1)*k-1.70158)+C},BackEaseOut(k,C,N,I){return N*((k=k/I-1)*k*((1.70158+1)*k+1.70158)+1)+C},BackEaseInOut(k,C,N,I){let j=1.70158;return(k/=I/2)<1?N/2*(k*k*(((j*=1.525)+1)*k-j))+C:N/2*((k-=2)*k*(((j*=1.525)+1)*k+j)+2)+C},ElasticEaseIn(k,C,N,I,j,T){let S=0;return k===0?C:(k/=I)===1?C+N:(T||(T=I*.3),!j||j<Math.abs(N)?(j=N,S=T/4):S=T/(2*Math.PI)*Math.asin(N/j),-(j*Math.pow(2,10*(k-=1))*Math.sin((k*I-S)*(2*Math.PI)/T))+C)},ElasticEaseOut(k,C,N,I,j,T){let S=0;return k===0?C:(k/=I)===1?C+N:(T||(T=I*.3),!j||j<Math.abs(N)?(j=N,S=T/4):S=T/(2*Math.PI)*Math.asin(N/j),j*Math.pow(2,-10*k)*Math.sin((k*I-S)*(2*Math.PI)/T)+N+C)},ElasticEaseInOut(k,C,N,I,j,T){let S=0;return k===0?C:(k/=I/2)===2?C+N:(T||(T=I*(.3*1.5)),!j||j<Math.abs(N)?(j=N,S=T/4):S=T/(2*Math.PI)*Math.asin(N/j),k<1?-.5*(j*Math.pow(2,10*(k-=1))*Math.sin((k*I-S)*(2*Math.PI)/T))+C:j*Math.pow(2,-10*(k-=1))*Math.sin((k*I-S)*(2*Math.PI)/T)*.5+N+C)},BounceEaseOut(k,C,N,I){return(k/=I)<1/2.75?N*(7.5625*k*k)+C:k<2/2.75?N*(7.5625*(k-=1.5/2.75)*k+.75)+C:k<2.5/2.75?N*(7.5625*(k-=2.25/2.75)*k+.9375)+C:N*(7.5625*(k-=2.625/2.75)*k+.984375)+C},BounceEaseIn(k,C,N,I){return N-i.Easings.BounceEaseOut(I-k,0,N,I)+C},BounceEaseInOut(k,C,N,I){return k<I/2?i.Easings.BounceEaseIn(k*2,0,N,I)*.5+C:i.Easings.BounceEaseOut(k*2-I,0,N,I)*.5+N*.5+C},EaseIn(k,C,N,I){return N*(k/=I)*k+C},EaseOut(k,C,N,I){return-N*(k/=I)*(k-2)+C},EaseInOut(k,C,N,I){return(k/=I/2)<1?N/2*k*k+C:-N/2*(--k*(k-2)-1)+C},StrongEaseIn(k,C,N,I){return N*(k/=I)*k*k*k*k+C},StrongEaseOut(k,C,N,I){return N*((k=k/I-1)*k*k*k*k+1)+C},StrongEaseInOut(k,C,N,I){return(k/=I/2)<1?N/2*k*k*k*k*k+C:N/2*((k-=2)*k*k*k*k+2)+C},Linear(k,C,N,I){return N*k/I+C}}})(S0)),S0}var H1;function H0(){return H1||(H1=1,(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.Konva=void 0;const t=Ke(),o=Yt(),a=tn(),d=af(),u=ov(),f=z2(),p=lv(),m=op(),v=sp(),x=An(),P=lp(),_=av(),k=F2(),C=lf();i.Konva=o.Util._assign(t.Konva,{Util:o.Util,Transform:o.Transform,Node:a.Node,Container:d.Container,Stage:u.Stage,stages:u.stages,Layer:f.Layer,FastLayer:p.FastLayer,Group:m.Group,DD:v.DD,Shape:x.Shape,shapes:x.shapes,Animation:P.Animation,Tween:_.Tween,Easings:_.Easings,Context:k.Context,Canvas:C.Canvas}),i.default=i.Konva})(f0)),f0}var mc={},W1;function uv(){if(W1)return mc;W1=1,Object.defineProperty(mc,"__esModule",{value:!0}),mc.Arc=void 0;const i=et(),t=An(),o=Ke(),a=nt(),d=Ke();let u=class extends t.Shape{_sceneFunc(p){const m=o.Konva.getAngle(this.angle()),v=this.clockwise();p.beginPath(),p.arc(0,0,this.outerRadius(),0,m,v),p.arc(0,0,this.innerRadius(),m,0,!v),p.closePath(),p.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(p){this.outerRadius(p/2)}setHeight(p){this.outerRadius(p/2)}getSelfRect(){const p=this.innerRadius(),m=this.outerRadius(),v=this.clockwise(),x=o.Konva.getAngle(v?360-this.angle():this.angle()),P=Math.cos(Math.min(x,Math.PI)),_=1,k=Math.sin(Math.min(Math.max(Math.PI,x),3*Math.PI/2)),C=Math.sin(Math.min(x,Math.PI/2)),N=P*(P>0?p:m),I=_*m,j=k*(k>0?p:m),T=C*(C>0?m:p);return{x:N,y:v?-1*T:j,width:I-N,height:T-j}}};return mc.Arc=u,u.prototype._centroid=!0,u.prototype.className="Arc",u.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"],(0,d._registerNode)(u),i.Factory.addGetterSetter(u,"innerRadius",0,(0,a.getNumberValidator)()),i.Factory.addGetterSetter(u,"outerRadius",0,(0,a.getNumberValidator)()),i.Factory.addGetterSetter(u,"angle",0,(0,a.getNumberValidator)()),i.Factory.addGetterSetter(u,"clockwise",!1,(0,a.getBooleanValidator)()),mc}var yc={},vc={},Y1;function b2(){if(Y1)return vc;Y1=1,Object.defineProperty(vc,"__esModule",{value:!0}),vc.Line=void 0;const i=et(),t=Ke(),o=An(),a=nt();function d(p,m,v,x,P,_,k){const C=Math.sqrt(Math.pow(v-p,2)+Math.pow(x-m,2)),N=Math.sqrt(Math.pow(P-v,2)+Math.pow(_-x,2)),I=k*C/(C+N),j=k*N/(C+N),T=v-I*(P-p),S=x-I*(_-m),L=v+j*(P-p),M=x+j*(_-m);return[T,S,L,M]}function u(p,m){const v=p.length,x=[];for(let P=2;P<v-2;P+=2){const _=d(p[P-2],p[P-1],p[P],p[P+1],p[P+2],p[P+3],m);isNaN(_[0])||(x.push(_[0]),x.push(_[1]),x.push(p[P]),x.push(p[P+1]),x.push(_[2]),x.push(_[3]))}return x}class f extends o.Shape{constructor(m){super(m),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(m){const v=this.points(),x=v.length,P=this.tension(),_=this.closed(),k=this.bezier();if(!x)return;let C=0;if(m.beginPath(),m.moveTo(v[0],v[1]),P!==0&&x>4){const N=this.getTensionPoints(),I=N.length;for(C=_?0:4,_||m.quadraticCurveTo(N[0],N[1],N[2],N[3]);C<I-2;)m.bezierCurveTo(N[C++],N[C++],N[C++],N[C++],N[C++],N[C++]);_||m.quadraticCurveTo(N[I-2],N[I-1],v[x-2],v[x-1])}else if(k)for(C=2;C<x;)m.bezierCurveTo(v[C++],v[C++],v[C++],v[C++],v[C++],v[C++]);else for(C=2;C<x;C+=2)m.lineTo(v[C],v[C+1]);_?(m.closePath(),m.fillStrokeShape(this)):m.strokeShape(this)}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():u(this.points(),this.tension())}_getTensionPointsClosed(){const m=this.points(),v=m.length,x=this.tension(),P=d(m[v-2],m[v-1],m[0],m[1],m[2],m[3],x),_=d(m[v-4],m[v-3],m[v-2],m[v-1],m[0],m[1],x),k=u(m,x);return[P[2],P[3]].concat(k).concat([_[0],_[1],m[v-2],m[v-1],_[2],_[3],P[0],P[1],m[0],m[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let m=this.points();if(m.length<4)return{x:m[0]||0,y:m[1]||0,width:0,height:0};this.tension()!==0?m=[m[0],m[1],...this._getTensionPoints(),m[m.length-2],m[m.length-1]]:m=this.points();let v=m[0],x=m[0],P=m[1],_=m[1],k,C;for(let N=0;N<m.length/2;N++)k=m[N*2],C=m[N*2+1],v=Math.min(v,k),x=Math.max(x,k),P=Math.min(P,C),_=Math.max(_,C);return{x:v,y:P,width:x-v,height:_-P}}}return vc.Line=f,f.prototype.className="Line",f.prototype._attrsAffectingSize=["points","bezier","tension"],(0,t._registerNode)(f),i.Factory.addGetterSetter(f,"closed",!1),i.Factory.addGetterSetter(f,"bezier",!1),i.Factory.addGetterSetter(f,"tension",0,(0,a.getNumberValidator)()),i.Factory.addGetterSetter(f,"points",[],(0,a.getNumberArrayValidator)()),vc}var _c={},w0={},q1;function cv(){return q1||(q1=1,(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.t2length=i.getQuadraticArcLength=i.getCubicArcLength=i.binomialCoefficients=i.cValues=i.tValues=void 0,i.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],i.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],i.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const t=(f,p,m)=>{let v,x;const _=m/2;v=0;for(let k=0;k<20;k++)x=_*i.tValues[20][k]+_,v+=i.cValues[20][k]*a(f,p,x);return _*v};i.getCubicArcLength=t;const o=(f,p,m)=>{m===void 0&&(m=1);const v=f[0]-2*f[1]+f[2],x=p[0]-2*p[1]+p[2],P=2*f[1]-2*f[0],_=2*p[1]-2*p[0],k=4*(v*v+x*x),C=4*(v*P+x*_),N=P*P+_*_;if(k===0)return m*Math.sqrt(Math.pow(f[2]-f[0],2)+Math.pow(p[2]-p[0],2));const I=C/(2*k),j=N/k,T=m+I,S=j-I*I,L=T*T+S>0?Math.sqrt(T*T+S):0,M=I*I+S>0?Math.sqrt(I*I+S):0,b=I+Math.sqrt(I*I+S)!==0?S*Math.log(Math.abs((T+L)/(I+M))):0;return Math.sqrt(k)/2*(T*L-I*M+b)};i.getQuadraticArcLength=o;function a(f,p,m){const v=d(1,m,f),x=d(1,m,p),P=v*v+x*x;return Math.sqrt(P)}const d=(f,p,m)=>{const v=m.length-1;let x,P;if(v===0)return 0;if(f===0){P=0;for(let _=0;_<=v;_++)P+=i.binomialCoefficients[v][_]*Math.pow(1-p,v-_)*Math.pow(p,_)*m[_];return P}else{x=new Array(v);for(let _=0;_<v;_++)x[_]=v*(m[_+1]-m[_]);return d(f-1,p,x)}},u=(f,p,m)=>{let v=1,x=f/p,P=(f-m(x))/p,_=0;for(;v>.001;){const k=m(x+P),C=Math.abs(f-k)/p;if(C<v)v=C,x+=P;else{const N=m(x-P),I=Math.abs(f-N)/p;I<v?(v=I,x-=P):P/=2}if(_++,_>500)break}return x};i.t2length=u})(w0)),w0}var X1;function ap(){if(X1)return _c;X1=1,Object.defineProperty(_c,"__esModule",{value:!0}),_c.Path=void 0;const i=et(),t=Ke(),o=An(),a=cv();let d=class Ir extends o.Shape{constructor(f){super(f),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=Ir.parsePathData(this.data()),this.pathLength=Ir.getPathLength(this.dataArray)}_sceneFunc(f){const p=this.dataArray;f.beginPath();let m=!1;for(let v=0;v<p.length;v++){const x=p[v].command,P=p[v].points;switch(x){case"L":f.lineTo(P[0],P[1]);break;case"M":f.moveTo(P[0],P[1]);break;case"C":f.bezierCurveTo(P[0],P[1],P[2],P[3],P[4],P[5]);break;case"Q":f.quadraticCurveTo(P[0],P[1],P[2],P[3]);break;case"A":const _=P[0],k=P[1],C=P[2],N=P[3],I=P[4],j=P[5],T=P[6],S=P[7],L=C>N?C:N,M=C>N?1:C/N,b=C>N?N/C:1;f.translate(_,k),f.rotate(T),f.scale(M,b),f.arc(0,0,L,I,I+j,1-S),f.scale(1/M,1/b),f.rotate(-T),f.translate(-_,-k);break;case"z":m=!0,f.closePath();break}}!m&&!this.hasFill()?f.strokeShape(this):f.fillStrokeShape(this)}getSelfRect(){let f=[];this.dataArray.forEach(function(k){if(k.command==="A"){const C=k.points[4],N=k.points[5],I=k.points[4]+N;let j=Math.PI/180;if(Math.abs(C-I)<j&&(j=Math.abs(C-I)),N<0)for(let T=C-j;T>I;T-=j){const S=Ir.getPointOnEllipticalArc(k.points[0],k.points[1],k.points[2],k.points[3],T,0);f.push(S.x,S.y)}else for(let T=C+j;T<I;T+=j){const S=Ir.getPointOnEllipticalArc(k.points[0],k.points[1],k.points[2],k.points[3],T,0);f.push(S.x,S.y)}}else if(k.command==="C")for(let C=0;C<=1;C+=.01){const N=Ir.getPointOnCubicBezier(C,k.start.x,k.start.y,k.points[0],k.points[1],k.points[2],k.points[3],k.points[4],k.points[5]);f.push(N.x,N.y)}else f=f.concat(k.points)});let p=f[0],m=f[0],v=f[1],x=f[1],P,_;for(let k=0;k<f.length/2;k++)P=f[k*2],_=f[k*2+1],isNaN(P)||(p=Math.min(p,P),m=Math.max(m,P)),isNaN(_)||(v=Math.min(v,_),x=Math.max(x,_));return{x:p,y:v,width:m-p,height:x-v}}getLength(){return this.pathLength}getPointAtLength(f){return Ir.getPointAtLengthOfDataArray(f,this.dataArray)}static getLineLength(f,p,m,v){return Math.sqrt((m-f)*(m-f)+(v-p)*(v-p))}static getPathLength(f){let p=0;for(let m=0;m<f.length;++m)p+=f[m].pathLength;return p}static getPointAtLengthOfDataArray(f,p){let m,v=0,x=p.length;if(!x)return null;for(;v<x&&f>p[v].pathLength;)f-=p[v].pathLength,++v;if(v===x)return m=p[v-1].points.slice(-2),{x:m[0],y:m[1]};if(f<.01)return p[v].command==="M"?(m=p[v].points.slice(0,2),{x:m[0],y:m[1]}):{x:p[v].start.x,y:p[v].start.y};const P=p[v],_=P.points;switch(P.command){case"L":return Ir.getPointOnLine(f,P.start.x,P.start.y,_[0],_[1]);case"C":return Ir.getPointOnCubicBezier((0,a.t2length)(f,Ir.getPathLength(p),L=>(0,a.getCubicArcLength)([P.start.x,_[0],_[2],_[4]],[P.start.y,_[1],_[3],_[5]],L)),P.start.x,P.start.y,_[0],_[1],_[2],_[3],_[4],_[5]);case"Q":return Ir.getPointOnQuadraticBezier((0,a.t2length)(f,Ir.getPathLength(p),L=>(0,a.getQuadraticArcLength)([P.start.x,_[0],_[2]],[P.start.y,_[1],_[3]],L)),P.start.x,P.start.y,_[0],_[1],_[2],_[3]);case"A":const k=_[0],C=_[1],N=_[2],I=_[3],j=_[5],T=_[6];let S=_[4];return S+=j*f/P.pathLength,Ir.getPointOnEllipticalArc(k,C,N,I,S,T)}return null}static getPointOnLine(f,p,m,v,x,P,_){P=P??p,_=_??m;const k=this.getLineLength(p,m,v,x);if(k<1e-10)return{x:p,y:m};if(v===p)return{x:P,y:_+(x>m?f:-f)};const C=(x-m)/(v-p),N=Math.sqrt(f*f/(1+C*C))*(v<p?-1:1),I=C*N;if(Math.abs(_-m-C*(P-p))<1e-10)return{x:P+N,y:_+I};const j=((P-p)*(v-p)+(_-m)*(x-m))/(k*k),T=p+j*(v-p),S=m+j*(x-m),L=this.getLineLength(P,_,T,S),M=Math.sqrt(f*f-L*L),b=Math.sqrt(M*M/(1+C*C))*(v<p?-1:1),Y=C*b;return{x:T+b,y:S+Y}}static getPointOnCubicBezier(f,p,m,v,x,P,_,k,C){function N(M){return M*M*M}function I(M){return 3*M*M*(1-M)}function j(M){return 3*M*(1-M)*(1-M)}function T(M){return(1-M)*(1-M)*(1-M)}const S=k*N(f)+P*I(f)+v*j(f)+p*T(f),L=C*N(f)+_*I(f)+x*j(f)+m*T(f);return{x:S,y:L}}static getPointOnQuadraticBezier(f,p,m,v,x,P,_){function k(T){return T*T}function C(T){return 2*T*(1-T)}function N(T){return(1-T)*(1-T)}const I=P*k(f)+v*C(f)+p*N(f),j=_*k(f)+x*C(f)+m*N(f);return{x:I,y:j}}static getPointOnEllipticalArc(f,p,m,v,x,P){const _=Math.cos(P),k=Math.sin(P),C={x:m*Math.cos(x),y:v*Math.sin(x)};return{x:f+(C.x*_-C.y*k),y:p+(C.x*k+C.y*_)}}static parsePathData(f){if(!f)return[];let p=f;const m=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];p=p.replace(new RegExp(" ","g"),",");for(let I=0;I<m.length;I++)p=p.replace(new RegExp(m[I],"g"),"|"+m[I]);const v=p.split("|"),x=[],P=[];let _=0,k=0;const C=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let N;for(let I=1;I<v.length;I++){let j=v[I],T=j.charAt(0);for(j=j.slice(1),P.length=0;N=C.exec(j);)P.push(N[0]);const S=[];for(let L=0,M=P.length;L<M;L++){if(P[L]==="00"){S.push(0,0);continue}const b=parseFloat(P[L]);isNaN(b)?S.push(0):S.push(b)}for(;S.length>0&&!isNaN(S[0]);){let L="",M=[];const b=_,Y=k;let A,U,B,V,X,$,ne,ee,pe,D;switch(T){case"l":_+=S.shift(),k+=S.shift(),L="L",M.push(_,k);break;case"L":_=S.shift(),k=S.shift(),M.push(_,k);break;case"m":const z=S.shift(),W=S.shift();if(_+=z,k+=W,L="M",x.length>2&&x[x.length-1].command==="z"){for(let G=x.length-2;G>=0;G--)if(x[G].command==="M"){_=x[G].points[0]+z,k=x[G].points[1]+W;break}}M.push(_,k),T="l";break;case"M":_=S.shift(),k=S.shift(),L="M",M.push(_,k),T="L";break;case"h":_+=S.shift(),L="L",M.push(_,k);break;case"H":_=S.shift(),L="L",M.push(_,k);break;case"v":k+=S.shift(),L="L",M.push(_,k);break;case"V":k=S.shift(),L="L",M.push(_,k);break;case"C":M.push(S.shift(),S.shift(),S.shift(),S.shift()),_=S.shift(),k=S.shift(),M.push(_,k);break;case"c":M.push(_+S.shift(),k+S.shift(),_+S.shift(),k+S.shift()),_+=S.shift(),k+=S.shift(),L="C",M.push(_,k);break;case"S":U=_,B=k,A=x[x.length-1],A.command==="C"&&(U=_+(_-A.points[2]),B=k+(k-A.points[3])),M.push(U,B,S.shift(),S.shift()),_=S.shift(),k=S.shift(),L="C",M.push(_,k);break;case"s":U=_,B=k,A=x[x.length-1],A.command==="C"&&(U=_+(_-A.points[2]),B=k+(k-A.points[3])),M.push(U,B,_+S.shift(),k+S.shift()),_+=S.shift(),k+=S.shift(),L="C",M.push(_,k);break;case"Q":M.push(S.shift(),S.shift()),_=S.shift(),k=S.shift(),M.push(_,k);break;case"q":M.push(_+S.shift(),k+S.shift()),_+=S.shift(),k+=S.shift(),L="Q",M.push(_,k);break;case"T":U=_,B=k,A=x[x.length-1],A.command==="Q"&&(U=_+(_-A.points[0]),B=k+(k-A.points[1])),_=S.shift(),k=S.shift(),L="Q",M.push(U,B,_,k);break;case"t":U=_,B=k,A=x[x.length-1],A.command==="Q"&&(U=_+(_-A.points[0]),B=k+(k-A.points[1])),_+=S.shift(),k+=S.shift(),L="Q",M.push(U,B,_,k);break;case"A":V=S.shift(),X=S.shift(),$=S.shift(),ne=S.shift(),ee=S.shift(),pe=_,D=k,_=S.shift(),k=S.shift(),L="A",M=this.convertEndpointToCenterParameterization(pe,D,_,k,ne,ee,V,X,$);break;case"a":V=S.shift(),X=S.shift(),$=S.shift(),ne=S.shift(),ee=S.shift(),pe=_,D=k,_+=S.shift(),k+=S.shift(),L="A",M=this.convertEndpointToCenterParameterization(pe,D,_,k,ne,ee,V,X,$);break}x.push({command:L||T,points:M,start:{x:b,y:Y},pathLength:this.calcLength(b,Y,L||T,M)})}(T==="z"||T==="Z")&&x.push({command:"z",points:[],start:void 0,pathLength:0})}return x}static calcLength(f,p,m,v){let x,P,_,k;const C=Ir;switch(m){case"L":return C.getLineLength(f,p,v[0],v[1]);case"C":return(0,a.getCubicArcLength)([f,v[0],v[2],v[4]],[p,v[1],v[3],v[5]],1);case"Q":return(0,a.getQuadraticArcLength)([f,v[0],v[2]],[p,v[1],v[3]],1);case"A":x=0;const N=v[4],I=v[5],j=v[4]+I;let T=Math.PI/180;if(Math.abs(N-j)<T&&(T=Math.abs(N-j)),P=C.getPointOnEllipticalArc(v[0],v[1],v[2],v[3],N,0),I<0)for(k=N-T;k>j;k-=T)_=C.getPointOnEllipticalArc(v[0],v[1],v[2],v[3],k,0),x+=C.getLineLength(P.x,P.y,_.x,_.y),P=_;else for(k=N+T;k<j;k+=T)_=C.getPointOnEllipticalArc(v[0],v[1],v[2],v[3],k,0),x+=C.getLineLength(P.x,P.y,_.x,_.y),P=_;return _=C.getPointOnEllipticalArc(v[0],v[1],v[2],v[3],j,0),x+=C.getLineLength(P.x,P.y,_.x,_.y),x}return 0}static convertEndpointToCenterParameterization(f,p,m,v,x,P,_,k,C){const N=C*(Math.PI/180),I=Math.cos(N)*(f-m)/2+Math.sin(N)*(p-v)/2,j=-1*Math.sin(N)*(f-m)/2+Math.cos(N)*(p-v)/2,T=I*I/(_*_)+j*j/(k*k);T>1&&(_*=Math.sqrt(T),k*=Math.sqrt(T));let S=Math.sqrt((_*_*(k*k)-_*_*(j*j)-k*k*(I*I))/(_*_*(j*j)+k*k*(I*I)));x===P&&(S*=-1),isNaN(S)&&(S=0);const L=S*_*j/k,M=S*-k*I/_,b=(f+m)/2+Math.cos(N)*L-Math.sin(N)*M,Y=(p+v)/2+Math.sin(N)*L+Math.cos(N)*M,A=function(ee){return Math.sqrt(ee[0]*ee[0]+ee[1]*ee[1])},U=function(ee,pe){return(ee[0]*pe[0]+ee[1]*pe[1])/(A(ee)*A(pe))},B=function(ee,pe){return(ee[0]*pe[1]<ee[1]*pe[0]?-1:1)*Math.acos(U(ee,pe))},V=B([1,0],[(I-L)/_,(j-M)/k]),X=[(I-L)/_,(j-M)/k],$=[(-1*I-L)/_,(-1*j-M)/k];let ne=B(X,$);return U(X,$)<=-1&&(ne=Math.PI),U(X,$)>=1&&(ne=0),P===0&&ne>0&&(ne=ne-2*Math.PI),P===1&&ne<0&&(ne=ne+2*Math.PI),[b,Y,_,k,V,ne,N,P]}};return _c.Path=d,d.prototype.className="Path",d.prototype._attrsAffectingSize=["data"],(0,t._registerNode)(d),i.Factory.addGetterSetter(d,"data"),_c}var K1;function dv(){if(K1)return yc;K1=1,Object.defineProperty(yc,"__esModule",{value:!0}),yc.Arrow=void 0;const i=et(),t=b2(),o=nt(),a=Ke(),d=ap();let u=class extends t.Line{_sceneFunc(p){super._sceneFunc(p);const m=Math.PI*2,v=this.points();let x=v;const P=this.tension()!==0&&v.length>4;P&&(x=this.getTensionPoints());const _=this.pointerLength(),k=v.length;let C,N;if(P){const T=[x[x.length-4],x[x.length-3],x[x.length-2],x[x.length-1],v[k-2],v[k-1]],S=d.Path.calcLength(x[x.length-4],x[x.length-3],"C",T),L=d.Path.getPointOnQuadraticBezier(Math.min(1,1-_/S),T[0],T[1],T[2],T[3],T[4],T[5]);C=v[k-2]-L.x,N=v[k-1]-L.y}else C=v[k-2]-v[k-4],N=v[k-1]-v[k-3];const I=(Math.atan2(N,C)+m)%m,j=this.pointerWidth();this.pointerAtEnding()&&(p.save(),p.beginPath(),p.translate(v[k-2],v[k-1]),p.rotate(I),p.moveTo(0,0),p.lineTo(-_,j/2),p.lineTo(-_,-j/2),p.closePath(),p.restore(),this.__fillStroke(p)),this.pointerAtBeginning()&&(p.save(),p.beginPath(),p.translate(v[0],v[1]),P?(C=(x[0]+x[2])/2-v[0],N=(x[1]+x[3])/2-v[1]):(C=v[2]-v[0],N=v[3]-v[1]),p.rotate((Math.atan2(-N,-C)+m)%m),p.moveTo(0,0),p.lineTo(-_,j/2),p.lineTo(-_,-j/2),p.closePath(),p.restore(),this.__fillStroke(p))}__fillStroke(p){const m=this.dashEnabled();m&&(this.attrs.dashEnabled=!1,p.setLineDash([])),p.fillStrokeShape(this),m&&(this.attrs.dashEnabled=!0)}getSelfRect(){const p=super.getSelfRect(),m=this.pointerWidth()/2;return{x:p.x,y:p.y-m,width:p.width,height:p.height+m*2}}};return yc.Arrow=u,u.prototype.className="Arrow",(0,a._registerNode)(u),i.Factory.addGetterSetter(u,"pointerLength",10,(0,o.getNumberValidator)()),i.Factory.addGetterSetter(u,"pointerWidth",10,(0,o.getNumberValidator)()),i.Factory.addGetterSetter(u,"pointerAtBeginning",!1),i.Factory.addGetterSetter(u,"pointerAtEnding",!0),yc}var Sc={},Q1;function hv(){if(Q1)return Sc;Q1=1,Object.defineProperty(Sc,"__esModule",{value:!0}),Sc.Circle=void 0;const i=et(),t=An(),o=nt(),a=Ke();class d extends t.Shape{_sceneFunc(f){f.beginPath(),f.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),f.closePath(),f.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(f){this.radius()!==f/2&&this.radius(f/2)}setHeight(f){this.radius()!==f/2&&this.radius(f/2)}}return Sc.Circle=d,d.prototype._centroid=!0,d.prototype.className="Circle",d.prototype._attrsAffectingSize=["radius"],(0,a._registerNode)(d),i.Factory.addGetterSetter(d,"radius",0,(0,o.getNumberValidator)()),Sc}var wc={},J1;function fv(){if(J1)return wc;J1=1,Object.defineProperty(wc,"__esModule",{value:!0}),wc.Ellipse=void 0;const i=et(),t=An(),o=nt(),a=Ke();class d extends t.Shape{_sceneFunc(f){const p=this.radiusX(),m=this.radiusY();f.beginPath(),f.save(),p!==m&&f.scale(1,m/p),f.arc(0,0,p,0,Math.PI*2,!1),f.restore(),f.closePath(),f.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(f){this.radiusX(f/2)}setHeight(f){this.radiusY(f/2)}}return wc.Ellipse=d,d.prototype.className="Ellipse",d.prototype._centroid=!0,d.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,a._registerNode)(d),i.Factory.addComponentsGetterSetter(d,"radius",["x","y"]),i.Factory.addGetterSetter(d,"radiusX",0,(0,o.getNumberValidator)()),i.Factory.addGetterSetter(d,"radiusY",0,(0,o.getNumberValidator)()),wc}var kc={},Z1;function pv(){if(Z1)return kc;Z1=1,Object.defineProperty(kc,"__esModule",{value:!0}),kc.Image=void 0;const i=Yt(),t=et(),o=An(),a=Ke(),d=nt();class u extends o.Shape{constructor(p){super(p),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",m=>{this._removeImageLoad(m.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const p=this.image();p&&p.complete||p&&p.readyState===4||p&&p.addEventListener&&p.addEventListener("load",this._loadListener)}_removeImageLoad(p){p&&p.removeEventListener&&p.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const p=!!this.cornerRadius(),m=this.hasShadow();return p&&m?!0:super._useBufferCanvas(!0)}_sceneFunc(p){const m=this.getWidth(),v=this.getHeight(),x=this.cornerRadius(),P=this.attrs.image;let _;if(P){const k=this.attrs.cropWidth,C=this.attrs.cropHeight;k&&C?_=[P,this.cropX(),this.cropY(),k,C,0,0,m,v]:_=[P,0,0,m,v]}(this.hasFill()||this.hasStroke()||x)&&(p.beginPath(),x?i.Util.drawRoundedRectPath(p,m,v,x):p.rect(0,0,m,v),p.closePath(),p.fillStrokeShape(this)),P&&(x&&p.clip(),p.drawImage.apply(p,_))}_hitFunc(p){const m=this.width(),v=this.height(),x=this.cornerRadius();p.beginPath(),x?i.Util.drawRoundedRectPath(p,m,v,x):p.rect(0,0,m,v),p.closePath(),p.fillStrokeShape(this)}getWidth(){var p,m;return(p=this.attrs.width)!==null&&p!==void 0?p:(m=this.image())===null||m===void 0?void 0:m.width}getHeight(){var p,m;return(p=this.attrs.height)!==null&&p!==void 0?p:(m=this.image())===null||m===void 0?void 0:m.height}static fromURL(p,m,v=null){const x=i.Util.createImageElement();x.onload=function(){const P=new u({image:x});m(P)},x.onerror=v,x.crossOrigin="Anonymous",x.src=p}}return kc.Image=u,u.prototype.className="Image",(0,a._registerNode)(u),t.Factory.addGetterSetter(u,"cornerRadius",0,(0,d.getNumberOrArrayOfNumbersValidator)(4)),t.Factory.addGetterSetter(u,"image"),t.Factory.addComponentsGetterSetter(u,"crop",["x","y","width","height"]),t.Factory.addGetterSetter(u,"cropX",0,(0,d.getNumberValidator)()),t.Factory.addGetterSetter(u,"cropY",0,(0,d.getNumberValidator)()),t.Factory.addGetterSetter(u,"cropWidth",0,(0,d.getNumberValidator)()),t.Factory.addGetterSetter(u,"cropHeight",0,(0,d.getNumberValidator)()),kc}var Cl={},$1;function gv(){if($1)return Cl;$1=1,Object.defineProperty(Cl,"__esModule",{value:!0}),Cl.Tag=Cl.Label=void 0;const i=et(),t=An(),o=op(),a=nt(),d=Ke(),u=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],f="Change.konva",p="none",m="up",v="right",x="down",P="left",_=u.length;class k extends o.Group{constructor(I){super(I),this.on("add.konva",function(j){this._addListeners(j.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(I){let j=this,T;const S=function(){j._sync()};for(T=0;T<_;T++)I.on(u[T]+f,S)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let I=this.getText(),j=this.getTag(),T,S,L,M,b,Y,A;if(I&&j){switch(T=I.width(),S=I.height(),L=j.pointerDirection(),M=j.pointerWidth(),A=j.pointerHeight(),b=0,Y=0,L){case m:b=T/2,Y=-1*A;break;case v:b=T+M,Y=S/2;break;case x:b=T/2,Y=S+A;break;case P:b=-1*M,Y=S/2;break}j.setAttrs({x:-1*b,y:-1*Y,width:T,height:S}),I.setAttrs({x:-1*b,y:-1*Y})}}}Cl.Label=k,k.prototype.className="Label",(0,d._registerNode)(k);class C extends t.Shape{_sceneFunc(I){const j=this.width(),T=this.height(),S=this.pointerDirection(),L=this.pointerWidth(),M=this.pointerHeight(),b=this.cornerRadius();let Y=0,A=0,U=0,B=0;typeof b=="number"?Y=A=U=B=Math.min(b,j/2,T/2):(Y=Math.min(b[0]||0,j/2,T/2),A=Math.min(b[1]||0,j/2,T/2),B=Math.min(b[2]||0,j/2,T/2),U=Math.min(b[3]||0,j/2,T/2)),I.beginPath(),I.moveTo(Y,0),S===m&&(I.lineTo((j-L)/2,0),I.lineTo(j/2,-1*M),I.lineTo((j+L)/2,0)),I.lineTo(j-A,0),I.arc(j-A,A,A,Math.PI*3/2,0,!1),S===v&&(I.lineTo(j,(T-M)/2),I.lineTo(j+L,T/2),I.lineTo(j,(T+M)/2)),I.lineTo(j,T-B),I.arc(j-B,T-B,B,0,Math.PI/2,!1),S===x&&(I.lineTo((j+L)/2,T),I.lineTo(j/2,T+M),I.lineTo((j-L)/2,T)),I.lineTo(U,T),I.arc(U,T-U,U,Math.PI/2,Math.PI,!1),S===P&&(I.lineTo(0,(T+M)/2),I.lineTo(-1*L,T/2),I.lineTo(0,(T-M)/2)),I.lineTo(0,Y),I.arc(Y,Y,Y,Math.PI,Math.PI*3/2,!1),I.closePath(),I.fillStrokeShape(this)}getSelfRect(){let I=0,j=0,T=this.pointerWidth(),S=this.pointerHeight(),L=this.pointerDirection(),M=this.width(),b=this.height();return L===m?(j-=S,b+=S):L===x?b+=S:L===P?(I-=T*1.5,M+=T):L===v&&(M+=T*1.5),{x:I,y:j,width:M,height:b}}}return Cl.Tag=C,C.prototype.className="Tag",(0,d._registerNode)(C),i.Factory.addGetterSetter(C,"pointerDirection",p),i.Factory.addGetterSetter(C,"pointerWidth",0,(0,a.getNumberValidator)()),i.Factory.addGetterSetter(C,"pointerHeight",0,(0,a.getNumberValidator)()),i.Factory.addGetterSetter(C,"cornerRadius",0,(0,a.getNumberOrArrayOfNumbersValidator)(4)),Cl}var xc={},eg;function U2(){if(eg)return xc;eg=1,Object.defineProperty(xc,"__esModule",{value:!0}),xc.Rect=void 0;const i=et(),t=An(),o=Ke(),a=Yt(),d=nt();class u extends t.Shape{_sceneFunc(p){const m=this.cornerRadius(),v=this.width(),x=this.height();p.beginPath(),m?a.Util.drawRoundedRectPath(p,v,x,m):p.rect(0,0,v,x),p.closePath(),p.fillStrokeShape(this)}}return xc.Rect=u,u.prototype.className="Rect",(0,o._registerNode)(u),i.Factory.addGetterSetter(u,"cornerRadius",0,(0,d.getNumberOrArrayOfNumbersValidator)(4)),xc}var Cc={},tg;function mv(){if(tg)return Cc;tg=1,Object.defineProperty(Cc,"__esModule",{value:!0}),Cc.RegularPolygon=void 0;const i=et(),t=An(),o=nt(),a=Ke();let d=class extends t.Shape{_sceneFunc(f){const p=this._getPoints();f.beginPath(),f.moveTo(p[0].x,p[0].y);for(let m=1;m<p.length;m++)f.lineTo(p[m].x,p[m].y);f.closePath(),f.fillStrokeShape(this)}_getPoints(){const f=this.attrs.sides,p=this.attrs.radius||0,m=[];for(let v=0;v<f;v++)m.push({x:p*Math.sin(v*2*Math.PI/f),y:-1*p*Math.cos(v*2*Math.PI/f)});return m}getSelfRect(){const f=this._getPoints();let p=f[0].x,m=f[0].y,v=f[0].x,x=f[0].y;return f.forEach(P=>{p=Math.min(p,P.x),m=Math.max(m,P.x),v=Math.min(v,P.y),x=Math.max(x,P.y)}),{x:p,y:v,width:m-p,height:x-v}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(f){this.radius(f/2)}setHeight(f){this.radius(f/2)}};return Cc.RegularPolygon=d,d.prototype.className="RegularPolygon",d.prototype._centroid=!0,d.prototype._attrsAffectingSize=["radius"],(0,a._registerNode)(d),i.Factory.addGetterSetter(d,"radius",0,(0,o.getNumberValidator)()),i.Factory.addGetterSetter(d,"sides",0,(0,o.getNumberValidator)()),Cc}var Ec={},ng;function yv(){if(ng)return Ec;ng=1,Object.defineProperty(Ec,"__esModule",{value:!0}),Ec.Ring=void 0;const i=et(),t=An(),o=nt(),a=Ke(),d=Math.PI*2;let u=class extends t.Shape{_sceneFunc(p){p.beginPath(),p.arc(0,0,this.innerRadius(),0,d,!1),p.moveTo(this.outerRadius(),0),p.arc(0,0,this.outerRadius(),d,0,!0),p.closePath(),p.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(p){this.outerRadius(p/2)}setHeight(p){this.outerRadius(p/2)}};return Ec.Ring=u,u.prototype.className="Ring",u.prototype._centroid=!0,u.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,a._registerNode)(u),i.Factory.addGetterSetter(u,"innerRadius",0,(0,o.getNumberValidator)()),i.Factory.addGetterSetter(u,"outerRadius",0,(0,o.getNumberValidator)()),Ec}var Pc={},rg;function vv(){if(rg)return Pc;rg=1,Object.defineProperty(Pc,"__esModule",{value:!0}),Pc.Sprite=void 0;const i=et(),t=An(),o=lp(),a=nt(),d=Ke();let u=class extends t.Shape{constructor(p){super(p),this._updated=!0,this.anim=new o.Animation(()=>{const m=this._updated;return this._updated=!1,m}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(p){const m=this.animation(),v=this.frameIndex(),x=v*4,P=this.animations()[m],_=this.frameOffsets(),k=P[x+0],C=P[x+1],N=P[x+2],I=P[x+3],j=this.image();if((this.hasFill()||this.hasStroke())&&(p.beginPath(),p.rect(0,0,N,I),p.closePath(),p.fillStrokeShape(this)),j)if(_){const T=_[m],S=v*2;p.drawImage(j,k,C,N,I,T[S+0],T[S+1],N,I)}else p.drawImage(j,k,C,N,I,0,0,N,I)}_hitFunc(p){const m=this.animation(),v=this.frameIndex(),x=v*4,P=this.animations()[m],_=this.frameOffsets(),k=P[x+2],C=P[x+3];if(p.beginPath(),_){const N=_[m],I=v*2;p.rect(N[I+0],N[I+1],k,C)}else p.rect(0,0,k,C);p.closePath(),p.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const p=this;this.interval=setInterval(function(){p._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const p=this.getLayer();this.anim.setLayers(p),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const p=this.frameIndex(),m=this.animation(),v=this.animations(),x=v[m],P=x.length/4;p<P-1?this.frameIndex(p+1):this.frameIndex(0)}};return Pc.Sprite=u,u.prototype.className="Sprite",(0,d._registerNode)(u),i.Factory.addGetterSetter(u,"animation"),i.Factory.addGetterSetter(u,"animations"),i.Factory.addGetterSetter(u,"frameOffsets"),i.Factory.addGetterSetter(u,"image"),i.Factory.addGetterSetter(u,"frameIndex",0,(0,a.getNumberValidator)()),i.Factory.addGetterSetter(u,"frameRate",17,(0,a.getNumberValidator)()),i.Factory.backCompat(u,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),Pc}var Nc={},ig;function _v(){if(ig)return Nc;ig=1,Object.defineProperty(Nc,"__esModule",{value:!0}),Nc.Star=void 0;const i=et(),t=An(),o=nt(),a=Ke();let d=class extends t.Shape{_sceneFunc(f){const p=this.innerRadius(),m=this.outerRadius(),v=this.numPoints();f.beginPath(),f.moveTo(0,0-m);for(let x=1;x<v*2;x++){const P=x%2===0?m:p,_=P*Math.sin(x*Math.PI/v),k=-1*P*Math.cos(x*Math.PI/v);f.lineTo(_,k)}f.closePath(),f.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(f){this.outerRadius(f/2)}setHeight(f){this.outerRadius(f/2)}};return Nc.Star=d,d.prototype.className="Star",d.prototype._centroid=!0,d.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,a._registerNode)(d),i.Factory.addGetterSetter(d,"numPoints",5,(0,o.getNumberValidator)()),i.Factory.addGetterSetter(d,"innerRadius",0,(0,o.getNumberValidator)()),i.Factory.addGetterSetter(d,"outerRadius",0,(0,o.getNumberValidator)()),Nc}var Ua={},sg;function j2(){if(sg)return Ua;sg=1,Object.defineProperty(Ua,"__esModule",{value:!0}),Ua.Text=void 0,Ua.stringToArray=f;const i=Yt(),t=et(),o=An(),a=Ke(),d=nt(),u=Ke();function f(J){return[...J].reduce((Z,he,me,le)=>{if(new RegExp("\\p{Emoji}","u").test(he)){const q=le[me+1];q&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(q)?(Z.push(he+q),le[me+1]=""):Z.push(he)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(he+(le[me+1]||""))?Z.push(he+le[me+1]):me>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(he)?Z[Z.length-1]+=he:he&&Z.push(he);return Z},[])}const p="auto",m="center",v="inherit",x="justify",P="Change.konva",_="2d",k="-",C="left",N="text",I="Text",j="top",T="bottom",S="middle",L="normal",M="px ",b=" ",Y="right",A="rtl",U="word",B="char",V="none",X="",$=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],ne=$.length;function ee(J){return J.split(",").map(Z=>{Z=Z.trim();const he=Z.indexOf(" ")>=0,me=Z.indexOf('"')>=0||Z.indexOf("'")>=0;return he&&!me&&(Z=`"${Z}"`),Z}).join(", ")}let pe;function D(){return pe||(pe=i.Util.createCanvasElement().getContext(_),pe)}function z(J){J.fillText(this._partialText,this._partialTextX,this._partialTextY)}function W(J){J.setAttr("miterLimit",2),J.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function G(J){return J=J||{},!J.fillLinearGradientColorStops&&!J.fillRadialGradientColorStops&&!J.fillPatternImage&&(J.fill=J.fill||"black"),J}class F extends o.Shape{constructor(Z){super(G(Z)),this._partialTextX=0,this._partialTextY=0;for(let he=0;he<ne;he++)this.on($[he]+P,this._setTextData);this._setTextData()}_sceneFunc(Z){const he=this.textArr,me=he.length;if(!this.text())return;let le=this.padding(),q=this.fontSize(),se=this.lineHeight()*q,ye=this.verticalAlign(),xe=this.direction(),Pe=0,Ue=this.align(),Oe=this.getWidth(),rt=this.letterSpacing(),Ge=this.fill(),Ut=this.textDecoration(),ot=Ut.indexOf("underline")!==-1,Et=Ut.indexOf("line-through")!==-1,Hr;xe=xe===v?Z.direction:xe;let Dt=se/2,wr=S;if(a.Konva._fixTextRendering){const ft=this.measureSize("M");wr="alphabetic",Dt=(ft.fontBoundingBoxAscent-ft.fontBoundingBoxDescent)/2+se/2}for(xe===A&&Z.setAttr("direction",xe),Z.setAttr("font",this._getContextFont()),Z.setAttr("textBaseline",wr),Z.setAttr("textAlign",C),ye===S?Pe=(this.getHeight()-me*se-le*2)/2:ye===T&&(Pe=this.getHeight()-me*se-le*2),Z.translate(le,Pe+le),Hr=0;Hr<me;Hr++){let ft=0,Xn=0;const cn=he[Hr],Wr=cn.text,dn=cn.width,kr=cn.lastInParagraph;if(Z.save(),Ue===Y?ft+=Oe-dn-le*2:Ue===m&&(ft+=(Oe-dn-le*2)/2),ot){Z.save(),Z.beginPath();const wn=a.Konva._fixTextRendering?Math.round(q/4):Math.round(q/2),or=ft,jt=Dt+Xn+wn;Z.moveTo(or,jt);const Bt=Ue===x&&!kr?Oe-le*2:dn;Z.lineTo(or+Math.round(Bt),jt),Z.lineWidth=q/15;const ns=this._getLinearGradient();Z.strokeStyle=ns||Ge,Z.stroke(),Z.restore()}if(Et){Z.save(),Z.beginPath();const wn=a.Konva._fixTextRendering?-Math.round(q/4):0;Z.moveTo(ft,Dt+Xn+wn);const or=Ue===x&&!kr?Oe-le*2:dn;Z.lineTo(ft+Math.round(or),Dt+Xn+wn),Z.lineWidth=q/15;const jt=this._getLinearGradient();Z.strokeStyle=jt||Ge,Z.stroke(),Z.restore()}if(xe!==A&&(rt!==0||Ue===x)){const wn=Wr.split(" ").length-1,or=f(Wr);for(let jt=0;jt<or.length;jt++){const Bt=or[jt];Bt===" "&&!kr&&Ue===x&&(ft+=(Oe-le*2-dn)/wn),this._partialTextX=ft,this._partialTextY=Dt+Xn,this._partialText=Bt,Z.fillStrokeShape(this),ft+=this.measureSize(Bt).width+rt}}else rt!==0&&Z.setAttr("letterSpacing",`${rt}px`),this._partialTextX=ft,this._partialTextY=Dt+Xn,this._partialText=Wr,Z.fillStrokeShape(this);Z.restore(),me>1&&(Dt+=se)}}_hitFunc(Z){const he=this.getWidth(),me=this.getHeight();Z.beginPath(),Z.rect(0,0,he,me),Z.closePath(),Z.fillStrokeShape(this)}setText(Z){const he=i.Util._isString(Z)?Z:Z==null?"":Z+"";return this._setAttr(N,he),this}getWidth(){return this.attrs.width===p||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===p||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return i.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(Z){var he,me,le,q,se,ye,xe,Pe,Ue,Oe,rt;let Ge=D(),Ut=this.fontSize(),ot;Ge.save(),Ge.font=this._getContextFont(),ot=Ge.measureText(Z),Ge.restore();const Et=Ut/100;return{actualBoundingBoxAscent:(he=ot.actualBoundingBoxAscent)!==null&&he!==void 0?he:71.58203125*Et,actualBoundingBoxDescent:(me=ot.actualBoundingBoxDescent)!==null&&me!==void 0?me:0,actualBoundingBoxLeft:(le=ot.actualBoundingBoxLeft)!==null&&le!==void 0?le:-7.421875*Et,actualBoundingBoxRight:(q=ot.actualBoundingBoxRight)!==null&&q!==void 0?q:75.732421875*Et,alphabeticBaseline:(se=ot.alphabeticBaseline)!==null&&se!==void 0?se:0,emHeightAscent:(ye=ot.emHeightAscent)!==null&&ye!==void 0?ye:100*Et,emHeightDescent:(xe=ot.emHeightDescent)!==null&&xe!==void 0?xe:-20*Et,fontBoundingBoxAscent:(Pe=ot.fontBoundingBoxAscent)!==null&&Pe!==void 0?Pe:91*Et,fontBoundingBoxDescent:(Ue=ot.fontBoundingBoxDescent)!==null&&Ue!==void 0?Ue:21*Et,hangingBaseline:(Oe=ot.hangingBaseline)!==null&&Oe!==void 0?Oe:72.80000305175781*Et,ideographicBaseline:(rt=ot.ideographicBaseline)!==null&&rt!==void 0?rt:-21*Et,width:ot.width,height:Ut}}_getContextFont(){return this.fontStyle()+b+this.fontVariant()+b+(this.fontSize()+M)+ee(this.fontFamily())}_addTextLine(Z){this.align()===x&&(Z=Z.trim());const me=this._getTextWidth(Z);return this.textArr.push({text:Z,width:me,lastInParagraph:!1})}_getTextWidth(Z){const he=this.letterSpacing(),me=Z.length;return D().measureText(Z).width+he*me}_setTextData(){let Z=this.text().split(`
`),he=+this.fontSize(),me=0,le=this.lineHeight()*he,q=this.attrs.width,se=this.attrs.height,ye=q!==p&&q!==void 0,xe=se!==p&&se!==void 0,Pe=this.padding(),Ue=q-Pe*2,Oe=se-Pe*2,rt=0,Ge=this.wrap(),Ut=Ge!==V,ot=Ge!==B&&Ut,Et=this.ellipsis();this.textArr=[],D().font=this._getContextFont();const Hr=Et?this._getTextWidth(X):0;for(let Dt=0,wr=Z.length;Dt<wr;++Dt){let ft=Z[Dt],Xn=this._getTextWidth(ft);if(ye&&Xn>Ue)for(;ft.length>0;){let cn=0,Wr=f(ft).length,dn="",kr=0;for(;cn<Wr;){const wn=cn+Wr>>>1,or=f(ft),jt=or.slice(0,wn+1).join(""),Bt=this._getTextWidth(jt);(Et&&xe&&rt+le>Oe?Bt+Hr:Bt)<=Ue?(cn=wn+1,dn=jt,kr=Bt):Wr=wn}if(dn){if(ot){const jt=f(ft),Bt=f(dn),ns=jt[Bt.length],Vo=ns===b||ns===k;let rs;if(Vo&&kr<=Ue)rs=Bt.length;else{const au=Bt.lastIndexOf(b),Ho=Bt.lastIndexOf(k);rs=Math.max(au,Ho)+1}rs>0&&(cn=rs,dn=jt.slice(0,cn).join(""),kr=this._getTextWidth(dn))}if(dn=dn.trimRight(),this._addTextLine(dn),me=Math.max(me,kr),rt+=le,this._shouldHandleEllipsis(rt)){this._tryToAddEllipsisToLastLine();break}if(ft=f(ft).slice(cn).join("").trimLeft(),ft.length>0&&(Xn=this._getTextWidth(ft),Xn<=Ue)){this._addTextLine(ft),rt+=le,me=Math.max(me,Xn);break}}else break}else this._addTextLine(ft),rt+=le,me=Math.max(me,Xn),this._shouldHandleEllipsis(rt)&&Dt<wr-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),xe&&rt+le>Oe)break}this.textHeight=he,this.textWidth=me}_shouldHandleEllipsis(Z){const he=+this.fontSize(),me=this.lineHeight()*he,le=this.attrs.height,q=le!==p&&le!==void 0,se=this.padding(),ye=le-se*2;return!(this.wrap()!==V)||q&&Z+me>ye}_tryToAddEllipsisToLastLine(){const Z=this.attrs.width,he=Z!==p&&Z!==void 0,me=this.padding(),le=Z-me*2,q=this.ellipsis(),se=this.textArr[this.textArr.length-1];!se||!q||(he&&(this._getTextWidth(se.text+X)<le||(se.text=se.text.slice(0,se.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(se.text+X))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const Z=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,he=this.hasShadow();return Z&&he?!0:super._useBufferCanvas()}}return Ua.Text=F,F.prototype._fillFunc=z,F.prototype._strokeFunc=W,F.prototype.className=I,F.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,u._registerNode)(F),t.Factory.overWriteSetter(F,"width",(0,d.getNumberOrAutoValidator)()),t.Factory.overWriteSetter(F,"height",(0,d.getNumberOrAutoValidator)()),t.Factory.addGetterSetter(F,"direction",v),t.Factory.addGetterSetter(F,"fontFamily","Arial"),t.Factory.addGetterSetter(F,"fontSize",12,(0,d.getNumberValidator)()),t.Factory.addGetterSetter(F,"fontStyle",L),t.Factory.addGetterSetter(F,"fontVariant",L),t.Factory.addGetterSetter(F,"padding",0,(0,d.getNumberValidator)()),t.Factory.addGetterSetter(F,"align",C),t.Factory.addGetterSetter(F,"verticalAlign",j),t.Factory.addGetterSetter(F,"lineHeight",1,(0,d.getNumberValidator)()),t.Factory.addGetterSetter(F,"wrap",U),t.Factory.addGetterSetter(F,"ellipsis",!1,(0,d.getBooleanValidator)()),t.Factory.addGetterSetter(F,"letterSpacing",0,(0,d.getNumberValidator)()),t.Factory.addGetterSetter(F,"text","",(0,d.getStringValidator)()),t.Factory.addGetterSetter(F,"textDecoration",""),Ua}var Tc={},og;function Sv(){if(og)return Tc;og=1,Object.defineProperty(Tc,"__esModule",{value:!0}),Tc.TextPath=void 0;const i=Yt(),t=et(),o=An(),a=ap(),d=j2(),u=nt(),f=Ke(),p="",m="normal";function v(_){_.fillText(this.partialText,0,0)}function x(_){_.strokeText(this.partialText,0,0)}let P=class extends o.Shape{constructor(k){super(k),this.dummyCanvas=i.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return a.Path.getPathLength(this.dataArray)}_getPointAtLength(k){if(!this.attrs.data)return null;const C=this.pathLength;return k-1>C?null:a.Path.getPointAtLengthOfDataArray(k,this.dataArray)}_readDataAttribute(){this.dataArray=a.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(k){k.setAttr("font",this._getContextFont()),k.setAttr("textBaseline",this.textBaseline()),k.setAttr("textAlign","left"),k.save();const C=this.textDecoration(),N=this.fill(),I=this.fontSize(),j=this.glyphInfo;C==="underline"&&k.beginPath();for(let T=0;T<j.length;T++){k.save();const S=j[T].p0;k.translate(S.x,S.y),k.rotate(j[T].rotation),this.partialText=j[T].text,k.fillStrokeShape(this),C==="underline"&&(T===0&&k.moveTo(0,I/2+1),k.lineTo(I,I/2+1)),k.restore()}C==="underline"&&(k.strokeStyle=N,k.lineWidth=I/20,k.stroke()),k.restore()}_hitFunc(k){k.beginPath();const C=this.glyphInfo;if(C.length>=1){const N=C[0].p0;k.moveTo(N.x,N.y)}for(let N=0;N<C.length;N++){const I=C[N].p1;k.lineTo(I.x,I.y)}k.setAttr("lineWidth",this.fontSize()),k.setAttr("strokeStyle",this.colorKey),k.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return i.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(k){return d.Text.prototype.setText.call(this,k)}_getContextFont(){return d.Text.prototype._getContextFont.call(this)}_getTextSize(k){const N=this.dummyCanvas.getContext("2d");N.save(),N.font=this._getContextFont();const I=N.measureText(k);return N.restore(),{width:I.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:k,height:C}=this._getTextSize(this.attrs.text);if(this.textWidth=k,this.textHeight=C,this.glyphInfo=[],!this.attrs.data)return null;const N=this.letterSpacing(),I=this.align(),j=this.kerningFunc(),T=Math.max(this.textWidth+((this.attrs.text||"").length-1)*N,0);let S=0;I==="center"&&(S=Math.max(0,this.pathLength/2-T/2)),I==="right"&&(S=Math.max(0,this.pathLength-T));const L=(0,d.stringToArray)(this.text());let M=S;for(let b=0;b<L.length;b++){const Y=this._getPointAtLength(M);if(!Y)return;let A=this._getTextSize(L[b]).width+N;if(L[b]===" "&&I==="justify"){const ne=this.text().split(" ").length-1;A+=(this.pathLength-T)/ne}const U=this._getPointAtLength(M+A);if(!U)return;const B=a.Path.getLineLength(Y.x,Y.y,U.x,U.y);let V=0;if(j)try{V=j(L[b-1],L[b])*this.fontSize()}catch{V=0}Y.x+=V,U.x+=V,this.textWidth+=V;const X=a.Path.getPointOnLine(V+B/2,Y.x,Y.y,U.x,U.y),$=Math.atan2(U.y-Y.y,U.x-Y.x);this.glyphInfo.push({transposeX:X.x,transposeY:X.y,text:L[b],rotation:$,p0:Y,p1:U}),M+=A}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const k=[];this.glyphInfo.forEach(function(M){k.push(M.p0.x),k.push(M.p0.y),k.push(M.p1.x),k.push(M.p1.y)});let C=k[0]||0,N=k[0]||0,I=k[1]||0,j=k[1]||0,T,S;for(let M=0;M<k.length/2;M++)T=k[M*2],S=k[M*2+1],C=Math.min(C,T),N=Math.max(N,T),I=Math.min(I,S),j=Math.max(j,S);const L=this.fontSize();return{x:C-L/2,y:I-L/2,width:N-C+L,height:j-I+L}}destroy(){return i.Util.releaseCanvas(this.dummyCanvas),super.destroy()}};return Tc.TextPath=P,P.prototype._fillFunc=v,P.prototype._strokeFunc=x,P.prototype._fillFuncHit=v,P.prototype._strokeFuncHit=x,P.prototype.className="TextPath",P.prototype._attrsAffectingSize=["text","fontSize","data"],(0,f._registerNode)(P),t.Factory.addGetterSetter(P,"data"),t.Factory.addGetterSetter(P,"fontFamily","Arial"),t.Factory.addGetterSetter(P,"fontSize",12,(0,u.getNumberValidator)()),t.Factory.addGetterSetter(P,"fontStyle",m),t.Factory.addGetterSetter(P,"align","left"),t.Factory.addGetterSetter(P,"letterSpacing",0,(0,u.getNumberValidator)()),t.Factory.addGetterSetter(P,"textBaseline","middle"),t.Factory.addGetterSetter(P,"fontVariant",m),t.Factory.addGetterSetter(P,"text",p),t.Factory.addGetterSetter(P,"textDecoration",""),t.Factory.addGetterSetter(P,"kerningFunc",void 0),Tc}var Rc={},lg;function wv(){if(lg)return Rc;lg=1,Object.defineProperty(Rc,"__esModule",{value:!0}),Rc.Transformer=void 0;const i=Yt(),t=et(),o=tn(),a=An(),d=U2(),u=op(),f=Ke(),p=nt(),m=Ke(),v="tr-konva",x=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(A=>A+`.${v}`).join(" "),P="nodesRect",_=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],k={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},C="ontouchstart"in f.Konva._global;function N(A,U,B){if(A==="rotater")return B;U+=i.Util.degToRad(k[A]||0);const V=(i.Util.radToDeg(U)%360+360)%360;return i.Util._inRange(V,315+22.5,360)||i.Util._inRange(V,0,22.5)?"ns-resize":i.Util._inRange(V,45-22.5,45+22.5)?"nesw-resize":i.Util._inRange(V,90-22.5,90+22.5)?"ew-resize":i.Util._inRange(V,135-22.5,135+22.5)?"nwse-resize":i.Util._inRange(V,180-22.5,180+22.5)?"ns-resize":i.Util._inRange(V,225-22.5,225+22.5)?"nesw-resize":i.Util._inRange(V,270-22.5,270+22.5)?"ew-resize":i.Util._inRange(V,315-22.5,315+22.5)?"nwse-resize":(i.Util.error("Transformer has unknown angle for cursor detection: "+V),"pointer")}const I=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function j(A){return{x:A.x+A.width/2*Math.cos(A.rotation)+A.height/2*Math.sin(-A.rotation),y:A.y+A.height/2*Math.cos(A.rotation)+A.width/2*Math.sin(A.rotation)}}function T(A,U,B){const V=B.x+(A.x-B.x)*Math.cos(U)-(A.y-B.y)*Math.sin(U),X=B.y+(A.x-B.x)*Math.sin(U)+(A.y-B.y)*Math.cos(U);return{...A,rotation:A.rotation+U,x:V,y:X}}function S(A,U){const B=j(A);return T(A,U,B)}function L(A,U,B){let V=U;for(let X=0;X<A.length;X++){const $=f.Konva.getAngle(A[X]),ne=Math.abs($-U)%(Math.PI*2);Math.min(ne,Math.PI*2-ne)<B&&(V=$)}return V}let M=0;class b extends u.Group{constructor(U){super(U),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(x,this.update),this.getNode()&&this.update()}attachTo(U){return this.setNode(U),this}setNode(U){return i.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([U])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return v+this._id}setNodes(U=[]){this._nodes&&this._nodes.length&&this.detach();const B=U.filter(X=>X.isAncestorOf(this)?(i.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=U=B,U.length===1&&this.useSingleNodeRotation()?this.rotation(U[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(X=>{const $=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(X._attrsAffectingSize.length){const ne=X._attrsAffectingSize.map(ee=>ee+"Change."+this._getEventNamespace()).join(" ");X.on(ne,$)}X.on(_.map(ne=>ne+`.${this._getEventNamespace()}`).join(" "),$),X.on(`absoluteTransformChange.${this._getEventNamespace()}`,$),this._proxyDrag(X)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(U){let B;U.on(`dragstart.${this._getEventNamespace()}`,V=>{B=U.getAbsolutePosition(),!this.isDragging()&&U!==this.findOne(".back")&&this.startDrag(V,!1)}),U.on(`dragmove.${this._getEventNamespace()}`,V=>{if(!B)return;const X=U.getAbsolutePosition(),$=X.x-B.x,ne=X.y-B.y;this.nodes().forEach(ee=>{if(ee===U||ee.isDragging())return;const pe=ee.getAbsolutePosition();ee.setAbsolutePosition({x:pe.x+$,y:pe.y+ne}),ee.startDrag(V)}),B=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(U=>{U.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(P),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(P,this.__getNodeRect)}__getNodeShape(U,B=this.rotation(),V){const X=U.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),$=U.getAbsoluteScale(V),ne=U.getAbsolutePosition(V),ee=X.x*$.x-U.offsetX()*$.x,pe=X.y*$.y-U.offsetY()*$.y,D=(f.Konva.getAngle(U.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),z={x:ne.x+ee*Math.cos(D)+pe*Math.sin(-D),y:ne.y+pe*Math.cos(D)+ee*Math.sin(D),width:X.width*$.x,height:X.height*$.y,rotation:D};return T(z,-f.Konva.getAngle(B),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const B=[];this.nodes().map(D=>{const z=D.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),W=[{x:z.x,y:z.y},{x:z.x+z.width,y:z.y},{x:z.x+z.width,y:z.y+z.height},{x:z.x,y:z.y+z.height}],G=D.getAbsoluteTransform();W.forEach(function(F){const J=G.point(F);B.push(J)})});const V=new i.Transform;V.rotate(-f.Konva.getAngle(this.rotation()));let X=1/0,$=1/0,ne=-1/0,ee=-1/0;B.forEach(function(D){const z=V.point(D);X===void 0&&(X=ne=z.x,$=ee=z.y),X=Math.min(X,z.x),$=Math.min($,z.y),ne=Math.max(ne,z.x),ee=Math.max(ee,z.y)}),V.invert();const pe=V.point({x:X,y:$});return{x:pe.x,y:pe.y,width:ne-X,height:ee-$,rotation:f.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),I.forEach(U=>{this._createAnchor(U)}),this._createAnchor("rotater")}_createAnchor(U){const B=new d.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:U+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:C?10:"auto"}),V=this;B.on("mousedown touchstart",function(X){V._handleMouseDown(X)}),B.on("dragstart",X=>{B.stopDrag(),X.cancelBubble=!0}),B.on("dragend",X=>{X.cancelBubble=!0}),B.on("mouseenter",()=>{const X=f.Konva.getAngle(this.rotation()),$=this.rotateAnchorCursor(),ne=N(U,X,$);B.getStage().content&&(B.getStage().content.style.cursor=ne),this._cursorChange=!0}),B.on("mouseout",()=>{B.getStage().content&&(B.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(B)}_createBack(){const U=new a.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(B,V){const X=V.getParent(),$=X.padding();B.beginPath(),B.rect(-$,-$,V.width()+$*2,V.height()+$*2),B.moveTo(V.width()/2,-$),X.rotateEnabled()&&X.rotateLineVisible()&&B.lineTo(V.width()/2,-X.rotateAnchorOffset()*i.Util._sign(V.height())-$),B.fillStrokeShape(V)},hitFunc:(B,V)=>{if(!this.shouldOverdrawWholeArea())return;const X=this.padding();B.beginPath(),B.rect(-X,-X,V.width()+X*2,V.height()+X*2),B.fillStrokeShape(V)}});this.add(U),this._proxyDrag(U),U.on("dragstart",B=>{B.cancelBubble=!0}),U.on("dragmove",B=>{B.cancelBubble=!0}),U.on("dragend",B=>{B.cancelBubble=!0}),this.on("dragmove",B=>{this.update()})}_handleMouseDown(U){if(this._transforming)return;this._movingAnchorName=U.target.name().split(" ")[0];const B=this._getNodeRect(),V=B.width,X=B.height,$=Math.sqrt(Math.pow(V,2)+Math.pow(X,2));this.sin=Math.abs(X/$),this.cos=Math.abs(V/$),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const ne=U.target.getAbsolutePosition(),ee=U.target.getStage().getPointerPosition();this._anchorDragOffset={x:ee.x-ne.x,y:ee.y-ne.y},M++,this._fire("transformstart",{evt:U.evt,target:this.getNode()}),this._nodes.forEach(pe=>{pe._fire("transformstart",{evt:U.evt,target:pe})})}_handleMouseMove(U){let B,V,X;const $=this.findOne("."+this._movingAnchorName),ne=$.getStage();ne.setPointersPositions(U);const ee=ne.getPointerPosition();let pe={x:ee.x-this._anchorDragOffset.x,y:ee.y-this._anchorDragOffset.y};const D=$.getAbsolutePosition();this.anchorDragBoundFunc()&&(pe=this.anchorDragBoundFunc()(D,pe,U)),$.setAbsolutePosition(pe);const z=$.getAbsolutePosition();if(D.x===z.x&&D.y===z.y)return;if(this._movingAnchorName==="rotater"){const le=this._getNodeRect();B=$.x()-le.width/2,V=-$.y()+le.height/2;let q=Math.atan2(-V,B)+Math.PI/2;le.height<0&&(q-=Math.PI);const ye=f.Konva.getAngle(this.rotation())+q,xe=f.Konva.getAngle(this.rotationSnapTolerance()),Ue=L(this.rotationSnaps(),ye,xe)-le.rotation,Oe=S(le,Ue);this._fitNodesInto(Oe,U);return}const W=this.shiftBehavior();let G;W==="inverted"?G=this.keepRatio()&&!U.shiftKey:W==="none"?G=this.keepRatio():G=this.keepRatio()||U.shiftKey;let F=this.centeredScaling()||U.altKey;if(this._movingAnchorName==="top-left"){if(G){const le=F?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};X=Math.sqrt(Math.pow(le.x-$.x(),2)+Math.pow(le.y-$.y(),2));const q=this.findOne(".top-left").x()>le.x?-1:1,se=this.findOne(".top-left").y()>le.y?-1:1;B=X*this.cos*q,V=X*this.sin*se,this.findOne(".top-left").x(le.x-B),this.findOne(".top-left").y(le.y-V)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y($.y());else if(this._movingAnchorName==="top-right"){if(G){const le=F?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};X=Math.sqrt(Math.pow($.x()-le.x,2)+Math.pow(le.y-$.y(),2));const q=this.findOne(".top-right").x()<le.x?-1:1,se=this.findOne(".top-right").y()>le.y?-1:1;B=X*this.cos*q,V=X*this.sin*se,this.findOne(".top-right").x(le.x+B),this.findOne(".top-right").y(le.y-V)}var J=$.position();this.findOne(".top-left").y(J.y),this.findOne(".bottom-right").x(J.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x($.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x($.x());else if(this._movingAnchorName==="bottom-left"){if(G){const le=F?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};X=Math.sqrt(Math.pow(le.x-$.x(),2)+Math.pow($.y()-le.y,2));const q=le.x<$.x()?-1:1,se=$.y()<le.y?-1:1;B=X*this.cos*q,V=X*this.sin*se,$.x(le.x-B),$.y(le.y+V)}J=$.position(),this.findOne(".top-left").x(J.x),this.findOne(".bottom-right").y(J.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y($.y());else if(this._movingAnchorName==="bottom-right"){if(G){const le=F?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};X=Math.sqrt(Math.pow($.x()-le.x,2)+Math.pow($.y()-le.y,2));const q=this.findOne(".bottom-right").x()<le.x?-1:1,se=this.findOne(".bottom-right").y()<le.y?-1:1;B=X*this.cos*q,V=X*this.sin*se,this.findOne(".bottom-right").x(le.x+B),this.findOne(".bottom-right").y(le.y+V)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(F=this.centeredScaling()||U.altKey,F){const le=this.findOne(".top-left"),q=this.findOne(".bottom-right"),se=le.x(),ye=le.y(),xe=this.getWidth()-q.x(),Pe=this.getHeight()-q.y();q.move({x:-se,y:-ye}),le.move({x:xe,y:Pe})}const Z=this.findOne(".top-left").getAbsolutePosition();B=Z.x,V=Z.y;const he=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),me=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:B,y:V,width:he,height:me,rotation:f.Konva.getAngle(this.rotation())},U)}_handleMouseUp(U){this._removeEvents(U)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(U){var B;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const V=this.getNode();M--,this._fire("transformend",{evt:U,target:V}),(B=this.getLayer())===null||B===void 0||B.batchDraw(),V&&this._nodes.forEach(X=>{var $;X._fire("transformend",{evt:U,target:X}),($=X.getLayer())===null||$===void 0||$.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(U,B){const V=this._getNodeRect(),X=1;if(i.Util._inRange(U.width,-this.padding()*2-X,X)){this.update();return}if(i.Util._inRange(U.height,-this.padding()*2-X,X)){this.update();return}const $=new i.Transform;if($.rotate(f.Konva.getAngle(this.rotation())),this._movingAnchorName&&U.width<0&&this._movingAnchorName.indexOf("left")>=0){const G=$.point({x:-this.padding()*2,y:0});U.x+=G.x,U.y+=G.y,U.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=G.x,this._anchorDragOffset.y-=G.y}else if(this._movingAnchorName&&U.width<0&&this._movingAnchorName.indexOf("right")>=0){const G=$.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=G.x,this._anchorDragOffset.y-=G.y,U.width+=this.padding()*2}if(this._movingAnchorName&&U.height<0&&this._movingAnchorName.indexOf("top")>=0){const G=$.point({x:0,y:-this.padding()*2});U.x+=G.x,U.y+=G.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=G.x,this._anchorDragOffset.y-=G.y,U.height+=this.padding()*2}else if(this._movingAnchorName&&U.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const G=$.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=G.x,this._anchorDragOffset.y-=G.y,U.height+=this.padding()*2}if(this.boundBoxFunc()){const G=this.boundBoxFunc()(V,U);G?U=G:i.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const ne=1e7,ee=new i.Transform;ee.translate(V.x,V.y),ee.rotate(V.rotation),ee.scale(V.width/ne,V.height/ne);const pe=new i.Transform,D=U.width/ne,z=U.height/ne;this.flipEnabled()===!1?(pe.translate(U.x,U.y),pe.rotate(U.rotation),pe.translate(U.width<0?U.width:0,U.height<0?U.height:0),pe.scale(Math.abs(D),Math.abs(z))):(pe.translate(U.x,U.y),pe.rotate(U.rotation),pe.scale(D,z));const W=pe.multiply(ee.invert());this._nodes.forEach(G=>{var F;const J=G.getParent().getAbsoluteTransform(),Z=G.getTransform().copy();Z.translate(G.offsetX(),G.offsetY());const he=new i.Transform;he.multiply(J.copy().invert()).multiply(W).multiply(J).multiply(Z);const me=he.decompose();G.setAttrs(me),(F=G.getLayer())===null||F===void 0||F.batchDraw()}),this.rotation(i.Util._getRotation(U.rotation)),this._nodes.forEach(G=>{this._fire("transform",{evt:B,target:G}),G._fire("transform",{evt:B,target:G})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(U,B){this.findOne(U).setAttrs(B)}update(){var U;const B=this._getNodeRect();this.rotation(i.Util._getRotation(B.rotation));const V=B.width,X=B.height,$=this.enabledAnchors(),ne=this.resizeEnabled(),ee=this.padding(),pe=this.anchorSize(),D=this.find("._anchor");D.forEach(W=>{W.setAttrs({width:pe,height:pe,offsetX:pe/2,offsetY:pe/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:pe/2+ee,offsetY:pe/2+ee,visible:ne&&$.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:V/2,y:0,offsetY:pe/2+ee,visible:ne&&$.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:V,y:0,offsetX:pe/2-ee,offsetY:pe/2+ee,visible:ne&&$.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:X/2,offsetX:pe/2+ee,visible:ne&&$.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:V,y:X/2,offsetX:pe/2-ee,visible:ne&&$.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:X,offsetX:pe/2+ee,offsetY:pe/2-ee,visible:ne&&$.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:V/2,y:X,offsetY:pe/2-ee,visible:ne&&$.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:V,y:X,offsetX:pe/2-ee,offsetY:pe/2-ee,visible:ne&&$.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:V/2,y:-this.rotateAnchorOffset()*i.Util._sign(X)-ee,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:V,height:X,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const z=this.anchorStyleFunc();z&&D.forEach(W=>{z(W)}),(U=this.getLayer())===null||U===void 0||U.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const U=this.findOne("."+this._movingAnchorName);U&&U.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),u.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return o.Node.prototype.toObject.call(this)}clone(U){return o.Node.prototype.clone.call(this,U)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}Rc.Transformer=b,b.isTransforming=()=>M>0;function Y(A){return A instanceof Array||i.Util.warn("enabledAnchors value should be an array"),A instanceof Array&&A.forEach(function(U){I.indexOf(U)===-1&&i.Util.warn("Unknown anchor name: "+U+". Available names are: "+I.join(", "))}),A||[]}return b.prototype.className="Transformer",(0,m._registerNode)(b),t.Factory.addGetterSetter(b,"enabledAnchors",I,Y),t.Factory.addGetterSetter(b,"flipEnabled",!0,(0,p.getBooleanValidator)()),t.Factory.addGetterSetter(b,"resizeEnabled",!0),t.Factory.addGetterSetter(b,"anchorSize",10,(0,p.getNumberValidator)()),t.Factory.addGetterSetter(b,"rotateEnabled",!0),t.Factory.addGetterSetter(b,"rotateLineVisible",!0),t.Factory.addGetterSetter(b,"rotationSnaps",[]),t.Factory.addGetterSetter(b,"rotateAnchorOffset",50,(0,p.getNumberValidator)()),t.Factory.addGetterSetter(b,"rotateAnchorCursor","crosshair"),t.Factory.addGetterSetter(b,"rotationSnapTolerance",5,(0,p.getNumberValidator)()),t.Factory.addGetterSetter(b,"borderEnabled",!0),t.Factory.addGetterSetter(b,"anchorStroke","rgb(0, 161, 255)"),t.Factory.addGetterSetter(b,"anchorStrokeWidth",1,(0,p.getNumberValidator)()),t.Factory.addGetterSetter(b,"anchorFill","white"),t.Factory.addGetterSetter(b,"anchorCornerRadius",0,(0,p.getNumberValidator)()),t.Factory.addGetterSetter(b,"borderStroke","rgb(0, 161, 255)"),t.Factory.addGetterSetter(b,"borderStrokeWidth",1,(0,p.getNumberValidator)()),t.Factory.addGetterSetter(b,"borderDash"),t.Factory.addGetterSetter(b,"keepRatio",!0),t.Factory.addGetterSetter(b,"shiftBehavior","default"),t.Factory.addGetterSetter(b,"centeredScaling",!1),t.Factory.addGetterSetter(b,"ignoreStroke",!1),t.Factory.addGetterSetter(b,"padding",0,(0,p.getNumberValidator)()),t.Factory.addGetterSetter(b,"nodes"),t.Factory.addGetterSetter(b,"node"),t.Factory.addGetterSetter(b,"boundBoxFunc"),t.Factory.addGetterSetter(b,"anchorDragBoundFunc"),t.Factory.addGetterSetter(b,"anchorStyleFunc"),t.Factory.addGetterSetter(b,"shouldOverdrawWholeArea",!1),t.Factory.addGetterSetter(b,"useSingleNodeRotation",!0),t.Factory.backCompat(b,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"}),Rc}var Lc={},ag;function kv(){if(ag)return Lc;ag=1,Object.defineProperty(Lc,"__esModule",{value:!0}),Lc.Wedge=void 0;const i=et(),t=An(),o=Ke(),a=nt(),d=Ke();let u=class extends t.Shape{_sceneFunc(p){p.beginPath(),p.arc(0,0,this.radius(),0,o.Konva.getAngle(this.angle()),this.clockwise()),p.lineTo(0,0),p.closePath(),p.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(p){this.radius(p/2)}setHeight(p){this.radius(p/2)}};return Lc.Wedge=u,u.prototype.className="Wedge",u.prototype._centroid=!0,u.prototype._attrsAffectingSize=["radius"],(0,d._registerNode)(u),i.Factory.addGetterSetter(u,"radius",0,(0,a.getNumberValidator)()),i.Factory.addGetterSetter(u,"angle",0,(0,a.getNumberValidator)()),i.Factory.addGetterSetter(u,"clockwise",!1),i.Factory.backCompat(u,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),Lc}var Mc={},ug;function xv(){if(ug)return Mc;ug=1,Object.defineProperty(Mc,"__esModule",{value:!0}),Mc.Blur=void 0;const i=et(),t=tn(),o=nt();function a(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const d=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],u=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function f(m,v){const x=m.data,P=m.width,_=m.height;let k,C,N,I,j,T,S,L,M,b,Y,A,U,B,V,X,$,ne,ee,pe;const D=v+v+1,z=P-1,W=_-1,G=v+1,F=G*(G+1)/2,J=new a,Z=d[v],he=u[v];let me=null,le=J,q=null,se=null;for(let ye=1;ye<D;ye++)le=le.next=new a,ye===G&&(me=le);le.next=J,N=C=0;for(let ye=0;ye<_;ye++){A=U=B=V=I=j=T=S=0,L=G*(X=x[C]),M=G*($=x[C+1]),b=G*(ne=x[C+2]),Y=G*(ee=x[C+3]),I+=F*X,j+=F*$,T+=F*ne,S+=F*ee,le=J;for(let xe=0;xe<G;xe++)le.r=X,le.g=$,le.b=ne,le.a=ee,le=le.next;for(let xe=1;xe<G;xe++)k=C+((z<xe?z:xe)<<2),I+=(le.r=X=x[k])*(pe=G-xe),j+=(le.g=$=x[k+1])*pe,T+=(le.b=ne=x[k+2])*pe,S+=(le.a=ee=x[k+3])*pe,A+=X,U+=$,B+=ne,V+=ee,le=le.next;q=J,se=me;for(let xe=0;xe<P;xe++)x[C+3]=ee=S*Z>>he,ee!==0?(ee=255/ee,x[C]=(I*Z>>he)*ee,x[C+1]=(j*Z>>he)*ee,x[C+2]=(T*Z>>he)*ee):x[C]=x[C+1]=x[C+2]=0,I-=L,j-=M,T-=b,S-=Y,L-=q.r,M-=q.g,b-=q.b,Y-=q.a,k=N+((k=xe+v+1)<z?k:z)<<2,A+=q.r=x[k],U+=q.g=x[k+1],B+=q.b=x[k+2],V+=q.a=x[k+3],I+=A,j+=U,T+=B,S+=V,q=q.next,L+=X=se.r,M+=$=se.g,b+=ne=se.b,Y+=ee=se.a,A-=X,U-=$,B-=ne,V-=ee,se=se.next,C+=4;N+=P}for(let ye=0;ye<P;ye++){U=B=V=A=j=T=S=I=0,C=ye<<2,L=G*(X=x[C]),M=G*($=x[C+1]),b=G*(ne=x[C+2]),Y=G*(ee=x[C+3]),I+=F*X,j+=F*$,T+=F*ne,S+=F*ee,le=J;for(let Pe=0;Pe<G;Pe++)le.r=X,le.g=$,le.b=ne,le.a=ee,le=le.next;let xe=P;for(let Pe=1;Pe<=v;Pe++)C=xe+ye<<2,I+=(le.r=X=x[C])*(pe=G-Pe),j+=(le.g=$=x[C+1])*pe,T+=(le.b=ne=x[C+2])*pe,S+=(le.a=ee=x[C+3])*pe,A+=X,U+=$,B+=ne,V+=ee,le=le.next,Pe<W&&(xe+=P);C=ye,q=J,se=me;for(let Pe=0;Pe<_;Pe++)k=C<<2,x[k+3]=ee=S*Z>>he,ee>0?(ee=255/ee,x[k]=(I*Z>>he)*ee,x[k+1]=(j*Z>>he)*ee,x[k+2]=(T*Z>>he)*ee):x[k]=x[k+1]=x[k+2]=0,I-=L,j-=M,T-=b,S-=Y,L-=q.r,M-=q.g,b-=q.b,Y-=q.a,k=ye+((k=Pe+G)<W?k:W)*P<<2,I+=A+=q.r=x[k],j+=U+=q.g=x[k+1],T+=B+=q.b=x[k+2],S+=V+=q.a=x[k+3],q=q.next,L+=X=se.r,M+=$=se.g,b+=ne=se.b,Y+=ee=se.a,A-=X,U-=$,B-=ne,V-=ee,se=se.next,C+=P}}const p=function(v){const x=Math.round(this.blurRadius());x>0&&f(v,x)};return Mc.Blur=p,i.Factory.addGetterSetter(t.Node,"blurRadius",0,(0,o.getNumberValidator)(),i.Factory.afterSetFilter),Mc}var Dc={},cg;function Cv(){if(cg)return Dc;cg=1,Object.defineProperty(Dc,"__esModule",{value:!0}),Dc.Brighten=void 0;const i=et(),t=tn(),o=nt(),a=function(d){const u=this.brightness()*255,f=d.data,p=f.length;for(let m=0;m<p;m+=4)f[m]+=u,f[m+1]+=u,f[m+2]+=u};return Dc.Brighten=a,i.Factory.addGetterSetter(t.Node,"brightness",0,(0,o.getNumberValidator)(),i.Factory.afterSetFilter),Dc}var Ic={},dg;function Ev(){if(dg)return Ic;dg=1,Object.defineProperty(Ic,"__esModule",{value:!0}),Ic.Contrast=void 0;const i=et(),t=tn(),o=nt(),a=function(d){const u=Math.pow((this.contrast()+100)/100,2),f=d.data,p=f.length;let m=150,v=150,x=150;for(let P=0;P<p;P+=4)m=f[P],v=f[P+1],x=f[P+2],m/=255,m-=.5,m*=u,m+=.5,m*=255,v/=255,v-=.5,v*=u,v+=.5,v*=255,x/=255,x-=.5,x*=u,x+=.5,x*=255,m=m<0?0:m>255?255:m,v=v<0?0:v>255?255:v,x=x<0?0:x>255?255:x,f[P]=m,f[P+1]=v,f[P+2]=x};return Ic.Contrast=a,i.Factory.addGetterSetter(t.Node,"contrast",0,(0,o.getNumberValidator)(),i.Factory.afterSetFilter),Ic}var Ac={},hg;function Pv(){if(hg)return Ac;hg=1,Object.defineProperty(Ac,"__esModule",{value:!0}),Ac.Emboss=void 0;const i=et(),t=tn(),o=Yt(),a=nt(),d=function(u){const f=this.embossStrength()*10,p=this.embossWhiteLevel()*255,m=this.embossDirection(),v=this.embossBlend(),x=u.data,P=u.width,_=u.height,k=P*4;let C=0,N=0,I=_;switch(m){case"top-left":C=-1,N=-1;break;case"top":C=-1,N=0;break;case"top-right":C=-1,N=1;break;case"right":C=0,N=1;break;case"bottom-right":C=1,N=1;break;case"bottom":C=1,N=0;break;case"bottom-left":C=1,N=-1;break;case"left":C=0,N=-1;break;default:o.Util.error("Unknown emboss direction: "+m)}do{const j=(I-1)*k;let T=C;I+T<1&&(T=0),I+T>_&&(T=0);const S=(I-1+T)*P*4;let L=P;do{const M=j+(L-1)*4;let b=N;L+b<1&&(b=0),L+b>P&&(b=0);const Y=S+(L-1+b)*4,A=x[M]-x[Y],U=x[M+1]-x[Y+1],B=x[M+2]-x[Y+2];let V=A;const X=V>0?V:-V,$=U>0?U:-U,ne=B>0?B:-B;if($>X&&(V=U),ne>X&&(V=B),V*=f,v){const ee=x[M]+V,pe=x[M+1]+V,D=x[M+2]+V;x[M]=ee>255?255:ee<0?0:ee,x[M+1]=pe>255?255:pe<0?0:pe,x[M+2]=D>255?255:D<0?0:D}else{let ee=p-V;ee<0?ee=0:ee>255&&(ee=255),x[M]=x[M+1]=x[M+2]=ee}}while(--L)}while(--I)};return Ac.Emboss=d,i.Factory.addGetterSetter(t.Node,"embossStrength",.5,(0,a.getNumberValidator)(),i.Factory.afterSetFilter),i.Factory.addGetterSetter(t.Node,"embossWhiteLevel",.5,(0,a.getNumberValidator)(),i.Factory.afterSetFilter),i.Factory.addGetterSetter(t.Node,"embossDirection","top-left",void 0,i.Factory.afterSetFilter),i.Factory.addGetterSetter(t.Node,"embossBlend",!1,void 0,i.Factory.afterSetFilter),Ac}var Fc={},fg;function Nv(){if(fg)return Fc;fg=1,Object.defineProperty(Fc,"__esModule",{value:!0}),Fc.Enhance=void 0;const i=et(),t=tn(),o=nt();function a(u,f,p,m,v){const x=p-f,P=v-m;if(x===0)return m+P/2;if(P===0)return m;let _=(u-f)/x;return _=P*_+m,_}const d=function(u){const f=u.data,p=f.length;let m=f[0],v=m,x,P=f[1],_=P,k,C=f[2],N=C,I;const j=this.enhance();if(j===0)return;for(let A=0;A<p;A+=4)x=f[A+0],x<m?m=x:x>v&&(v=x),k=f[A+1],k<P?P=k:k>_&&(_=k),I=f[A+2],I<C?C=I:I>N&&(N=I);v===m&&(v=255,m=0),_===P&&(_=255,P=0),N===C&&(N=255,C=0);let T,S,L,M,b,Y;if(j>0)T=v+j*(255-v),S=m-j*(m-0),L=_+j*(255-_),M=P-j*(P-0),b=N+j*(255-N),Y=C-j*(C-0);else{const A=(v+m)*.5;T=v+j*(v-A),S=m+j*(m-A);const U=(_+P)*.5;L=_+j*(_-U),M=P+j*(P-U);const B=(N+C)*.5;b=N+j*(N-B),Y=C+j*(C-B)}for(let A=0;A<p;A+=4)f[A+0]=a(f[A+0],m,v,S,T),f[A+1]=a(f[A+1],P,_,M,L),f[A+2]=a(f[A+2],C,N,Y,b)};return Fc.Enhance=d,i.Factory.addGetterSetter(t.Node,"enhance",0,(0,o.getNumberValidator)(),i.Factory.afterSetFilter),Fc}var Oc={},pg;function Tv(){if(pg)return Oc;pg=1,Object.defineProperty(Oc,"__esModule",{value:!0}),Oc.Grayscale=void 0;const i=function(t){const o=t.data,a=o.length;for(let d=0;d<a;d+=4){const u=.34*o[d]+.5*o[d+1]+.16*o[d+2];o[d]=u,o[d+1]=u,o[d+2]=u}};return Oc.Grayscale=i,Oc}var zc={},gg;function Rv(){if(gg)return zc;gg=1,Object.defineProperty(zc,"__esModule",{value:!0}),zc.HSL=void 0;const i=et(),t=tn(),o=nt();i.Factory.addGetterSetter(t.Node,"hue",0,(0,o.getNumberValidator)(),i.Factory.afterSetFilter),i.Factory.addGetterSetter(t.Node,"saturation",0,(0,o.getNumberValidator)(),i.Factory.afterSetFilter),i.Factory.addGetterSetter(t.Node,"luminance",0,(0,o.getNumberValidator)(),i.Factory.afterSetFilter);const a=function(d){const u=d.data,f=u.length,p=1,m=Math.pow(2,this.saturation()),v=Math.abs(this.hue()+360)%360,x=this.luminance()*127,P=p*m*Math.cos(v*Math.PI/180),_=p*m*Math.sin(v*Math.PI/180),k=.299*p+.701*P+.167*_,C=.587*p-.587*P+.33*_,N=.114*p-.114*P-.497*_,I=.299*p-.299*P-.328*_,j=.587*p+.413*P+.035*_,T=.114*p-.114*P+.293*_,S=.299*p-.3*P+1.25*_,L=.587*p-.586*P-1.05*_,M=.114*p+.886*P-.2*_;let b,Y,A,U;for(let B=0;B<f;B+=4)b=u[B+0],Y=u[B+1],A=u[B+2],U=u[B+3],u[B+0]=k*b+C*Y+N*A+x,u[B+1]=I*b+j*Y+T*A+x,u[B+2]=S*b+L*Y+M*A+x,u[B+3]=U};return zc.HSL=a,zc}var bc={},mg;function Lv(){if(mg)return bc;mg=1,Object.defineProperty(bc,"__esModule",{value:!0}),bc.HSV=void 0;const i=et(),t=tn(),o=nt(),a=function(d){const u=d.data,f=u.length,p=Math.pow(2,this.value()),m=Math.pow(2,this.saturation()),v=Math.abs(this.hue()+360)%360,x=p*m*Math.cos(v*Math.PI/180),P=p*m*Math.sin(v*Math.PI/180),_=.299*p+.701*x+.167*P,k=.587*p-.587*x+.33*P,C=.114*p-.114*x-.497*P,N=.299*p-.299*x-.328*P,I=.587*p+.413*x+.035*P,j=.114*p-.114*x+.293*P,T=.299*p-.3*x+1.25*P,S=.587*p-.586*x-1.05*P,L=.114*p+.886*x-.2*P;for(let M=0;M<f;M+=4){const b=u[M+0],Y=u[M+1],A=u[M+2],U=u[M+3];u[M+0]=_*b+k*Y+C*A,u[M+1]=N*b+I*Y+j*A,u[M+2]=T*b+S*Y+L*A,u[M+3]=U}};return bc.HSV=a,i.Factory.addGetterSetter(t.Node,"hue",0,(0,o.getNumberValidator)(),i.Factory.afterSetFilter),i.Factory.addGetterSetter(t.Node,"saturation",0,(0,o.getNumberValidator)(),i.Factory.afterSetFilter),i.Factory.addGetterSetter(t.Node,"value",0,(0,o.getNumberValidator)(),i.Factory.afterSetFilter),bc}var Uc={},yg;function Mv(){if(yg)return Uc;yg=1,Object.defineProperty(Uc,"__esModule",{value:!0}),Uc.Invert=void 0;const i=function(t){const o=t.data,a=o.length;for(let d=0;d<a;d+=4)o[d]=255-o[d],o[d+1]=255-o[d+1],o[d+2]=255-o[d+2]};return Uc.Invert=i,Uc}var jc={},vg;function Dv(){if(vg)return jc;vg=1,Object.defineProperty(jc,"__esModule",{value:!0}),jc.Kaleidoscope=void 0;const i=et(),t=tn(),o=Yt(),a=nt(),d=function(p,m,v){const x=p.data,P=m.data,_=p.width,k=p.height,C=v.polarCenterX||_/2,N=v.polarCenterY||k/2;let I=Math.sqrt(C*C+N*N),j=_-C,T=k-N;const S=Math.sqrt(j*j+T*T);I=S>I?S:I;const L=k,M=_,b=360/M*Math.PI/180;for(let Y=0;Y<M;Y+=1){const A=Math.sin(Y*b),U=Math.cos(Y*b);for(let B=0;B<L;B+=1){j=Math.floor(C+I*B/L*U),T=Math.floor(N+I*B/L*A);let V=(T*_+j)*4;const X=x[V+0],$=x[V+1],ne=x[V+2],ee=x[V+3];V=(Y+B*_)*4,P[V+0]=X,P[V+1]=$,P[V+2]=ne,P[V+3]=ee}}},u=function(p,m,v){const x=p.data,P=m.data,_=p.width,k=p.height,C=v.polarCenterX||_/2,N=v.polarCenterY||k/2;let I=Math.sqrt(C*C+N*N),j=_-C,T=k-N;const S=Math.sqrt(j*j+T*T);I=S>I?S:I;const L=k,M=_,b=0;let Y,A;for(j=0;j<_;j+=1)for(T=0;T<k;T+=1){const U=j-C,B=T-N,V=Math.sqrt(U*U+B*B)*L/I;let X=(Math.atan2(B,U)*180/Math.PI+360+b)%360;X=X*M/360,Y=Math.floor(X),A=Math.floor(V);let $=(A*_+Y)*4;const ne=x[$+0],ee=x[$+1],pe=x[$+2],D=x[$+3];$=(T*_+j)*4,P[$+0]=ne,P[$+1]=ee,P[$+2]=pe,P[$+3]=D}},f=function(p){const m=p.width,v=p.height;let x,P,_,k,C,N,I,j,T,S,L=Math.round(this.kaleidoscopePower());const M=Math.round(this.kaleidoscopeAngle()),b=Math.floor(m*(M%360)/360);if(L<1)return;const Y=o.Util.createCanvasElement();Y.width=m,Y.height=v;const A=Y.getContext("2d").getImageData(0,0,m,v);o.Util.releaseCanvas(Y),d(p,A,{polarCenterX:m/2,polarCenterY:v/2});let U=m/Math.pow(2,L);for(;U<=8;)U=U*2,L-=1;U=Math.ceil(U);let B=U,V=0,X=B,$=1;for(b+U>m&&(V=B,X=0,$=-1),P=0;P<v;P+=1)for(x=V;x!==X;x+=$)_=Math.round(x+b)%m,T=(m*P+_)*4,C=A.data[T+0],N=A.data[T+1],I=A.data[T+2],j=A.data[T+3],S=(m*P+x)*4,A.data[S+0]=C,A.data[S+1]=N,A.data[S+2]=I,A.data[S+3]=j;for(P=0;P<v;P+=1)for(B=Math.floor(U),k=0;k<L;k+=1){for(x=0;x<B+1;x+=1)T=(m*P+x)*4,C=A.data[T+0],N=A.data[T+1],I=A.data[T+2],j=A.data[T+3],S=(m*P+B*2-x-1)*4,A.data[S+0]=C,A.data[S+1]=N,A.data[S+2]=I,A.data[S+3]=j;B*=2}u(A,p,{})};return jc.Kaleidoscope=f,i.Factory.addGetterSetter(t.Node,"kaleidoscopePower",2,(0,a.getNumberValidator)(),i.Factory.afterSetFilter),i.Factory.addGetterSetter(t.Node,"kaleidoscopeAngle",0,(0,a.getNumberValidator)(),i.Factory.afterSetFilter),jc}var Bc={},_g;function Iv(){if(_g)return Bc;_g=1,Object.defineProperty(Bc,"__esModule",{value:!0}),Bc.Mask=void 0;const i=et(),t=tn(),o=nt();function a(_,k,C){let N=(C*_.width+k)*4;const I=[];return I.push(_.data[N++],_.data[N++],_.data[N++],_.data[N++]),I}function d(_,k){return Math.sqrt(Math.pow(_[0]-k[0],2)+Math.pow(_[1]-k[1],2)+Math.pow(_[2]-k[2],2))}function u(_){const k=[0,0,0];for(let C=0;C<_.length;C++)k[0]+=_[C][0],k[1]+=_[C][1],k[2]+=_[C][2];return k[0]/=_.length,k[1]/=_.length,k[2]/=_.length,k}function f(_,k){const C=a(_,0,0),N=a(_,_.width-1,0),I=a(_,0,_.height-1),j=a(_,_.width-1,_.height-1),T=k||10;if(d(C,N)<T&&d(N,j)<T&&d(j,I)<T&&d(I,C)<T){const S=u([N,C,j,I]),L=[];for(let M=0;M<_.width*_.height;M++){const b=d(S,[_.data[M*4],_.data[M*4+1],_.data[M*4+2]]);L[M]=b<T?0:255}return L}}function p(_,k){for(let C=0;C<_.width*_.height;C++)_.data[4*C+3]=k[C]}function m(_,k,C){const N=[1,1,1,1,0,1,1,1,1],I=Math.round(Math.sqrt(N.length)),j=Math.floor(I/2),T=[];for(let S=0;S<C;S++)for(let L=0;L<k;L++){const M=S*k+L;let b=0;for(let Y=0;Y<I;Y++)for(let A=0;A<I;A++){const U=S+Y-j,B=L+A-j;if(U>=0&&U<C&&B>=0&&B<k){const V=U*k+B,X=N[Y*I+A];b+=_[V]*X}}T[M]=b===2040?255:0}return T}function v(_,k,C){const N=[1,1,1,1,1,1,1,1,1],I=Math.round(Math.sqrt(N.length)),j=Math.floor(I/2),T=[];for(let S=0;S<C;S++)for(let L=0;L<k;L++){const M=S*k+L;let b=0;for(let Y=0;Y<I;Y++)for(let A=0;A<I;A++){const U=S+Y-j,B=L+A-j;if(U>=0&&U<C&&B>=0&&B<k){const V=U*k+B,X=N[Y*I+A];b+=_[V]*X}}T[M]=b>=1020?255:0}return T}function x(_,k,C){const N=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],I=Math.round(Math.sqrt(N.length)),j=Math.floor(I/2),T=[];for(let S=0;S<C;S++)for(let L=0;L<k;L++){const M=S*k+L;let b=0;for(let Y=0;Y<I;Y++)for(let A=0;A<I;A++){const U=S+Y-j,B=L+A-j;if(U>=0&&U<C&&B>=0&&B<k){const V=U*k+B,X=N[Y*I+A];b+=_[V]*X}}T[M]=b}return T}const P=function(_){const k=this.threshold();let C=f(_,k);return C&&(C=m(C,_.width,_.height),C=v(C,_.width,_.height),C=x(C,_.width,_.height),p(_,C)),_};return Bc.Mask=P,i.Factory.addGetterSetter(t.Node,"threshold",0,(0,o.getNumberValidator)(),i.Factory.afterSetFilter),Bc}var Gc={},Sg;function Av(){if(Sg)return Gc;Sg=1,Object.defineProperty(Gc,"__esModule",{value:!0}),Gc.Noise=void 0;const i=et(),t=tn(),o=nt(),a=function(d){const u=this.noise()*255,f=d.data,p=f.length,m=u/2;for(let v=0;v<p;v+=4)f[v+0]+=m-2*m*Math.random(),f[v+1]+=m-2*m*Math.random(),f[v+2]+=m-2*m*Math.random()};return Gc.Noise=a,i.Factory.addGetterSetter(t.Node,"noise",.2,(0,o.getNumberValidator)(),i.Factory.afterSetFilter),Gc}var Vc={},wg;function Fv(){if(wg)return Vc;wg=1,Object.defineProperty(Vc,"__esModule",{value:!0}),Vc.Pixelate=void 0;const i=et(),t=Yt(),o=tn(),a=nt(),d=function(u){let f=Math.ceil(this.pixelSize()),p=u.width,m=u.height,v=Math.ceil(p/f),x=Math.ceil(m/f),P=u.data;if(f<=0){t.Util.error("pixelSize value can not be <= 0");return}for(let _=0;_<v;_+=1)for(let k=0;k<x;k+=1){let C=0,N=0,I=0,j=0;const T=_*f,S=T+f,L=k*f,M=L+f;let b=0;for(let Y=T;Y<S;Y+=1)if(!(Y>=p))for(let A=L;A<M;A+=1){if(A>=m)continue;const U=(p*A+Y)*4;C+=P[U+0],N+=P[U+1],I+=P[U+2],j+=P[U+3],b+=1}C=C/b,N=N/b,I=I/b,j=j/b;for(let Y=T;Y<S;Y+=1)if(!(Y>=p))for(let A=L;A<M;A+=1){if(A>=m)continue;const U=(p*A+Y)*4;P[U+0]=C,P[U+1]=N,P[U+2]=I,P[U+3]=j}}};return Vc.Pixelate=d,i.Factory.addGetterSetter(o.Node,"pixelSize",8,(0,a.getNumberValidator)(),i.Factory.afterSetFilter),Vc}var Hc={},kg;function Ov(){if(kg)return Hc;kg=1,Object.defineProperty(Hc,"__esModule",{value:!0}),Hc.Posterize=void 0;const i=et(),t=tn(),o=nt(),a=function(d){const u=Math.round(this.levels()*254)+1,f=d.data,p=f.length,m=255/u;for(let v=0;v<p;v+=1)f[v]=Math.floor(f[v]/m)*m};return Hc.Posterize=a,i.Factory.addGetterSetter(t.Node,"levels",.5,(0,o.getNumberValidator)(),i.Factory.afterSetFilter),Hc}var Wc={},xg;function zv(){if(xg)return Wc;xg=1,Object.defineProperty(Wc,"__esModule",{value:!0}),Wc.RGB=void 0;const i=et(),t=tn(),o=nt(),a=function(d){const u=d.data,f=u.length,p=this.red(),m=this.green(),v=this.blue();for(let x=0;x<f;x+=4){const P=(.34*u[x]+.5*u[x+1]+.16*u[x+2])/255;u[x]=P*p,u[x+1]=P*m,u[x+2]=P*v,u[x+3]=u[x+3]}};return Wc.RGB=a,i.Factory.addGetterSetter(t.Node,"red",0,function(d){return this._filterUpToDate=!1,d>255?255:d<0?0:Math.round(d)}),i.Factory.addGetterSetter(t.Node,"green",0,function(d){return this._filterUpToDate=!1,d>255?255:d<0?0:Math.round(d)}),i.Factory.addGetterSetter(t.Node,"blue",0,o.RGBComponent,i.Factory.afterSetFilter),Wc}var Yc={},Cg;function bv(){if(Cg)return Yc;Cg=1,Object.defineProperty(Yc,"__esModule",{value:!0}),Yc.RGBA=void 0;const i=et(),t=tn(),o=nt(),a=function(d){const u=d.data,f=u.length,p=this.red(),m=this.green(),v=this.blue(),x=this.alpha();for(let P=0;P<f;P+=4){const _=1-x;u[P]=p*x+u[P]*_,u[P+1]=m*x+u[P+1]*_,u[P+2]=v*x+u[P+2]*_}};return Yc.RGBA=a,i.Factory.addGetterSetter(t.Node,"red",0,function(d){return this._filterUpToDate=!1,d>255?255:d<0?0:Math.round(d)}),i.Factory.addGetterSetter(t.Node,"green",0,function(d){return this._filterUpToDate=!1,d>255?255:d<0?0:Math.round(d)}),i.Factory.addGetterSetter(t.Node,"blue",0,o.RGBComponent,i.Factory.afterSetFilter),i.Factory.addGetterSetter(t.Node,"alpha",1,function(d){return this._filterUpToDate=!1,d>1?1:d<0?0:d}),Yc}var qc={},Eg;function Uv(){if(Eg)return qc;Eg=1,Object.defineProperty(qc,"__esModule",{value:!0}),qc.Sepia=void 0;const i=function(t){const o=t.data,a=o.length;for(let d=0;d<a;d+=4){const u=o[d+0],f=o[d+1],p=o[d+2];o[d+0]=Math.min(255,u*.393+f*.769+p*.189),o[d+1]=Math.min(255,u*.349+f*.686+p*.168),o[d+2]=Math.min(255,u*.272+f*.534+p*.131)}};return qc.Sepia=i,qc}var Xc={},Pg;function jv(){if(Pg)return Xc;Pg=1,Object.defineProperty(Xc,"__esModule",{value:!0}),Xc.Solarize=void 0;const i=function(t){const o=t.data,a=t.width,d=t.height,u=a*4;let f=d;do{const p=(f-1)*u;let m=a;do{const v=p+(m-1)*4;let x=o[v],P=o[v+1],_=o[v+2];x>127&&(x=255-x),P>127&&(P=255-P),_>127&&(_=255-_),o[v]=x,o[v+1]=P,o[v+2]=_}while(--m)}while(--f)};return Xc.Solarize=i,Xc}var Kc={},Ng;function Bv(){if(Ng)return Kc;Ng=1,Object.defineProperty(Kc,"__esModule",{value:!0}),Kc.Threshold=void 0;const i=et(),t=tn(),o=nt(),a=function(d){const u=this.threshold()*255,f=d.data,p=f.length;for(let m=0;m<p;m+=1)f[m]=f[m]<u?0:255};return Kc.Threshold=a,i.Factory.addGetterSetter(t.Node,"threshold",.5,(0,o.getNumberValidator)(),i.Factory.afterSetFilter),Kc}var Tg;function Gv(){if(Tg)return uc;Tg=1,Object.defineProperty(uc,"__esModule",{value:!0}),uc.Konva=void 0;const i=H0(),t=uv(),o=dv(),a=hv(),d=fv(),u=pv(),f=gv(),p=b2(),m=ap(),v=U2(),x=mv(),P=yv(),_=vv(),k=_v(),C=j2(),N=Sv(),I=wv(),j=kv(),T=xv(),S=Cv(),L=Ev(),M=Pv(),b=Nv(),Y=Tv(),A=Rv(),U=Lv(),B=Mv(),V=Dv(),X=Iv(),$=Av(),ne=Fv(),ee=Ov(),pe=zv(),D=bv(),z=Uv(),W=jv(),G=Bv();return uc.Konva=i.Konva.Util._assign(i.Konva,{Arc:t.Arc,Arrow:o.Arrow,Circle:a.Circle,Ellipse:d.Ellipse,Image:u.Image,Label:f.Label,Tag:f.Tag,Line:p.Line,Path:m.Path,Rect:v.Rect,RegularPolygon:x.RegularPolygon,Ring:P.Ring,Sprite:_.Sprite,Star:k.Star,Text:C.Text,TextPath:N.TextPath,Transformer:I.Transformer,Wedge:j.Wedge,Filters:{Blur:T.Blur,Brighten:S.Brighten,Contrast:L.Contrast,Emboss:M.Emboss,Enhance:b.Enhance,Grayscale:Y.Grayscale,HSL:A.HSL,HSV:U.HSV,Invert:B.Invert,Kaleidoscope:V.Kaleidoscope,Mask:X.Mask,Noise:$.Noise,Pixelate:ne.Pixelate,Posterize:ee.Posterize,RGB:pe.RGB,RGBA:D.RGBA,Sepia:z.Sepia,Solarize:W.Solarize,Threshold:G.Threshold}}),uc}var Vv=zh.exports,Rg;function Hv(){if(Rg)return zh.exports;Rg=1,Object.defineProperty(Vv,"__esModule",{value:!0});const i=Gv();return zh.exports=i.Konva,zh.exports}Hv();var Mh={exports:{}},Lg;function Wv(){return Lg||(Lg=1,(function(i,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Konva=void 0;var o=H0();Object.defineProperty(t,"Konva",{enumerable:!0,get:function(){return o.Konva}});const a=H0();i.exports=a.Konva})(Mh,Mh.exports)),Mh.exports}var Yv=Wv();const $c=ud(Yv);var k0={exports:{}};/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x0,Mg;function qv(){return Mg||(Mg=1,x0=function(t){var o={},a=tu(),d=ip(),u=Object.assign;function f(r){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+r,c=1;c<arguments.length;c++)s+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,m=Symbol.for("react.element"),v=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),C=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),L=Symbol.for("react.offscreen"),M=Symbol.iterator;function b(r){return r===null||typeof r!="object"?null:(r=M&&r[M]||r["@@iterator"],typeof r=="function"?r:null)}function Y(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case x:return"Fragment";case v:return"Portal";case _:return"Profiler";case P:return"StrictMode";case I:return"Suspense";case j:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case C:return(r.displayName||"Context")+".Consumer";case k:return(r._context.displayName||"Context")+".Provider";case N:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case T:return s=r.displayName||null,s!==null?s:Y(r.type)||"Memo";case S:s=r._payload,r=r._init;try{return Y(r(s))}catch{}}return null}function A(r){var s=r.type;switch(r.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=s.render,r=r.displayName||r.name||"",s.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Y(s);case 8:return s===P?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function U(r){var s=r,c=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(c=s.return),r=s.return;while(r)}return s.tag===3?c:null}function B(r){if(U(r)!==r)throw Error(f(188))}function V(r){var s=r.alternate;if(!s){if(s=U(r),s===null)throw Error(f(188));return s!==r?null:r}for(var c=r,g=s;;){var w=c.return;if(w===null)break;var R=w.alternate;if(R===null){if(g=w.return,g!==null){c=g;continue}break}if(w.child===R.child){for(R=w.child;R;){if(R===c)return B(w),r;if(R===g)return B(w),s;R=R.sibling}throw Error(f(188))}if(c.return!==g.return)c=w,g=R;else{for(var H=!1,ie=w.child;ie;){if(ie===c){H=!0,c=w,g=R;break}if(ie===g){H=!0,g=w,c=R;break}ie=ie.sibling}if(!H){for(ie=R.child;ie;){if(ie===c){H=!0,c=R,g=w;break}if(ie===g){H=!0,g=R,c=w;break}ie=ie.sibling}if(!H)throw Error(f(189))}}if(c.alternate!==g)throw Error(f(190))}if(c.tag!==3)throw Error(f(188));return c.stateNode.current===c?r:s}function X(r){return r=V(r),r!==null?$(r):null}function $(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var s=$(r);if(s!==null)return s;r=r.sibling}return null}function ne(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){if(r.tag!==4){var s=ne(r);if(s!==null)return s}r=r.sibling}return null}var ee=Array.isArray,pe=t.getPublicInstance,D=t.getRootHostContext,z=t.getChildHostContext,W=t.prepareForCommit,G=t.resetAfterCommit,F=t.createInstance,J=t.appendInitialChild,Z=t.finalizeInitialChildren,he=t.prepareUpdate,me=t.shouldSetTextContent,le=t.createTextInstance,q=t.scheduleTimeout,se=t.cancelTimeout,ye=t.noTimeout,xe=t.isPrimaryRenderer,Pe=t.supportsMutation,Ue=t.supportsPersistence,Oe=t.supportsHydration,rt=t.getInstanceFromNode,Ge=t.preparePortalMount,Ut=t.getCurrentEventPriority,ot=t.detachDeletedInstance,Et=t.supportsMicrotasks,Hr=t.scheduleMicrotask,Dt=t.supportsTestSelectors,wr=t.findFiberRoot,ft=t.getBoundingRect,Xn=t.getTextContent,cn=t.isHiddenSubtree,Wr=t.matchAccessibilityRole,dn=t.setFocusIfFocusable,kr=t.setupIntersectionObserver,wn=t.appendChild,or=t.appendChildToContainer,jt=t.commitTextUpdate,Bt=t.commitMount,ns=t.commitUpdate,Vo=t.insertBefore,rs=t.insertInContainerBefore,au=t.removeChild,Ho=t.removeChildFromContainer,Ol=t.resetTextContent,uu=t.hideInstance,cu=t.hideTextInstance,du=t.unhideInstance,Bs=t.unhideTextInstance,Gs=t.clearContainer,vd=t.cloneInstance,hu=t.createContainerChildSet,fu=t.appendChildToContainerChildSet,_d=t.finalizeContainerChildren,zl=t.replaceContainerChildren,bl=t.cloneHiddenInstance,pu=t.cloneHiddenTextInstance,Wo=t.canHydrateInstance,gu=t.canHydrateTextInstance,Yo=t.canHydrateSuspenseInstance,Sd=t.isSuspenseInstancePending,is=t.isSuspenseInstanceFallback,Ul=t.getSuspenseInstanceFallbackErrorDetails,jl=t.registerSuspenseInstanceRetry,Vs=t.getNextHydratableSibling,Cf=t.getFirstHydratableChild,Ef=t.getFirstHydratableChildWithinContainer,Pf=t.getFirstHydratableChildWithinSuspenseInstance,ss=t.hydrateInstance,wd=t.hydrateTextInstance,kd=t.hydrateSuspenseInstance,Nf=t.getNextHydratableInstanceAfterSuspenseInstance,xd=t.commitHydratedContainer,Cd=t.commitHydratedSuspenseInstance,Ed=t.clearSuspenseBoundary,Pd=t.clearSuspenseBoundaryFromContainer,Tf=t.shouldDeleteUnhydratedTailInstances,Rf=t.didNotMatchHydratedContainerTextInstance,Ft=t.didNotMatchHydratedTextInstance,mu;function os(r){if(mu===void 0)try{throw Error()}catch(c){var s=c.stack.trim().match(/\n( *(at )?)/);mu=s&&s[1]||""}return`
`+mu+r}var Bl=!1;function Hs(r,s){if(!r||Bl)return"";Bl=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(ke){var g=ke}Reflect.construct(r,[],s)}else{try{s.call()}catch(ke){g=ke}r.call(s.prototype)}else{try{throw Error()}catch(ke){g=ke}r()}}catch(ke){if(ke&&g&&typeof ke.stack=="string"){for(var w=ke.stack.split(`
`),R=g.stack.split(`
`),H=w.length-1,ie=R.length-1;1<=H&&0<=ie&&w[H]!==R[ie];)ie--;for(;1<=H&&0<=ie;H--,ie--)if(w[H]!==R[ie]){if(H!==1||ie!==1)do if(H--,ie--,0>ie||w[H]!==R[ie]){var fe=`
`+w[H].replace(" at new "," at ");return r.displayName&&fe.includes("<anonymous>")&&(fe=fe.replace("<anonymous>",r.displayName)),fe}while(1<=H&&0<=ie);break}}}finally{Bl=!1,Error.prepareStackTrace=c}return(r=r?r.displayName||r.name:"")?os(r):""}var Lf=Object.prototype.hasOwnProperty,Gl=[],ui=-1;function hn(r){return{current:r}}function wt(r){0>ui||(r.current=Gl[ui],Gl[ui]=null,ui--)}function Qe(r,s){ui++,Gl[ui]=r.current,r.current=s}var Ti={},kn=hn(Ti),Kn=hn(!1),Yr=Ti;function ci(r,s){var c=r.type.contextTypes;if(!c)return Ti;var g=r.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===s)return g.__reactInternalMemoizedMaskedChildContext;var w={},R;for(R in c)w[R]=s[R];return g&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=s,r.__reactInternalMemoizedMaskedChildContext=w),w}function nn(r){return r=r.childContextTypes,r!=null}function ls(){wt(Kn),wt(kn)}function Nd(r,s,c){if(kn.current!==Ti)throw Error(f(168));Qe(kn,s),Qe(Kn,c)}function Td(r,s,c){var g=r.stateNode;if(s=s.childContextTypes,typeof g.getChildContext!="function")return c;g=g.getChildContext();for(var w in g)if(!(w in s))throw Error(f(108,A(r)||"Unknown",w));return u({},c,g)}function Ws(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||Ti,Yr=kn.current,Qe(kn,r),Qe(Kn,Kn.current),!0}function yu(r,s,c){var g=r.stateNode;if(!g)throw Error(f(169));c?(r=Td(r,s,Yr),g.__reactInternalMemoizedMergedChildContext=r,wt(Kn),wt(kn),Qe(kn,r)):wt(Kn),Qe(Kn,c)}var lr=Math.clz32?Math.clz32:vu,qo=Math.log,Mf=Math.LN2;function vu(r){return r>>>=0,r===0?32:31-(qo(r)/Mf|0)|0}var st=64,Xo=4194304;function Ys(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function qs(r,s){var c=r.pendingLanes;if(c===0)return 0;var g=0,w=r.suspendedLanes,R=r.pingedLanes,H=c&268435455;if(H!==0){var ie=H&~w;ie!==0?g=Ys(ie):(R&=H,R!==0&&(g=Ys(R)))}else H=c&~w,H!==0?g=Ys(H):R!==0&&(g=Ys(R));if(g===0)return 0;if(s!==0&&s!==g&&(s&w)===0&&(w=g&-g,R=s&-s,w>=R||w===16&&(R&4194240)!==0))return s;if((g&4)!==0&&(g|=c&16),s=r.entangledLanes,s!==0)for(r=r.entanglements,s&=g;0<s;)c=31-lr(s),w=1<<c,g|=r[c],s&=~w;return g}function Rd(r,s){switch(r){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ld(r,s){for(var c=r.suspendedLanes,g=r.pingedLanes,w=r.expirationTimes,R=r.pendingLanes;0<R;){var H=31-lr(R),ie=1<<H,fe=w[H];fe===-1?((ie&c)===0||(ie&g)!==0)&&(w[H]=Rd(ie,s)):fe<=s&&(r.expiredLanes|=ie),R&=~ie}}function Vl(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function Hl(){var r=st;return st<<=1,(st&4194240)===0&&(st=64),r}function Xs(r){for(var s=[],c=0;31>c;c++)s.push(r);return s}function xr(r,s,c){r.pendingLanes|=s,s!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,s=31-lr(s),r[s]=c}function Ri(r,s){var c=r.pendingLanes&~s;r.pendingLanes=s,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=s,r.mutableReadLanes&=s,r.entangledLanes&=s,s=r.entanglements;var g=r.eventTimes;for(r=r.expirationTimes;0<c;){var w=31-lr(c),R=1<<w;s[w]=0,g[w]=-1,r[w]=-1,c&=~R}}function qr(r,s){var c=r.entangledLanes|=s;for(r=r.entanglements;c;){var g=31-lr(c),w=1<<g;w&s|r[g]&s&&(r[g]|=s),c&=~w}}var Je=0;function Ks(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var Xr=d.unstable_scheduleCallback,Md=d.unstable_cancelCallback,Dd=d.unstable_shouldYield,Ko=d.unstable_requestPaint,rn=d.unstable_now,Wl=d.unstable_ImmediatePriority,Yl=d.unstable_UserBlockingPriority,ql=d.unstable_NormalPriority,Df=d.unstable_IdlePriority,Li=null,Qn=null;function Qs(r){if(Qn&&typeof Qn.onCommitFiberRoot=="function")try{Qn.onCommitFiberRoot(Li,r,void 0,(r.current.flags&128)===128)}catch{}}function Xl(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Fr=typeof Object.is=="function"?Object.is:Xl,di=null,Js=!1,Zs=!1;function Kl(r){di===null?di=[r]:di.push(r)}function Id(r){Js=!0,Kl(r)}function fn(){if(!Zs&&di!==null){Zs=!0;var r=0,s=Je;try{var c=di;for(Je=1;r<c.length;r++){var g=c[r];do g=g(!0);while(g!==null)}di=null,Js=!1}catch(w){throw di!==null&&(di=di.slice(r+1)),Xr(Wl,fn),w}finally{Je=s,Zs=!1}}return null}var Mi=[],hi=0,Qo=null,as=0,On=[],ar=0,qt=null,Jn=1,Or="";function zr(r,s){Mi[hi++]=as,Mi[hi++]=Qo,Qo=r,as=s}function Ad(r,s,c){On[ar++]=Jn,On[ar++]=Or,On[ar++]=qt,qt=r;var g=Jn;r=Or;var w=32-lr(g)-1;g&=~(1<<w),c+=1;var R=32-lr(s)+w;if(30<R){var H=w-w%5;R=(g&(1<<H)-1).toString(32),g>>=H,w-=H,Jn=1<<32-lr(s)+w|c<<w|g,Or=R+r}else Jn=1<<R|c<<w|g,Or=r}function Jo(r){r.return!==null&&(zr(r,1),Ad(r,1,0))}function Zo(r){for(;r===Qo;)Qo=Mi[--hi],Mi[hi]=null,as=Mi[--hi],Mi[hi]=null;for(;r===qt;)qt=On[--ar],On[ar]=null,Or=On[--ar],On[ar]=null,Jn=On[--ar],On[ar]=null}var pn=null,zn=null,kt=!1,$o=!1,br=null;function Fd(r,s){var c=vr(5,null,null,0);c.elementType="DELETED",c.stateNode=s,c.return=r,s=r.deletions,s===null?(r.deletions=[c],r.flags|=16):s.push(c)}function Ql(r,s){switch(r.tag){case 5:return s=Wo(s,r.type,r.pendingProps),s!==null?(r.stateNode=s,pn=r,zn=Cf(s),!0):!1;case 6:return s=gu(s,r.pendingProps),s!==null?(r.stateNode=s,pn=r,zn=null,!0):!1;case 13:if(s=Yo(s),s!==null){var c=qt!==null?{id:Jn,overflow:Or}:null;return r.memoizedState={dehydrated:s,treeContext:c,retryLane:1073741824},c=vr(18,null,null,0),c.stateNode=s,c.return=r,r.child=c,pn=r,zn=null,!0}return!1;default:return!1}}function _u(r){return(r.mode&1)!==0&&(r.flags&128)===0}function Su(r){if(kt){var s=zn;if(s){var c=s;if(!Ql(r,s)){if(_u(r))throw Error(f(418));s=Vs(c);var g=pn;s&&Ql(r,s)?Fd(g,c):(r.flags=r.flags&-4097|2,kt=!1,pn=r)}}else{if(_u(r))throw Error(f(418));r.flags=r.flags&-4097|2,kt=!1,pn=r}}}function Od(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;pn=r}function Jl(r){if(!Oe||r!==pn)return!1;if(!kt)return Od(r),kt=!0,!1;if(r.tag!==3&&(r.tag!==5||Tf(r.type)&&!me(r.type,r.memoizedProps))){var s=zn;if(s){if(_u(r))throw zd(),Error(f(418));for(;s;)Fd(r,s),s=Vs(s)}}if(Od(r),r.tag===13){if(!Oe)throw Error(f(316));if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(f(317));zn=Nf(r)}else zn=pn?Vs(r.stateNode):null;return!0}function zd(){for(var r=zn;r;)r=Vs(r)}function us(){Oe&&(zn=pn=null,$o=kt=!1)}function wu(r){br===null?br=[r]:br.push(r)}var If=p.ReactCurrentBatchConfig;function Zl(r,s){if(Fr(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var c=Object.keys(r),g=Object.keys(s);if(c.length!==g.length)return!1;for(g=0;g<c.length;g++){var w=c[g];if(!Lf.call(s,w)||!Fr(r[w],s[w]))return!1}return!0}function Af(r){switch(r.tag){case 5:return os(r.type);case 16:return os("Lazy");case 13:return os("Suspense");case 19:return os("SuspenseList");case 0:case 2:case 15:return r=Hs(r.type,!1),r;case 11:return r=Hs(r.type.render,!1),r;case 1:return r=Hs(r.type,!0),r;default:return""}}function cs(r,s,c){if(r=c.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(f(309));var g=c.stateNode}if(!g)throw Error(f(147,r));var w=g,R=""+r;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===R?s.ref:(s=function(H){var ie=w.refs;H===null?delete ie[R]:ie[R]=H},s._stringRef=R,s)}if(typeof r!="string")throw Error(f(284));if(!c._owner)throw Error(f(290,r))}return r}function $l(r,s){throw r=Object.prototype.toString.call(s),Error(f(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r))}function bd(r){var s=r._init;return s(r._payload)}function Ud(r){function s(ce,oe){if(r){var ge=ce.deletions;ge===null?(ce.deletions=[oe],ce.flags|=16):ge.push(oe)}}function c(ce,oe){if(!r)return null;for(;oe!==null;)s(ce,oe),oe=oe.sibling;return null}function g(ce,oe){for(ce=new Map;oe!==null;)oe.key!==null?ce.set(oe.key,oe):ce.set(oe.index,oe),oe=oe.sibling;return ce}function w(ce,oe){return ce=Ki(ce,oe),ce.index=0,ce.sibling=null,ce}function R(ce,oe,ge){return ce.index=ge,r?(ge=ce.alternate,ge!==null?(ge=ge.index,ge<oe?(ce.flags|=2,oe):ge):(ce.flags|=2,oe)):(ce.flags|=1048576,oe)}function H(ce){return r&&ce.alternate===null&&(ce.flags|=2),ce}function ie(ce,oe,ge,Te){return oe===null||oe.tag!==6?(oe=Co(ge,ce.mode,Te),oe.return=ce,oe):(oe=w(oe,ge),oe.return=ce,oe)}function fe(ce,oe,ge,Te){var ze=ge.type;return ze===x?Le(ce,oe,ge.props.children,Te,ge.key):oe!==null&&(oe.elementType===ze||typeof ze=="object"&&ze!==null&&ze.$$typeof===S&&bd(ze)===oe.type)?(Te=w(oe,ge.props),Te.ref=cs(ce,oe,ge),Te.return=ce,Te):(Te=Ma(ge.type,ge.key,ge.props,null,ce.mode,Te),Te.ref=cs(ce,oe,ge),Te.return=ce,Te)}function ke(ce,oe,ge,Te){return oe===null||oe.tag!==4||oe.stateNode.containerInfo!==ge.containerInfo||oe.stateNode.implementation!==ge.implementation?(oe=Da(ge,ce.mode,Te),oe.return=ce,oe):(oe=w(oe,ge.children||[]),oe.return=ce,oe)}function Le(ce,oe,ge,Te,ze){return oe===null||oe.tag!==7?(oe=yn(ge,ce.mode,Te,ze),oe.return=ce,oe):(oe=w(oe,ge),oe.return=ce,oe)}function He(ce,oe,ge){if(typeof oe=="string"&&oe!==""||typeof oe=="number")return oe=Co(""+oe,ce.mode,ge),oe.return=ce,oe;if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case m:return ge=Ma(oe.type,oe.key,oe.props,null,ce.mode,ge),ge.ref=cs(ce,null,oe),ge.return=ce,ge;case v:return oe=Da(oe,ce.mode,ge),oe.return=ce,oe;case S:var Te=oe._init;return He(ce,Te(oe._payload),ge)}if(ee(oe)||b(oe))return oe=yn(oe,ce.mode,ge,null),oe.return=ce,oe;$l(ce,oe)}return null}function Ne(ce,oe,ge,Te){var ze=oe!==null?oe.key:null;if(typeof ge=="string"&&ge!==""||typeof ge=="number")return ze!==null?null:ie(ce,oe,""+ge,Te);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case m:return ge.key===ze?fe(ce,oe,ge,Te):null;case v:return ge.key===ze?ke(ce,oe,ge,Te):null;case S:return ze=ge._init,Ne(ce,oe,ze(ge._payload),Te)}if(ee(ge)||b(ge))return ze!==null?null:Le(ce,oe,ge,Te,null);$l(ce,ge)}return null}function St(ce,oe,ge,Te,ze){if(typeof Te=="string"&&Te!==""||typeof Te=="number")return ce=ce.get(ge)||null,ie(oe,ce,""+Te,ze);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case m:return ce=ce.get(Te.key===null?ge:Te.key)||null,fe(oe,ce,Te,ze);case v:return ce=ce.get(Te.key===null?ge:Te.key)||null,ke(oe,ce,Te,ze);case S:var Xe=Te._init;return St(ce,oe,ge,Xe(Te._payload),ze)}if(ee(Te)||b(Te))return ce=ce.get(ge)||null,Le(oe,ce,Te,ze,null);$l(oe,Te)}return null}function dt(ce,oe,ge,Te){for(var ze=null,Xe=null,We=oe,tt=oe=0,Zt=null;We!==null&&tt<ge.length;tt++){We.index>tt?(Zt=We,We=null):Zt=We.sibling;var $e=Ne(ce,We,ge[tt],Te);if($e===null){We===null&&(We=Zt);break}r&&We&&$e.alternate===null&&s(ce,We),oe=R($e,oe,tt),Xe===null?ze=$e:Xe.sibling=$e,Xe=$e,We=Zt}if(tt===ge.length)return c(ce,We),kt&&zr(ce,tt),ze;if(We===null){for(;tt<ge.length;tt++)We=He(ce,ge[tt],Te),We!==null&&(oe=R(We,oe,tt),Xe===null?ze=We:Xe.sibling=We,Xe=We);return kt&&zr(ce,tt),ze}for(We=g(ce,We);tt<ge.length;tt++)Zt=St(We,ce,tt,ge[tt],Te),Zt!==null&&(r&&Zt.alternate!==null&&We.delete(Zt.key===null?tt:Zt.key),oe=R(Zt,oe,tt),Xe===null?ze=Zt:Xe.sibling=Zt,Xe=Zt);return r&&We.forEach(function(Tn){return s(ce,Tn)}),kt&&zr(ce,tt),ze}function Vn(ce,oe,ge,Te){var ze=b(ge);if(typeof ze!="function")throw Error(f(150));if(ge=ze.call(ge),ge==null)throw Error(f(151));for(var Xe=ze=null,We=oe,tt=oe=0,Zt=null,$e=ge.next();We!==null&&!$e.done;tt++,$e=ge.next()){We.index>tt?(Zt=We,We=null):Zt=We.sibling;var Tn=Ne(ce,We,$e.value,Te);if(Tn===null){We===null&&(We=Zt);break}r&&We&&Tn.alternate===null&&s(ce,We),oe=R(Tn,oe,tt),Xe===null?ze=Tn:Xe.sibling=Tn,Xe=Tn,We=Zt}if($e.done)return c(ce,We),kt&&zr(ce,tt),ze;if(We===null){for(;!$e.done;tt++,$e=ge.next())$e=He(ce,$e.value,Te),$e!==null&&(oe=R($e,oe,tt),Xe===null?ze=$e:Xe.sibling=$e,Xe=$e);return kt&&zr(ce,tt),ze}for(We=g(ce,We);!$e.done;tt++,$e=ge.next())$e=St(We,ce,tt,$e.value,Te),$e!==null&&(r&&$e.alternate!==null&&We.delete($e.key===null?tt:$e.key),oe=R($e,oe,tt),Xe===null?ze=$e:Xe.sibling=$e,Xe=$e);return r&&We.forEach(function(Uf){return s(ce,Uf)}),kt&&zr(ce,tt),ze}function ri(ce,oe,ge,Te){if(typeof ge=="object"&&ge!==null&&ge.type===x&&ge.key===null&&(ge=ge.props.children),typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case m:e:{for(var ze=ge.key,Xe=oe;Xe!==null;){if(Xe.key===ze){if(ze=ge.type,ze===x){if(Xe.tag===7){c(ce,Xe.sibling),oe=w(Xe,ge.props.children),oe.return=ce,ce=oe;break e}}else if(Xe.elementType===ze||typeof ze=="object"&&ze!==null&&ze.$$typeof===S&&bd(ze)===Xe.type){c(ce,Xe.sibling),oe=w(Xe,ge.props),oe.ref=cs(ce,Xe,ge),oe.return=ce,ce=oe;break e}c(ce,Xe);break}else s(ce,Xe);Xe=Xe.sibling}ge.type===x?(oe=yn(ge.props.children,ce.mode,Te,ge.key),oe.return=ce,ce=oe):(Te=Ma(ge.type,ge.key,ge.props,null,ce.mode,Te),Te.ref=cs(ce,oe,ge),Te.return=ce,ce=Te)}return H(ce);case v:e:{for(Xe=ge.key;oe!==null;){if(oe.key===Xe)if(oe.tag===4&&oe.stateNode.containerInfo===ge.containerInfo&&oe.stateNode.implementation===ge.implementation){c(ce,oe.sibling),oe=w(oe,ge.children||[]),oe.return=ce,ce=oe;break e}else{c(ce,oe);break}else s(ce,oe);oe=oe.sibling}oe=Da(ge,ce.mode,Te),oe.return=ce,ce=oe}return H(ce);case S:return Xe=ge._init,ri(ce,oe,Xe(ge._payload),Te)}if(ee(ge))return dt(ce,oe,ge,Te);if(b(ge))return Vn(ce,oe,ge,Te);$l(ce,ge)}return typeof ge=="string"&&ge!==""||typeof ge=="number"?(ge=""+ge,oe!==null&&oe.tag===6?(c(ce,oe.sibling),oe=w(oe,ge),oe.return=ce,ce=oe):(c(ce,oe),oe=Co(ge,ce.mode,Te),oe.return=ce,ce=oe),H(ce)):c(ce,oe)}return ri}var ds=Ud(!0),jd=Ud(!1),ea=hn(null),ta=null,$s=null,ku=null;function xu(){ku=$s=ta=null}function Bd(r,s,c){xe?(Qe(ea,s._currentValue),s._currentValue=c):(Qe(ea,s._currentValue2),s._currentValue2=c)}function el(r){var s=ea.current;wt(ea),xe?r._currentValue=s:r._currentValue2=s}function hs(r,s,c){for(;r!==null;){var g=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,g!==null&&(g.childLanes|=s)):g!==null&&(g.childLanes&s)!==s&&(g.childLanes|=s),r===c)break;r=r.return}}function eo(r,s){ta=r,ku=$s=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&s)!==0&&(Kt=!0),r.firstContext=null)}function ur(r){var s=xe?r._currentValue:r._currentValue2;if(ku!==r)if(r={context:r,memoizedValue:s,next:null},$s===null){if(ta===null)throw Error(f(308));$s=r,ta.dependencies={lanes:0,firstContext:r}}else $s=$s.next=r;return s}var Di=null;function na(r){Di===null?Di=[r]:Di.push(r)}function Cu(r,s,c,g){var w=s.interleaved;return w===null?(c.next=c,na(s)):(c.next=w.next,w.next=c),s.interleaved=c,Ur(r,g)}function Ur(r,s){r.lanes|=s;var c=r.alternate;for(c!==null&&(c.lanes|=s),c=r,r=r.return;r!==null;)r.childLanes|=s,c=r.alternate,c!==null&&(c.childLanes|=s),c=r,r=r.return;return c.tag===3?c.stateNode:null}var cr=!1;function Eu(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Gd(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function fi(r,s){return{eventTime:r,lane:s,tag:0,payload:null,callback:null,next:null}}function pi(r,s,c){var g=r.updateQueue;if(g===null)return null;if(g=g.shared,(Ye&2)!==0){var w=g.pending;return w===null?s.next=s:(s.next=w.next,w.next=s),g.pending=s,Ur(r,c)}return w=g.interleaved,w===null?(s.next=s,na(g)):(s.next=w.next,w.next=s),g.interleaved=s,Ur(r,c)}function tl(r,s,c){if(s=s.updateQueue,s!==null&&(s=s.shared,(c&4194240)!==0)){var g=s.lanes;g&=r.pendingLanes,c|=g,s.lanes=c,qr(r,c)}}function to(r,s){var c=r.updateQueue,g=r.alternate;if(g!==null&&(g=g.updateQueue,c===g)){var w=null,R=null;if(c=c.firstBaseUpdate,c!==null){do{var H={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};R===null?w=R=H:R=R.next=H,c=c.next}while(c!==null);R===null?w=R=s:R=R.next=s}else w=R=s;c={baseState:g.baseState,firstBaseUpdate:w,lastBaseUpdate:R,shared:g.shared,effects:g.effects},r.updateQueue=c;return}r=c.lastBaseUpdate,r===null?c.firstBaseUpdate=s:r.next=s,c.lastBaseUpdate=s}function Ii(r,s,c,g){var w=r.updateQueue;cr=!1;var R=w.firstBaseUpdate,H=w.lastBaseUpdate,ie=w.shared.pending;if(ie!==null){w.shared.pending=null;var fe=ie,ke=fe.next;fe.next=null,H===null?R=ke:H.next=ke,H=fe;var Le=r.alternate;Le!==null&&(Le=Le.updateQueue,ie=Le.lastBaseUpdate,ie!==H&&(ie===null?Le.firstBaseUpdate=ke:ie.next=ke,Le.lastBaseUpdate=fe))}if(R!==null){var He=w.baseState;H=0,Le=ke=fe=null,ie=R;do{var Ne=ie.lane,St=ie.eventTime;if((g&Ne)===Ne){Le!==null&&(Le=Le.next={eventTime:St,lane:0,tag:ie.tag,payload:ie.payload,callback:ie.callback,next:null});e:{var dt=r,Vn=ie;switch(Ne=s,St=c,Vn.tag){case 1:if(dt=Vn.payload,typeof dt=="function"){He=dt.call(St,He,Ne);break e}He=dt;break e;case 3:dt.flags=dt.flags&-65537|128;case 0:if(dt=Vn.payload,Ne=typeof dt=="function"?dt.call(St,He,Ne):dt,Ne==null)break e;He=u({},He,Ne);break e;case 2:cr=!0}}ie.callback!==null&&ie.lane!==0&&(r.flags|=64,Ne=w.effects,Ne===null?w.effects=[ie]:Ne.push(ie))}else St={eventTime:St,lane:Ne,tag:ie.tag,payload:ie.payload,callback:ie.callback,next:null},Le===null?(ke=Le=St,fe=He):Le=Le.next=St,H|=Ne;if(ie=ie.next,ie===null){if(ie=w.shared.pending,ie===null)break;Ne=ie,ie=Ne.next,Ne.next=null,w.lastBaseUpdate=Ne,w.shared.pending=null}}while(!0);if(Le===null&&(fe=He),w.baseState=fe,w.firstBaseUpdate=ke,w.lastBaseUpdate=Le,s=w.shared.interleaved,s!==null){w=s;do H|=w.lane,w=w.next;while(w!==s)}else R===null&&(w.shared.lanes=0);_i|=H,r.lanes=H,r.memoizedState=He}}function Vd(r,s,c){if(r=s.effects,s.effects=null,r!==null)for(s=0;s<r.length;s++){var g=r[s],w=g.callback;if(w!==null){if(g.callback=null,g=c,typeof w!="function")throw Error(f(191,w));w.call(g)}}}var Ai={},Cr=hn(Ai),no=hn(Ai),Fi=hn(Ai);function Er(r){if(r===Ai)throw Error(f(174));return r}function ra(r,s){Qe(Fi,s),Qe(no,r),Qe(Cr,Ai),r=D(s),wt(Cr),Qe(Cr,r)}function fs(){wt(Cr),wt(no),wt(Fi)}function Pu(r){var s=Er(Fi.current),c=Er(Cr.current);s=z(c,r.type,s),c!==s&&(Qe(no,r),Qe(Cr,s))}function Nu(r){no.current===r&&(wt(Cr),wt(no))}var Mt=hn(0);function ia(r){for(var s=r;s!==null;){if(s.tag===13){var c=s.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||Sd(c)||is(c)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Tu=[];function Ru(){for(var r=0;r<Tu.length;r++){var s=Tu[r];xe?s._workInProgressVersionPrimary=null:s._workInProgressVersionSecondary=null}Tu.length=0}var Zn=p.ReactCurrentDispatcher,ps=p.ReactCurrentBatchConfig,Oi=0,Pt=null,Gt=null,Xt=null,ro=!1,nl=!1,rl=0,io=0;function sn(){throw Error(f(321))}function gs(r,s){if(s===null)return!1;for(var c=0;c<s.length&&c<r.length;c++)if(!Fr(r[c],s[c]))return!1;return!0}function il(r,s,c,g,w,R){if(Oi=R,Pt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Zn.current=r===null||r.memoizedState===null?Uu:ju,r=c(g,w),nl){R=0;do{if(nl=!1,rl=0,25<=R)throw Error(f(301));R+=1,Xt=Gt=null,s.updateQueue=null,Zn.current=Bu,r=c(g,w)}while(nl)}if(Zn.current=Ss,s=Gt!==null&&Gt.next!==null,Oi=0,Xt=Gt=Pt=null,ro=!1,s)throw Error(f(300));return r}function sa(){var r=rl!==0;return rl=0,r}function dr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xt===null?Pt.memoizedState=Xt=r:Xt=Xt.next=r,Xt}function gn(){if(Gt===null){var r=Pt.alternate;r=r!==null?r.memoizedState:null}else r=Gt.next;var s=Xt===null?Pt.memoizedState:Xt.next;if(s!==null)Xt=s,Gt=r;else{if(r===null)throw Error(f(310));Gt=r,r={memoizedState:Gt.memoizedState,baseState:Gt.baseState,baseQueue:Gt.baseQueue,queue:Gt.queue,next:null},Xt===null?Pt.memoizedState=Xt=r:Xt=Xt.next=r}return Xt}function ms(r,s){return typeof s=="function"?s(r):s}function oa(r){var s=gn(),c=s.queue;if(c===null)throw Error(f(311));c.lastRenderedReducer=r;var g=Gt,w=g.baseQueue,R=c.pending;if(R!==null){if(w!==null){var H=w.next;w.next=R.next,R.next=H}g.baseQueue=w=R,c.pending=null}if(w!==null){R=w.next,g=g.baseState;var ie=H=null,fe=null,ke=R;do{var Le=ke.lane;if((Oi&Le)===Le)fe!==null&&(fe=fe.next={lane:0,action:ke.action,hasEagerState:ke.hasEagerState,eagerState:ke.eagerState,next:null}),g=ke.hasEagerState?ke.eagerState:r(g,ke.action);else{var He={lane:Le,action:ke.action,hasEagerState:ke.hasEagerState,eagerState:ke.eagerState,next:null};fe===null?(ie=fe=He,H=g):fe=fe.next=He,Pt.lanes|=Le,_i|=Le}ke=ke.next}while(ke!==null&&ke!==R);fe===null?H=g:fe.next=ie,Fr(g,s.memoizedState)||(Kt=!0),s.memoizedState=g,s.baseState=H,s.baseQueue=fe,c.lastRenderedState=g}if(r=c.interleaved,r!==null){w=r;do R=w.lane,Pt.lanes|=R,_i|=R,w=w.next;while(w!==r)}else w===null&&(c.lanes=0);return[s.memoizedState,c.dispatch]}function so(r){var s=gn(),c=s.queue;if(c===null)throw Error(f(311));c.lastRenderedReducer=r;var g=c.dispatch,w=c.pending,R=s.memoizedState;if(w!==null){c.pending=null;var H=w=w.next;do R=r(R,H.action),H=H.next;while(H!==w);Fr(R,s.memoizedState)||(Kt=!0),s.memoizedState=R,s.baseQueue===null&&(s.baseState=R),c.lastRenderedState=R}return[R,g]}function Lu(){}function Mu(r,s){var c=Pt,g=gn(),w=s(),R=!Fr(g.memoizedState,w);if(R&&(g.memoizedState=w,Kt=!0),g=g.queue,ua(Au.bind(null,c,g,r),[r]),g.getSnapshot!==s||R||Xt!==null&&Xt.memoizedState.tag&1){if(c.flags|=2048,ys(9,Iu.bind(null,c,g,w,s),void 0,null),mt===null)throw Error(f(349));(Oi&30)!==0||Du(c,s,w)}return w}function Du(r,s,c){r.flags|=16384,r={getSnapshot:s,value:c},s=Pt.updateQueue,s===null?(s={lastEffect:null,stores:null},Pt.updateQueue=s,s.stores=[r]):(c=s.stores,c===null?s.stores=[r]:c.push(r))}function Iu(r,s,c,g){s.value=c,s.getSnapshot=g,Fu(s)&&gi(r)}function Au(r,s,c){return c(function(){Fu(s)&&gi(r)})}function Fu(r){var s=r.getSnapshot;r=r.value;try{var c=s();return!Fr(r,c)}catch{return!0}}function gi(r){var s=Ur(r,1);s!==null&&Pn(s,r,1,-1)}function la(r){var s=dr();return typeof r=="function"&&(r=r()),s.memoizedState=s.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ms,lastRenderedState:r},s.queue=r,r=r.dispatch=Ff.bind(null,Pt,r),[s.memoizedState,r]}function ys(r,s,c,g){return r={tag:r,create:s,destroy:c,deps:g,next:null},s=Pt.updateQueue,s===null?(s={lastEffect:null,stores:null},Pt.updateQueue=s,s.lastEffect=r.next=r):(c=s.lastEffect,c===null?s.lastEffect=r.next=r:(g=c.next,c.next=r,r.next=g,s.lastEffect=r)),r}function Hd(){return gn().memoizedState}function aa(r,s,c,g){var w=dr();Pt.flags|=r,w.memoizedState=ys(1|s,c,void 0,g===void 0?null:g)}function zi(r,s,c,g){var w=gn();g=g===void 0?null:g;var R=void 0;if(Gt!==null){var H=Gt.memoizedState;if(R=H.destroy,g!==null&&gs(g,H.deps)){w.memoizedState=ys(s,c,R,g);return}}Pt.flags|=r,w.memoizedState=ys(1|s,c,R,g)}function Wd(r,s){return aa(8390656,8,r,s)}function ua(r,s){return zi(2048,8,r,s)}function Ou(r,s){return zi(4,2,r,s)}function yt(r,s){return zi(4,4,r,s)}function ca(r,s){if(typeof s=="function")return r=r(),s(r),function(){s(null)};if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function sl(r,s,c){return c=c!=null?c.concat([r]):null,zi(4,4,ca.bind(null,s,r),c)}function vs(){}function zu(r,s){var c=gn();s=s===void 0?null:s;var g=c.memoizedState;return g!==null&&s!==null&&gs(s,g[1])?g[0]:(c.memoizedState=[r,s],r)}function da(r,s){var c=gn();s=s===void 0?null:s;var g=c.memoizedState;return g!==null&&s!==null&&gs(s,g[1])?g[0]:(r=r(),c.memoizedState=[r,s],r)}function oo(r,s,c){return(Oi&21)===0?(r.baseState&&(r.baseState=!1,Kt=!0),r.memoizedState=c):(Fr(c,s)||(c=Hl(),Pt.lanes|=c,_i|=c,r.baseState=!0),s)}function ha(r,s){var c=Je;Je=c!==0&&4>c?c:4,r(!0);var g=ps.transition;ps.transition={};try{r(!1),s()}finally{Je=c,ps.transition=g}}function _s(){return gn().memoizedState}function Yd(r,s,c){var g=Jt(r);if(c={lane:g,action:c,hasEagerState:!1,eagerState:null,next:null},qd(r))bu(s,c);else if(c=Cu(r,s,c,g),c!==null){var w=xt();Pn(c,r,g,w),ol(c,s,g)}}function Ff(r,s,c){var g=Jt(r),w={lane:g,action:c,hasEagerState:!1,eagerState:null,next:null};if(qd(r))bu(s,w);else{var R=r.alternate;if(r.lanes===0&&(R===null||R.lanes===0)&&(R=s.lastRenderedReducer,R!==null))try{var H=s.lastRenderedState,ie=R(H,c);if(w.hasEagerState=!0,w.eagerState=ie,Fr(ie,H)){var fe=s.interleaved;fe===null?(w.next=w,na(s)):(w.next=fe.next,fe.next=w),s.interleaved=w;return}}catch{}finally{}c=Cu(r,s,w,g),c!==null&&(w=xt(),Pn(c,r,g,w),ol(c,s,g))}}function qd(r){var s=r.alternate;return r===Pt||s!==null&&s===Pt}function bu(r,s){nl=ro=!0;var c=r.pending;c===null?s.next=s:(s.next=c.next,c.next=s),r.pending=s}function ol(r,s,c){if((c&4194240)!==0){var g=s.lanes;g&=r.pendingLanes,c|=g,s.lanes=c,qr(r,c)}}var Ss={readContext:ur,useCallback:sn,useContext:sn,useEffect:sn,useImperativeHandle:sn,useInsertionEffect:sn,useLayoutEffect:sn,useMemo:sn,useReducer:sn,useRef:sn,useState:sn,useDebugValue:sn,useDeferredValue:sn,useTransition:sn,useMutableSource:sn,useSyncExternalStore:sn,useId:sn,unstable_isNewReconciler:!1},Uu={readContext:ur,useCallback:function(r,s){return dr().memoizedState=[r,s===void 0?null:s],r},useContext:ur,useEffect:Wd,useImperativeHandle:function(r,s,c){return c=c!=null?c.concat([r]):null,aa(4194308,4,ca.bind(null,s,r),c)},useLayoutEffect:function(r,s){return aa(4194308,4,r,s)},useInsertionEffect:function(r,s){return aa(4,2,r,s)},useMemo:function(r,s){var c=dr();return s=s===void 0?null:s,r=r(),c.memoizedState=[r,s],r},useReducer:function(r,s,c){var g=dr();return s=c!==void 0?c(s):s,g.memoizedState=g.baseState=s,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:s},g.queue=r,r=r.dispatch=Yd.bind(null,Pt,r),[g.memoizedState,r]},useRef:function(r){var s=dr();return r={current:r},s.memoizedState=r},useState:la,useDebugValue:vs,useDeferredValue:function(r){return dr().memoizedState=r},useTransition:function(){var r=la(!1),s=r[0];return r=ha.bind(null,r[1]),dr().memoizedState=r,[s,r]},useMutableSource:function(){},useSyncExternalStore:function(r,s,c){var g=Pt,w=dr();if(kt){if(c===void 0)throw Error(f(407));c=c()}else{if(c=s(),mt===null)throw Error(f(349));(Oi&30)!==0||Du(g,s,c)}w.memoizedState=c;var R={value:c,getSnapshot:s};return w.queue=R,Wd(Au.bind(null,g,R,r),[r]),g.flags|=2048,ys(9,Iu.bind(null,g,R,c,s),void 0,null),c},useId:function(){var r=dr(),s=mt.identifierPrefix;if(kt){var c=Or,g=Jn;c=(g&~(1<<32-lr(g)-1)).toString(32)+c,s=":"+s+"R"+c,c=rl++,0<c&&(s+="H"+c.toString(32)),s+=":"}else c=io++,s=":"+s+"r"+c.toString(32)+":";return r.memoizedState=s},unstable_isNewReconciler:!1},ju={readContext:ur,useCallback:zu,useContext:ur,useEffect:ua,useImperativeHandle:sl,useInsertionEffect:Ou,useLayoutEffect:yt,useMemo:da,useReducer:oa,useRef:Hd,useState:function(){return oa(ms)},useDebugValue:vs,useDeferredValue:function(r){var s=gn();return oo(s,Gt.memoizedState,r)},useTransition:function(){var r=oa(ms)[0],s=gn().memoizedState;return[r,s]},useMutableSource:Lu,useSyncExternalStore:Mu,useId:_s,unstable_isNewReconciler:!1},Bu={readContext:ur,useCallback:zu,useContext:ur,useEffect:ua,useImperativeHandle:sl,useInsertionEffect:Ou,useLayoutEffect:yt,useMemo:da,useReducer:so,useRef:Hd,useState:function(){return so(ms)},useDebugValue:vs,useDeferredValue:function(r){var s=gn();return Gt===null?s.memoizedState=r:oo(s,Gt.memoizedState,r)},useTransition:function(){var r=so(ms)[0],s=gn().memoizedState;return[r,s]},useMutableSource:Lu,useSyncExternalStore:Mu,useId:_s,unstable_isNewReconciler:!1};function hr(r,s){if(r&&r.defaultProps){s=u({},s),r=r.defaultProps;for(var c in r)s[c]===void 0&&(s[c]=r[c]);return s}return s}function Gu(r,s,c,g){s=r.memoizedState,c=c(g,s),c=c==null?s:u({},s,c),r.memoizedState=c,r.lanes===0&&(r.updateQueue.baseState=c)}var ll={isMounted:function(r){return(r=r._reactInternals)?U(r)===r:!1},enqueueSetState:function(r,s,c){r=r._reactInternals;var g=xt(),w=Jt(r),R=fi(g,w);R.payload=s,c!=null&&(R.callback=c),s=pi(r,R,w),s!==null&&(Pn(s,r,w,g),tl(s,r,w))},enqueueReplaceState:function(r,s,c){r=r._reactInternals;var g=xt(),w=Jt(r),R=fi(g,w);R.tag=1,R.payload=s,c!=null&&(R.callback=c),s=pi(r,R,w),s!==null&&(Pn(s,r,w,g),tl(s,r,w))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var c=xt(),g=Jt(r),w=fi(c,g);w.tag=2,s!=null&&(w.callback=s),s=pi(r,w,g),s!==null&&(Pn(s,r,g,c),tl(s,r,g))}};function Xd(r,s,c,g,w,R,H){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(g,R,H):s.prototype&&s.prototype.isPureReactComponent?!Zl(c,g)||!Zl(w,R):!0}function Kd(r,s,c){var g=!1,w=Ti,R=s.contextType;return typeof R=="object"&&R!==null?R=ur(R):(w=nn(s)?Yr:kn.current,g=s.contextTypes,R=(g=g!=null)?ci(r,w):Ti),s=new s(c,R),r.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=ll,r.stateNode=s,s._reactInternals=r,g&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=w,r.__reactInternalMemoizedMaskedChildContext=R),s}function fa(r,s,c,g){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(c,g),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(c,g),s.state!==r&&ll.enqueueReplaceState(s,s.state,null)}function Kr(r,s,c,g){var w=r.stateNode;w.props=c,w.state=r.memoizedState,w.refs={},Eu(r);var R=s.contextType;typeof R=="object"&&R!==null?w.context=ur(R):(R=nn(s)?Yr:kn.current,w.context=ci(r,R)),w.state=r.memoizedState,R=s.getDerivedStateFromProps,typeof R=="function"&&(Gu(r,s,R,c),w.state=r.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(s=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),s!==w.state&&ll.enqueueReplaceState(w,w.state,null),Ii(r,c,w,g),w.state=r.memoizedState),typeof w.componentDidMount=="function"&&(r.flags|=4194308)}function ws(r,s){try{var c="",g=s;do c+=Af(g),g=g.return;while(g);var w=c}catch(R){w=`
Error generating stack: `+R.message+`
`+R.stack}return{value:r,source:s,stack:w,digest:null}}function bi(r,s,c){return{value:r,source:null,stack:c??null,digest:s??null}}function Pr(r,s){try{console.error(s.value)}catch(c){setTimeout(function(){throw c})}}var al=typeof WeakMap=="function"?WeakMap:Map;function Qr(r,s,c){c=fi(-1,c),c.tag=3,c.payload={element:null};var g=s.value;return c.callback=function(){At||(At=!0,Vt=g),Pr(r,s)},c}function pa(r,s,c){c=fi(-1,c),c.tag=3;var g=r.type.getDerivedStateFromError;if(typeof g=="function"){var w=s.value;c.payload=function(){return g(w)},c.callback=function(){Pr(r,s)}}var R=r.stateNode;return R!==null&&typeof R.componentDidCatch=="function"&&(c.callback=function(){Pr(r,s),typeof g!="function"&&(Br===null?Br=new Set([this]):Br.add(this));var H=s.stack;this.componentDidCatch(s.value,{componentStack:H!==null?H:""})}),c}function Qd(r,s,c){var g=r.pingCache;if(g===null){g=r.pingCache=new al;var w=new Set;g.set(s,w)}else w=g.get(s),w===void 0&&(w=new Set,g.set(s,w));w.has(c)||(w.add(c),r=ih.bind(null,r,s,c),s.then(r,r))}function Jd(r){do{var s;if((s=r.tag===13)&&(s=r.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return r;r=r.return}while(r!==null);return null}function Ui(r,s,c,g,w){return(r.mode&1)===0?(r===s?r.flags|=65536:(r.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(s=fi(-1,1),s.tag=2,pi(c,s,1))),c.lanes|=1),r):(r.flags|=65536,r.lanes=w,r)}var ul=p.ReactCurrentOwner,Kt=!1;function on(r,s,c,g){s.child=r===null?jd(s,null,c,g):ds(s,r.child,c,g)}function ga(r,s,c,g,w){c=c.render;var R=s.ref;return eo(s,w),g=il(r,s,c,g,R,w),c=sa(),r!==null&&!Kt?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~w,yi(r,s,w)):(kt&&c&&Jo(s),s.flags|=1,on(r,s,g,w),s.child)}function ks(r,s,c,g,w){if(r===null){var R=c.type;return typeof R=="function"&&!ko(R)&&R.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(s.tag=15,s.type=R,mi(r,s,R,g,w)):(r=Ma(c.type,null,g,s,s.mode,w),r.ref=s.ref,r.return=s,s.child=r)}if(R=r.child,(r.lanes&w)===0){var H=R.memoizedProps;if(c=c.compare,c=c!==null?c:Zl,c(H,g)&&r.ref===s.ref)return yi(r,s,w)}return s.flags|=1,r=Ki(R,g),r.ref=s.ref,r.return=s,s.child=r}function mi(r,s,c,g,w){if(r!==null){var R=r.memoizedProps;if(Zl(R,g)&&r.ref===s.ref)if(Kt=!1,s.pendingProps=g=R,(r.lanes&w)!==0)(r.flags&131072)!==0&&(Kt=!0);else return s.lanes=r.lanes,yi(r,s,w)}return Jr(r,s,c,g,w)}function vt(r,s,c){var g=s.pendingProps,w=g.children,R=r!==null?r.memoizedState:null;if(g.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qe(Wi,Qt),Qt|=c;else{if((c&1073741824)===0)return r=R!==null?R.baseLanes|c:c,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:r,cachePool:null,transitions:null},s.updateQueue=null,Qe(Wi,Qt),Qt|=r,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=R!==null?R.baseLanes:c,Qe(Wi,Qt),Qt|=g}else R!==null?(g=R.baseLanes|c,s.memoizedState=null):g=c,Qe(Wi,Qt),Qt|=g;return on(r,s,w,c),s.child}function gt(r,s){var c=s.ref;(r===null&&c!==null||r!==null&&r.ref!==c)&&(s.flags|=512,s.flags|=2097152)}function Jr(r,s,c,g,w){var R=nn(c)?Yr:kn.current;return R=ci(s,R),eo(s,w),c=il(r,s,c,g,R,w),g=sa(),r!==null&&!Kt?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~w,yi(r,s,w)):(kt&&g&&Jo(s),s.flags|=1,on(r,s,c,w),s.child)}function mn(r,s,c,g,w){if(nn(c)){var R=!0;Ws(s)}else R=!1;if(eo(s,w),s.stateNode===null)cl(r,s),Kd(s,c,g),Kr(s,c,g,w),g=!0;else if(r===null){var H=s.stateNode,ie=s.memoizedProps;H.props=ie;var fe=H.context,ke=c.contextType;typeof ke=="object"&&ke!==null?ke=ur(ke):(ke=nn(c)?Yr:kn.current,ke=ci(s,ke));var Le=c.getDerivedStateFromProps,He=typeof Le=="function"||typeof H.getSnapshotBeforeUpdate=="function";He||typeof H.UNSAFE_componentWillReceiveProps!="function"&&typeof H.componentWillReceiveProps!="function"||(ie!==g||fe!==ke)&&fa(s,H,g,ke),cr=!1;var Ne=s.memoizedState;H.state=Ne,Ii(s,g,H,w),fe=s.memoizedState,ie!==g||Ne!==fe||Kn.current||cr?(typeof Le=="function"&&(Gu(s,c,Le,g),fe=s.memoizedState),(ie=cr||Xd(s,c,ie,g,Ne,fe,ke))?(He||typeof H.UNSAFE_componentWillMount!="function"&&typeof H.componentWillMount!="function"||(typeof H.componentWillMount=="function"&&H.componentWillMount(),typeof H.UNSAFE_componentWillMount=="function"&&H.UNSAFE_componentWillMount()),typeof H.componentDidMount=="function"&&(s.flags|=4194308)):(typeof H.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=g,s.memoizedState=fe),H.props=g,H.state=fe,H.context=ke,g=ie):(typeof H.componentDidMount=="function"&&(s.flags|=4194308),g=!1)}else{H=s.stateNode,Gd(r,s),ie=s.memoizedProps,ke=s.type===s.elementType?ie:hr(s.type,ie),H.props=ke,He=s.pendingProps,Ne=H.context,fe=c.contextType,typeof fe=="object"&&fe!==null?fe=ur(fe):(fe=nn(c)?Yr:kn.current,fe=ci(s,fe));var St=c.getDerivedStateFromProps;(Le=typeof St=="function"||typeof H.getSnapshotBeforeUpdate=="function")||typeof H.UNSAFE_componentWillReceiveProps!="function"&&typeof H.componentWillReceiveProps!="function"||(ie!==He||Ne!==fe)&&fa(s,H,g,fe),cr=!1,Ne=s.memoizedState,H.state=Ne,Ii(s,g,H,w);var dt=s.memoizedState;ie!==He||Ne!==dt||Kn.current||cr?(typeof St=="function"&&(Gu(s,c,St,g),dt=s.memoizedState),(ke=cr||Xd(s,c,ke,g,Ne,dt,fe)||!1)?(Le||typeof H.UNSAFE_componentWillUpdate!="function"&&typeof H.componentWillUpdate!="function"||(typeof H.componentWillUpdate=="function"&&H.componentWillUpdate(g,dt,fe),typeof H.UNSAFE_componentWillUpdate=="function"&&H.UNSAFE_componentWillUpdate(g,dt,fe)),typeof H.componentDidUpdate=="function"&&(s.flags|=4),typeof H.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof H.componentDidUpdate!="function"||ie===r.memoizedProps&&Ne===r.memoizedState||(s.flags|=4),typeof H.getSnapshotBeforeUpdate!="function"||ie===r.memoizedProps&&Ne===r.memoizedState||(s.flags|=1024),s.memoizedProps=g,s.memoizedState=dt),H.props=g,H.state=dt,H.context=fe,g=ke):(typeof H.componentDidUpdate!="function"||ie===r.memoizedProps&&Ne===r.memoizedState||(s.flags|=4),typeof H.getSnapshotBeforeUpdate!="function"||ie===r.memoizedProps&&Ne===r.memoizedState||(s.flags|=1024),g=!1)}return xn(r,s,c,g,R,w)}function xn(r,s,c,g,w,R){gt(r,s);var H=(s.flags&128)!==0;if(!g&&!H)return w&&yu(s,c,!1),yi(r,s,R);g=s.stateNode,ul.current=s;var ie=H&&typeof c.getDerivedStateFromError!="function"?null:g.render();return s.flags|=1,r!==null&&H?(s.child=ds(s,r.child,null,R),s.child=ds(s,null,ie,R)):on(r,s,ie,R),s.memoizedState=g.state,w&&yu(s,c,!0),s.child}function ji(r){var s=r.stateNode;s.pendingContext?Nd(r,s.pendingContext,s.pendingContext!==s.context):s.context&&Nd(r,s.context,!1),ra(r,s.containerInfo)}function xs(r,s,c,g,w){return us(),wu(w),s.flags|=256,on(r,s,c,g),s.child}var Cn={dehydrated:null,treeContext:null,retryLane:0};function lo(r){return{baseLanes:r,cachePool:null,transitions:null}}function Vu(r,s,c){var g=s.pendingProps,w=Mt.current,R=!1,H=(s.flags&128)!==0,ie;if((ie=H)||(ie=r!==null&&r.memoizedState===null?!1:(w&2)!==0),ie?(R=!0,s.flags&=-129):(r===null||r.memoizedState!==null)&&(w|=1),Qe(Mt,w&1),r===null)return Su(s),r=s.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((s.mode&1)===0?s.lanes=1:is(r)?s.lanes=8:s.lanes=1073741824,null):(H=g.children,r=g.fallback,R?(g=s.mode,R=s.child,H={mode:"hidden",children:H},(g&1)===0&&R!==null?(R.childLanes=0,R.pendingProps=H):R=xo(H,g,0,null),r=yn(r,g,c,null),R.return=s,r.return=s,R.sibling=r,s.child=R,s.child.memoizedState=lo(c),s.memoizedState=Cn,r):ma(s,H));if(w=r.memoizedState,w!==null&&(ie=w.dehydrated,ie!==null))return Zd(r,s,H,g,ie,w,c);if(R){R=g.fallback,H=s.mode,w=r.child,ie=w.sibling;var fe={mode:"hidden",children:g.children};return(H&1)===0&&s.child!==w?(g=s.child,g.childLanes=0,g.pendingProps=fe,s.deletions=null):(g=Ki(w,fe),g.subtreeFlags=w.subtreeFlags&14680064),ie!==null?R=Ki(ie,R):(R=yn(R,H,c,null),R.flags|=2),R.return=s,g.return=s,g.sibling=R,s.child=g,g=R,R=s.child,H=r.child.memoizedState,H=H===null?lo(c):{baseLanes:H.baseLanes|c,cachePool:null,transitions:H.transitions},R.memoizedState=H,R.childLanes=r.childLanes&~c,s.memoizedState=Cn,g}return R=r.child,r=R.sibling,g=Ki(R,{mode:"visible",children:g.children}),(s.mode&1)===0&&(g.lanes=c),g.return=s,g.sibling=null,r!==null&&(c=s.deletions,c===null?(s.deletions=[r],s.flags|=16):c.push(r)),s.child=g,s.memoizedState=null,g}function ma(r,s){return s=xo({mode:"visible",children:s},r.mode,0,null),s.return=r,r.child=s}function Cs(r,s,c,g){return g!==null&&wu(g),ds(s,r.child,null,c),r=ma(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function Zd(r,s,c,g,w,R,H){if(c)return s.flags&256?(s.flags&=-257,g=bi(Error(f(422))),Cs(r,s,H,g)):s.memoizedState!==null?(s.child=r.child,s.flags|=128,null):(R=g.fallback,w=s.mode,g=xo({mode:"visible",children:g.children},w,0,null),R=yn(R,w,H,null),R.flags|=2,g.return=s,R.return=s,g.sibling=R,s.child=g,(s.mode&1)!==0&&ds(s,r.child,null,H),s.child.memoizedState=lo(H),s.memoizedState=Cn,R);if((s.mode&1)===0)return Cs(r,s,H,null);if(is(w))return g=Ul(w).digest,R=Error(f(419)),g=bi(R,g,void 0),Cs(r,s,H,g);if(c=(H&r.childLanes)!==0,Kt||c){if(g=mt,g!==null){switch(H&-H){case 4:w=2;break;case 16:w=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:w=32;break;case 536870912:w=268435456;break;default:w=0}w=(w&(g.suspendedLanes|H))!==0?0:w,w!==0&&w!==R.retryLane&&(R.retryLane=w,Ur(r,w),Pn(g,r,w,-1))}return wo(),g=bi(Error(f(421))),Cs(r,s,H,g)}return Sd(w)?(s.flags|=128,s.child=r.child,s=oh.bind(null,r),jl(w,s),null):(r=R.treeContext,Oe&&(zn=Pf(w),pn=s,kt=!0,br=null,$o=!1,r!==null&&(On[ar++]=Jn,On[ar++]=Or,On[ar++]=qt,Jn=r.id,Or=r.overflow,qt=s)),s=ma(s,g.children),s.flags|=4096,s)}function Zr(r,s,c){r.lanes|=s;var g=r.alternate;g!==null&&(g.lanes|=s),hs(r.return,s,c)}function ao(r,s,c,g,w){var R=r.memoizedState;R===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:g,tail:c,tailMode:w}:(R.isBackwards=s,R.rendering=null,R.renderingStartTime=0,R.last=g,R.tail=c,R.tailMode=w)}function ya(r,s,c){var g=s.pendingProps,w=g.revealOrder,R=g.tail;if(on(r,s,g.children,c),g=Mt.current,(g&2)!==0)g=g&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Zr(r,c,s);else if(r.tag===19)Zr(r,c,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}g&=1}if(Qe(Mt,g),(s.mode&1)===0)s.memoizedState=null;else switch(w){case"forwards":for(c=s.child,w=null;c!==null;)r=c.alternate,r!==null&&ia(r)===null&&(w=c),c=c.sibling;c=w,c===null?(w=s.child,s.child=null):(w=c.sibling,c.sibling=null),ao(s,!1,w,c,R);break;case"backwards":for(c=null,w=s.child,s.child=null;w!==null;){if(r=w.alternate,r!==null&&ia(r)===null){s.child=w;break}r=w.sibling,w.sibling=c,c=w,w=r}ao(s,!0,c,null,R);break;case"together":ao(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function cl(r,s){(s.mode&1)===0&&r!==null&&(r.alternate=null,s.alternate=null,s.flags|=2)}function yi(r,s,c){if(r!==null&&(s.dependencies=r.dependencies),_i|=s.lanes,(c&s.childLanes)===0)return null;if(r!==null&&s.child!==r.child)throw Error(f(153));if(s.child!==null){for(r=s.child,c=Ki(r,r.pendingProps),s.child=c,c.return=s;r.sibling!==null;)r=r.sibling,c=c.sibling=Ki(r,r.pendingProps),c.return=s;c.sibling=null}return s.child}function Bi(r,s,c){switch(s.tag){case 3:ji(s),us();break;case 5:Pu(s);break;case 1:nn(s.type)&&Ws(s);break;case 4:ra(s,s.stateNode.containerInfo);break;case 10:Bd(s,s.type._context,s.memoizedProps.value);break;case 13:var g=s.memoizedState;if(g!==null)return g.dehydrated!==null?(Qe(Mt,Mt.current&1),s.flags|=128,null):(c&s.child.childLanes)!==0?Vu(r,s,c):(Qe(Mt,Mt.current&1),r=yi(r,s,c),r!==null?r.sibling:null);Qe(Mt,Mt.current&1);break;case 19:if(g=(c&s.childLanes)!==0,(r.flags&128)!==0){if(g)return ya(r,s,c);s.flags|=128}var w=s.memoizedState;if(w!==null&&(w.rendering=null,w.tail=null,w.lastEffect=null),Qe(Mt,Mt.current),g)break;return null;case 22:case 23:return s.lanes=0,vt(r,s,c)}return yi(r,s,c)}function bn(r){r.flags|=4}function Es(r,s){if(r!==null&&r.child===s.child)return!0;if((s.flags&16)!==0)return!1;for(r=s.child;r!==null;){if((r.flags&12854)!==0||(r.subtreeFlags&12854)!==0)return!1;r=r.sibling}return!0}var Gi,Vi,Un,jn;if(Pe)Gi=function(r,s){for(var c=s.child;c!==null;){if(c.tag===5||c.tag===6)J(r,c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===s)break;for(;c.sibling===null;){if(c.return===null||c.return===s)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},Vi=function(){},Un=function(r,s,c,g,w){if(r=r.memoizedProps,r!==g){var R=s.stateNode,H=Er(Cr.current);c=he(R,c,r,g,w,H),(s.updateQueue=c)&&bn(s)}},jn=function(r,s,c,g){c!==g&&bn(s)};else if(Ue){Gi=function(r,s,c,g){for(var w=s.child;w!==null;){if(w.tag===5){var R=w.stateNode;c&&g&&(R=bl(R,w.type,w.memoizedProps,w)),J(r,R)}else if(w.tag===6)R=w.stateNode,c&&g&&(R=pu(R,w.memoizedProps,w)),J(r,R);else if(w.tag!==4){if(w.tag===22&&w.memoizedState!==null)R=w.child,R!==null&&(R.return=w),Gi(r,w,!0,!0);else if(w.child!==null){w.child.return=w,w=w.child;continue}}if(w===s)break;for(;w.sibling===null;){if(w.return===null||w.return===s)return;w=w.return}w.sibling.return=w.return,w=w.sibling}};var Hi=function(r,s,c,g){for(var w=s.child;w!==null;){if(w.tag===5){var R=w.stateNode;c&&g&&(R=bl(R,w.type,w.memoizedProps,w)),fu(r,R)}else if(w.tag===6)R=w.stateNode,c&&g&&(R=pu(R,w.memoizedProps,w)),fu(r,R);else if(w.tag!==4){if(w.tag===22&&w.memoizedState!==null)R=w.child,R!==null&&(R.return=w),Hi(r,w,!0,!0);else if(w.child!==null){w.child.return=w,w=w.child;continue}}if(w===s)break;for(;w.sibling===null;){if(w.return===null||w.return===s)return;w=w.return}w.sibling.return=w.return,w=w.sibling}};Vi=function(r,s){var c=s.stateNode;if(!Es(r,s)){r=c.containerInfo;var g=hu(r);Hi(g,s,!1,!1),c.pendingChildren=g,bn(s),_d(r,g)}},Un=function(r,s,c,g,w){var R=r.stateNode,H=r.memoizedProps;if((r=Es(r,s))&&H===g)s.stateNode=R;else{var ie=s.stateNode,fe=Er(Cr.current),ke=null;H!==g&&(ke=he(ie,c,H,g,w,fe)),r&&ke===null?s.stateNode=R:(R=vd(R,ke,c,H,g,s,r,ie),Z(R,c,g,w,fe)&&bn(s),s.stateNode=R,r?bn(s):Gi(R,s,!1,!1))}},jn=function(r,s,c,g){c!==g?(r=Er(Fi.current),c=Er(Cr.current),s.stateNode=le(g,r,c,s),bn(s)):s.stateNode=r.stateNode}}else Vi=function(){},Un=function(){},jn=function(){};function fr(r,s){if(!kt)switch(r.tailMode){case"hidden":s=r.tail;for(var c=null;s!==null;)s.alternate!==null&&(c=s),s=s.sibling;c===null?r.tail=null:c.sibling=null;break;case"collapsed":c=r.tail;for(var g=null;c!==null;)c.alternate!==null&&(g=c),c=c.sibling;g===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:g.sibling=null}}function Nt(r){var s=r.alternate!==null&&r.alternate.child===r.child,c=0,g=0;if(s)for(var w=r.child;w!==null;)c|=w.lanes|w.childLanes,g|=w.subtreeFlags&14680064,g|=w.flags&14680064,w.return=r,w=w.sibling;else for(w=r.child;w!==null;)c|=w.lanes|w.childLanes,g|=w.subtreeFlags,g|=w.flags,w.return=r,w=w.sibling;return r.subtreeFlags|=g,r.childLanes=c,s}function Ps(r,s,c){var g=s.pendingProps;switch(Zo(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nt(s),null;case 1:return nn(s.type)&&ls(),Nt(s),null;case 3:return c=s.stateNode,fs(),wt(Kn),wt(kn),Ru(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(r===null||r.child===null)&&(Jl(s)?bn(s):r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,br!==null&&(Ra(br),br=null))),Vi(r,s),Nt(s),null;case 5:Nu(s),c=Er(Fi.current);var w=s.type;if(r!==null&&s.stateNode!=null)Un(r,s,w,g,c),r.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!g){if(s.stateNode===null)throw Error(f(166));return Nt(s),null}if(r=Er(Cr.current),Jl(s)){if(!Oe)throw Error(f(175));r=ss(s.stateNode,s.type,s.memoizedProps,c,r,s,!$o),s.updateQueue=r,r!==null&&bn(s)}else{var R=F(w,g,c,r,s);Gi(R,s,!1,!1),s.stateNode=R,Z(R,w,g,c,r)&&bn(s)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Nt(s),null;case 6:if(r&&s.stateNode!=null)jn(r,s,r.memoizedProps,g);else{if(typeof g!="string"&&s.stateNode===null)throw Error(f(166));if(r=Er(Fi.current),c=Er(Cr.current),Jl(s)){if(!Oe)throw Error(f(176));if(r=s.stateNode,c=s.memoizedProps,(g=wd(r,c,s,!$o))&&(w=pn,w!==null))switch(w.tag){case 3:Rf(w.stateNode.containerInfo,r,c,(w.mode&1)!==0);break;case 5:Ft(w.type,w.memoizedProps,w.stateNode,r,c,(w.mode&1)!==0)}g&&bn(s)}else s.stateNode=le(g,r,c,s)}return Nt(s),null;case 13:if(wt(Mt),g=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(kt&&zn!==null&&(s.mode&1)!==0&&(s.flags&128)===0)zd(),us(),s.flags|=98560,w=!1;else if(w=Jl(s),g!==null&&g.dehydrated!==null){if(r===null){if(!w)throw Error(f(318));if(!Oe)throw Error(f(344));if(w=s.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(f(317));kd(w,s)}else us(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Nt(s),w=!1}else br!==null&&(Ra(br),br=null),w=!0;if(!w)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=c,s):(c=g!==null,c!==(r!==null&&r.memoizedState!==null)&&c&&(s.child.flags|=8192,(s.mode&1)!==0&&(r===null||(Mt.current&1)!==0?Rt===0&&(Rt=3):wo())),s.updateQueue!==null&&(s.flags|=4),Nt(s),null);case 4:return fs(),Vi(r,s),r===null&&Ge(s.stateNode.containerInfo),Nt(s),null;case 10:return el(s.type._context),Nt(s),null;case 17:return nn(s.type)&&ls(),Nt(s),null;case 19:if(wt(Mt),w=s.memoizedState,w===null)return Nt(s),null;if(g=(s.flags&128)!==0,R=w.rendering,R===null)if(g)fr(w,!1);else{if(Rt!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(R=ia(r),R!==null){for(s.flags|=128,fr(w,!1),r=R.updateQueue,r!==null&&(s.updateQueue=r,s.flags|=4),s.subtreeFlags=0,r=c,c=s.child;c!==null;)g=c,w=r,g.flags&=14680066,R=g.alternate,R===null?(g.childLanes=0,g.lanes=w,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=R.childLanes,g.lanes=R.lanes,g.child=R.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=R.memoizedProps,g.memoizedState=R.memoizedState,g.updateQueue=R.updateQueue,g.type=R.type,w=R.dependencies,g.dependencies=w===null?null:{lanes:w.lanes,firstContext:w.firstContext}),c=c.sibling;return Qe(Mt,Mt.current&1|2),s.child}r=r.sibling}w.tail!==null&&rn()>yl&&(s.flags|=128,g=!0,fr(w,!1),s.lanes=4194304)}else{if(!g)if(r=ia(R),r!==null){if(s.flags|=128,g=!0,r=r.updateQueue,r!==null&&(s.updateQueue=r,s.flags|=4),fr(w,!0),w.tail===null&&w.tailMode==="hidden"&&!R.alternate&&!kt)return Nt(s),null}else 2*rn()-w.renderingStartTime>yl&&c!==1073741824&&(s.flags|=128,g=!0,fr(w,!1),s.lanes=4194304);w.isBackwards?(R.sibling=s.child,s.child=R):(r=w.last,r!==null?r.sibling=R:s.child=R,w.last=R)}return w.tail!==null?(s=w.tail,w.rendering=s,w.tail=s.sibling,w.renderingStartTime=rn(),s.sibling=null,r=Mt.current,Qe(Mt,g?r&1|2:r&1),s):(Nt(s),null);case 22:case 23:return La(),c=s.memoizedState!==null,r!==null&&r.memoizedState!==null!==c&&(s.flags|=8192),c&&(s.mode&1)!==0?(Qt&1073741824)!==0&&(Nt(s),Pe&&s.subtreeFlags&6&&(s.flags|=8192)):Nt(s),null;case 24:return null;case 25:return null}throw Error(f(156,s.tag))}function $d(r,s){switch(Zo(s),s.tag){case 1:return nn(s.type)&&ls(),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return fs(),wt(Kn),wt(kn),Ru(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 5:return Nu(s),null;case 13:if(wt(Mt),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(f(340));us()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return wt(Mt),null;case 4:return fs(),null;case 10:return el(s.type._context),null;case 22:case 23:return La(),null;case 24:return null;default:return null}}var uo=!1,ln=!1,pr=typeof WeakSet=="function"?WeakSet:Set,Ee=null;function ct(r,s){var c=r.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(g){Ct(r,s,g)}else c.current=null}function gr(r,s,c){try{c()}catch(g){Ct(r,s,g)}}var Hu=!1;function eh(r,s){for(W(r.containerInfo),Ee=s;Ee!==null;)if(r=Ee,s=r.child,(r.subtreeFlags&1028)!==0&&s!==null)s.return=r,Ee=s;else for(;Ee!==null;){r=Ee;try{var c=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(c!==null){var g=c.memoizedProps,w=c.memoizedState,R=r.stateNode,H=R.getSnapshotBeforeUpdate(r.elementType===r.type?g:hr(r.type,g),w);R.__reactInternalSnapshotBeforeUpdate=H}break;case 3:Pe&&Gs(r.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(f(163))}}catch(ie){Ct(r,r.return,ie)}if(s=r.sibling,s!==null){s.return=r.return,Ee=s;break}Ee=r.return}return c=Hu,Hu=!1,c}function Ns(r,s,c){var g=s.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var w=g=g.next;do{if((w.tag&r)===r){var R=w.destroy;w.destroy=void 0,R!==void 0&&gr(s,c,R)}w=w.next}while(w!==g)}}function co(r,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var c=s=s.next;do{if((c.tag&r)===r){var g=c.create;c.destroy=g()}c=c.next}while(c!==s)}}function va(r){var s=r.ref;if(s!==null){var c=r.stateNode;switch(r.tag){case 5:r=pe(c);break;default:r=c}typeof s=="function"?s(r):s.current=r}}function dl(r){var s=r.alternate;s!==null&&(r.alternate=null,dl(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&ot(s)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function Wu(r){return r.tag===5||r.tag===3||r.tag===4}function Ts(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Wu(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function hl(r,s,c){var g=r.tag;if(g===5||g===6)r=r.stateNode,s?rs(c,r,s):or(c,r);else if(g!==4&&(r=r.child,r!==null))for(hl(r,s,c),r=r.sibling;r!==null;)hl(r,s,c),r=r.sibling}function Yu(r,s,c){var g=r.tag;if(g===5||g===6)r=r.stateNode,s?Vo(c,r,s):wn(c,r);else if(g!==4&&(r=r.child,r!==null))for(Yu(r,s,c),r=r.sibling;r!==null;)Yu(r,s,c),r=r.sibling}var Ot=null,$n=!1;function jr(r,s,c){for(c=c.child;c!==null;)_a(r,s,c),c=c.sibling}function _a(r,s,c){if(Qn&&typeof Qn.onCommitFiberUnmount=="function")try{Qn.onCommitFiberUnmount(Li,c)}catch{}switch(c.tag){case 5:ln||ct(c,s);case 6:if(Pe){var g=Ot,w=$n;Ot=null,jr(r,s,c),Ot=g,$n=w,Ot!==null&&($n?Ho(Ot,c.stateNode):au(Ot,c.stateNode))}else jr(r,s,c);break;case 18:Pe&&Ot!==null&&($n?Pd(Ot,c.stateNode):Ed(Ot,c.stateNode));break;case 4:Pe?(g=Ot,w=$n,Ot=c.stateNode.containerInfo,$n=!0,jr(r,s,c),Ot=g,$n=w):(Ue&&(g=c.stateNode.containerInfo,w=hu(g),zl(g,w)),jr(r,s,c));break;case 0:case 11:case 14:case 15:if(!ln&&(g=c.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){w=g=g.next;do{var R=w,H=R.destroy;R=R.tag,H!==void 0&&((R&2)!==0||(R&4)!==0)&&gr(c,s,H),w=w.next}while(w!==g)}jr(r,s,c);break;case 1:if(!ln&&(ct(c,s),g=c.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=c.memoizedProps,g.state=c.memoizedState,g.componentWillUnmount()}catch(ie){Ct(c,s,ie)}jr(r,s,c);break;case 21:jr(r,s,c);break;case 22:c.mode&1?(ln=(g=ln)||c.memoizedState!==null,jr(r,s,c),ln=g):jr(r,s,c);break;default:jr(r,s,c)}}function Rs(r){var s=r.updateQueue;if(s!==null){r.updateQueue=null;var c=r.stateNode;c===null&&(c=r.stateNode=new pr),s.forEach(function(g){var w=Of.bind(null,r,g);c.has(g)||(c.add(g),g.then(w,w))})}}function Nr(r,s){var c=s.deletions;if(c!==null)for(var g=0;g<c.length;g++){var w=c[g];try{var R=r,H=s;if(Pe){var ie=H;e:for(;ie!==null;){switch(ie.tag){case 5:Ot=ie.stateNode,$n=!1;break e;case 3:Ot=ie.stateNode.containerInfo,$n=!0;break e;case 4:Ot=ie.stateNode.containerInfo,$n=!0;break e}ie=ie.return}if(Ot===null)throw Error(f(160));_a(R,H,w),Ot=null,$n=!1}else _a(R,H,w);var fe=w.alternate;fe!==null&&(fe.return=null),w.return=null}catch(ke){Ct(w,s,ke)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)fl(s,r),s=s.sibling}function fl(r,s){var c=r.alternate,g=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(Nr(s,r),mr(r),g&4){try{Ns(3,r,r.return),co(3,r)}catch(Ne){Ct(r,r.return,Ne)}try{Ns(5,r,r.return)}catch(Ne){Ct(r,r.return,Ne)}}break;case 1:Nr(s,r),mr(r),g&512&&c!==null&&ct(c,c.return);break;case 5:if(Nr(s,r),mr(r),g&512&&c!==null&&ct(c,c.return),Pe){if(r.flags&32){var w=r.stateNode;try{Ol(w)}catch(Ne){Ct(r,r.return,Ne)}}if(g&4&&(w=r.stateNode,w!=null)){var R=r.memoizedProps;if(c=c!==null?c.memoizedProps:R,g=r.type,s=r.updateQueue,r.updateQueue=null,s!==null)try{ns(w,s,g,c,R,r)}catch(Ne){Ct(r,r.return,Ne)}}}break;case 6:if(Nr(s,r),mr(r),g&4&&Pe){if(r.stateNode===null)throw Error(f(162));w=r.stateNode,R=r.memoizedProps,c=c!==null?c.memoizedProps:R;try{jt(w,c,R)}catch(Ne){Ct(r,r.return,Ne)}}break;case 3:if(Nr(s,r),mr(r),g&4){if(Pe&&Oe&&c!==null&&c.memoizedState.isDehydrated)try{xd(s.containerInfo)}catch(Ne){Ct(r,r.return,Ne)}if(Ue){w=s.containerInfo,R=s.pendingChildren;try{zl(w,R)}catch(Ne){Ct(r,r.return,Ne)}}}break;case 4:if(Nr(s,r),mr(r),g&4&&Ue){R=r.stateNode,w=R.containerInfo,R=R.pendingChildren;try{zl(w,R)}catch(Ne){Ct(r,r.return,Ne)}}break;case 13:Nr(s,r),mr(r),w=r.child,w.flags&8192&&(R=w.memoizedState!==null,w.stateNode.isHidden=R,!R||w.alternate!==null&&w.alternate.memoizedState!==null||(yo=rn())),g&4&&Rs(r);break;case 22:var H=c!==null&&c.memoizedState!==null;if(r.mode&1?(ln=(c=ln)||H,Nr(s,r),ln=c):Nr(s,r),mr(r),g&8192){if(c=r.memoizedState!==null,(r.stateNode.isHidden=c)&&!H&&(r.mode&1)!==0)for(Ee=r,g=r.child;g!==null;){for(s=Ee=g;Ee!==null;){H=Ee;var ie=H.child;switch(H.tag){case 0:case 11:case 14:case 15:Ns(4,H,H.return);break;case 1:ct(H,H.return);var fe=H.stateNode;if(typeof fe.componentWillUnmount=="function"){var ke=H,Le=H.return;try{var He=ke;fe.props=He.memoizedProps,fe.state=He.memoizedState,fe.componentWillUnmount()}catch(Ne){Ct(ke,Le,Ne)}}break;case 5:ct(H,H.return);break;case 22:if(H.memoizedState!==null){ka(s);continue}}ie!==null?(ie.return=H,Ee=ie):ka(s)}g=g.sibling}if(Pe){e:if(g=null,Pe)for(s=r;;){if(s.tag===5){if(g===null){g=s;try{w=s.stateNode,c?uu(w):du(s.stateNode,s.memoizedProps)}catch(Ne){Ct(r,r.return,Ne)}}}else if(s.tag===6){if(g===null)try{R=s.stateNode,c?cu(R):Bs(R,s.memoizedProps)}catch(Ne){Ct(r,r.return,Ne)}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===r)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;g===s&&(g=null),s=s.return}g===s&&(g=null),s.sibling.return=s.return,s=s.sibling}}}break;case 19:Nr(s,r),mr(r),g&4&&Rs(r);break;case 21:break;default:Nr(s,r),mr(r)}}function mr(r){var s=r.flags;if(s&2){try{if(Pe){e:{for(var c=r.return;c!==null;){if(Wu(c)){var g=c;break e}c=c.return}throw Error(f(160))}switch(g.tag){case 5:var w=g.stateNode;g.flags&32&&(Ol(w),g.flags&=-33);var R=Ts(r);Yu(r,R,w);break;case 3:case 4:var H=g.stateNode.containerInfo,ie=Ts(r);hl(r,ie,H);break;default:throw Error(f(161))}}}catch(fe){Ct(r,r.return,fe)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function ho(r,s,c){Ee=r,Sa(r)}function Sa(r,s,c){for(var g=(r.mode&1)!==0;Ee!==null;){var w=Ee,R=w.child;if(w.tag===22&&g){var H=w.memoizedState!==null||uo;if(!H){var ie=w.alternate,fe=ie!==null&&ie.memoizedState!==null||ln;ie=uo;var ke=ln;if(uo=H,(ln=fe)&&!ke)for(Ee=w;Ee!==null;)H=Ee,fe=H.child,H.tag===22&&H.memoizedState!==null?xa(w):fe!==null?(fe.return=H,Ee=fe):xa(w);for(;R!==null;)Ee=R,Sa(R),R=R.sibling;Ee=w,uo=ie,ln=ke}wa(r)}else(w.subtreeFlags&8772)!==0&&R!==null?(R.return=w,Ee=R):wa(r)}}function wa(r){for(;Ee!==null;){var s=Ee;if((s.flags&8772)!==0){var c=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:ln||co(5,s);break;case 1:var g=s.stateNode;if(s.flags&4&&!ln)if(c===null)g.componentDidMount();else{var w=s.elementType===s.type?c.memoizedProps:hr(s.type,c.memoizedProps);g.componentDidUpdate(w,c.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var R=s.updateQueue;R!==null&&Vd(s,R,g);break;case 3:var H=s.updateQueue;if(H!==null){if(c=null,s.child!==null)switch(s.child.tag){case 5:c=pe(s.child.stateNode);break;case 1:c=s.child.stateNode}Vd(s,H,c)}break;case 5:var ie=s.stateNode;c===null&&s.flags&4&&Bt(ie,s.type,s.memoizedProps,s);break;case 6:break;case 4:break;case 12:break;case 13:if(Oe&&s.memoizedState===null){var fe=s.alternate;if(fe!==null){var ke=fe.memoizedState;if(ke!==null){var Le=ke.dehydrated;Le!==null&&Cd(Le)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(f(163))}ln||s.flags&512&&va(s)}catch(He){Ct(s,s.return,He)}}if(s===r){Ee=null;break}if(c=s.sibling,c!==null){c.return=s.return,Ee=c;break}Ee=s.return}}function ka(r){for(;Ee!==null;){var s=Ee;if(s===r){Ee=null;break}var c=s.sibling;if(c!==null){c.return=s.return,Ee=c;break}Ee=s.return}}function xa(r){for(;Ee!==null;){var s=Ee;try{switch(s.tag){case 0:case 11:case 15:var c=s.return;try{co(4,s)}catch(fe){Ct(s,c,fe)}break;case 1:var g=s.stateNode;if(typeof g.componentDidMount=="function"){var w=s.return;try{g.componentDidMount()}catch(fe){Ct(s,w,fe)}}var R=s.return;try{va(s)}catch(fe){Ct(s,R,fe)}break;case 5:var H=s.return;try{va(s)}catch(fe){Ct(s,H,fe)}}}catch(fe){Ct(s,s.return,fe)}if(s===r){Ee=null;break}var ie=s.sibling;if(ie!==null){ie.return=s.return,Ee=ie;break}Ee=s.return}}var vi=0,Bn=1,$r=2,fo=3,pl=4;if(typeof Symbol=="function"&&Symbol.for){var yr=Symbol.for;vi=yr("selector.component"),Bn=yr("selector.has_pseudo_class"),$r=yr("selector.role"),fo=yr("selector.test_id"),pl=yr("selector.text")}function ei(r){var s=rt(r);if(s!=null){if(typeof s.memoizedProps["data-testname"]!="string")throw Error(f(364));return s}if(r=wr(r),r===null)throw Error(f(362));return r.stateNode.current}function gl(r,s){switch(s.$$typeof){case vi:if(r.type===s.value)return!0;break;case Bn:e:{s=s.value,r=[r,0];for(var c=0;c<r.length;){var g=r[c++],w=r[c++],R=s[w];if(g.tag!==5||!cn(g)){for(;R!=null&&gl(g,R);)w++,R=s[w];if(w===s.length){s=!0;break e}else for(g=g.child;g!==null;)r.push(g,w),g=g.sibling}}s=!1}return s;case $r:if(r.tag===5&&Wr(r.stateNode,s.value))return!0;break;case pl:if((r.tag===5||r.tag===6)&&(r=Xn(r),r!==null&&0<=r.indexOf(s.value)))return!0;break;case fo:if(r.tag===5&&(r=r.memoizedProps["data-testname"],typeof r=="string"&&r.toLowerCase()===s.value.toLowerCase()))return!0;break;default:throw Error(f(365))}return!1}function Ca(r){switch(r.$$typeof){case vi:return"<"+(Y(r.value)||"Unknown")+">";case Bn:return":has("+(Ca(r)||"")+")";case $r:return'[role="'+r.value+'"]';case pl:return'"'+r.value+'"';case fo:return'[data-testname="'+r.value+'"]';default:throw Error(f(365))}}function ti(r,s){var c=[];r=[r,0];for(var g=0;g<r.length;){var w=r[g++],R=r[g++],H=s[R];if(w.tag!==5||!cn(w)){for(;H!=null&&gl(w,H);)R++,H=s[R];if(R===s.length)c.push(w);else for(w=w.child;w!==null;)r.push(w,R),w=w.sibling}}return c}function ni(r,s){if(!Dt)throw Error(f(363));r=ei(r),r=ti(r,s),s=[],r=Array.from(r);for(var c=0;c<r.length;){var g=r[c++];if(g.tag===5)cn(g)||s.push(g.stateNode);else for(g=g.child;g!==null;)r.push(g),g=g.sibling}return s}var Ea=Math.ceil,ml=p.ReactCurrentDispatcher,po=p.ReactCurrentOwner,It=p.ReactCurrentBatchConfig,Ye=0,mt=null,Tt=null,zt=0,Qt=0,Wi=hn(0),Rt=0,go=null,_i=0,_t=0,mo=0,Ls=null,En=null,yo=0,yl=1/0,Gn=null;function pt(){yl=rn()+500}var At=!1,Vt=null,Br=null,Yi=!1,Tr=null,Pa=0,Ht=0,vl=null,vo=-1,_o=0;function xt(){return(Ye&6)!==0?rn():vo!==-1?vo:vo=rn()}function Jt(r){return(r.mode&1)===0?1:(Ye&2)!==0&&zt!==0?zt&-zt:If.transition!==null?(_o===0&&(_o=Hl()),_o):(r=Je,r!==0?r:Ut())}function Pn(r,s,c,g){if(50<Ht)throw Ht=0,vl=null,Error(f(185));xr(r,c,g),((Ye&2)===0||r!==mt)&&(r===mt&&((Ye&2)===0&&(_t|=c),Rt===4&&Si(r,zt)),Nn(r,g),c===1&&Ye===0&&(s.mode&1)===0&&(pt(),Js&&fn()))}function Nn(r,s){var c=r.callbackNode;Ld(r,s);var g=qs(r,r===mt?zt:0);if(g===0)c!==null&&Md(c),r.callbackNode=null,r.callbackPriority=0;else if(s=g&-g,r.callbackPriority!==s){if(c!=null&&Md(c),s===1)r.tag===0?Id(qu.bind(null,r)):Kl(qu.bind(null,r)),Et?Hr(function(){(Ye&6)===0&&fn()}):Xr(Wl,fn),c=null;else{switch(Ks(g)){case 1:c=Wl;break;case 4:c=Yl;break;case 16:c=ql;break;case 536870912:c=Df;break;default:c=ql}c=ec(c,Na.bind(null,r))}r.callbackPriority=s,r.callbackNode=c}}function Na(r,s){if(vo=-1,_o=0,(Ye&6)!==0)throw Error(f(327));var c=r.callbackNode;if(wi()&&r.callbackNode!==c)return null;var g=qs(r,r===mt?zt:0);if(g===0)return null;if((g&30)!==0||(g&r.expiredLanes)!==0||s)s=Ms(r,g);else{s=g;var w=Ye;Ye|=2;var R=Ku();(mt!==r||zt!==s)&&(Gn=null,pt(),qi(r,s));do try{Qu();break}catch(ie){So(r,ie)}while(!0);xu(),ml.current=R,Ye=w,Tt!==null?s=0:(mt=null,zt=0,s=Rt)}if(s!==0){if(s===2&&(w=Vl(r),w!==0&&(g=w,s=Ta(r,w))),s===1)throw c=go,qi(r,0),Si(r,g),Nn(r,rn()),c;if(s===6)Si(r,g);else{if(w=r.current.alternate,(g&30)===0&&!th(w)&&(s=Ms(r,g),s===2&&(R=Vl(r),R!==0&&(g=R,s=Ta(r,R))),s===1))throw c=go,qi(r,0),Si(r,g),Nn(r,rn()),c;switch(r.finishedWork=w,r.finishedLanes=g,s){case 0:case 1:throw Error(f(345));case 2:Xi(r,En,Gn);break;case 3:if(Si(r,g),(g&130023424)===g&&(s=yo+500-rn(),10<s)){if(qs(r,0)!==0)break;if(w=r.suspendedLanes,(w&g)!==g){xt(),r.pingedLanes|=r.suspendedLanes&w;break}r.timeoutHandle=q(Xi.bind(null,r,En,Gn),s);break}Xi(r,En,Gn);break;case 4:if(Si(r,g),(g&4194240)===g)break;for(s=r.eventTimes,w=-1;0<g;){var H=31-lr(g);R=1<<H,H=s[H],H>w&&(w=H),g&=~R}if(g=w,g=rn()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*Ea(g/1960))-g,10<g){r.timeoutHandle=q(Xi.bind(null,r,En,Gn),g);break}Xi(r,En,Gn);break;case 5:Xi(r,En,Gn);break;default:throw Error(f(329))}}}return Nn(r,rn()),r.callbackNode===c?Na.bind(null,r):null}function Ta(r,s){var c=Ls;return r.current.memoizedState.isDehydrated&&(qi(r,s).flags|=256),r=Ms(r,s),r!==2&&(s=En,En=c,s!==null&&Ra(s)),r}function Ra(r){En===null?En=r:En.push.apply(En,r)}function th(r){for(var s=r;;){if(s.flags&16384){var c=s.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var g=0;g<c.length;g++){var w=c[g],R=w.getSnapshot;w=w.value;try{if(!Fr(R(),w))return!1}catch{return!1}}}if(c=s.child,s.subtreeFlags&16384&&c!==null)c.return=s,s=c;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Si(r,s){for(s&=~mo,s&=~_t,r.suspendedLanes|=s,r.pingedLanes&=~s,r=r.expirationTimes;0<s;){var c=31-lr(s),g=1<<c;r[c]=-1,s&=~g}}function qu(r){if((Ye&6)!==0)throw Error(f(327));wi();var s=qs(r,0);if((s&1)===0)return Nn(r,rn()),null;var c=Ms(r,s);if(r.tag!==0&&c===2){var g=Vl(r);g!==0&&(s=g,c=Ta(r,g))}if(c===1)throw c=go,qi(r,0),Si(r,s),Nn(r,rn()),c;if(c===6)throw Error(f(345));return r.finishedWork=r.current.alternate,r.finishedLanes=s,Xi(r,En,Gn),Nn(r,rn()),null}function Xu(r){Tr!==null&&Tr.tag===0&&(Ye&6)===0&&wi();var s=Ye;Ye|=1;var c=It.transition,g=Je;try{if(It.transition=null,Je=1,r)return r()}finally{Je=g,It.transition=c,Ye=s,(Ye&6)===0&&fn()}}function La(){Qt=Wi.current,wt(Wi)}function qi(r,s){r.finishedWork=null,r.finishedLanes=0;var c=r.timeoutHandle;if(c!==ye&&(r.timeoutHandle=ye,se(c)),Tt!==null)for(c=Tt.return;c!==null;){var g=c;switch(Zo(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&ls();break;case 3:fs(),wt(Kn),wt(kn),Ru();break;case 5:Nu(g);break;case 4:fs();break;case 13:wt(Mt);break;case 19:wt(Mt);break;case 10:el(g.type._context);break;case 22:case 23:La()}c=c.return}if(mt=r,Tt=r=Ki(r.current,null),zt=Qt=s,Rt=0,go=null,mo=_t=_i=0,En=Ls=null,Di!==null){for(s=0;s<Di.length;s++)if(c=Di[s],g=c.interleaved,g!==null){c.interleaved=null;var w=g.next,R=c.pending;if(R!==null){var H=R.next;R.next=w,g.next=H}c.pending=g}Di=null}return r}function So(r,s){do{var c=Tt;try{if(xu(),Zn.current=Ss,ro){for(var g=Pt.memoizedState;g!==null;){var w=g.queue;w!==null&&(w.pending=null),g=g.next}ro=!1}if(Oi=0,Xt=Gt=Pt=null,nl=!1,rl=0,po.current=null,c===null||c.return===null){Rt=1,go=s,Tt=null;break}e:{var R=r,H=c.return,ie=c,fe=s;if(s=zt,ie.flags|=32768,fe!==null&&typeof fe=="object"&&typeof fe.then=="function"){var ke=fe,Le=ie,He=Le.tag;if((Le.mode&1)===0&&(He===0||He===11||He===15)){var Ne=Le.alternate;Ne?(Le.updateQueue=Ne.updateQueue,Le.memoizedState=Ne.memoizedState,Le.lanes=Ne.lanes):(Le.updateQueue=null,Le.memoizedState=null)}var St=Jd(H);if(St!==null){St.flags&=-257,Ui(St,H,ie,R,s),St.mode&1&&Qd(R,ke,s),s=St,fe=ke;var dt=s.updateQueue;if(dt===null){var Vn=new Set;Vn.add(fe),s.updateQueue=Vn}else dt.add(fe);break e}else{if((s&1)===0){Qd(R,ke,s),wo();break e}fe=Error(f(426))}}else if(kt&&ie.mode&1){var ri=Jd(H);if(ri!==null){(ri.flags&65536)===0&&(ri.flags|=256),Ui(ri,H,ie,R,s),wu(ws(fe,ie));break e}}R=fe=ws(fe,ie),Rt!==4&&(Rt=2),Ls===null?Ls=[R]:Ls.push(R),R=H;do{switch(R.tag){case 3:R.flags|=65536,s&=-s,R.lanes|=s;var ce=Qr(R,fe,s);to(R,ce);break e;case 1:ie=fe;var oe=R.type,ge=R.stateNode;if((R.flags&128)===0&&(typeof oe.getDerivedStateFromError=="function"||ge!==null&&typeof ge.componentDidCatch=="function"&&(Br===null||!Br.has(ge)))){R.flags|=65536,s&=-s,R.lanes|=s;var Te=pa(R,ie,s);to(R,Te);break e}}R=R.return}while(R!==null)}Zu(c)}catch(ze){s=ze,Tt===c&&c!==null&&(Tt=c=c.return);continue}break}while(!0)}function Ku(){var r=ml.current;return ml.current=Ss,r===null?Ss:r}function wo(){(Rt===0||Rt===3||Rt===2)&&(Rt=4),mt===null||(_i&268435455)===0&&(_t&268435455)===0||Si(mt,zt)}function Ms(r,s){var c=Ye;Ye|=2;var g=Ku();(mt!==r||zt!==s)&&(Gn=null,qi(r,s));do try{nh();break}catch(w){So(r,w)}while(!0);if(xu(),Ye=c,ml.current=g,Tt!==null)throw Error(f(261));return mt=null,zt=0,Rt}function nh(){for(;Tt!==null;)Ju(Tt)}function Qu(){for(;Tt!==null&&!Dd();)Ju(Tt)}function Ju(r){var s=lh(r.alternate,r,Qt);r.memoizedProps=r.pendingProps,s===null?Zu(r):Tt=s,po.current=null}function Zu(r){var s=r;do{var c=s.alternate;if(r=s.return,(s.flags&32768)===0){if(c=Ps(c,s,Qt),c!==null){Tt=c;return}}else{if(c=$d(c,s),c!==null){c.flags&=32767,Tt=c;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{Rt=6,Tt=null;return}}if(s=s.sibling,s!==null){Tt=s;return}Tt=s=r}while(s!==null);Rt===0&&(Rt=5)}function Xi(r,s,c){var g=Je,w=It.transition;try{It.transition=null,Je=1,rh(r,s,c,g)}finally{It.transition=w,Je=g}return null}function rh(r,s,c,g){do wi();while(Tr!==null);if((Ye&6)!==0)throw Error(f(327));c=r.finishedWork;var w=r.finishedLanes;if(c===null)return null;if(r.finishedWork=null,r.finishedLanes=0,c===r.current)throw Error(f(177));r.callbackNode=null,r.callbackPriority=0;var R=c.lanes|c.childLanes;if(Ri(r,R),r===mt&&(Tt=mt=null,zt=0),(c.subtreeFlags&2064)===0&&(c.flags&2064)===0||Yi||(Yi=!0,ec(ql,function(){return wi(),null})),R=(c.flags&15990)!==0,(c.subtreeFlags&15990)!==0||R){R=It.transition,It.transition=null;var H=Je;Je=1;var ie=Ye;Ye|=4,po.current=null,eh(r,c),fl(c,r),G(r.containerInfo),r.current=c,ho(c),Ko(),Ye=ie,Je=H,It.transition=R}else r.current=c;if(Yi&&(Yi=!1,Tr=r,Pa=w),R=r.pendingLanes,R===0&&(Br=null),Qs(c.stateNode),Nn(r,rn()),s!==null)for(g=r.onRecoverableError,c=0;c<s.length;c++)w=s[c],g(w.value,{componentStack:w.stack,digest:w.digest});if(At)throw At=!1,r=Vt,Vt=null,r;return(Pa&1)!==0&&r.tag!==0&&wi(),R=r.pendingLanes,(R&1)!==0?r===vl?Ht++:(Ht=0,vl=r):Ht=0,fn(),null}function wi(){if(Tr!==null){var r=Ks(Pa),s=It.transition,c=Je;try{if(It.transition=null,Je=16>r?16:r,Tr===null)var g=!1;else{if(r=Tr,Tr=null,Pa=0,(Ye&6)!==0)throw Error(f(331));var w=Ye;for(Ye|=4,Ee=r.current;Ee!==null;){var R=Ee,H=R.child;if((Ee.flags&16)!==0){var ie=R.deletions;if(ie!==null){for(var fe=0;fe<ie.length;fe++){var ke=ie[fe];for(Ee=ke;Ee!==null;){var Le=Ee;switch(Le.tag){case 0:case 11:case 15:Ns(8,Le,R)}var He=Le.child;if(He!==null)He.return=Le,Ee=He;else for(;Ee!==null;){Le=Ee;var Ne=Le.sibling,St=Le.return;if(dl(Le),Le===ke){Ee=null;break}if(Ne!==null){Ne.return=St,Ee=Ne;break}Ee=St}}}var dt=R.alternate;if(dt!==null){var Vn=dt.child;if(Vn!==null){dt.child=null;do{var ri=Vn.sibling;Vn.sibling=null,Vn=ri}while(Vn!==null)}}Ee=R}}if((R.subtreeFlags&2064)!==0&&H!==null)H.return=R,Ee=H;else e:for(;Ee!==null;){if(R=Ee,(R.flags&2048)!==0)switch(R.tag){case 0:case 11:case 15:Ns(9,R,R.return)}var ce=R.sibling;if(ce!==null){ce.return=R.return,Ee=ce;break e}Ee=R.return}}var oe=r.current;for(Ee=oe;Ee!==null;){H=Ee;var ge=H.child;if((H.subtreeFlags&2064)!==0&&ge!==null)ge.return=H,Ee=ge;else e:for(H=oe;Ee!==null;){if(ie=Ee,(ie.flags&2048)!==0)try{switch(ie.tag){case 0:case 11:case 15:co(9,ie)}}catch(ze){Ct(ie,ie.return,ze)}if(ie===H){Ee=null;break e}var Te=ie.sibling;if(Te!==null){Te.return=ie.return,Ee=Te;break e}Ee=ie.return}}if(Ye=w,fn(),Qn&&typeof Qn.onPostCommitFiberRoot=="function")try{Qn.onPostCommitFiberRoot(Li,r)}catch{}g=!0}return g}finally{Je=c,It.transition=s}}return!1}function $u(r,s,c){s=ws(c,s),s=Qr(r,s,1),r=pi(r,s,1),s=xt(),r!==null&&(xr(r,1,s),Nn(r,s))}function Ct(r,s,c){if(r.tag===3)$u(r,r,c);else for(;s!==null;){if(s.tag===3){$u(s,r,c);break}else if(s.tag===1){var g=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Br===null||!Br.has(g))){r=ws(c,r),r=pa(s,r,1),s=pi(s,r,1),r=xt(),s!==null&&(xr(s,1,r),Nn(s,r));break}}s=s.return}}function ih(r,s,c){var g=r.pingCache;g!==null&&g.delete(s),s=xt(),r.pingedLanes|=r.suspendedLanes&c,mt===r&&(zt&c)===c&&(Rt===4||Rt===3&&(zt&130023424)===zt&&500>rn()-yo?qi(r,0):mo|=c),Nn(r,s)}function sh(r,s){s===0&&((r.mode&1)===0?s=1:(s=Xo,Xo<<=1,(Xo&130023424)===0&&(Xo=4194304)));var c=xt();r=Ur(r,s),r!==null&&(xr(r,s,c),Nn(r,c))}function oh(r){var s=r.memoizedState,c=0;s!==null&&(c=s.retryLane),sh(r,c)}function Of(r,s){var c=0;switch(r.tag){case 13:var g=r.stateNode,w=r.memoizedState;w!==null&&(c=w.retryLane);break;case 19:g=r.stateNode;break;default:throw Error(f(314))}g!==null&&g.delete(s),sh(r,c)}var lh;lh=function(r,s,c){if(r!==null)if(r.memoizedProps!==s.pendingProps||Kn.current)Kt=!0;else{if((r.lanes&c)===0&&(s.flags&128)===0)return Kt=!1,Bi(r,s,c);Kt=(r.flags&131072)!==0}else Kt=!1,kt&&(s.flags&1048576)!==0&&Ad(s,as,s.index);switch(s.lanes=0,s.tag){case 2:var g=s.type;cl(r,s),r=s.pendingProps;var w=ci(s,kn.current);eo(s,c),w=il(null,s,g,r,w,c);var R=sa();return s.flags|=1,typeof w=="object"&&w!==null&&typeof w.render=="function"&&w.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,nn(g)?(R=!0,Ws(s)):R=!1,s.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,Eu(s),w.updater=ll,s.stateNode=w,w._reactInternals=s,Kr(s,g,r,c),s=xn(null,s,g,!0,R,c)):(s.tag=0,kt&&R&&Jo(s),on(null,s,w,c),s=s.child),s;case 16:g=s.elementType;e:{switch(cl(r,s),r=s.pendingProps,w=g._init,g=w(g._payload),s.type=g,w=s.tag=zf(g),r=hr(g,r),w){case 0:s=Jr(null,s,g,r,c);break e;case 1:s=mn(null,s,g,r,c);break e;case 11:s=ga(null,s,g,r,c);break e;case 14:s=ks(null,s,g,hr(g.type,r),c);break e}throw Error(f(306,g,""))}return s;case 0:return g=s.type,w=s.pendingProps,w=s.elementType===g?w:hr(g,w),Jr(r,s,g,w,c);case 1:return g=s.type,w=s.pendingProps,w=s.elementType===g?w:hr(g,w),mn(r,s,g,w,c);case 3:e:{if(ji(s),r===null)throw Error(f(387));g=s.pendingProps,R=s.memoizedState,w=R.element,Gd(r,s),Ii(s,g,null,c);var H=s.memoizedState;if(g=H.element,Oe&&R.isDehydrated)if(R={element:g,isDehydrated:!1,cache:H.cache,pendingSuspenseBoundaries:H.pendingSuspenseBoundaries,transitions:H.transitions},s.updateQueue.baseState=R,s.memoizedState=R,s.flags&256){w=ws(Error(f(423)),s),s=xs(r,s,g,c,w);break e}else if(g!==w){w=ws(Error(f(424)),s),s=xs(r,s,g,c,w);break e}else for(Oe&&(zn=Ef(s.stateNode.containerInfo),pn=s,kt=!0,br=null,$o=!1),c=jd(s,null,g,c),s.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(us(),g===w){s=yi(r,s,c);break e}on(r,s,g,c)}s=s.child}return s;case 5:return Pu(s),r===null&&Su(s),g=s.type,w=s.pendingProps,R=r!==null?r.memoizedProps:null,H=w.children,me(g,w)?H=null:R!==null&&me(g,R)&&(s.flags|=32),gt(r,s),on(r,s,H,c),s.child;case 6:return r===null&&Su(s),null;case 13:return Vu(r,s,c);case 4:return ra(s,s.stateNode.containerInfo),g=s.pendingProps,r===null?s.child=ds(s,null,g,c):on(r,s,g,c),s.child;case 11:return g=s.type,w=s.pendingProps,w=s.elementType===g?w:hr(g,w),ga(r,s,g,w,c);case 7:return on(r,s,s.pendingProps,c),s.child;case 8:return on(r,s,s.pendingProps.children,c),s.child;case 12:return on(r,s,s.pendingProps.children,c),s.child;case 10:e:{if(g=s.type._context,w=s.pendingProps,R=s.memoizedProps,H=w.value,Bd(s,g,H),R!==null)if(Fr(R.value,H)){if(R.children===w.children&&!Kn.current){s=yi(r,s,c);break e}}else for(R=s.child,R!==null&&(R.return=s);R!==null;){var ie=R.dependencies;if(ie!==null){H=R.child;for(var fe=ie.firstContext;fe!==null;){if(fe.context===g){if(R.tag===1){fe=fi(-1,c&-c),fe.tag=2;var ke=R.updateQueue;if(ke!==null){ke=ke.shared;var Le=ke.pending;Le===null?fe.next=fe:(fe.next=Le.next,Le.next=fe),ke.pending=fe}}R.lanes|=c,fe=R.alternate,fe!==null&&(fe.lanes|=c),hs(R.return,c,s),ie.lanes|=c;break}fe=fe.next}}else if(R.tag===10)H=R.type===s.type?null:R.child;else if(R.tag===18){if(H=R.return,H===null)throw Error(f(341));H.lanes|=c,ie=H.alternate,ie!==null&&(ie.lanes|=c),hs(H,c,s),H=R.sibling}else H=R.child;if(H!==null)H.return=R;else for(H=R;H!==null;){if(H===s){H=null;break}if(R=H.sibling,R!==null){R.return=H.return,H=R;break}H=H.return}R=H}on(r,s,w.children,c),s=s.child}return s;case 9:return w=s.type,g=s.pendingProps.children,eo(s,c),w=ur(w),g=g(w),s.flags|=1,on(r,s,g,c),s.child;case 14:return g=s.type,w=hr(g,s.pendingProps),w=hr(g.type,w),ks(r,s,g,w,c);case 15:return mi(r,s,s.type,s.pendingProps,c);case 17:return g=s.type,w=s.pendingProps,w=s.elementType===g?w:hr(g,w),cl(r,s),s.tag=1,nn(g)?(r=!0,Ws(s)):r=!1,eo(s,c),Kd(s,g,w),Kr(s,g,w,c),xn(null,s,g,!0,r,c);case 19:return ya(r,s,c);case 22:return vt(r,s,c)}throw Error(f(156,s.tag))};function ec(r,s){return Xr(r,s)}function ah(r,s,c,g){this.tag=r,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vr(r,s,c,g){return new ah(r,s,c,g)}function ko(r){return r=r.prototype,!(!r||!r.isReactComponent)}function zf(r){if(typeof r=="function")return ko(r)?1:0;if(r!=null){if(r=r.$$typeof,r===N)return 11;if(r===T)return 14}return 2}function Ki(r,s){var c=r.alternate;return c===null?(c=vr(r.tag,s,r.key,r.mode),c.elementType=r.elementType,c.type=r.type,c.stateNode=r.stateNode,c.alternate=r,r.alternate=c):(c.pendingProps=s,c.type=r.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=r.flags&14680064,c.childLanes=r.childLanes,c.lanes=r.lanes,c.child=r.child,c.memoizedProps=r.memoizedProps,c.memoizedState=r.memoizedState,c.updateQueue=r.updateQueue,s=r.dependencies,c.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},c.sibling=r.sibling,c.index=r.index,c.ref=r.ref,c}function Ma(r,s,c,g,w,R){var H=2;if(g=r,typeof r=="function")ko(r)&&(H=1);else if(typeof r=="string")H=5;else e:switch(r){case x:return yn(c.children,w,R,s);case P:H=8,w|=8;break;case _:return r=vr(12,c,s,w|2),r.elementType=_,r.lanes=R,r;case I:return r=vr(13,c,s,w),r.elementType=I,r.lanes=R,r;case j:return r=vr(19,c,s,w),r.elementType=j,r.lanes=R,r;case L:return xo(c,w,R,s);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case k:H=10;break e;case C:H=9;break e;case N:H=11;break e;case T:H=14;break e;case S:H=16,g=null;break e}throw Error(f(130,r==null?r:typeof r,""))}return s=vr(H,c,s,w),s.elementType=r,s.type=g,s.lanes=R,s}function yn(r,s,c,g){return r=vr(7,r,g,s),r.lanes=c,r}function xo(r,s,c,g){return r=vr(22,r,g,s),r.elementType=L,r.lanes=c,r.stateNode={isHidden:!1},r}function Co(r,s,c){return r=vr(6,r,null,s),r.lanes=c,r}function Da(r,s,c){return s=vr(4,r.children!==null?r.children:[],r.key,s),s.lanes=c,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}function uh(r,s,c,g,w){this.tag=s,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=ye,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xs(0),this.expirationTimes=Xs(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xs(0),this.identifierPrefix=g,this.onRecoverableError=w,Oe&&(this.mutableSourceEagerHydrationData=null)}function tc(r,s,c,g,w,R,H,ie,fe){return r=new uh(r,s,c,ie,fe),s===1?(s=1,R===!0&&(s|=8)):s=0,R=vr(3,null,null,s),r.current=R,R.stateNode=r,R.memoizedState={element:g,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},Eu(R),r}function Ia(r){if(!r)return Ti;r=r._reactInternals;e:{if(U(r)!==r||r.tag!==1)throw Error(f(170));var s=r;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(nn(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(f(171))}if(r.tag===1){var c=r.type;if(nn(c))return Td(r,c,s)}return s}function Ds(r){var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(f(188)):(r=Object.keys(r).join(","),Error(f(268,r)));return r=X(s),r===null?null:r.stateNode}function Aa(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var c=r.retryLane;r.retryLane=c!==0&&c<s?c:s}}function Eo(r,s){Aa(r,s),(r=r.alternate)&&Aa(r,s)}function bf(r){return r=X(r),r===null?null:r.stateNode}function ch(){return null}return o.attemptContinuousHydration=function(r){if(r.tag===13){var s=Ur(r,134217728);if(s!==null){var c=xt();Pn(s,r,134217728,c)}Eo(r,134217728)}},o.attemptDiscreteHydration=function(r){if(r.tag===13){var s=Ur(r,1);if(s!==null){var c=xt();Pn(s,r,1,c)}Eo(r,1)}},o.attemptHydrationAtCurrentPriority=function(r){if(r.tag===13){var s=Jt(r),c=Ur(r,s);if(c!==null){var g=xt();Pn(c,r,s,g)}Eo(r,s)}},o.attemptSynchronousHydration=function(r){switch(r.tag){case 3:var s=r.stateNode;if(s.current.memoizedState.isDehydrated){var c=Ys(s.pendingLanes);c!==0&&(qr(s,c|1),Nn(s,rn()),(Ye&6)===0&&(pt(),fn()))}break;case 13:Xu(function(){var g=Ur(r,1);if(g!==null){var w=xt();Pn(g,r,1,w)}}),Eo(r,1)}},o.batchedUpdates=function(r,s){var c=Ye;Ye|=1;try{return r(s)}finally{Ye=c,Ye===0&&(pt(),Js&&fn())}},o.createComponentSelector=function(r){return{$$typeof:vi,value:r}},o.createContainer=function(r,s,c,g,w,R,H){return tc(r,s,!1,null,c,g,w,R,H)},o.createHasPseudoClassSelector=function(r){return{$$typeof:Bn,value:r}},o.createHydrationContainer=function(r,s,c,g,w,R,H,ie,fe){return r=tc(c,g,!0,r,w,R,H,ie,fe),r.context=Ia(null),c=r.current,g=xt(),w=Jt(c),R=fi(g,w),R.callback=s??null,pi(c,R,w),r.current.lanes=w,xr(r,w,g),Nn(r,g),r},o.createPortal=function(r,s,c){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:v,key:g==null?null:""+g,children:r,containerInfo:s,implementation:c}},o.createRoleSelector=function(r){return{$$typeof:$r,value:r}},o.createTestNameSelector=function(r){return{$$typeof:fo,value:r}},o.createTextSelector=function(r){return{$$typeof:pl,value:r}},o.deferredUpdates=function(r){var s=Je,c=It.transition;try{return It.transition=null,Je=16,r()}finally{Je=s,It.transition=c}},o.discreteUpdates=function(r,s,c,g,w){var R=Je,H=It.transition;try{return It.transition=null,Je=1,r(s,c,g,w)}finally{Je=R,It.transition=H,Ye===0&&pt()}},o.findAllNodes=ni,o.findBoundingRects=function(r,s){if(!Dt)throw Error(f(363));s=ni(r,s),r=[];for(var c=0;c<s.length;c++)r.push(ft(s[c]));for(s=r.length-1;0<s;s--){c=r[s];for(var g=c.x,w=g+c.width,R=c.y,H=R+c.height,ie=s-1;0<=ie;ie--)if(s!==ie){var fe=r[ie],ke=fe.x,Le=ke+fe.width,He=fe.y,Ne=He+fe.height;if(g>=ke&&R>=He&&w<=Le&&H<=Ne){r.splice(s,1);break}else if(g!==ke||c.width!==fe.width||Ne<R||He>H){if(!(R!==He||c.height!==fe.height||Le<g||ke>w)){ke>g&&(fe.width+=ke-g,fe.x=g),Le<w&&(fe.width=w-ke),r.splice(s,1);break}}else{He>R&&(fe.height+=He-R,fe.y=R),Ne<H&&(fe.height=H-He),r.splice(s,1);break}}}return r},o.findHostInstance=Ds,o.findHostInstanceWithNoPortals=function(r){return r=V(r),r=r!==null?ne(r):null,r===null?null:r.stateNode},o.findHostInstanceWithWarning=function(r){return Ds(r)},o.flushControlled=function(r){var s=Ye;Ye|=1;var c=It.transition,g=Je;try{It.transition=null,Je=1,r()}finally{Je=g,It.transition=c,Ye=s,Ye===0&&(pt(),fn())}},o.flushPassiveEffects=wi,o.flushSync=Xu,o.focusWithin=function(r,s){if(!Dt)throw Error(f(363));for(r=ei(r),s=ti(r,s),s=Array.from(s),r=0;r<s.length;){var c=s[r++];if(!cn(c)){if(c.tag===5&&dn(c.stateNode))return!0;for(c=c.child;c!==null;)s.push(c),c=c.sibling}}return!1},o.getCurrentUpdatePriority=function(){return Je},o.getFindAllNodesFailureDescription=function(r,s){if(!Dt)throw Error(f(363));var c=0,g=[];r=[ei(r),0];for(var w=0;w<r.length;){var R=r[w++],H=r[w++],ie=s[H];if((R.tag!==5||!cn(R))&&(gl(R,ie)&&(g.push(Ca(ie)),H++,H>c&&(c=H)),H<s.length))for(R=R.child;R!==null;)r.push(R,H),R=R.sibling}if(c<s.length){for(r=[];c<s.length;c++)r.push(Ca(s[c]));return`findAllNodes was able to match part of the selector:
  `+(g.join(" > ")+`

No matching component was found for:
  `)+r.join(" > ")}return null},o.getPublicRootInstance=function(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return pe(r.child.stateNode);default:return r.child.stateNode}},o.injectIntoDevTools=function(r){if(r={bundleType:r.bundleType,version:r.version,rendererPackageName:r.rendererPackageName,rendererConfig:r.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:p.ReactCurrentDispatcher,findHostInstanceByFiber:bf,findFiberByHostInstance:r.findFiberByHostInstance||ch,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")r=!1;else{var s=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(s.isDisabled||!s.supportsFiber)r=!0;else{try{Li=s.inject(r),Qn=s}catch{}r=!!s.checkDCE}}return r},o.isAlreadyRendering=function(){return!1},o.observeVisibleRects=function(r,s,c,g){if(!Dt)throw Error(f(363));r=ni(r,s);var w=kr(r,c,g).disconnect;return{disconnect:function(){w()}}},o.registerMutableSourceForHydration=function(r,s){var c=s._getVersion;c=c(s._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[s,c]:r.mutableSourceEagerHydrationData.push(s,c)},o.runWithPriority=function(r,s){var c=Je;try{return Je=r,s()}finally{Je=c}},o.shouldError=function(){return null},o.shouldSuspend=function(){return!1},o.updateContainer=function(r,s,c,g){var w=s.current,R=xt(),H=Jt(w);return c=Ia(c),s.context===null?s.context=c:s.pendingContext=c,s=fi(R,H),s.payload={element:r},g=g===void 0?null:g,g!==null&&(s.callback=g),r=pi(w,s,H),r!==null&&(Pn(r,w,H,R),tl(r,w,H)),H},o}),x0}var Dg;function Xv(){return Dg||(Dg=1,k0.exports=qv()),k0.exports}var Kv=Xv();const Qv=ud(Kv);var C0={exports:{}},Ao={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ig;function Jv(){return Ig||(Ig=1,Ao.ConcurrentRoot=1,Ao.ContinuousEventPriority=4,Ao.DefaultEventPriority=16,Ao.DiscreteEventPriority=1,Ao.IdleEventPriority=536870912,Ao.LegacyRoot=0),Ao}var Ag;function Zv(){return Ag||(Ag=1,C0.exports=Jv()),C0.exports}var B2=Zv(),$v=Ke();const Fg={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let Og=!1,zg=!1;const up=".react-konva-event",e4=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,t4=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,n4={};function uf(i,t,o=n4){if(!Og&&"zIndex"in t&&(console.warn(t4),Og=!0),!zg&&t.draggable){var a=t.x!==void 0||t.y!==void 0,d=t.onDragEnd||t.onDragMove;a&&!d&&(console.warn(e4),zg=!0)}for(var u in o)if(!Fg[u]){var f=u.slice(0,2)==="on",p=o[u]!==t[u];if(f&&p){var m=u.substr(2).toLowerCase();m.substr(0,7)==="content"&&(m="content"+m.substr(7,1).toUpperCase()+m.substr(8)),i.off(m,o[u])}var v=!t.hasOwnProperty(u);v&&i.setAttr(u,void 0)}var x=t._useStrictMode,P={},_=!1;const k={};for(var u in t)if(!Fg[u]){var f=u.slice(0,2)==="on",C=o[u]!==t[u];if(f&&C){var m=u.substr(2).toLowerCase();m.substr(0,7)==="content"&&(m="content"+m.substr(7,1).toUpperCase()+m.substr(8)),t[u]&&(k[m]=t[u])}!f&&(t[u]!==o[u]||x&&t[u]!==i.getAttr(u))&&(_=!0,P[u]=t[u])}_&&(i.setAttrs(P),Bo(i));for(var m in k)i.on(m+up,k[m])}function Bo(i){if(!$v.Konva.autoDrawEnabled){var t=i.getLayer()||i.getStage();t&&t.batchDraw()}}var E0=ip();const G2={},r4={};$c.Node.prototype._applyProps=uf;function i4(i,t){if(typeof t=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${t}`);return}i.add(t),Bo(i)}function s4(i,t,o){let a=$c[i];a||(console.error(`Konva has no node with the type ${i}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${i}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),a=$c.Group);const d={},u={};for(var f in t){var p=f.slice(0,2)==="on";p?u[f]=t[f]:d[f]=t[f]}const m=new a(d);return uf(m,u),m}function o4(i,t,o){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${i}"`)}function l4(i,t,o){return!1}function a4(i){return i}function u4(){return null}function c4(){return null}function d4(i,t,o,a){return r4}function h4(){}function f4(i){}function p4(i,t){return!1}function g4(){return G2}function m4(){return G2}const y4=setTimeout,v4=clearTimeout,_4=-1;function S4(i,t){return!1}const w4=!1,k4=!0,x4=!0;function C4(i,t){t.parent===i?t.moveToTop():i.add(t),Bo(i)}function E4(i,t){t.parent===i?t.moveToTop():i.add(t),Bo(i)}function V2(i,t,o){t._remove(),i.add(t),t.setZIndex(o.getZIndex()),Bo(i)}function P4(i,t,o){V2(i,t,o)}function N4(i,t){t.destroy(),t.off(up),Bo(i)}function T4(i,t){t.destroy(),t.off(up),Bo(i)}function R4(i,t,o){console.error(`Text components are not yet supported in ReactKonva. You text is: "${o}"`)}function L4(i,t,o){}function M4(i,t,o,a,d){uf(i,d,a)}function D4(i){i.hide(),Bo(i)}function I4(i){}function A4(i,t){(t.visible==null||t.visible)&&i.show()}function F4(i,t){}function O4(i){}function z4(){}const b4=()=>B2.DefaultEventPriority,U4=Object.freeze(Object.defineProperty({__proto__:null,appendChild:C4,appendChildToContainer:E4,appendInitialChild:i4,cancelTimeout:v4,clearContainer:O4,commitMount:L4,commitTextUpdate:R4,commitUpdate:M4,createInstance:s4,createTextInstance:o4,detachDeletedInstance:z4,finalizeInitialChildren:l4,getChildHostContext:m4,getCurrentEventPriority:b4,getPublicInstance:a4,getRootHostContext:g4,hideInstance:D4,hideTextInstance:I4,idlePriority:E0.unstable_IdlePriority,insertBefore:V2,insertInContainerBefore:P4,isPrimaryRenderer:w4,noTimeout:_4,now:E0.unstable_now,prepareForCommit:u4,preparePortalMount:c4,prepareUpdate:d4,removeChild:N4,removeChildFromContainer:T4,resetAfterCommit:h4,resetTextContent:f4,run:E0.unstable_runWithPriority,scheduleTimeout:y4,shouldDeprioritizeSubtree:p4,shouldSetTextContent:S4,supportsMutation:x4,unhideInstance:A4,unhideTextInstance:F4,warnsIfNotActing:k4},Symbol.toStringTag,{value:"Module"}));var j4=Object.defineProperty,B4=Object.defineProperties,G4=Object.getOwnPropertyDescriptors,bg=Object.getOwnPropertySymbols,V4=Object.prototype.hasOwnProperty,H4=Object.prototype.propertyIsEnumerable,Ug=(i,t,o)=>t in i?j4(i,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):i[t]=o,jg=(i,t)=>{for(var o in t||(t={}))V4.call(t,o)&&Ug(i,o,t[o]);if(bg)for(var o of bg(t))H4.call(t,o)&&Ug(i,o,t[o]);return i},W4=(i,t)=>B4(i,G4(t)),Bg,Gg;typeof window<"u"&&((Bg=window.document)!=null&&Bg.createElement||((Gg=window.navigator)==null?void 0:Gg.product)==="ReactNative")?ve.useLayoutEffect:ve.useEffect;function H2(i,t,o){if(!i)return;if(o(i)===!0)return i;let a=i.child;for(;a;){const d=H2(a,t,o);if(d)return d;a=a.sibling}}function W2(i){try{return Object.defineProperties(i,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return i}}const Vg=console.error;console.error=function(){const i=[...arguments].join("");if(i!=null&&i.startsWith("Warning:")&&i.includes("useContext")){console.error=Vg;return}return Vg.apply(this,arguments)};const cp=W2(ve.createContext(null));class Y2 extends ve.Component{render(){return ve.createElement(cp.Provider,{value:this._reactInternals},this.props.children)}}function Y4(){const i=ve.useContext(cp);if(i===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=ve.useId();return ve.useMemo(()=>{for(const a of[i,i==null?void 0:i.alternate]){if(!a)continue;const d=H2(a,!1,u=>{let f=u.memoizedState;for(;f;){if(f.memoizedState===t)return!0;f=f.next}});if(d)return d}},[i,t])}function q4(){const i=Y4(),[t]=ve.useState(()=>new Map);t.clear();let o=i;for(;o;){if(o.type&&typeof o.type=="object"){const d=o.type._context===void 0&&o.type.Provider===o.type?o.type:o.type._context;d&&d!==cp&&!t.has(d)&&t.set(d,ve.useContext(W2(d)))}o=o.return}return t}function X4(){const i=q4();return ve.useMemo(()=>Array.from(i.keys()).reduce((t,o)=>a=>ve.createElement(t,null,ve.createElement(o.Provider,W4(jg({},a),{value:i.get(o)}))),t=>ve.createElement(Y2,jg({},t))),[i])}function K4(i){const t=Yn.useRef({});return Yn.useLayoutEffect(()=>{t.current=i}),Yn.useLayoutEffect(()=>()=>{t.current={}},[]),t.current}const Q4=i=>{const t=Yn.useRef(null),o=Yn.useRef(null),a=Yn.useRef(null),d=K4(i),u=X4(),f=p=>{const{forwardedRef:m}=i;m&&(typeof m=="function"?m(p):m.current=p)};return Yn.useLayoutEffect(()=>(o.current=new $c.Stage({width:i.width,height:i.height,container:t.current}),f(o.current),a.current=Qc.createContainer(o.current,B2.LegacyRoot,!1,null),Qc.updateContainer(Yn.createElement(u,{},i.children),a.current),()=>{$c.isBrowser&&(f(null),Qc.updateContainer(null,a.current,null),o.current.destroy())}),[]),Yn.useLayoutEffect(()=>{f(o.current),uf(o.current,i,d),Qc.updateContainer(Yn.createElement(u,{},i.children),a.current,null)}),Yn.createElement("div",{ref:t,id:i.id,accessKey:i.accessKey,className:i.className,role:i.role,style:i.style,tabIndex:i.tabIndex,title:i.title})},Hg="Layer",J4="Group",Z4="Label",q2="Rect",$4="Circle",e3="Ellipse",t3="Line",n3="Image",X2="Text",r3="Tag",i3="Transformer",Qc=Qv(U4);Qc.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:Yn.version,rendererPackageName:"react-konva"});const s3=Yn.forwardRef((i,t)=>Yn.createElement(Y2,{},Yn.createElement(Q4,{...i,forwardedRef:t}))),o3={},Wg=i=>{let t;const o=new Set,a=(x,P)=>{const _=typeof x=="function"?x(t):x;if(!Object.is(_,t)){const k=t;t=P??(typeof _!="object"||_===null)?_:Object.assign({},t,_),o.forEach(C=>C(t,k))}},d=()=>t,m={setState:a,getState:d,getInitialState:()=>v,subscribe:x=>(o.add(x),()=>o.delete(x)),destroy:()=>{(o3?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),o.clear()}},v=t=i(a,d,m);return m},l3=i=>i?Wg(i):Wg;var P0={exports:{}},N0={},T0={exports:{}},R0={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yg;function a3(){if(Yg)return R0;Yg=1;var i=tu();function t(P,_){return P===_&&(P!==0||1/P===1/_)||P!==P&&_!==_}var o=typeof Object.is=="function"?Object.is:t,a=i.useState,d=i.useEffect,u=i.useLayoutEffect,f=i.useDebugValue;function p(P,_){var k=_(),C=a({inst:{value:k,getSnapshot:_}}),N=C[0].inst,I=C[1];return u(function(){N.value=k,N.getSnapshot=_,m(N)&&I({inst:N})},[P,k,_]),d(function(){return m(N)&&I({inst:N}),P(function(){m(N)&&I({inst:N})})},[P]),f(k),k}function m(P){var _=P.getSnapshot;P=P.value;try{var k=_();return!o(P,k)}catch{return!0}}function v(P,_){return _()}var x=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?v:p;return R0.useSyncExternalStore=i.useSyncExternalStore!==void 0?i.useSyncExternalStore:x,R0}var qg;function u3(){return qg||(qg=1,T0.exports=a3()),T0.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xg;function c3(){if(Xg)return N0;Xg=1;var i=tu(),t=u3();function o(v,x){return v===x&&(v!==0||1/v===1/x)||v!==v&&x!==x}var a=typeof Object.is=="function"?Object.is:o,d=t.useSyncExternalStore,u=i.useRef,f=i.useEffect,p=i.useMemo,m=i.useDebugValue;return N0.useSyncExternalStoreWithSelector=function(v,x,P,_,k){var C=u(null);if(C.current===null){var N={hasValue:!1,value:null};C.current=N}else N=C.current;C=p(function(){function j(b){if(!T){if(T=!0,S=b,b=_(b),k!==void 0&&N.hasValue){var Y=N.value;if(k(Y,b))return L=Y}return L=b}if(Y=L,a(S,b))return Y;var A=_(b);return k!==void 0&&k(Y,A)?(S=b,Y):(S=b,L=A)}var T=!1,S,L,M=P===void 0?null:P;return[function(){return j(x())},M===null?void 0:function(){return j(M())}]},[x,P,_,k]);var I=d(v,C[0],C[1]);return f(function(){N.hasValue=!0,N.value=I},[I]),m(I),I},N0}var Kg;function d3(){return Kg||(Kg=1,P0.exports=c3()),P0.exports}var h3=d3();const f3=ud(h3),K2={},{useDebugValue:p3}=Yn,{useSyncExternalStoreWithSelector:g3}=f3;let Qg=!1;const m3=i=>i;function y3(i,t=m3,o){(K2?"production":void 0)!=="production"&&o&&!Qg&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Qg=!0);const a=g3(i.subscribe,i.getState,i.getServerState||i.getInitialState,t,o);return p3(a),a}const Jg=i=>{(K2?"production":void 0)!=="production"&&typeof i!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof i=="function"?l3(i):i,o=(a,d)=>y3(t,a,d);return Object.assign(o,t),o},cd=i=>i?Jg(i):Jg,v3="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let bh=(i=21)=>{let t="",o=crypto.getRandomValues(new Uint8Array(i|=0));for(;i--;)t+=v3[o[i]&63];return t};const Zg="layer-1",$g={shapes:{},layers:[{id:Zg,name:"Layer 1",visible:!0,locked:!1,shapeIds:[]}],activeLayerId:Zg,viewport:{x:0,y:0,scale:1}},Sr=cd((i,t)=>({...$g,addShape:o=>{var f;const a=bh(),d={...o,id:a},u=t().activeLayerId||((f=t().layers[0])==null?void 0:f.id);return u?(i(p=>({shapes:{...p.shapes,[a]:{...d,layerId:u}},layers:p.layers.map(m=>m.id===u?{...m,shapeIds:[...m.shapeIds,a]}:m)})),a):(console.error("No active layer"),a)},updateShape:(o,a)=>{i(d=>{const u=d.shapes[o];return u?{shapes:{...d.shapes,[o]:{...u,...a}}}:d})},deleteShape:o=>{i(a=>{if(!a.shapes[o])return a;const{[o]:u,...f}=a.shapes;return{shapes:f,layers:a.layers.map(p=>({...p,shapeIds:p.shapeIds.filter(m=>m!==o)}))}})},deleteShapes:o=>{i(a=>{const d=new Set(o),u={...a.shapes};return o.forEach(f=>delete u[f]),{shapes:u,layers:a.layers.map(f=>({...f,shapeIds:f.shapeIds.filter(p=>!d.has(p))}))}})},duplicateShapes:o=>{const a=[];return i(d=>{const u={...d.shapes},f={};return o.forEach(p=>{const m=d.shapes[p];if(!m)return;const v=bh();if(a.push(v),u[v]={...m,id:v,x:m.x+20,y:m.y+20,name:`${m.name} Copy`},!f[m.layerId]){const x=d.layers.find(P=>P.id===m.layerId);f[m.layerId]=x?[...x.shapeIds]:[]}f[m.layerId].push(v)}),{shapes:u,layers:d.layers.map(p=>f[p.id]?{...p,shapeIds:f[p.id]}:p)}}),a},addLayer:o=>{const a=bh(),d=t().layers.length+1;return i(u=>({layers:[...u.layers,{id:a,name:o||`Layer ${d}`,visible:!0,locked:!1,shapeIds:[]}],activeLayerId:a})),a},updateLayer:(o,a)=>{i(d=>({layers:d.layers.map(u=>u.id===o?{...u,...a}:u)}))},deleteLayer:o=>{var v;const a=t();if(a.layers.length<=1)return;const d=a.layers.find(x=>x.id===o);if(!d)return;const u=new Set(d.shapeIds),f={...a.shapes};u.forEach(x=>delete f[x]);const p=a.layers.filter(x=>x.id!==o),m=a.activeLayerId===o?((v=p[0])==null?void 0:v.id)||null:a.activeLayerId;i({shapes:f,layers:p,activeLayerId:m})},reorderLayers:(o,a)=>{i(d=>{const u=[...d.layers],[f]=u.splice(o,1);return u.splice(a,0,f),{layers:u}})},setActiveLayer:o=>{i({activeLayerId:o})},moveShapeToLayer:(o,a)=>{i(d=>{const u=d.shapes[o];return!u||u.layerId===a?d:{shapes:{...d.shapes,[o]:{...u,layerId:a}},layers:d.layers.map(f=>f.id===u.layerId?{...f,shapeIds:f.shapeIds.filter(p=>p!==o)}:f.id===a?{...f,shapeIds:[...f.shapeIds,o]}:f)}})},reorderShapeInLayer:(o,a,d)=>{i(u=>({layers:u.layers.map(f=>{if(f.id!==o)return f;const p=[...f.shapeIds],[m]=p.splice(a,1);return p.splice(d,0,m),{...f,shapeIds:p}})}))},setViewport:o=>{i(a=>({viewport:{...a.viewport,...o}}))},zoomTo:(o,a,d)=>{i(u=>{const f=Math.min(Math.max(o,.1),10);if(a!==void 0&&d!==void 0){const p=f/u.viewport.scale,m=a-(a-u.viewport.x)*p,v=d-(d-u.viewport.y)*p;return{viewport:{x:m,y:v,scale:f}}}return{viewport:{...u.viewport,scale:f}}})},panBy:(o,a)=>{i(d=>({viewport:{...d.viewport,x:d.viewport.x+o,y:d.viewport.y+a}}))},fitToScreen:(o,a)=>{const d=Object.values(t().shapes);if(d.length===0){i({viewport:{x:0,y:0,scale:1}});return}let u=1/0,f=1/0,p=-1/0,m=-1/0;d.forEach(j=>{const T="width"in j?j.width:"radiusX"in j?j.radiusX*2:100,S="height"in j?j.height:"radiusY"in j?j.radiusY*2:100;u=Math.min(u,j.x),f=Math.min(f,j.y),p=Math.max(p,j.x+T),m=Math.max(m,j.y+S)});const v=p-u,x=m-f,P=50,_=(o-P*2)/v,k=(a-P*2)/x,C=Math.min(_,k,1),N=(u+p)/2,I=(f+m)/2;i({viewport:{x:o/2-N*C,y:a/2-I*C,scale:C}})},getState:()=>{const o=t();return{shapes:o.shapes,layers:o.layers,activeLayerId:o.activeLayerId}},setState:o=>{i(o)},reset:()=>{i($g)}})),nu=cd((i,t)=>({selectedIds:[],isSelecting:!1,selectionBox:null,select:(o,a=!1)=>{i(d=>a?d.selectedIds.includes(o)?d:{selectedIds:[...d.selectedIds,o]}:{selectedIds:[o]})},selectMultiple:o=>{i({selectedIds:o})},selectAll:o=>{i({selectedIds:o})},deselect:o=>{i(a=>({selectedIds:a.selectedIds.filter(d=>d!==o)}))},clearSelection:()=>{i({selectedIds:[]})},toggleSelection:o=>{i(a=>a.selectedIds.includes(o)?{selectedIds:a.selectedIds.filter(d=>d!==o)}:{selectedIds:[...a.selectedIds,o]})},isSelected:o=>t().selectedIds.includes(o),startSelectionBox:(o,a)=>{i({isSelecting:!0,selectionBox:{x:o,y:a,width:0,height:0}})},updateSelectionBox:(o,a)=>{i(d=>{if(!d.selectionBox||!d.isSelecting)return d;const u=d.selectionBox.x,f=d.selectionBox.y;return{selectionBox:{x:Math.min(u,o),y:Math.min(f,a),width:Math.abs(o-u),height:Math.abs(a-f)}}})},endSelectionBox:()=>{const o=t().selectionBox;return i({isSelecting:!1,selectionBox:null}),o}})),ru=cd(i=>({activeTool:"select",fillColor:"#4a9eff",strokeColor:"#ffffff",strokeWidth:2,fontSize:24,fontFamily:"Arial",setTool:t=>i({activeTool:t}),setFillColor:t=>i({fillColor:t}),setStrokeColor:t=>i({strokeColor:t}),setStrokeWidth:t=>i({strokeWidth:t}),setFontSize:t=>i({fontSize:t}),setFontFamily:t=>i({fontFamily:t})})),_3=50;let Vh=!1;const Hh=cd((i,t)=>({past:[],future:[],undo:()=>{const o=t();if(o.past.length===0)return;const a=Sr.getState(),d={shapes:JSON.parse(JSON.stringify(a.shapes)),layers:JSON.parse(JSON.stringify(a.layers)),timestamp:Date.now()},u=[...o.past],f=u.pop();Vh=!0,a.setState({shapes:f.shapes,layers:f.layers}),i({past:u,future:[d,...o.future]})},redo:()=>{const o=t();if(o.future.length===0)return;const a=Sr.getState(),d={shapes:JSON.parse(JSON.stringify(a.shapes)),layers:JSON.parse(JSON.stringify(a.layers)),timestamp:Date.now()},u=[...o.future],f=u.shift();Vh=!0,a.setState({shapes:f.shapes,layers:f.layers}),i({past:[...o.past,d],future:u})},canUndo:()=>t().past.length>0,canRedo:()=>t().future.length>0,clear:()=>{i({past:[],future:[]})}}));Sr.subscribe((i,t)=>{if(Vh){Vh=!1;return}if(i.shapes!==t.shapes||i.layers!==t.layers){const o={shapes:JSON.parse(JSON.stringify(t.shapes)),layers:JSON.parse(JSON.stringify(t.layers)),timestamp:Date.now()},d=[...Hh.getState().past,o];d.length>_3&&d.shift(),Hh.setState({past:d,future:[]})}});const e2=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8","#F7DC6F","#BB8FCE","#85C1E9"],S3=()=>e2[Math.floor(Math.random()*e2.length)],dp=cd(i=>({isConnected:!1,roomId:null,userId:null,userName:"Anonymous",userColor:S3(),cursors:{},setConnected:t=>i({isConnected:t}),setRoom:t=>i({roomId:t}),setUser:(t,o,a)=>i({userId:t,userName:o,userColor:a}),updateCursor:t=>i(o=>({cursors:{...o.cursors,[t.id]:t}})),removeCursor:t=>i(o=>{const{[t]:a,...d}=o.cursors;return{cursors:d}}),clearCursors:()=>i({cursors:{}})}));function w3({shape:i,id:t,x:o,y:a,rotation:d,scaleX:u,scaleY:f,opacity:p,draggable:m,onClick:v,onTap:x,onDragEnd:P}){return K.jsx(q2,{id:t,x:o,y:a,width:i.width,height:i.height,fill:i.fill,stroke:i.stroke,strokeWidth:i.strokeWidth,cornerRadius:i.cornerRadius,rotation:d,scaleX:u,scaleY:f,opacity:p,draggable:m,onClick:v,onTap:x,onDragEnd:P})}function k3({shape:i,id:t,x:o,y:a,rotation:d,scaleX:u,scaleY:f,opacity:p,draggable:m,onClick:v,onTap:x,onDragEnd:P}){return K.jsx(e3,{id:t,x:o,y:a,radiusX:i.radiusX,radiusY:i.radiusY,fill:i.fill,stroke:i.stroke,strokeWidth:i.strokeWidth,rotation:d,scaleX:u,scaleY:f,opacity:p,draggable:m,onClick:v,onTap:x,onDragEnd:P})}function x3({shape:i,id:t,x:o,y:a,rotation:d,scaleX:u,scaleY:f,opacity:p,draggable:m,onClick:v,onTap:x,onDragEnd:P}){return K.jsx(t3,{id:t,x:o,y:a,points:i.points,stroke:i.stroke,strokeWidth:i.strokeWidth,lineCap:i.lineCap,lineJoin:i.lineJoin,rotation:d,scaleX:u,scaleY:f,opacity:p,draggable:m,onClick:v,onTap:x,onDragEnd:P,hitStrokeWidth:Math.max(i.strokeWidth,10)})}function C3({shape:i,id:t,x:o,y:a,rotation:d,scaleX:u,scaleY:f,opacity:p,draggable:m,onClick:v,onTap:x,onDragEnd:P}){return K.jsx(X2,{id:t,x:o,y:a,text:i.text,fontSize:i.fontSize,fontFamily:i.fontFamily,fontStyle:i.fontStyle,fill:i.fill,align:i.align,width:i.width,rotation:d,scaleX:u,scaleY:f,opacity:p,draggable:m,onClick:v,onTap:x,onDragEnd:P})}function E3({shape:i,id:t,x:o,y:a,rotation:d,scaleX:u,scaleY:f,opacity:p,draggable:m,onClick:v,onTap:x,onDragEnd:P}){const[_,k]=ve.useState(null);return ve.useEffect(()=>{const C=new window.Image;C.crossOrigin="anonymous",C.src=i.src,C.onload=()=>k(C)},[i.src]),_?K.jsx(n3,{id:t,x:o,y:a,image:_,width:i.width,height:i.height,rotation:d,scaleX:u,scaleY:f,opacity:p,draggable:m,onClick:v,onTap:x,onDragEnd:P}):null}function t2({shape:i,onClick:t,onDragEnd:o}){const a={id:i.id,x:i.x,y:i.y,rotation:i.rotation,scaleX:i.scaleX,scaleY:i.scaleY,opacity:i.opacity,draggable:!i.locked,onClick:t,onTap:t,onDragEnd:o};switch(i.type){case"rectangle":return K.jsx(w3,{shape:i,...a});case"circle":return K.jsx(k3,{shape:i,...a});case"line":return K.jsx(x3,{shape:i,...a});case"text":return K.jsx(C3,{shape:i,...a});case"image":return K.jsx(E3,{shape:i,...a});default:return null}}function P3({selectedShapes:i,stageRef:t}){const o=ve.useRef(null),{updateShape:a}=Sr();ve.useEffect(()=>{var p;if(!o.current||!t.current)return;const u=t.current,f=[];i.forEach(m=>{const v=u.findOne(`#${m.id}`);v&&f.push(v)}),o.current.nodes(f),(p=o.current.getLayer())==null||p.batchDraw()},[i,t]);const d=ve.useCallback(()=>{t.current&&i.forEach(u=>{var x;const f=(x=t.current)==null?void 0:x.findOne(`#${u.id}`);if(!f)return;const p=f.scaleX(),m=f.scaleY();let v={x:f.x(),y:f.y(),rotation:f.rotation()};u.type==="rectangle"||u.type==="text"||u.type==="image"?(v={...v,width:Math.max(5,f.width()*p),height:Math.max(5,f.height()*m),scaleX:1,scaleY:1},f.scaleX(1),f.scaleY(1)):u.type==="circle"?(v={...v,radiusX:Math.max(5,f.radiusX()*p),radiusY:Math.max(5,f.radiusY()*m),scaleX:1,scaleY:1},f.scaleX(1),f.scaleY(1)):v={...v,scaleX:p,scaleY:m},a(u.id,v)})},[i,t,a]);return i.length===0?null:K.jsx(i3,{ref:o,boundBoxFunc:(u,f)=>f.width<5||f.height<5?u:f,onTransformEnd:d,anchorSize:8,anchorCornerRadius:2,borderStroke:"#4a9eff",anchorStroke:"#4a9eff",anchorFill:"#ffffff",rotateEnabled:!0,enabledAnchors:["top-left","top-center","top-right","middle-left","middle-right","bottom-left","bottom-center","bottom-right"]})}function N3({box:i}){return K.jsx(q2,{x:i.x,y:i.y,width:i.width,height:i.height,fill:"rgba(74, 158, 255, 0.1)",stroke:"#4a9eff",strokeWidth:1,dash:[4,4]})}function T3(){const{cursors:i,userId:t}=dp();return K.jsx(K.Fragment,{children:Object.values(i).map(o=>o.id===t?null:K.jsxs(J4,{x:o.x,y:o.y,children:[K.jsx($4,{radius:6,fill:o.color,stroke:"#ffffff",strokeWidth:2,shadowColor:"rgba(0, 0, 0, 0.3)",shadowBlur:4,shadowOffset:{x:1,y:1}}),K.jsxs(Z4,{x:10,y:-5,children:[K.jsx(r3,{fill:o.color,cornerRadius:3,pointerDirection:"left",pointerWidth:6,pointerHeight:6}),K.jsx(X2,{text:o.name,fontSize:11,fontFamily:"Arial",fill:"#ffffff",padding:4})]})]},o.id))})}function R3(i){const{shapes:t,addShape:o}=Sr(),{activeTool:a,fillColor:d,strokeColor:u,strokeWidth:f,fontSize:p,fontFamily:m}=ru(),{selectMultiple:v}=nu(),[x,P]=ve.useState(!1),[_,k]=ve.useState(null),C=ve.useRef(null),N=ve.useCallback(()=>{const L=i.current;if(!L)return null;const M=L.getPointerPosition();if(!M)return null;const b=L.scaleX(),Y=L.position();return{x:(M.x-Y.x)/b,y:(M.y-Y.y)/b}},[i]),I=ve.useCallback(L=>Object.values(t).filter(M=>M.type===L).length+1,[t]),j=ve.useCallback(L=>{if(a==="select"||a==="pan"||L.target!==L.target.getStage())return;const M=N();if(!M)return;C.current=M,P(!0);const b={x:M.x,y:M.y,rotation:0,scaleX:1,scaleY:1,opacity:1,visible:!0,locked:!1,layerId:""};let Y=null;switch(a){case"rectangle":Y={...b,id:"preview",type:"rectangle",name:`Rectangle ${I("rectangle")}`,width:0,height:0,fill:d,stroke:u,strokeWidth:f,cornerRadius:0};break;case"circle":Y={...b,id:"preview",type:"circle",name:`Circle ${I("circle")}`,radiusX:0,radiusY:0,fill:d,stroke:u,strokeWidth:f};break;case"line":Y={...b,id:"preview",type:"line",name:`Line ${I("line")}`,points:[0,0,0,0],stroke:u,strokeWidth:f,lineCap:"round",lineJoin:"round"};break;case"text":const A={...b,type:"text",name:`Text ${I("text")}`,text:"Text",fontSize:p,fontFamily:m,fontStyle:"normal",fill:d,align:"left",width:200,height:p*1.5},U=o(A);v([U]),P(!1);return;case"image":const B=document.createElement("input");B.type="file",B.accept="image/*",B.onchange=V=>{var ne;const X=(ne=V.target.files)==null?void 0:ne[0];if(!X)return;const $=new FileReader;$.onload=ee=>{var D;const pe=new Image;pe.onload=()=>{var G;const z={...b,type:"image",name:`Image ${I("image")}`,src:(G=ee.target)==null?void 0:G.result,width:pe.width,height:pe.height},W=o(z);v([W])},pe.src=(D=ee.target)==null?void 0:D.result},$.readAsDataURL(X)},B.click(),P(!1);return}k(Y)},[a,N,d,u,f,p,m,o,v,I]),T=ve.useCallback(L=>{if(!x||!C.current||!_)return;const M=N();if(!M)return;const b=C.current;let Y=null;switch(_.type){case"rectangle":const A=M.x-b.x,U=M.y-b.y;Y={..._,x:A<0?M.x:b.x,y:U<0?M.y:b.y,width:Math.abs(A),height:Math.abs(U)};break;case"circle":const B=Math.abs(M.x-b.x)/2,V=Math.abs(M.y-b.y)/2,X=Math.min(b.x,M.x)+B,$=Math.min(b.y,M.y)+V;Y={..._,x:X,y:$,radiusX:B,radiusY:V};break;case"line":Y={..._,points:[0,0,M.x-b.x,M.y-b.y]};break}Y&&k(Y)},[x,_,N]),S=ve.useCallback(L=>{if(!x||!_){P(!1),k(null),C.current=null;return}let M=!1;switch(_.type){case"rectangle":M=_.width>5&&_.height>5;break;case"circle":M=_.radiusX>5&&_.radiusY>5;break;case"line":const[,,b,Y]=_.points;M=Math.abs(b)>5||Math.abs(Y)>5;break}if(M){const{id:b,...Y}=_,A=o(Y);v([A])}P(!1),k(null),C.current=null},[x,_,o,v]);return{handleMouseDown:j,handleMouseMove:T,handleMouseUp:S,isDrawing:x,previewShape:_}}function L3(i){const{viewport:t,setViewport:o,zoomTo:a,panBy:d}=Sr(),{activeTool:u}=ru(),[f,p]=ve.useState(!1),m=ve.useRef(null),v=ve.useRef(null),x=ve.useRef(1);ve.useEffect(()=>{const S=i.current;if(!S)return;const L=S.container(),M=B=>{if(B.preventDefault(),B.ctrlKey){const X=L.getBoundingClientRect(),$=B.clientX-X.left,ne=B.clientY-X.top,ee=t.scale,D=-B.deltaY*.01,z=Math.max(.1,Math.min(10,ee*(1+D)));a(z,$,ne)}else d(-B.deltaX,-B.deltaY)},b=B=>{B.preventDefault(),x.current=t.scale},Y=B=>{B.preventDefault();const V=B;if(V.scale){const X=Math.max(.1,Math.min(10,x.current*V.scale)),$=L.getBoundingClientRect(),ne=V.clientX-$.left,ee=V.clientY-$.top;a(X,ne,ee)}},A=B=>{B.preventDefault()},U=B=>{B.touches.length>1&&B.preventDefault()};return L.addEventListener("wheel",M,{passive:!1}),L.addEventListener("gesturestart",b),L.addEventListener("gesturechange",Y),L.addEventListener("gestureend",A),L.addEventListener("touchmove",U,{passive:!1}),()=>{L.removeEventListener("wheel",M),L.removeEventListener("gesturestart",b),L.removeEventListener("gesturechange",Y),L.removeEventListener("gestureend",A),L.removeEventListener("touchmove",U)}},[i,t.scale,a,d]);const P=S=>{if(S.length<2)return 0;const L=S[0].clientX-S[1].clientX,M=S[0].clientY-S[1].clientY;return Math.sqrt(L*L+M*M)},_=S=>S.length<2?{x:S[0].clientX,y:S[0].clientY}:{x:(S[0].clientX+S[1].clientX)/2,y:(S[0].clientY+S[1].clientY)/2},k=ve.useCallback(S=>{const L=S.evt.touches;L.length===2&&(S.evt.preventDefault(),m.current=P(L),v.current=_(L))},[]),C=ve.useCallback(S=>{const L=S.evt.touches,M=i.current;if(M&&L.length===2&&m.current!==null){S.evt.preventDefault();const b=P(L),Y=_(L),A=b/m.current,U=t.scale,B=Math.max(.1,Math.min(10,U*A)),V=M.container().getBoundingClientRect(),X=Y.x-V.left,$=Y.y-V.top;if(a(B,X,$),v.current){const ne=Y.x-v.current.x,ee=Y.y-v.current.y;d(ne,ee)}m.current=b,v.current=Y}},[i,t.scale,a,d]),N=ve.useCallback(S=>{S.evt.touches.length<2&&(m.current=null,v.current=null)},[]),I=ve.useCallback(S=>{S.target===S.target.getStage()&&u==="pan"&&p(!0)},[u]),j=ve.useCallback(S=>{S.target===S.target.getStage()&&u==="pan"&&(p(!1),o({x:S.target.x(),y:S.target.y()}))},[u,o]),T=ve.useCallback((S,L)=>{const M=i.current;if(!M)return{x:S,y:L};const b=M.container().getBoundingClientRect(),Y=S-b.left,A=L-b.top,U=(Y-t.x)/t.scale,B=(A-t.y)/t.scale;return{x:U,y:B}},[i,t]);return{handleTouchStart:k,handleTouchMove:C,handleTouchEnd:N,handleDragStart:I,handleDragEnd:j,isPanning:f,screenToCanvas:T}}const M3="_container_1il7h_1",D3={container:M3};function I3({onCursorMove:i}){const t=ve.useRef(null),o=ve.useRef(null),[a,d]=ve.useState({width:0,height:0}),{shapes:u,layers:f,viewport:p,updateShape:m}=Sr(),{selectedIds:v,clearSelection:x,selectionBox:P,selectMultiple:_}=nu(),{activeTool:k}=ru(),{handleMouseDown:C,handleMouseMove:N,handleMouseUp:I,isDrawing:j,previewShape:T}=R3(o),{handleTouchStart:S,handleTouchMove:L,handleTouchEnd:M,handleDragStart:b,handleDragEnd:Y,isPanning:A,screenToCanvas:U}=L3(o);ve.useEffect(()=>{const G=()=>{t.current&&d({width:t.current.offsetWidth,height:t.current.offsetHeight})};return G(),window.addEventListener("resize",G),()=>window.removeEventListener("resize",G)},[]);const B=ve.useCallback(()=>{const G=[];return f.forEach(F=>{F.visible&&F.shapeIds.forEach(J=>{const Z=u[J];Z&&Z.visible&&G.push(Z)})}),G},[u,f]),V=ve.useCallback(G=>{G.target===G.target.getStage()&&x()},[x]),X=ve.useCallback((G,F)=>{if(k!=="select")return;if(G.cancelBubble=!0,G.evt.shiftKey||G.evt.metaKey||G.evt.ctrlKey){const Z=v.includes(F);_(Z?v.filter(he=>he!==F):[...v,F])}else _([F])},[k,v,_]),$=ve.useCallback((G,F)=>{m(F,{x:G.target.x(),y:G.target.y()})},[m]),ne=ve.useCallback(G=>{k!=="select"&&k!=="pan"&&C(G)},[k,C]),ee=ve.useCallback(G=>{if(i){const F=U(G.evt.clientX,G.evt.clientY);i(F.x,F.y)}j&&N(G)},[j,N,i,U]),pe=ve.useCallback(G=>{j&&I(G)},[j,I]),D=B(),z=D.filter(G=>v.includes(G.id)),W=k==="pan"||A?"grab":k==="select"?"default":"crosshair";return K.jsx("div",{ref:t,className:D3.container,style:{cursor:W},children:K.jsxs(s3,{ref:o,width:a.width,height:a.height,x:p.x,y:p.y,scaleX:p.scale,scaleY:p.scale,draggable:k==="pan",onClick:V,onMouseDown:ne,onMouseMove:ee,onMouseUp:pe,onTouchStart:S,onTouchMove:L,onTouchEnd:M,onDragStart:b,onDragEnd:Y,children:[K.jsxs(Hg,{children:[D.map(G=>K.jsx(t2,{shape:G,isSelected:v.includes(G.id),onClick:F=>X(F,G.id),onDragEnd:F=>$(F,G.id)},G.id)),T&&K.jsx(t2,{shape:T,isSelected:!1,onClick:()=>{},onDragEnd:()=>{}})]}),K.jsxs(Hg,{children:[K.jsx(P3,{selectedShapes:z,stageRef:o}),P&&K.jsx(N3,{box:P}),K.jsx(T3,{})]})]})})}/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A3=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Q2=(...i)=>i.filter((t,o,a)=>!!t&&t.trim()!==""&&a.indexOf(t)===o).join(" ").trim();/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var F3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O3=ve.forwardRef(({color:i="currentColor",size:t=24,strokeWidth:o=2,absoluteStrokeWidth:a,className:d="",children:u,iconNode:f,...p},m)=>ve.createElement("svg",{ref:m,...F3,width:t,height:t,stroke:i,strokeWidth:a?Number(o)*24/Number(t):o,className:Q2("lucide",d),...p},[...f.map(([v,x])=>ve.createElement(v,x)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=(i,t)=>{const o=ve.forwardRef(({className:a,...d},u)=>ve.createElement(O3,{ref:u,iconNode:t,className:Q2(`lucide-${A3(i)}`,a),...d}));return o.displayName=`${i}`,o};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n2=ut("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z3=ut("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J2=ut("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r2=ut("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i2=ut("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W0=ut("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b3=ut("Hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U3=ut("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z2=ut("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j3=ut("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B3=ut("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s2=ut("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G3=ut("LockOpen",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V3=ut("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H3=ut("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $2=ut("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W3=ut("MousePointer2",[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y3=ut("Move",[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q3=ut("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X3=ut("PenTool",[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o2=ut("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K3=ut("Redo2",[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5A5.5 5.5 0 0 0 9.5 20H13",key:"6uklza"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q3=ut("SlidersVertical",[["line",{x1:"4",x2:"4",y1:"21",y2:"14",key:"1p332r"}],["line",{x1:"4",x2:"4",y1:"10",y2:"3",key:"gb41h5"}],["line",{x1:"12",x2:"12",y1:"21",y2:"12",key:"hf2csr"}],["line",{x1:"12",x2:"12",y1:"8",y2:"3",key:"1kfi7u"}],["line",{x1:"20",x2:"20",y1:"21",y2:"16",key:"1lhrwl"}],["line",{x1:"20",x2:"20",y1:"12",y2:"3",key:"16vvfq"}],["line",{x1:"2",x2:"6",y1:"14",y2:"14",key:"1uebub"}],["line",{x1:"10",x2:"14",y1:"8",y2:"8",key:"1yglbp"}],["line",{x1:"18",x2:"22",y1:"16",y2:"16",key:"1jxqpz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y0=ut("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J3=ut("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hp=ut("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z3=ut("Undo2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $3=ut("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e5=ut("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t5=ut("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n5=ut("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r5=ut("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);function em(){const{undo:i,redo:t,canUndo:o,canRedo:a}=Hh();return{undo:i,redo:t,canUndo:o,canRedo:a}}function i5(){const{shapes:i,layers:t}=Sr(),o=ve.useCallback(()=>{const u=document.querySelector(".konvajs-content canvas");if(!u)return;const f=document.createElement("a");f.download="canvas-export.png",f.href=u.toDataURL("image/png"),f.click()},[]),a=ve.useCallback(()=>{const u=document.querySelector(".konvajs-content canvas");if(!u)return;const f=document.createElement("a");f.download="canvas-export.jpg",f.href=u.toDataURL("image/jpeg",.9),f.click()},[]),d=ve.useCallback(()=>{const u=[];let f=1/0,p=1/0,m=-1/0,v=-1/0;Object.values(i).forEach(S=>{if(!S.visible)return;const L=t.find(U=>U.id===S.layerId);if(!(L!=null&&L.visible))return;let M=0,b=0,Y=S.x,A=S.y;if("width"in S)M=S.width,b=S.height;else if("radiusX"in S)M=S.radiusX*2,b=S.radiusY*2,Y-=S.radiusX,A-=S.radiusY;else if("points"in S&&S.points.length>=4){const U=S.points.filter((V,X)=>X%2===0),B=S.points.filter((V,X)=>X%2===1);M=Math.max(...U)-Math.min(...U),b=Math.max(...B)-Math.min(...B),Y+=Math.min(...U),A+=Math.min(...B)}f=Math.min(f,Y),p=Math.min(p,A),m=Math.max(m,Y+M),v=Math.max(v,A+b)});const x=20,P=m-f+x*2,_=v-p+x*2,k=-f+x,C=-p+x;t.forEach(S=>{S.visible&&S.shapeIds.forEach(L=>{const M=i[L];if(!M||!M.visible)return;const b=`translate(${M.x+k}, ${M.y+C}) rotate(${M.rotation})`,Y=M.opacity;switch(M.type){case"rectangle":u.push(`<rect x="0" y="0" width="${M.width}" height="${M.height}" fill="${M.fill}" stroke="${M.stroke}" stroke-width="${M.strokeWidth}" rx="${M.cornerRadius}" transform="${b}" opacity="${Y}"/>`);break;case"circle":u.push(`<ellipse cx="0" cy="0" rx="${M.radiusX}" ry="${M.radiusY}" fill="${M.fill}" stroke="${M.stroke}" stroke-width="${M.strokeWidth}" transform="${b}" opacity="${Y}"/>`);break;case"line":const A=M.points;A.length>=4&&u.push(`<line x1="${A[0]}" y1="${A[1]}" x2="${A[2]}" y2="${A[3]}" stroke="${M.stroke}" stroke-width="${M.strokeWidth}" stroke-linecap="${M.lineCap}" transform="${b}" opacity="${Y}"/>`);break;case"text":u.push(`<text x="0" y="${M.fontSize}" font-size="${M.fontSize}" font-family="${M.fontFamily}" fill="${M.fill}" transform="${b}" opacity="${Y}">${s5(M.text)}</text>`);break;case"image":u.push(`<image href="${M.src}" width="${M.width}" height="${M.height}" transform="${b}" opacity="${Y}"/>`);break}})});const N=`<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="${P}" height="${_}" viewBox="0 0 ${P} ${_}">
  ${u.join(`
  `)}
</svg>`,I=new Blob([N],{type:"image/svg+xml"}),j=URL.createObjectURL(I),T=document.createElement("a");T.download="canvas-export.svg",T.href=j,T.click(),URL.revokeObjectURL(j)},[i,t]);return{exportToPNG:o,exportToJPEG:a,exportToSVG:d}}function s5(i){return i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}const o5="_toolbar_fp6yd_1",l5="_section_fp6yd_12",a5="_divider_fp6yd_18",u5="_spacer_fp6yd_25",c5="_toolButton_fp6yd_29",d5="_active_fp6yd_60",h5="_buttonLabel_fp6yd_75",f5="_zoomLevel_fp6yd_119",Mn={toolbar:o5,section:l5,divider:a5,spacer:u5,toolButton:c5,active:d5,buttonLabel:h5,zoomLevel:f5},p5="_container_19lcu_1",g5="_trigger_19lcu_5",m5="_colorPreview_19lcu_28",y5="_strokeIndicator_19lcu_42",v5="_label_19lcu_49",_5="_dropdown_19lcu_54",S5="_presetColors_19lcu_80",w5="_presetColor_19lcu_80",k5="_selected_19lcu_107",x5="_customColor_19lcu_112",C5="_hexInput_19lcu_141",Ei={container:p5,trigger:g5,colorPreview:m5,strokeIndicator:y5,label:v5,dropdown:_5,presetColors:S5,presetColor:w5,selected:k5,customColor:x5,hexInput:C5},E5=["#ffffff","#000000","#4a9eff","#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#F7DC6F","#BB8FCE","#85C1E9","#E74C3C","#2ECC71","#F39C12","#9B59B6"];function l2({type:i}){const{fillColor:t,strokeColor:o,setFillColor:a,setStrokeColor:d}=ru(),[u,f]=ve.useState(!1),p=ve.useRef(null),m=i==="fill"?t:o,v=i==="fill"?a:d;ve.useEffect(()=>{const P=_=>{p.current&&!p.current.contains(_.target)&&f(!1)};return u&&document.addEventListener("mousedown",P),()=>document.removeEventListener("mousedown",P)},[u]);const x=i==="fill"?"Fill":"Stroke";return K.jsxs("div",{className:Ei.container,ref:p,children:[K.jsxs("button",{className:Ei.trigger,onClick:()=>f(!u),"aria-label":`${x} color: ${m}`,"aria-expanded":u,"aria-haspopup":"true",children:[K.jsx("div",{className:Ei.colorPreview,style:{backgroundColor:m},"aria-hidden":"true",children:i==="stroke"&&K.jsx("div",{className:Ei.strokeIndicator})}),K.jsx("span",{className:Ei.label,children:x})]}),u&&K.jsxs("div",{className:Ei.dropdown,role:"dialog","aria-label":`${x} color picker`,children:[K.jsx("div",{className:Ei.presetColors,role:"listbox","aria-label":"Preset colors",children:E5.map(P=>K.jsx("button",{className:`${Ei.presetColor} ${m===P?Ei.selected:""}`,style:{backgroundColor:P},onClick:()=>{v(P),f(!1)},"aria-label":`Color ${P}`,"aria-selected":m===P,role:"option"},P))}),K.jsxs("div",{className:Ei.customColor,children:[K.jsx("label",{htmlFor:`${i}-color-picker`,children:"Custom:"}),K.jsx("input",{id:`${i}-color-picker`,type:"color",value:m,onChange:P=>v(P.target.value),"aria-label":"Custom color picker"}),K.jsx("input",{type:"text",value:m,onChange:P=>v(P.target.value),className:Ei.hexInput,"aria-label":"Hex color value",placeholder:"#000000"})]})]})]})}function El({tool:i,icon:t,label:o,shortcut:a}){const{activeTool:d,setTool:u}=ru(),f=d===i;return K.jsx("button",{className:`${Mn.toolButton} ${f?Mn.active:""}`,onClick:()=>u(i),"data-tooltip":`${o}${a?` (${a})`:""}`,"aria-label":`${o}${a?`, shortcut ${a}`:""}`,"aria-pressed":f,role:"button",children:t})}function Pl({icon:i,label:t,shortcut:o,onClick:a,disabled:d,children:u}){return K.jsxs("button",{className:Mn.toolButton,onClick:a,disabled:d,"data-tooltip":`${t}${o?` (${o})`:""}`,"aria-label":`${t}${o?`, shortcut ${o}`:""}`,children:[i,u]})}function P5(){const{undo:i,redo:t}=em(),{canUndo:o,canRedo:a}=Hh(),{exportToPNG:d,exportToSVG:u}=i5(),{viewport:f,zoomTo:p,fitToScreen:m}=Sr(),v=()=>{p(f.scale*1.2)},x=()=>{p(f.scale/1.2)},P=()=>{m(window.innerWidth-560,window.innerHeight-48)};return K.jsxs("nav",{className:Mn.toolbar,role:"toolbar","aria-label":"Canvas tools",children:[K.jsxs("div",{className:Mn.section,role:"group","aria-label":"Selection tools",children:[K.jsx(El,{tool:"select",icon:K.jsx(W3,{size:18}),label:"Select",shortcut:"V"}),K.jsx(El,{tool:"pan",icon:K.jsx(b3,{size:18}),label:"Pan",shortcut:"H"})]}),K.jsx("div",{className:Mn.divider,role:"separator","aria-hidden":"true"}),K.jsxs("div",{className:Mn.section,role:"group","aria-label":"Shape tools",children:[K.jsx(El,{tool:"rectangle",icon:K.jsx(Y0,{size:18}),label:"Rectangle",shortcut:"R"}),K.jsx(El,{tool:"circle",icon:K.jsx(J2,{size:18}),label:"Circle",shortcut:"O"}),K.jsx(El,{tool:"line",icon:K.jsx($2,{size:18}),label:"Line",shortcut:"L"}),K.jsx(El,{tool:"text",icon:K.jsx(hp,{size:18}),label:"Text",shortcut:"T"}),K.jsx(El,{tool:"image",icon:K.jsx(Z2,{size:18}),label:"Image",shortcut:"I"})]}),K.jsx("div",{className:Mn.divider,role:"separator","aria-hidden":"true"}),K.jsxs("div",{className:Mn.section,role:"group","aria-label":"Color controls",children:[K.jsx(l2,{type:"fill"}),K.jsx(l2,{type:"stroke"})]}),K.jsx("div",{className:Mn.spacer}),K.jsxs("div",{className:Mn.section,role:"group","aria-label":"History",children:[K.jsx(Pl,{icon:K.jsx(Z3,{size:18}),label:"Undo",shortcut:"Z",onClick:i,disabled:!o()}),K.jsx(Pl,{icon:K.jsx(K3,{size:18}),label:"Redo",shortcut:"Z",onClick:t,disabled:!a()})]}),K.jsx("div",{className:Mn.divider,role:"separator","aria-hidden":"true"}),K.jsxs("div",{className:Mn.section,role:"group","aria-label":"Zoom controls",children:[K.jsx(Pl,{icon:K.jsx(r5,{size:18}),label:"Zoom Out",shortcut:"-",onClick:x}),K.jsxs("span",{className:Mn.zoomLevel,"aria-live":"polite","aria-label":`Zoom level ${Math.round(f.scale*100)} percent`,children:[Math.round(f.scale*100),"%"]}),K.jsx(Pl,{icon:K.jsx(n5,{size:18}),label:"Zoom In",shortcut:"+",onClick:v}),K.jsx(Pl,{icon:K.jsx(H3,{size:18}),label:"Fit to Screen",shortcut:"0",onClick:P})]}),K.jsx("div",{className:Mn.divider,role:"separator","aria-hidden":"true"}),K.jsxs("div",{className:Mn.section,role:"group","aria-label":"Export",children:[K.jsx(Pl,{icon:K.jsx(r2,{size:18}),label:"Export as PNG",onClick:d,children:K.jsx("span",{className:Mn.buttonLabel,children:"PNG"})}),K.jsx(Pl,{icon:K.jsx(r2,{size:18}),label:"Export as SVG",onClick:u,children:K.jsx("span",{className:Mn.buttonLabel,children:"SVG"})})]})]})}const N5="_panel_1c9oc_5",T5="_header_1c9oc_13",R5="_emptyState_1c9oc_25",L5="_section_1c9oc_45",M5="_sectionTitle_1c9oc_54",D5="_row_1c9oc_63",I5="_field_1c9oc_73",A5="_hexInput_1c9oc_152",F5="_layersList_1c9oc_163",O5="_layerItem_1c9oc_169",z5="_activeLayer_1c9oc_178",b5="_dragOver_1c9oc_182",U5="_layerHeader_1c9oc_187",j5="_layerName_1c9oc_200",B5="_shapesList_1c9oc_214",G5="_shapeItem_1c9oc_218",V5="_selectedShape_1c9oc_236",H5="_dragging_1c9oc_246",W5="_shapeTypeIcon_1c9oc_251",Y5="_shapePreview_1c9oc_266",q5="_shapeName_1c9oc_275",X5="_iconButton_1c9oc_287",K5="_active_1c9oc_178",Q5="_danger_1c9oc_322",J5="_addLayerButton_1c9oc_352",De={panel:N5,header:T5,emptyState:R5,section:L5,sectionTitle:M5,row:D5,field:I5,hexInput:A5,layersList:F5,layerItem:O5,activeLayer:z5,dragOver:b5,layerHeader:U5,layerName:j5,shapesList:B5,shapeItem:G5,selectedShape:V5,dragging:H5,shapeTypeIcon:W5,shapePreview:Y5,shapeName:q5,iconButton:X5,active:K5,danger:Q5,addLayerButton:J5};function Dh(i,t){if(i.length===0)return"mixed";const o=t(i[0]);return i.every(d=>t(d)===o)?o:"mixed"}function Z5(){const{shapes:i,updateShape:t}=Sr(),{selectedIds:o}=nu(),a=ve.useMemo(()=>o.map(_=>i[_]).filter(Boolean),[o,i]),d=ve.useCallback(_=>{o.forEach(k=>{t(k,_)})},[o,t]);if(o.length===0)return K.jsxs("div",{className:De.panel,role:"region","aria-label":"Properties panel",children:[K.jsx("div",{className:De.header,children:"Properties"}),K.jsxs("div",{className:De.emptyState,children:[K.jsx(Q3,{size:32}),K.jsx("span",{children:"Select a shape to edit its properties"})]})]});const u=a[0],f=o.length>1;if(!u)return null;const p=(_,k)=>{f?d({[_]:k}):t(u.id,{[_]:k})},m=f?Dh(a,_=>Math.round(_.x)):Math.round(u.x),v=f?Dh(a,_=>Math.round(_.y)):Math.round(u.y),x=f?Dh(a,_=>Math.round(_.rotation)):Math.round(u.rotation),P=f?Dh(a,_=>_.opacity):u.opacity;return K.jsxs("div",{className:De.panel,role:"region","aria-label":"Properties panel",children:[K.jsxs("div",{className:De.header,children:["Properties",f&&K.jsxs("span",{style:{fontSize:"var(--text-sm)",color:"var(--text-secondary)",fontWeight:400},children:[o.length," selected"]})]}),K.jsxs("div",{className:De.section,children:[K.jsxs("div",{className:De.sectionTitle,children:[K.jsx(Y3,{size:12,style:{marginRight:4,verticalAlign:"middle"}}),"Transform"]}),K.jsxs("div",{className:De.row,children:[K.jsxs("div",{className:De.field,children:[K.jsx("label",{htmlFor:"prop-x",children:"X"}),K.jsx("input",{id:"prop-x",type:"number",value:m==="mixed"?"":m,placeholder:m==="mixed"?"Mixed":void 0,onChange:_=>p("x",parseFloat(_.target.value)||0),"aria-label":"X position"})]}),K.jsxs("div",{className:De.field,children:[K.jsx("label",{htmlFor:"prop-y",children:"Y"}),K.jsx("input",{id:"prop-y",type:"number",value:v==="mixed"?"":v,placeholder:v==="mixed"?"Mixed":void 0,onChange:_=>p("y",parseFloat(_.target.value)||0),"aria-label":"Y position"})]})]}),!f&&"width"in u&&"height"in u&&K.jsxs("div",{className:De.row,children:[K.jsxs("div",{className:De.field,children:[K.jsx("label",{htmlFor:"prop-w",children:"W"}),K.jsx("input",{id:"prop-w",type:"number",value:Math.round(u.width),onChange:_=>t(u.id,{width:parseFloat(_.target.value)||1}),"aria-label":"Width"})]}),K.jsxs("div",{className:De.field,children:[K.jsx("label",{htmlFor:"prop-h",children:"H"}),K.jsx("input",{id:"prop-h",type:"number",value:Math.round(u.height),onChange:_=>t(u.id,{height:parseFloat(_.target.value)||1}),"aria-label":"Height"})]})]}),!f&&"radiusX"in u&&"radiusY"in u&&K.jsxs("div",{className:De.row,children:[K.jsxs("div",{className:De.field,children:[K.jsx("label",{htmlFor:"prop-rx",children:"RX"}),K.jsx("input",{id:"prop-rx",type:"number",value:Math.round(u.radiusX),onChange:_=>t(u.id,{radiusX:parseFloat(_.target.value)||1}),"aria-label":"Radius X"})]}),K.jsxs("div",{className:De.field,children:[K.jsx("label",{htmlFor:"prop-ry",children:"RY"}),K.jsx("input",{id:"prop-ry",type:"number",value:Math.round(u.radiusY),onChange:_=>t(u.id,{radiusY:parseFloat(_.target.value)||1}),"aria-label":"Radius Y"})]})]}),K.jsx("div",{className:De.row,children:K.jsxs("div",{className:De.field,children:[K.jsx("label",{htmlFor:"prop-rotation",children:""}),K.jsx("input",{id:"prop-rotation",type:"number",value:x==="mixed"?"":x,placeholder:x==="mixed"?"Mixed":void 0,onChange:_=>p("rotation",parseFloat(_.target.value)||0),"aria-label":"Rotation in degrees"})]})})]}),"fill"in u&&K.jsxs("div",{className:De.section,children:[K.jsxs("div",{className:De.sectionTitle,children:[K.jsx(q3,{size:12,style:{marginRight:4,verticalAlign:"middle"}}),"Fill"]}),K.jsx("div",{className:De.row,children:K.jsxs("div",{className:De.field,children:[K.jsx("input",{type:"color",value:u.fill,onChange:_=>{f?d({fill:_.target.value}):t(u.id,{fill:_.target.value})},"aria-label":"Fill color"}),K.jsx("input",{type:"text",value:u.fill,onChange:_=>{f?d({fill:_.target.value}):t(u.id,{fill:_.target.value})},className:De.hexInput,"aria-label":"Fill color hex value"})]})})]}),"stroke"in u&&K.jsxs("div",{className:De.section,children:[K.jsxs("div",{className:De.sectionTitle,children:[K.jsx(X3,{size:12,style:{marginRight:4,verticalAlign:"middle"}}),"Stroke"]}),K.jsx("div",{className:De.row,children:K.jsxs("div",{className:De.field,children:[K.jsx("input",{type:"color",value:u.stroke,onChange:_=>{f?d({stroke:_.target.value}):t(u.id,{stroke:_.target.value})},"aria-label":"Stroke color"}),K.jsx("input",{type:"text",value:u.stroke,onChange:_=>{f?d({stroke:_.target.value}):t(u.id,{stroke:_.target.value})},className:De.hexInput,"aria-label":"Stroke color hex value"})]})}),"strokeWidth"in u&&K.jsx("div",{className:De.row,children:K.jsxs("div",{className:De.field,children:[K.jsx("label",{htmlFor:"prop-stroke-width",children:"Width"}),K.jsx("input",{id:"prop-stroke-width",type:"number",min:"0",step:"0.5",value:u.strokeWidth,onChange:_=>{f?d({strokeWidth:parseFloat(_.target.value)||0}):t(u.id,{strokeWidth:parseFloat(_.target.value)||0})},"aria-label":"Stroke width"})]})})]}),!f&&u.type==="text"&&K.jsxs("div",{className:De.section,children:[K.jsxs("div",{className:De.sectionTitle,children:[K.jsx(hp,{size:12,style:{marginRight:4,verticalAlign:"middle"}}),"Text"]}),K.jsx("div",{className:De.row,children:K.jsx("div",{className:De.field,style:{flex:1},children:K.jsx("textarea",{value:u.text,onChange:_=>t(u.id,{text:_.target.value}),rows:3,"aria-label":"Text content",placeholder:"Enter text..."})})}),K.jsx("div",{className:De.row,children:K.jsxs("div",{className:De.field,children:[K.jsx("label",{htmlFor:"prop-font-size",children:"Size"}),K.jsx("input",{id:"prop-font-size",type:"number",min:"1",value:u.fontSize,onChange:_=>t(u.id,{fontSize:parseFloat(_.target.value)||12}),"aria-label":"Font size"})]})})]}),K.jsxs("div",{className:De.section,children:[K.jsxs("div",{className:De.sectionTitle,children:[K.jsx(W0,{size:12,style:{marginRight:4,verticalAlign:"middle"}}),"Appearance"]}),K.jsx("div",{className:De.row,children:K.jsxs("div",{className:De.field,children:[K.jsx("label",{htmlFor:"prop-opacity",children:"Opacity"}),K.jsx("input",{id:"prop-opacity",type:"range",min:"0",max:"1",step:"0.01",value:P==="mixed"?1:P,onChange:_=>p("opacity",parseFloat(_.target.value)),"aria-label":"Opacity"}),K.jsx("span",{children:P==="mixed"?"":`${Math.round(P*100)}%`})]})})]})]})}function $5({type:i}){const t={size:14};switch(i){case"rectangle":return K.jsx(Y0,{...t});case"circle":return K.jsx(J2,{...t});case"line":return K.jsx($2,{...t});case"text":return K.jsx(hp,{...t});case"image":return K.jsx(Z2,{...t});default:return K.jsx(Y0,{...t})}}function e6(){const{shapes:i,layers:t,activeLayerId:o,addLayer:a,updateLayer:d,deleteLayer:u,setActiveLayer:f,reorderLayers:p,reorderShapeInLayer:m}=Sr(),{selectedIds:v,selectMultiple:x}=nu(),[P,_]=ve.useState(null),[k,C]=ve.useState(null),[N,I]=ve.useState(null),j=ve.useCallback((V,X,$,ne)=>{V.dataTransfer.setData("type",X),V.dataTransfer.setData("id",$),V.dataTransfer.setData("index",ne.toString()),V.dataTransfer.effectAllowed="move",I($)},[]),T=ve.useCallback(()=>{_(null),C(null),I(null)},[]),S=ve.useCallback((V,X)=>{V.preventDefault(),V.dataTransfer.dropEffect="move",(V.dataTransfer.types.includes("text/plain")?null:"layer")&&_(X)},[]),L=ve.useCallback(()=>{_(null)},[]),M=ve.useCallback((V,X)=>{if(V.preventDefault(),V.dataTransfer.getData("type")!=="layer")return;const ne=parseInt(V.dataTransfer.getData("index"));ne!==X&&p(ne,X),_(null),I(null)},[p]),b=ve.useCallback((V,X)=>{V.preventDefault(),V.stopPropagation(),V.dataTransfer.dropEffect="move",C(X)},[]),Y=ve.useCallback(()=>{C(null)},[]),A=ve.useCallback((V,X,$)=>{if(V.preventDefault(),V.stopPropagation(),V.dataTransfer.getData("type")!=="shape")return;const ee=parseInt(V.dataTransfer.getData("index"));ee!==$&&m(X,ee,$),C(null),I(null)},[m]),U=ve.useCallback((V,X,$)=>{if(V.stopPropagation(),V.shiftKey||V.metaKey||V.ctrlKey){const ne=$?v.filter(ee=>ee!==X):[...v,X];x(ne)}else x([X])},[v,x]),B=ve.useCallback((V,X,$)=>{(V.key==="Enter"||V.key===" ")&&(V.preventDefault(),U(V,X,$))},[U]);return K.jsxs("div",{className:De.panel,role:"region","aria-label":"Layers panel",children:[K.jsxs("div",{className:De.header,children:[K.jsx("span",{children:"Layers"}),K.jsx("button",{className:De.iconButton,onClick:()=>a(),"aria-label":"Add new layer",children:K.jsx(o2,{size:16})})]}),K.jsx("div",{className:De.layersList,role:"tree","aria-label":"Layer hierarchy",children:[...t].reverse().map((V,X)=>{const $=t.length-1-X,ne=V.shapeIds.map(D=>i[D]).filter(Boolean),ee=o===V.id,pe=P===V.id;return K.jsxs("div",{className:`
                ${De.layerItem}
                ${ee?De.activeLayer:""}
                ${pe?De.dragOver:""}
              `,role:"treeitem","aria-expanded":"true","aria-selected":ee,draggable:!0,onDragStart:D=>j(D,"layer",V.id,$),onDragEnd:T,onDragOver:D=>S(D,V.id),onDragLeave:L,onDrop:D=>M(D,$),onClick:()=>f(V.id),children:[K.jsxs("div",{className:De.layerHeader,children:[K.jsx("button",{className:`${De.iconButton} ${V.visible?"":De.active}`,onClick:D=>{D.stopPropagation(),d(V.id,{visible:!V.visible})},"aria-label":V.visible?"Hide layer":"Show layer","aria-pressed":!V.visible,children:V.visible?K.jsx(W0,{size:14}):K.jsx(i2,{size:14})}),K.jsx("button",{className:`${De.iconButton} ${V.locked?De.active:""}`,onClick:D=>{D.stopPropagation(),d(V.id,{locked:!V.locked})},"aria-label":V.locked?"Unlock layer":"Lock layer","aria-pressed":V.locked,children:V.locked?K.jsx(V3,{size:14}):K.jsx(G3,{size:14})}),K.jsx(j3,{size:14,style:{color:"var(--text-tertiary)",marginRight:4},"aria-hidden":"true"}),K.jsx("span",{className:De.layerName,children:V.name}),K.jsx("button",{className:`${De.iconButton} ${De.danger}`,onClick:D=>{D.stopPropagation(),u(V.id)},disabled:t.length<=1,"aria-label":"Delete layer",children:K.jsx(J3,{size:14})})]}),ne.length>0&&K.jsx("div",{className:De.shapesList,role:"group","aria-label":`Shapes in ${V.name}`,children:[...ne].reverse().map((D,z)=>{const W=ne.length-1-z,G=v.includes(D.id),F=k===D.id,J=N===D.id;return K.jsxs("div",{className:`
                          ${De.shapeItem}
                          ${G?De.selectedShape:""}
                          ${F?De.dragOver:""}
                          ${J?De.dragging:""}
                        `,role:"treeitem","aria-selected":G,tabIndex:0,draggable:!0,onDragStart:Z=>j(Z,"shape",D.id,W),onDragEnd:T,onDragOver:Z=>b(Z,D.id),onDragLeave:Y,onDrop:Z=>A(Z,V.id,W),onClick:Z=>U(Z,D.id,G),onKeyDown:Z=>B(Z,D.id,G),children:[K.jsx("div",{className:De.shapeTypeIcon,"aria-hidden":"true",children:K.jsx($5,{type:D.type})}),K.jsx("div",{className:De.shapePreview,style:{backgroundColor:"fill"in D?D.fill:"transparent",borderColor:"stroke"in D?D.stroke:"var(--border-color)"},"aria-hidden":"true"}),K.jsx("span",{className:De.shapeName,children:D.name}),K.jsx("button",{className:`${De.iconButton} ${D.visible?"":De.active}`,onClick:Z=>{Z.stopPropagation(),Sr.getState().updateShape(D.id,{visible:!D.visible})},"aria-label":D.visible?"Hide shape":"Show shape","aria-pressed":!D.visible,children:D.visible?K.jsx(W0,{size:12}):K.jsx(i2,{size:12})})]},D.id)})})]},V.id)})}),K.jsxs("button",{className:De.addLayerButton,onClick:()=>a(),"aria-label":"Add new layer",children:[K.jsx(o2,{size:16}),K.jsx("span",{children:"Add Layer"})]})]})}const t6="_panel_zefyy_5",n6="_header_zefyy_11",r6="_status_zefyy_23",i6="_connected_zefyy_29",s6="_disconnected_zefyy_33",o6="_loading_zefyy_37",l6="_content_zefyy_51",a6="_error_zefyy_59",u6="_roomInfo_zefyy_89",c6="_label_zefyy_99",d6="_roomId_zefyy_107",h6="_copyButtons_zefyy_118",f6="_copyButton_zefyy_118",p6="_collaborators_zefyy_169",g6="_userList_zefyy_178",m6="_user_zefyy_178",y6="_userAvatar_zefyy_207",v6="_joinSection_zefyy_225",_6="_inputWrapper_zefyy_231",S6="_input_zefyy_231",w6="_extractedHint_zefyy_263",k6="_joinButton_zefyy_283",x6="_createButton_zefyy_284",C6="_leaveButton_zefyy_285",E6="_divider_zefyy_375",ht={panel:t6,header:n6,status:r6,connected:i6,disconnected:s6,loading:o6,content:l6,error:a6,roomInfo:u6,label:c6,roomId:d6,copyButtons:h6,copyButton:f6,collaborators:p6,userList:g6,user:m6,userAvatar:y6,joinSection:v6,inputWrapper:_6,input:S6,extractedHint:w6,joinButton:k6,createButton:x6,leaveButton:C6,divider:E6};function a2(i){const t=i.trim();try{const d=new URL(t).searchParams.get("room");if(d)return d}catch{}const o=t.match(/[?&]room=([^&]+)/);return o?o[1]:t}function P6({roomId:i,onJoinRoom:t,onCreateRoom:o,onLeaveRoom:a,error:d,isLoading:u}){const{isConnected:f,cursors:p,userName:m}=dp(),[v,x]=ve.useState(""),[P,_]=ve.useState(!1),[k,C]=ve.useState(!1),[N,I]=ve.useState(null),j=Object.keys(p).length+1;ve.useEffect(()=>{if(v.trim()){const A=a2(v);I(A!==v.trim()?A:null)}else I(null)},[v]);const T=()=>{const A=a2(v);A&&t(A)},S=()=>{const A=`room-${Date.now().toString(36)}`;o(A)},L=()=>{i&&(navigator.clipboard.writeText(i),_(!0),setTimeout(()=>_(!1),2e3))},M=()=>{if(i){const A=`${window.location.origin}?room=${i}`;navigator.clipboard.writeText(A),C(!0),setTimeout(()=>C(!1),2e3)}},b=A=>{x(A.target.value)},Y=A=>{A.key==="Enter"&&v.trim()&&!u&&T()};return K.jsxs("div",{className:ht.panel,children:[K.jsxs("div",{className:ht.header,children:[K.jsx($3,{size:16}),K.jsx("span",{children:"Collaboration"}),K.jsx("div",{className:ht.status,children:u?K.jsx(s2,{size:14,className:ht.loading}):f?K.jsx(t5,{size:14,className:ht.connected}):K.jsx(e5,{size:14,className:ht.disconnected})})]}),i&&f?K.jsxs("div",{className:ht.content,children:[K.jsxs("div",{className:ht.roomInfo,children:[K.jsx("span",{className:ht.label,children:"Room ID:"}),K.jsx("span",{className:ht.roomId,children:i})]}),K.jsxs("div",{className:ht.copyButtons,children:[K.jsxs("button",{className:ht.copyButton,onClick:L,title:"Copy room ID",children:[P?K.jsx(n2,{size:14}):K.jsx(U3,{size:14}),K.jsx("span",{children:"Copy ID"})]}),K.jsxs("button",{className:ht.copyButton,onClick:M,title:"Copy invite link",children:[k?K.jsx(n2,{size:14}):K.jsx(B3,{size:14}),K.jsx("span",{children:"Copy Link"})]})]}),K.jsxs("div",{className:ht.collaborators,children:[K.jsxs("span",{className:ht.label,children:[j," collaborator",j!==1?"s":""]}),K.jsxs("div",{className:ht.userList,children:[K.jsxs("div",{className:ht.user,children:[K.jsx("div",{className:ht.userAvatar,style:{backgroundColor:"#4a9eff"},children:m[0].toUpperCase()}),K.jsxs("span",{children:[m," (you)"]})]}),Object.values(p).map(A=>K.jsxs("div",{className:ht.user,children:[K.jsx("div",{className:ht.userAvatar,style:{backgroundColor:A.color},children:A.name[0].toUpperCase()}),K.jsx("span",{children:A.name})]},A.id))]})]}),K.jsx("button",{className:ht.leaveButton,onClick:a,children:"Leave Room"})]}):K.jsxs("div",{className:ht.content,children:[d&&K.jsxs("div",{className:ht.error,children:[K.jsx(z3,{size:14}),K.jsx("span",{children:d})]}),K.jsxs("div",{className:ht.joinSection,children:[K.jsxs("div",{className:ht.inputWrapper,children:[K.jsx("input",{type:"text",placeholder:"Enter room ID or paste invite link",value:v,onChange:b,onKeyDown:Y,className:ht.input,disabled:u}),N&&K.jsxs("div",{className:ht.extractedHint,children:["Will join: ",K.jsx("strong",{children:N})]})]}),K.jsx("button",{className:ht.joinButton,onClick:T,disabled:!v.trim()||u,children:u?K.jsx(s2,{size:14,className:ht.loading}):"Join"})]}),K.jsx("div",{className:ht.divider,children:K.jsx("span",{children:"or"})}),K.jsx("button",{className:ht.createButton,onClick:S,disabled:u,children:"Create New Room"})]})]})}function N6(){const{shapes:i,layers:t}=Sr(),{selectedIds:o,select:a,selectMultiple:d,selectAll:u,clearSelection:f,toggleSelection:p,isSelected:m}=nu(),v=ve.useCallback(()=>o.map(k=>i[k]).filter(k=>k!==void 0),[o,i]),x=ve.useCallback(()=>{const k=[];return t.forEach(C=>{C.visible&&!C.locked&&C.shapeIds.forEach(N=>{const I=i[N];I&&I.visible&&!I.locked&&k.push(N)})}),k},[t,i]),P=ve.useCallback(()=>{const k=x();u(k)},[x,u]),_=ve.useCallback(k=>{const C=[];return Object.values(i).forEach(N=>{const I=t.find(A=>A.id===N.layerId);if(!(I!=null&&I.visible)||I.locked||!N.visible||N.locked)return;let j=0,T=0,S=N.x,L=N.y;if("width"in N&&"height"in N)j=N.width,T=N.height;else if("radiusX"in N&&"radiusY"in N)j=N.radiusX*2,T=N.radiusY*2,S=N.x-N.radiusX,L=N.y-N.radiusY;else if("points"in N&&N.points.length>=4){const A=N.points.filter((ne,ee)=>ee%2===0),U=N.points.filter((ne,ee)=>ee%2===1),B=Math.min(...A),V=Math.max(...A),X=Math.min(...U),$=Math.max(...U);S=N.x+B,L=N.y+X,j=V-B,T=$-X}const M={left:S,right:S+j,top:L,bottom:L+T},b={left:k.x,right:k.x+k.width,top:k.y,bottom:k.y+k.height};M.left<b.right&&M.right>b.left&&M.top<b.bottom&&M.bottom>b.top&&C.push(N.id)}),C},[i,t]);return{selectedIds:o,selectedShapes:v(),select:a,selectMultiple:d,selectAll:P,clearSelection:f,toggleSelection:p,isSelected:m,getShapesInBounds:_,getAllShapeIds:x}}function T6(){const{setTool:i}=ru(),{deleteShapes:t,duplicateShapes:o,viewport:a,zoomTo:d,fitToScreen:u}=Sr(),{selectedIds:f,clearSelection:p,selectMultiple:m}=nu(),{undo:v,redo:x}=em(),{selectAll:P}=N6(),_=ve.useCallback(k=>{if(k.target instanceof HTMLInputElement||k.target instanceof HTMLTextAreaElement)return;const C=k.ctrlKey||k.metaKey;if(!C&&!k.shiftKey)switch(k.key.toLowerCase()){case"v":i("select");break;case"h":i("pan");break;case"r":i("rectangle");break;case"o":i("circle");break;case"l":i("line");break;case"t":i("text");break;case"i":i("image");break;case"escape":p(),i("select");break;case"delete":case"backspace":f.length>0&&(t(f),p());break}if(C)switch(k.key.toLowerCase()){case"z":k.preventDefault(),k.shiftKey?x():v();break;case"y":k.preventDefault(),x();break;case"a":k.preventDefault(),P();break;case"d":if(k.preventDefault(),f.length>0){const N=o(f);m(N)}break;case"0":k.preventDefault(),d(1);break;case"1":k.preventDefault(),u(window.innerWidth-560,window.innerHeight-48);break;case"=":case"+":k.preventDefault(),d(a.scale*1.25);break;case"-":k.preventDefault(),d(a.scale/1.25);break}},[i,p,f,t,v,x,P,o,m,a,d,u]);ve.useEffect(()=>(window.addEventListener("keydown",_),()=>window.removeEventListener("keydown",_)),[_])}const Ar=()=>new Map,q0=i=>{const t=Ar();return i.forEach((o,a)=>{t.set(a,o)}),t},ts=(i,t,o)=>{let a=i.get(t);return a===void 0&&i.set(t,a=o()),a},R6=(i,t)=>{const o=[];for(const[a,d]of i)o.push(t(d,a));return o},L6=(i,t)=>{for(const[o,a]of i)if(t(a,o))return!0;return!1},bo=()=>new Set,L0=i=>i[i.length-1],M6=(i,t)=>{for(let o=0;o<t.length;o++)i.push(t[o])},bs=Array.from,fp=(i,t)=>{for(let o=0;o<i.length;o++)if(!t(i[o],o,i))return!1;return!0},tm=(i,t)=>{for(let o=0;o<i.length;o++)if(t(i[o],o,i))return!0;return!1},D6=(i,t)=>{const o=new Array(i);for(let a=0;a<i;a++)o[a]=t(a,o);return o},cf=Array.isArray;class nm{constructor(){this._observers=Ar()}on(t,o){return ts(this._observers,t,bo).add(o),o}once(t,o){const a=(...d)=>{this.off(t,a),o(...d)};this.on(t,a)}off(t,o){const a=this._observers.get(t);a!==void 0&&(a.delete(o),a.size===0&&this._observers.delete(t))}emit(t,o){return bs((this._observers.get(t)||Ar()).values()).forEach(a=>a(...o))}destroy(){this._observers=Ar()}}class I6{constructor(){this._observers=Ar()}on(t,o){ts(this._observers,t,bo).add(o)}once(t,o){const a=(...d)=>{this.off(t,a),o(...d)};this.on(t,a)}off(t,o){const a=this._observers.get(t);a!==void 0&&(a.delete(o),a.size===0&&this._observers.delete(t))}emit(t,o){return bs((this._observers.get(t)||Ar()).values()).forEach(a=>a(...o))}destroy(){this._observers=Ar()}}const Ni=Math.floor,Uh=Math.abs,pp=(i,t)=>i<t?i:t,Al=(i,t)=>i>t?i:t,A6=Math.pow,rm=i=>i!==0?i<0:1/i<0,u2=1,c2=2,M0=4,D0=8,ed=32,zs=64,Vr=128,df=31,X0=63,Tl=127,F6=2147483647,Wh=Number.MAX_SAFE_INTEGER,d2=Number.MIN_SAFE_INTEGER,O6=Number.isInteger||(i=>typeof i=="number"&&isFinite(i)&&Ni(i)===i),im=String.fromCharCode,z6=i=>i.toLowerCase(),b6=/^\s*/g,U6=i=>i.replace(b6,""),j6=/([A-Z])/g,h2=(i,t)=>U6(i.replace(j6,o=>`${t}${z6(o)}`)),B6=i=>{const t=unescape(encodeURIComponent(i)),o=t.length,a=new Uint8Array(o);for(let d=0;d<o;d++)a[d]=t.codePointAt(d);return a},td=typeof TextEncoder<"u"?new TextEncoder:null,G6=i=>td.encode(i),V6=td?G6:B6;let Jc=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});Jc&&Jc.decode(new Uint8Array).length===1&&(Jc=null);const H6=(i,t)=>D6(t,()=>i).join("");class dd{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const rr=()=>new dd,gp=i=>{let t=i.cpos;for(let o=0;o<i.bufs.length;o++)t+=i.bufs[o].length;return t},bt=i=>{const t=new Uint8Array(gp(i));let o=0;for(let a=0;a<i.bufs.length;a++){const d=i.bufs[a];t.set(d,o),o+=d.length}return t.set(new Uint8Array(i.cbuf.buffer,0,i.cpos),o),t},W6=(i,t)=>{const o=i.cbuf.length;o-i.cpos<t&&(i.bufs.push(new Uint8Array(i.cbuf.buffer,0,i.cpos)),i.cbuf=new Uint8Array(Al(o,t)*2),i.cpos=0)},Dn=(i,t)=>{const o=i.cbuf.length;i.cpos===o&&(i.bufs.push(i.cbuf),i.cbuf=new Uint8Array(o*2),i.cpos=0),i.cbuf[i.cpos++]=t},K0=Dn,be=(i,t)=>{for(;t>Tl;)Dn(i,Vr|Tl&t),t=Ni(t/128);Dn(i,Tl&t)},mp=(i,t)=>{const o=rm(t);for(o&&(t=-t),Dn(i,(t>X0?Vr:0)|(o?zs:0)|X0&t),t=Ni(t/64);t>0;)Dn(i,(t>Tl?Vr:0)|Tl&t),t=Ni(t/128)},Q0=new Uint8Array(3e4),Y6=Q0.length/3,q6=(i,t)=>{if(t.length<Y6){const o=td.encodeInto(t,Q0).written||0;be(i,o);for(let a=0;a<o;a++)Dn(i,Q0[a])}else en(i,V6(t))},X6=(i,t)=>{const o=unescape(encodeURIComponent(t)),a=o.length;be(i,a);for(let d=0;d<a;d++)Dn(i,o.codePointAt(d))},Rl=td&&td.encodeInto?q6:X6,hf=(i,t)=>{const o=i.cbuf.length,a=i.cpos,d=pp(o-a,t.length),u=t.length-d;i.cbuf.set(t.subarray(0,d),a),i.cpos+=d,u>0&&(i.bufs.push(i.cbuf),i.cbuf=new Uint8Array(Al(o*2,u)),i.cbuf.set(t.subarray(d)),i.cpos=u)},en=(i,t)=>{be(i,t.byteLength),hf(i,t)},yp=(i,t)=>{W6(i,t);const o=new DataView(i.cbuf.buffer,i.cpos,t);return i.cpos+=t,o},K6=(i,t)=>yp(i,4).setFloat32(0,t,!1),Q6=(i,t)=>yp(i,8).setFloat64(0,t,!1),J6=(i,t)=>yp(i,8).setBigInt64(0,t,!1),f2=new DataView(new ArrayBuffer(4)),Z6=i=>(f2.setFloat32(0,i),f2.getFloat32(0)===i),nd=(i,t)=>{switch(typeof t){case"string":Dn(i,119),Rl(i,t);break;case"number":O6(t)&&Uh(t)<=F6?(Dn(i,125),mp(i,t)):Z6(t)?(Dn(i,124),K6(i,t)):(Dn(i,123),Q6(i,t));break;case"bigint":Dn(i,122),J6(i,t);break;case"object":if(t===null)Dn(i,126);else if(cf(t)){Dn(i,117),be(i,t.length);for(let o=0;o<t.length;o++)nd(i,t[o])}else if(t instanceof Uint8Array)Dn(i,116),en(i,t);else{Dn(i,118);const o=Object.keys(t);be(i,o.length);for(let a=0;a<o.length;a++){const d=o[a];Rl(i,d),nd(i,t[d])}}break;case"boolean":Dn(i,t?120:121);break;default:Dn(i,127)}};class p2 extends dd{constructor(t){super(),this.w=t,this.s=null,this.count=0}write(t){this.s===t?this.count++:(this.count>0&&be(this,this.count-1),this.count=1,this.w(this,t),this.s=t)}}const g2=i=>{i.count>0&&(mp(i.encoder,i.count===1?i.s:-i.s),i.count>1&&be(i.encoder,i.count-2))};class jh{constructor(){this.encoder=new dd,this.s=0,this.count=0}write(t){this.s===t?this.count++:(g2(this),this.count=1,this.s=t)}toUint8Array(){return g2(this),bt(this.encoder)}}const m2=i=>{if(i.count>0){const t=i.diff*2+(i.count===1?0:1);mp(i.encoder,t),i.count>1&&be(i.encoder,i.count-2)}};class I0{constructor(){this.encoder=new dd,this.s=0,this.count=0,this.diff=0}write(t){this.diff===t-this.s?(this.s=t,this.count++):(m2(this),this.count=1,this.diff=t-this.s,this.s=t)}toUint8Array(){return m2(this),bt(this.encoder)}}class $6{constructor(){this.sarr=[],this.s="",this.lensE=new jh}write(t){this.s+=t,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(t.length)}toUint8Array(){const t=new dd;return this.sarr.push(this.s),this.s="",Rl(t,this.sarr.join("")),hf(t,this.lensE.toUint8Array()),bt(t)}}const Zi=i=>new Error(i),Pi=()=>{throw Zi("Method unimplemented")},ai=()=>{throw Zi("Unexpected case")},sm=Zi("Unexpected end of array"),om=Zi("Integer out of Range");class ff{constructor(t){this.arr=t,this.pos=0}}const Go=i=>new ff(i),e8=i=>i.pos!==i.arr.length,t8=(i,t)=>{const o=new Uint8Array(i.arr.buffer,i.pos+i.arr.byteOffset,t);return i.pos+=t,o},nr=i=>t8(i,qe(i)),Ka=i=>i.arr[i.pos++],qe=i=>{let t=0,o=1;const a=i.arr.length;for(;i.pos<a;){const d=i.arr[i.pos++];if(t=t+(d&Tl)*o,o*=128,d<Vr)return t;if(t>Wh)throw om}throw sm},vp=i=>{let t=i.arr[i.pos++],o=t&X0,a=64;const d=(t&zs)>0?-1:1;if((t&Vr)===0)return d*o;const u=i.arr.length;for(;i.pos<u;){if(t=i.arr[i.pos++],o=o+(t&Tl)*a,a*=128,t<Vr)return d*o;if(o>Wh)throw om}throw sm},n8=i=>{let t=qe(i);if(t===0)return"";{let o=String.fromCodePoint(Ka(i));if(--t<100)for(;t--;)o+=String.fromCodePoint(Ka(i));else for(;t>0;){const a=t<1e4?t:1e4,d=i.arr.subarray(i.pos,i.pos+a);i.pos+=a,o+=String.fromCodePoint.apply(null,d),t-=a}return decodeURIComponent(escape(o))}},r8=i=>Jc.decode(nr(i)),zo=Jc?r8:n8,_p=(i,t)=>{const o=new DataView(i.arr.buffer,i.arr.byteOffset+i.pos,t);return i.pos+=t,o},i8=i=>_p(i,4).getFloat32(0,!1),s8=i=>_p(i,8).getFloat64(0,!1),o8=i=>_p(i,8).getBigInt64(0,!1),l8=[i=>{},i=>null,vp,i8,s8,o8,i=>!1,i=>!0,zo,i=>{const t=qe(i),o={};for(let a=0;a<t;a++){const d=zo(i);o[d]=rd(i)}return o},i=>{const t=qe(i),o=[];for(let a=0;a<t;a++)o.push(rd(i));return o},nr],rd=i=>l8[127-Ka(i)](i);class y2 extends ff{constructor(t,o){super(t),this.reader=o,this.s=null,this.count=0}read(){return this.count===0&&(this.s=this.reader(this),e8(this)?this.count=qe(this)+1:this.count=-1),this.count--,this.s}}class Bh extends ff{constructor(t){super(t),this.s=0,this.count=0}read(){if(this.count===0){this.s=vp(this);const t=rm(this.s);this.count=1,t&&(this.s=-this.s,this.count=qe(this)+2)}return this.count--,this.s}}class A0 extends ff{constructor(t){super(t),this.s=0,this.count=0,this.diff=0}read(){if(this.count===0){const t=vp(this),o=t&1;this.diff=Ni(t/2),this.count=1,o&&(this.count=qe(this)+2)}return this.s+=this.diff,this.count--,this.s}}class a8{constructor(t){this.decoder=new Bh(t),this.str=zo(this.decoder),this.spos=0}read(){const t=this.spos+this.decoder.read(),o=this.str.slice(this.spos,t);return this.spos=t,o}}const u8=crypto.getRandomValues.bind(crypto),lm=()=>u8(new Uint32Array(1))[0],c8="10000000-1000-4000-8000"+-1e11,d8=()=>c8.replace(/[018]/g,i=>(i^lm()&15>>i/4).toString(16)),Ll=Date.now,v2=i=>new Promise(i);Promise.all.bind(Promise);const _2=i=>i===void 0?null:i;class h8{constructor(){this.map=new Map}setItem(t,o){this.map.set(t,o)}getItem(t){return this.map.get(t)}}let am=new h8,Sp=!0;try{typeof localStorage<"u"&&localStorage&&(am=localStorage,Sp=!1)}catch{}const um=am,f8=i=>Sp||addEventListener("storage",i),p8=i=>Sp||removeEventListener("storage",i),id=Symbol("Equality"),cm=(i,t)=>{var o;return i===t||!!((o=i==null?void 0:i[id])!=null&&o.call(i,t))||!1},g8=i=>typeof i=="object",m8=Object.assign,y8=Object.keys,v8=(i,t)=>{for(const o in i)t(i[o],o)},_8=(i,t)=>{const o=[];for(const a in i)o.push(t(i[a],a));return o},Yh=i=>y8(i).length,S8=i=>{for(const t in i)return!1;return!0},hd=(i,t)=>{for(const o in i)if(!t(i[o],o))return!1;return!0},wp=(i,t)=>Object.prototype.hasOwnProperty.call(i,t),w8=(i,t)=>i===t||Yh(i)===Yh(t)&&hd(i,(o,a)=>(o!==void 0||wp(t,a))&&cm(t[a],o)),k8=Object.freeze,dm=i=>{for(const t in i){const o=i[t];(typeof o=="object"||typeof o=="function")&&dm(i[t])}return k8(i)},kp=(i,t,o=0)=>{try{for(;o<i.length;o++)i[o](...t)}finally{o<i.length&&kp(i,t,o+1)}},x8=i=>i,Ha=(i,t)=>{if(i===t)return!0;if(i==null||t==null||i.constructor!==t.constructor&&(i.constructor||Object)!==(t.constructor||Object))return!1;if(i[id]!=null)return i[id](t);switch(i.constructor){case ArrayBuffer:i=new Uint8Array(i),t=new Uint8Array(t);case Uint8Array:{if(i.byteLength!==t.byteLength)return!1;for(let o=0;o<i.length;o++)if(i[o]!==t[o])return!1;break}case Set:{if(i.size!==t.size)return!1;for(const o of i)if(!t.has(o))return!1;break}case Map:{if(i.size!==t.size)return!1;for(const o of i.keys())if(!t.has(o)||!Ha(i.get(o),t.get(o)))return!1;break}case void 0:case Object:if(Yh(i)!==Yh(t))return!1;for(const o in i)if(!wp(i,o)||!Ha(i[o],t[o]))return!1;break;case Array:if(i.length!==t.length)return!1;for(let o=0;o<i.length;o++)if(!Ha(i[o],t[o]))return!1;break;default:return!1}return!0},C8=(i,t)=>t.includes(i);var hm={};const Uo=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name)&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]",fm=typeof window<"u"&&typeof document<"u"&&!Uo;let Ji;const E8=()=>{if(Ji===void 0)if(Uo){Ji=Ar();const i=process.argv;let t=null;for(let o=0;o<i.length;o++){const a=i[o];a[0]==="-"?(t!==null&&Ji.set(t,""),t=a):t!==null&&(Ji.set(t,a),t=null)}t!==null&&Ji.set(t,"")}else typeof location=="object"?(Ji=Ar(),(location.search||"?").slice(1).split("&").forEach(i=>{if(i.length!==0){const[t,o]=i.split("=");Ji.set(`--${h2(t,"-")}`,o),Ji.set(`-${h2(t,"-")}`,o)}})):Ji=Ar();return Ji},J0=i=>E8().has(i),qh=i=>_2(Uo?hm[i.toUpperCase().replaceAll("-","_")]:um.getItem(i)),pm=i=>J0("--"+i)||qh(i)!==null,P8=pm("production"),N8=Uo&&C8(hm.FORCE_COLOR,["true","1","2"]),T8=N8||!J0("--no-colors")&&!pm("no-color")&&(!Uo||process.stdout.isTTY)&&(!Uo||J0("--color")||qh("COLORTERM")!==null||(qh("TERM")||"").includes("color")),gm=i=>new Uint8Array(i),R8=(i,t,o)=>new Uint8Array(i,t,o),L8=i=>new Uint8Array(i),M8=i=>{let t="";for(let o=0;o<i.byteLength;o++)t+=im(i[o]);return btoa(t)},D8=i=>Buffer.from(i.buffer,i.byteOffset,i.byteLength).toString("base64"),I8=i=>{const t=atob(i),o=gm(t.length);for(let a=0;a<t.length;a++)o[a]=t.charCodeAt(a);return o},A8=i=>{const t=Buffer.from(i,"base64");return R8(t.buffer,t.byteOffset,t.byteLength)},F8=fm?M8:D8,O8=fm?I8:A8,z8=i=>{const t=gm(i.byteLength);return t.set(i),t};class b8{constructor(t,o){this.left=t,this.right=o}}const Os=(i,t)=>new b8(i,t),S2=i=>i.next()>=.5,F0=(i,t,o)=>Ni(i.next()*(o+1-t)+t),mm=(i,t,o)=>Ni(i.next()*(o+1-t)+t),xp=(i,t,o)=>mm(i,t,o),U8=i=>im(xp(i,97,122)),j8=(i,t=0,o=20)=>{const a=xp(i,t,o);let d="";for(let u=0;u<a;u++)d+=U8(i);return d},O0=(i,t)=>t[xp(i,0,t.length-1)],B8=Symbol("0schema");class G8{constructor(){this._rerrs=[]}extend(t,o,a,d=null){this._rerrs.push({path:t,expected:o,has:a,message:d})}toString(){const t=[];for(let o=this._rerrs.length-1;o>0;o--){const a=this._rerrs[o];t.push(H6(" ",(this._rerrs.length-o)*2)+`${a.path!=null?`[${a.path}] `:""}${a.has} doesn't match ${a.expected}. ${a.message}`)}return t.join(`
`)}}const Z0=(i,t)=>i===t?!0:i==null||t==null||i.constructor!==t.constructor?!1:i[id]?cm(i,t):cf(i)?fp(i,o=>tm(t,a=>Z0(o,a))):g8(i)?hd(i,(o,a)=>Z0(o,t[a])):!1;class sr{extends(t){let[o,a]=[this.shape,t.shape];return this.constructor._dilutes&&([a,o]=[o,a]),Z0(o,a)}equals(t){return this.constructor===t.constructor&&Ha(this.shape,t.shape)}[B8](){return!0}[id](t){return this.equals(t)}validate(t){return this.check(t)}check(t,o){Pi()}get nullable(){return iu(this,vf)}get optional(){return new _m(this)}cast(t){return w2(t,this),t}expect(t){return w2(t,this),t}}Rh(sr,"_dilutes",!1);class Cp extends sr{constructor(t,o){super(),this.shape=t,this._c=o}check(t,o=void 0){const a=(t==null?void 0:t.constructor)===this.shape&&(this._c==null||this._c(t));return!a&&(o==null||o.extend(null,this.shape.name,t==null?void 0:t.constructor.name,(t==null?void 0:t.constructor)!==this.shape?"Constructor match failed":"Check failed")),a}}const un=(i,t=null)=>new Cp(i,t);un(Cp);class Ep extends sr{constructor(t){super(),this.shape=t}check(t,o){const a=this.shape(t);return!a&&(o==null||o.extend(null,"custom prop",t==null?void 0:t.constructor.name,"failed to check custom prop")),a}}const Fn=i=>new Ep(i);un(Ep);class pf extends sr{constructor(t){super(),this.shape=t}check(t,o){const a=this.shape.some(d=>d===t);return!a&&(o==null||o.extend(null,this.shape.join(" | "),t.toString())),a}}const gf=(...i)=>new pf(i),ym=un(pf),V8=RegExp.escape||(i=>i.replace(/[().|&,$^[\]]/g,t=>"\\"+t)),vm=i=>{if(Qa.check(i))return[V8(i)];if(ym.check(i))return i.shape.map(t=>t+"");if(Tm.check(i))return["[+-]?\\d+.?\\d*"];if(Rm.check(i))return[".*"];if(Kh.check(i))return i.shape.map(vm).flat(1);ai()};class H8 extends sr{constructor(t){super(),this.shape=t,this._r=new RegExp("^"+t.map(vm).map(o=>`(${o.join("|")})`).join("")+"$")}check(t,o){const a=this._r.exec(t)!=null;return!a&&(o==null||o.extend(null,this._r.toString(),t.toString(),"String doesn't match string template.")),a}}un(H8);const W8=Symbol("optional");class _m extends sr{constructor(t){super(),this.shape=t}check(t,o){const a=t===void 0||this.shape.check(t);return!a&&(o==null||o.extend(null,"undefined (optional)","()")),a}get[W8](){return!0}}const Y8=un(_m);class q8 extends sr{check(t,o){return o==null||o.extend(null,"never",typeof t),!1}}un(q8);const of=class of extends sr{constructor(t,o=!1){super(),this.shape=t,this._isPartial=o}get partial(){return new of(this.shape,!0)}check(t,o){return t==null?(o==null||o.extend(null,"object","null"),!1):hd(this.shape,(a,d)=>{const u=this._isPartial&&!wp(t,d)||a.check(t[d],o);return!u&&(o==null||o.extend(d.toString(),a.toString(),typeof t[d],"Object property does not match")),u})}};Rh(of,"_dilutes",!0);let Xh=of;const X8=i=>new Xh(i),K8=un(Xh),Q8=Fn(i=>i!=null&&(i.constructor===Object||i.constructor==null));class Sm extends sr{constructor(t,o){super(),this.shape={keys:t,values:o}}check(t,o){return t!=null&&hd(t,(a,d)=>{const u=this.shape.keys.check(d,o);return!u&&(o==null||o.extend(d+"","Record",typeof t,u?"Key doesn't match schema":"Value doesn't match value")),u&&this.shape.values.check(a,o)})}}const wm=(i,t)=>new Sm(i,t),J8=un(Sm);class km extends sr{constructor(t){super(),this.shape=t}check(t,o){return t!=null&&hd(this.shape,(a,d)=>{const u=a.check(t[d],o);return!u&&(o==null||o.extend(d.toString(),"Tuple",typeof a)),u})}}const Z8=(...i)=>new km(i);un(km);class xm extends sr{constructor(t){super(),this.shape=t.length===1?t[0]:new mf(t)}check(t,o){const a=cf(t)&&fp(t,d=>this.shape.check(d));return!a&&(o==null||o.extend(null,"Array","")),a}}const Cm=(...i)=>new xm(i),$8=un(xm),e_=Fn(i=>cf(i));class Em extends sr{constructor(t,o){super(),this.shape=t,this._c=o}check(t,o){const a=t instanceof this.shape&&(this._c==null||this._c(t));return!a&&(o==null||o.extend(null,this.shape.name,t==null?void 0:t.constructor.name)),a}}const t_=(i,t=null)=>new Em(i,t);un(Em);const n_=t_(sr);class r_ extends sr{constructor(t){super(),this.len=t.length-1,this.args=Z8(...t.slice(-1)),this.res=t[this.len]}check(t,o){const a=t.constructor===Function&&t.length<=this.len;return!a&&(o==null||o.extend(null,"function",typeof t)),a}}const i_=un(r_),s_=Fn(i=>typeof i=="function");class o_ extends sr{constructor(t){super(),this.shape=t}check(t,o){const a=fp(this.shape,d=>d.check(t,o));return!a&&(o==null||o.extend(null,"Intersectinon",typeof t)),a}}un(o_,i=>i.shape.length>0);class mf extends sr{constructor(t){super(),this.shape=t}check(t,o){const a=tm(this.shape,d=>d.check(t,o));return o==null||o.extend(null,"Union",typeof t),a}}Rh(mf,"_dilutes",!0);const iu=(...i)=>i.findIndex(t=>Kh.check(t))>=0?iu(...i.map(t=>sd(t)).map(t=>Kh.check(t)?t.shape:[t]).flat(1)):i.length===1?i[0]:new mf(i),Kh=un(mf),Pm=()=>!0,Qh=Fn(Pm),l_=un(Ep,i=>i.shape===Pm),Pp=Fn(i=>typeof i=="bigint"),a_=Fn(i=>i===Pp),Nm=Fn(i=>typeof i=="symbol");Fn(i=>i===Nm);const Wa=Fn(i=>typeof i=="number"),Tm=Fn(i=>i===Wa),Qa=Fn(i=>typeof i=="string"),Rm=Fn(i=>i===Qa),yf=Fn(i=>typeof i=="boolean"),u_=Fn(i=>i===yf),Lm=gf(void 0);un(pf,i=>i.shape.length===1&&i.shape[0]===void 0);gf(void 0);const vf=gf(null),c_=un(pf,i=>i.shape.length===1&&i.shape[0]===null);un(Uint8Array);un(Cp,i=>i.shape===Uint8Array);const d_=iu(Wa,Qa,vf,Lm,Pp,yf,Nm);(()=>{const i=Cm(Qh),t=wm(Qa,Qh),o=iu(Wa,Qa,vf,yf,i,t);return i.shape=o,t.shape.values=o,o})();const sd=i=>{if(n_.check(i))return i;if(Q8.check(i)){const t={};for(const o in i)t[o]=sd(i[o]);return X8(t)}else{if(e_.check(i))return iu(...i.map(sd));if(d_.check(i))return gf(i);if(s_.check(i))return un(i)}ai()},w2=P8?()=>{}:(i,t)=>{const o=new G8;if(!t.check(i,o))throw Zi(`Expected value to be of type ${t.constructor.name}.
${o.toString()}`)};class h_{constructor(t){this.patterns=[],this.$state=t}if(t,o){return this.patterns.push({if:sd(t),h:o}),this}else(t){return this.if(Qh,t)}done(){return(t,o)=>{for(let a=0;a<this.patterns.length;a++){const d=this.patterns[a];if(d.if.check(t))return d.h(t,o)}throw Zi("Unhandled pattern")}}}const f_=i=>new h_(i),Mm=f_(Qh).if(Tm,(i,t)=>F0(t,d2,Wh)).if(Rm,(i,t)=>j8(t)).if(u_,(i,t)=>S2(t)).if(a_,(i,t)=>BigInt(F0(t,d2,Wh))).if(Kh,(i,t)=>ja(t,O0(t,i.shape))).if(K8,(i,t)=>{const o={};for(const a in i.shape){let d=i.shape[a];if(Y8.check(d)){if(S2(t))continue;d=d.shape}o[a]=Mm(d,t)}return o}).if($8,(i,t)=>{const o=[],a=mm(t,0,42);for(let d=0;d<a;d++)o.push(ja(t,i.shape));return o}).if(ym,(i,t)=>O0(t,i.shape)).if(c_,(i,t)=>null).if(i_,(i,t)=>{const o=ja(t,i.res);return()=>o}).if(l_,(i,t)=>ja(t,O0(t,[Wa,Qa,vf,Lm,Pp,yf,Cm(Wa),wm(iu("a","b","c"),Wa)]))).if(J8,(i,t)=>{const o={},a=F0(t,0,3);for(let d=0;d<a;d++){const u=ja(t,i.shape.keys),f=ja(t,i.shape.values);o[u]=f}return o}).done(),ja=(i,t)=>Mm(sd(t),i),_f=typeof document<"u"?document:{};Fn(i=>i.nodeType===v_);typeof DOMParser<"u"&&new DOMParser;Fn(i=>i.nodeType===g_);Fn(i=>i.nodeType===m_);const p_=i=>R6(i,(t,o)=>`${o}:${t};`).join(""),g_=_f.ELEMENT_NODE,m_=_f.TEXT_NODE,y_=_f.DOCUMENT_NODE,v_=_f.DOCUMENT_FRAGMENT_NODE;Fn(i=>i.nodeType===y_);const Us=Symbol,Dm=Us(),Im=Us(),__=Us(),S_=Us(),w_=Us(),Am=Us(),k_=Us(),Np=Us(),x_=Us(),C_=i=>{var d;i.length===1&&((d=i[0])==null?void 0:d.constructor)===Function&&(i=i[0]());const t=[],o=[];let a=0;for(;a<i.length;a++){const u=i[a];if(u===void 0)break;if(u.constructor===String||u.constructor===Number)t.push(u);else if(u.constructor===Object)break}for(a>0&&o.push(t.join(""));a<i.length;a++){const u=i[a];u instanceof Symbol||o.push(u)}return o},E_={[Dm]:Os("font-weight","bold"),[Im]:Os("font-weight","normal"),[__]:Os("color","blue"),[w_]:Os("color","green"),[S_]:Os("color","grey"),[Am]:Os("color","red"),[k_]:Os("color","purple"),[Np]:Os("color","orange"),[x_]:Os("color","black")},P_=i=>{var f;i.length===1&&((f=i[0])==null?void 0:f.constructor)===Function&&(i=i[0]());const t=[],o=[],a=Ar();let d=[],u=0;for(;u<i.length;u++){const p=i[u],m=E_[p];if(m!==void 0)a.set(m.left,m.right);else{if(p===void 0)break;if(p.constructor===String||p.constructor===Number){const v=p_(a);u>0||v.length>0?(t.push("%c"+p),o.push(v)):t.push(p)}else break}}for(u>0&&(d=o,d.unshift(t.join("")));u<i.length;u++){const p=i[u];p instanceof Symbol||d.push(p)}return d},Fm=T8?P_:C_,N_=(...i)=>{console.log(...Fm(i)),Om.forEach(t=>t.print(i))},T_=(...i)=>{console.warn(...Fm(i)),i.unshift(Np),Om.forEach(t=>t.print(i))},Om=bo(),zm=i=>({[Symbol.iterator](){return this},next:i}),R_=(i,t)=>zm(()=>{let o;do o=i.next();while(!o.done&&!t(o.value));return o}),z0=(i,t)=>zm(()=>{const{done:o,value:a}=i.next();return{done:o,value:o?void 0:t(a)}});class Tp{constructor(t,o){this.clock=t,this.len=o}}class fd{constructor(){this.clients=new Map}}const bm=(i,t,o)=>t.clients.forEach((a,d)=>{const u=i.doc.store.clients.get(d);if(u!=null){const f=u[u.length-1],p=f.id.clock+f.length;for(let m=0,v=a[m];m<a.length&&v.clock<p;v=a[++m])Jm(i,u,v.clock,v.len,o)}}),L_=(i,t)=>{let o=0,a=i.length-1;for(;o<=a;){const d=Ni((o+a)/2),u=i[d],f=u.clock;if(f<=t){if(t<f+u.len)return d;o=d+1}else a=d-1}return null},Um=(i,t)=>{const o=i.clients.get(t.client);return o!==void 0&&L_(o,t.clock)!==null},Rp=i=>{i.clients.forEach(t=>{t.sort((d,u)=>d.clock-u.clock);let o,a;for(o=1,a=1;o<t.length;o++){const d=t[a-1],u=t[o];d.clock+d.len>=u.clock?d.len=Al(d.len,u.clock+u.len-d.clock):(a<o&&(t[a]=u),a++)}t.length=a})},M_=i=>{const t=new fd;for(let o=0;o<i.length;o++)i[o].clients.forEach((a,d)=>{if(!t.clients.has(d)){const u=a.slice();for(let f=o+1;f<i.length;f++)M6(u,i[f].clients.get(d)||[]);t.clients.set(d,u)}});return Rp(t),t},Jh=(i,t,o,a)=>{ts(i.clients,t,()=>[]).push(new Tp(o,a))},D_=()=>new fd,I_=i=>{const t=D_();return i.clients.forEach((o,a)=>{const d=[];for(let u=0;u<o.length;u++){const f=o[u];if(f.deleted){const p=f.id.clock;let m=f.length;if(u+1<o.length)for(let v=o[u+1];u+1<o.length&&v.deleted;v=o[++u+1])m+=v.length;d.push(new Tp(p,m))}}d.length>0&&t.clients.set(a,d)}),t},su=(i,t)=>{be(i.restEncoder,t.clients.size),bs(t.clients.entries()).sort((o,a)=>a[0]-o[0]).forEach(([o,a])=>{i.resetDsCurVal(),be(i.restEncoder,o);const d=a.length;be(i.restEncoder,d);for(let u=0;u<d;u++){const f=a[u];i.writeDsClock(f.clock),i.writeDsLen(f.len)}})},Lp=i=>{const t=new fd,o=qe(i.restDecoder);for(let a=0;a<o;a++){i.resetDsCurVal();const d=qe(i.restDecoder),u=qe(i.restDecoder);if(u>0){const f=ts(t.clients,d,()=>[]);for(let p=0;p<u;p++)f.push(new Tp(i.readDsClock(),i.readDsLen()))}}return t},k2=(i,t,o)=>{const a=new fd,d=qe(i.restDecoder);for(let u=0;u<d;u++){i.resetDsCurVal();const f=qe(i.restDecoder),p=qe(i.restDecoder),m=o.clients.get(f)||[],v=In(o,f);for(let x=0;x<p;x++){const P=i.readDsClock(),_=P+i.readDsLen();if(P<v){v<_&&Jh(a,f,v,_-v);let k=$i(m,P),C=m[k];for(!C.deleted&&C.id.clock<P&&(m.splice(k+1,0,sf(t,C,P-C.id.clock)),k++);k<m.length&&(C=m[k++],C.id.clock<_);)C.deleted||(_<C.id.clock+C.length&&m.splice(k,0,sf(t,C,_-C.id.clock)),C.delete(t))}else Jh(a,f,P,_-P)}}if(a.clients.size>0){const u=new Ml;return be(u.restEncoder,0),su(u,a),u.toUint8Array()}return null},jm=lm;class ou extends nm{constructor({guid:t=d8(),collectionid:o=null,gc:a=!0,gcFilter:d=()=>!0,meta:u=null,autoLoad:f=!1,shouldLoad:p=!0}={}){super(),this.gc=a,this.gcFilter=d,this.clientID=jm(),this.guid=t,this.collectionid=o,this.share=new Map,this.store=new Km,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=p,this.autoLoad=f,this.meta=u,this.isLoaded=!1,this.isSynced=!1,this.isDestroyed=!1,this.whenLoaded=v2(v=>{this.on("load",()=>{this.isLoaded=!0,v(this)})});const m=()=>v2(v=>{const x=P=>{(P===void 0||P===!0)&&(this.off("sync",x),v())};this.on("sync",x)});this.on("sync",v=>{v===!1&&this.isSynced&&(this.whenSynced=m()),this.isSynced=v===void 0||v===!0,this.isSynced&&!this.isLoaded&&this.emit("load",[this])}),this.whenSynced=m()}load(){const t=this._item;t!==null&&!this.shouldLoad&&Lt(t.parent.doc,o=>{o.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(bs(this.subdocs).map(t=>t.guid))}transact(t,o=null){return Lt(this,t,o)}get(t,o=qn){const a=ts(this.share,t,()=>{const u=new o;return u._integrate(this,null),u}),d=a.constructor;if(o!==qn&&d!==o)if(d===qn){const u=new o;u._map=a._map,a._map.forEach(f=>{for(;f!==null;f=f.left)f.parent=u}),u._start=a._start;for(let f=u._start;f!==null;f=f.right)f.parent=u;return u._length=a._length,this.share.set(t,u),u._integrate(this,null),u}else throw new Error(`Type with the name ${t} has already been defined with a different constructor`);return a}getArray(t=""){return this.get(t,qa)}getText(t=""){return this.get(t,$a)}getMap(t=""){return this.get(t,Za)}getXmlElement(t=""){return this.get(t,eu)}getXmlFragment(t=""){return this.get(t,Dl)}toJSON(){const t={};return this.share.forEach((o,a)=>{t[a]=o.toJSON()}),t}destroy(){this.isDestroyed=!0,bs(this.subdocs).forEach(o=>o.destroy());const t=this._item;if(t!==null){this._item=null;const o=t.content;o.doc=new ou({guid:this.guid,...o.opts,shouldLoad:!1}),o.doc._item=t,Lt(t.parent.doc,a=>{const d=o.doc;t.deleted||a.subdocsAdded.add(d),a.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}}class Bm{constructor(t){this.restDecoder=t}resetDsCurVal(){}readDsClock(){return qe(this.restDecoder)}readDsLen(){return qe(this.restDecoder)}}class Gm extends Bm{readLeftID(){return it(qe(this.restDecoder),qe(this.restDecoder))}readRightID(){return it(qe(this.restDecoder),qe(this.restDecoder))}readClient(){return qe(this.restDecoder)}readInfo(){return Ka(this.restDecoder)}readString(){return zo(this.restDecoder)}readParentInfo(){return qe(this.restDecoder)===1}readTypeRef(){return qe(this.restDecoder)}readLen(){return qe(this.restDecoder)}readAny(){return rd(this.restDecoder)}readBuf(){return z8(nr(this.restDecoder))}readJSON(){return JSON.parse(zo(this.restDecoder))}readKey(){return zo(this.restDecoder)}}class A_{constructor(t){this.dsCurrVal=0,this.restDecoder=t}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=qe(this.restDecoder),this.dsCurrVal}readDsLen(){const t=qe(this.restDecoder)+1;return this.dsCurrVal+=t,t}}class Ja extends A_{constructor(t){super(t),this.keys=[],qe(t),this.keyClockDecoder=new A0(nr(t)),this.clientDecoder=new Bh(nr(t)),this.leftClockDecoder=new A0(nr(t)),this.rightClockDecoder=new A0(nr(t)),this.infoDecoder=new y2(nr(t),Ka),this.stringDecoder=new a8(nr(t)),this.parentInfoDecoder=new y2(nr(t),Ka),this.typeRefDecoder=new Bh(nr(t)),this.lenDecoder=new Bh(nr(t))}readLeftID(){return new Ya(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new Ya(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return this.parentInfoDecoder.read()===1}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return rd(this.restDecoder)}readBuf(){return nr(this.restDecoder)}readJSON(){return rd(this.restDecoder)}readKey(){const t=this.keyClockDecoder.read();if(t<this.keys.length)return this.keys[t];{const o=this.stringDecoder.read();return this.keys.push(o),o}}}class Vm{constructor(){this.restEncoder=rr()}toUint8Array(){return bt(this.restEncoder)}resetDsCurVal(){}writeDsClock(t){be(this.restEncoder,t)}writeDsLen(t){be(this.restEncoder,t)}}class pd extends Vm{writeLeftID(t){be(this.restEncoder,t.client),be(this.restEncoder,t.clock)}writeRightID(t){be(this.restEncoder,t.client),be(this.restEncoder,t.clock)}writeClient(t){be(this.restEncoder,t)}writeInfo(t){K0(this.restEncoder,t)}writeString(t){Rl(this.restEncoder,t)}writeParentInfo(t){be(this.restEncoder,t?1:0)}writeTypeRef(t){be(this.restEncoder,t)}writeLen(t){be(this.restEncoder,t)}writeAny(t){nd(this.restEncoder,t)}writeBuf(t){en(this.restEncoder,t)}writeJSON(t){Rl(this.restEncoder,JSON.stringify(t))}writeKey(t){Rl(this.restEncoder,t)}}class Hm{constructor(){this.restEncoder=rr(),this.dsCurrVal=0}toUint8Array(){return bt(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(t){const o=t-this.dsCurrVal;this.dsCurrVal=t,be(this.restEncoder,o)}writeDsLen(t){t===0&&ai(),be(this.restEncoder,t-1),this.dsCurrVal+=t}}class Ml extends Hm{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new I0,this.clientEncoder=new jh,this.leftClockEncoder=new I0,this.rightClockEncoder=new I0,this.infoEncoder=new p2(K0),this.stringEncoder=new $6,this.parentInfoEncoder=new p2(K0),this.typeRefEncoder=new jh,this.lenEncoder=new jh}toUint8Array(){const t=rr();return be(t,0),en(t,this.keyClockEncoder.toUint8Array()),en(t,this.clientEncoder.toUint8Array()),en(t,this.leftClockEncoder.toUint8Array()),en(t,this.rightClockEncoder.toUint8Array()),en(t,bt(this.infoEncoder)),en(t,this.stringEncoder.toUint8Array()),en(t,bt(this.parentInfoEncoder)),en(t,this.typeRefEncoder.toUint8Array()),en(t,this.lenEncoder.toUint8Array()),hf(t,bt(this.restEncoder)),bt(t)}writeLeftID(t){this.clientEncoder.write(t.client),this.leftClockEncoder.write(t.clock)}writeRightID(t){this.clientEncoder.write(t.client),this.rightClockEncoder.write(t.clock)}writeClient(t){this.clientEncoder.write(t)}writeInfo(t){this.infoEncoder.write(t)}writeString(t){this.stringEncoder.write(t)}writeParentInfo(t){this.parentInfoEncoder.write(t?1:0)}writeTypeRef(t){this.typeRefEncoder.write(t)}writeLen(t){this.lenEncoder.write(t)}writeAny(t){nd(this.restEncoder,t)}writeBuf(t){en(this.restEncoder,t)}writeJSON(t){nd(this.restEncoder,t)}writeKey(t){const o=this.keyMap.get(t);o===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(t)):this.keyClockEncoder.write(o)}}const F_=(i,t,o,a)=>{a=Al(a,t[0].id.clock);const d=$i(t,a);be(i.restEncoder,t.length-d),i.writeClient(o),be(i.restEncoder,a);const u=t[d];u.write(i,a-u.id.clock);for(let f=d+1;f<t.length;f++)t[f].write(i,0)},Mp=(i,t,o)=>{const a=new Map;o.forEach((d,u)=>{In(t,u)>d&&a.set(u,d)}),Sf(t).forEach((d,u)=>{o.has(u)||a.set(u,0)}),be(i.restEncoder,a.size),bs(a.entries()).sort((d,u)=>u[0]-d[0]).forEach(([d,u])=>{F_(i,t.clients.get(d),d,u)})},O_=(i,t)=>{const o=Ar(),a=qe(i.restDecoder);for(let d=0;d<a;d++){const u=qe(i.restDecoder),f=new Array(u),p=i.readClient();let m=qe(i.restDecoder);o.set(p,{i:0,refs:f});for(let v=0;v<u;v++){const x=i.readInfo();switch(df&x){case 0:{const P=i.readLen();f[v]=new oi(it(p,m),P),m+=P;break}case 10:{const P=qe(i.restDecoder);f[v]=new li(it(p,m),P),m+=P;break}default:{const P=(x&(zs|Vr))===0,_=new _n(it(p,m),null,(x&Vr)===Vr?i.readLeftID():null,null,(x&zs)===zs?i.readRightID():null,P?i.readParentInfo()?t.get(i.readString()):i.readLeftID():null,P&&(x&ed)===ed?i.readString():null,my(i,x));f[v]=_,m+=_.length}}}}return o},z_=(i,t,o)=>{const a=[];let d=bs(o.keys()).sort((k,C)=>k-C);if(d.length===0)return null;const u=()=>{if(d.length===0)return null;let k=o.get(d[d.length-1]);for(;k.refs.length===k.i;)if(d.pop(),d.length>0)k=o.get(d[d.length-1]);else return null;return k};let f=u();if(f===null)return null;const p=new Km,m=new Map,v=(k,C)=>{const N=m.get(k);(N==null||N>C)&&m.set(k,C)};let x=f.refs[f.i++];const P=new Map,_=()=>{for(const k of a){const C=k.id.client,N=o.get(C);N?(N.i--,p.clients.set(C,N.refs.slice(N.i)),o.delete(C),N.i=0,N.refs=[]):p.clients.set(C,[k]),d=d.filter(I=>I!==C)}a.length=0};for(;;){if(x.constructor!==li){const C=ts(P,x.id.client,()=>In(t,x.id.client))-x.id.clock;if(C<0)a.push(x),v(x.id.client,x.id.clock-1),_();else{const N=x.getMissing(i,t);if(N!==null){a.push(x);const I=o.get(N)||{refs:[],i:0};if(I.refs.length===I.i)v(N,In(t,N)),_();else{x=I.refs[I.i++];continue}}else(C===0||C<x.length)&&(x.integrate(i,C),P.set(x.id.client,x.id.clock+x.length))}}if(a.length>0)x=a.pop();else if(f!==null&&f.i<f.refs.length)x=f.refs[f.i++];else{if(f=u(),f===null)break;x=f.refs[f.i++]}}if(p.clients.size>0){const k=new Ml;return Mp(k,p,new Map),be(k.restEncoder,0),{missing:m,update:k.toUint8Array()}}return null},b_=(i,t)=>Mp(i,t.doc.store,t.beforeState),U_=(i,t,o,a=new Ja(i))=>Lt(t,d=>{d.local=!1;let u=!1;const f=d.doc,p=f.store,m=O_(a,f),v=z_(d,p,m),x=p.pendingStructs;if(x){for(const[_,k]of x.missing)if(k<In(p,_)){u=!0;break}if(v){for(const[_,k]of v.missing){const C=x.missing.get(_);(C==null||C>k)&&x.missing.set(_,k)}x.update=Zh([x.update,v.update])}}else p.pendingStructs=v;const P=k2(a,d,p);if(p.pendingDs){const _=new Ja(Go(p.pendingDs));qe(_.restDecoder);const k=k2(_,d,p);P&&k?p.pendingDs=Zh([P,k]):p.pendingDs=P||k}else p.pendingDs=P;if(u){const _=p.pendingStructs.update;p.pendingStructs=null,Wm(d.doc,_)}},o,!1),Wm=(i,t,o,a=Ja)=>{const d=Go(t);U_(d,i,o,new a(d))},j_=(i,t,o)=>Wm(i,t,o,Gm),B_=(i,t,o=new Map)=>{Mp(i,t.store,o),su(i,I_(t.store))},G_=(i,t=new Uint8Array([0]),o=new Ml)=>{const a=Ym(t);B_(o,i,a);const d=[o.toUint8Array()];if(i.store.pendingDs&&d.push(i.store.pendingDs),i.store.pendingStructs&&d.push(iS(i.store.pendingStructs.update,t)),d.length>1){if(o.constructor===pd)return nS(d.map((u,f)=>f===0?u:oS(u)));if(o.constructor===Ml)return Zh(d)}return d[0]},V_=(i,t)=>G_(i,t,new pd),H_=i=>{const t=new Map,o=qe(i.restDecoder);for(let a=0;a<o;a++){const d=qe(i.restDecoder),u=qe(i.restDecoder);t.set(d,u)}return t},Ym=i=>H_(new Bm(Go(i))),qm=(i,t)=>(be(i.restEncoder,t.size),bs(t.entries()).sort((o,a)=>a[0]-o[0]).forEach(([o,a])=>{be(i.restEncoder,o),be(i.restEncoder,a)}),i),W_=(i,t)=>qm(i,Sf(t.store)),Y_=(i,t=new Hm)=>(i instanceof Map?qm(t,i):W_(t,i),t.toUint8Array()),q_=i=>Y_(i,new Vm);class X_{constructor(){this.l=[]}}const x2=()=>new X_,C2=(i,t)=>i.l.push(t),E2=(i,t)=>{const o=i.l,a=o.length;i.l=o.filter(d=>t!==d),a===i.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},Xm=(i,t,o)=>kp(i.l,[t,o]);class Ya{constructor(t,o){this.client=t,this.clock=o}}const Ih=(i,t)=>i===t||i!==null&&t!==null&&i.client===t.client&&i.clock===t.clock,it=(i,t)=>new Ya(i,t),K_=i=>{for(const[t,o]of i.doc.share.entries())if(o===i)return t;throw ai()},Ga=(i,t)=>t===void 0?!i.deleted:t.sv.has(i.id.client)&&(t.sv.get(i.id.client)||0)>i.id.clock&&!Um(t.ds,i.id),$0=(i,t)=>{const o=ts(i.meta,$0,bo),a=i.doc.store;o.has(t)||(t.sv.forEach((d,u)=>{d<In(a,u)&&jo(i,it(u,d))}),bm(i,t.ds,d=>{}),o.add(t))};class Km{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const Sf=i=>{const t=new Map;return i.clients.forEach((o,a)=>{const d=o[o.length-1];t.set(a,d.id.clock+d.length)}),t},In=(i,t)=>{const o=i.clients.get(t);if(o===void 0)return 0;const a=o[o.length-1];return a.id.clock+a.length},Qm=(i,t)=>{let o=i.clients.get(t.id.client);if(o===void 0)o=[],i.clients.set(t.id.client,o);else{const a=o[o.length-1];if(a.id.clock+a.length!==t.id.clock)throw ai()}o.push(t)},$i=(i,t)=>{let o=0,a=i.length-1,d=i[a],u=d.id.clock;if(u===t)return a;let f=Ni(t/(u+d.length-1)*a);for(;o<=a;){if(d=i[f],u=d.id.clock,u<=t){if(t<u+d.length)return f;o=f+1}else a=f-1;f=Ni((o+a)/2)}throw ai()},Q_=(i,t)=>{const o=i.clients.get(t.client);return o[$i(o,t.clock)]},b0=Q_,ep=(i,t,o)=>{const a=$i(t,o),d=t[a];return d.id.clock<o&&d instanceof _n?(t.splice(a+1,0,sf(i,d,o-d.id.clock)),a+1):a},jo=(i,t)=>{const o=i.doc.store.clients.get(t.client);return o[ep(i,o,t.clock)]},P2=(i,t,o)=>{const a=t.clients.get(o.client),d=$i(a,o.clock),u=a[d];return o.clock!==u.id.clock+u.length-1&&u.constructor!==oi&&a.splice(d+1,0,sf(i,u,o.clock-u.id.clock+1)),u},J_=(i,t,o)=>{const a=i.clients.get(t.id.client);a[$i(a,t.id.clock)]=o},Jm=(i,t,o,a,d)=>{if(a===0)return;const u=o+a;let f=ep(i,t,o),p;do p=t[f++],u<p.id.clock+p.length&&ep(i,t,u),d(p);while(f<t.length&&t[f].id.clock<u)};class Z_{constructor(t,o,a){this.doc=t,this.deleteSet=new fd,this.beforeState=Sf(t.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=o,this.meta=new Map,this.local=a,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const N2=(i,t)=>t.deleteSet.clients.size===0&&!L6(t.afterState,(o,a)=>t.beforeState.get(a)!==o)?!1:(Rp(t.deleteSet),b_(i,t),su(i,t.deleteSet),!0),T2=(i,t,o)=>{const a=t._item;(a===null||a.id.clock<(i.beforeState.get(a.id.client)||0)&&!a.deleted)&&ts(i.changed,t,bo).add(o)},Gh=(i,t)=>{let o=i[t],a=i[t-1],d=t;for(;d>0;o=a,a=i[--d-1]){if(a.deleted===o.deleted&&a.constructor===o.constructor&&a.mergeWith(o)){o instanceof _n&&o.parentSub!==null&&o.parent._map.get(o.parentSub)===o&&o.parent._map.set(o.parentSub,a);continue}break}const u=t-d;return u&&i.splice(t+1-u,u),u},$_=(i,t,o)=>{for(const[a,d]of i.clients.entries()){const u=t.clients.get(a);for(let f=d.length-1;f>=0;f--){const p=d[f],m=p.clock+p.len;for(let v=$i(u,p.clock),x=u[v];v<u.length&&x.id.clock<m;x=u[++v]){const P=u[v];if(p.clock+p.len<=P.id.clock)break;P instanceof _n&&P.deleted&&!P.keep&&o(P)&&P.gc(t,!1)}}}},eS=(i,t)=>{i.clients.forEach((o,a)=>{const d=t.clients.get(a);for(let u=o.length-1;u>=0;u--){const f=o[u],p=pp(d.length-1,1+$i(d,f.clock+f.len-1));for(let m=p,v=d[m];m>0&&v.id.clock>=f.clock;v=d[m])m-=1+Gh(d,m)}})},Zm=(i,t)=>{if(t<i.length){const o=i[t],a=o.doc,d=a.store,u=o.deleteSet,f=o._mergeStructs;try{Rp(u),o.afterState=Sf(o.doc.store),a.emit("beforeObserverCalls",[o,a]);const p=[];o.changed.forEach((m,v)=>p.push(()=>{(v._item===null||!v._item.deleted)&&v._callObserver(o,m)})),p.push(()=>{o.changedParentTypes.forEach((m,v)=>{v._dEH.l.length>0&&(v._item===null||!v._item.deleted)&&(m=m.filter(x=>x.target._item===null||!x.target._item.deleted),m.forEach(x=>{x.currentTarget=v,x._path=null}),m.sort((x,P)=>x.path.length-P.path.length),p.push(()=>{Xm(v._dEH,m,o)}))}),p.push(()=>a.emit("afterTransaction",[o,a])),p.push(()=>{o._needFormattingCleanup&&SS(o)})}),kp(p,[])}finally{a.gc&&$_(u,d,a.gcFilter),eS(u,d),o.afterState.forEach((x,P)=>{const _=o.beforeState.get(P)||0;if(_!==x){const k=d.clients.get(P),C=Al($i(k,_),1);for(let N=k.length-1;N>=C;)N-=1+Gh(k,N)}});for(let x=f.length-1;x>=0;x--){const{client:P,clock:_}=f[x].id,k=d.clients.get(P),C=$i(k,_);C+1<k.length&&Gh(k,C+1)>1||C>0&&Gh(k,C)}if(!o.local&&o.afterState.get(a.clientID)!==o.beforeState.get(a.clientID)&&(N_(Np,Dm,"[yjs] ",Im,Am,"Changed the client-id because another client seems to be using it."),a.clientID=jm()),a.emit("afterTransactionCleanup",[o,a]),a._observers.has("update")){const x=new pd;N2(x,o)&&a.emit("update",[x.toUint8Array(),o.origin,a,o])}if(a._observers.has("updateV2")){const x=new Ml;N2(x,o)&&a.emit("updateV2",[x.toUint8Array(),o.origin,a,o])}const{subdocsAdded:p,subdocsLoaded:m,subdocsRemoved:v}=o;(p.size>0||v.size>0||m.size>0)&&(p.forEach(x=>{x.clientID=a.clientID,x.collectionid==null&&(x.collectionid=a.collectionid),a.subdocs.add(x)}),v.forEach(x=>a.subdocs.delete(x)),a.emit("subdocs",[{loaded:m,added:p,removed:v},a,o]),v.forEach(x=>x.destroy())),i.length<=t+1?(a._transactionCleanups=[],a.emit("afterAllTransactions",[a,i])):Zm(i,t+1)}}},Lt=(i,t,o=null,a=!0)=>{const d=i._transactionCleanups;let u=!1,f=null;i._transaction===null&&(u=!0,i._transaction=new Z_(i,o,a),d.push(i._transaction),d.length===1&&i.emit("beforeAllTransactions",[i]),i.emit("beforeTransaction",[i._transaction,i]));try{f=t(i._transaction)}finally{if(u){const p=i._transaction===d[0];i._transaction=null,p&&Zm(d,0)}}return f};function*tS(i){const t=qe(i.restDecoder);for(let o=0;o<t;o++){const a=qe(i.restDecoder),d=i.readClient();let u=qe(i.restDecoder);for(let f=0;f<a;f++){const p=i.readInfo();if(p===10){const m=qe(i.restDecoder);yield new li(it(d,u),m),u+=m}else if((df&p)!==0){const m=(p&(zs|Vr))===0,v=new _n(it(d,u),null,(p&Vr)===Vr?i.readLeftID():null,null,(p&zs)===zs?i.readRightID():null,m?i.readParentInfo()?i.readString():i.readLeftID():null,m&&(p&ed)===ed?i.readString():null,my(i,p));yield v,u+=v.length}else{const m=i.readLen();yield new oi(it(d,u),m),u+=m}}}}class Dp{constructor(t,o){this.gen=tS(t),this.curr=null,this.done=!1,this.filterSkips=o,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&this.curr!==null&&this.curr.constructor===li);return this.curr}}class Ip{constructor(t){this.currClient=0,this.startClock=0,this.written=0,this.encoder=t,this.clientStructs=[]}}const nS=i=>Zh(i,Gm,pd),rS=(i,t)=>{if(i.constructor===oi){const{client:o,clock:a}=i.id;return new oi(it(o,a+t),i.length-t)}else if(i.constructor===li){const{client:o,clock:a}=i.id;return new li(it(o,a+t),i.length-t)}else{const o=i,{client:a,clock:d}=o.id;return new _n(it(a,d+t),null,it(a,d+t-1),null,o.rightOrigin,o.parent,o.parentSub,o.content.splice(t))}},Zh=(i,t=Ja,o=Ml)=>{if(i.length===1)return i[0];const a=i.map(x=>new t(Go(x)));let d=a.map(x=>new Dp(x,!0)),u=null;const f=new o,p=new Ip(f);for(;d=d.filter(_=>_.curr!==null),d.sort((_,k)=>{if(_.curr.id.client===k.curr.id.client){const C=_.curr.id.clock-k.curr.id.clock;return C===0?_.curr.constructor===k.curr.constructor?0:_.curr.constructor===li?1:-1:C}else return k.curr.id.client-_.curr.id.client}),d.length!==0;){const x=d[0],P=x.curr.id.client;if(u!==null){let _=x.curr,k=!1;for(;_!==null&&_.id.clock+_.length<=u.struct.id.clock+u.struct.length&&_.id.client>=u.struct.id.client;)_=x.next(),k=!0;if(_===null||_.id.client!==P||k&&_.id.clock>u.struct.id.clock+u.struct.length)continue;if(P!==u.struct.id.client)Fo(p,u.struct,u.offset),u={struct:_,offset:0},x.next();else if(u.struct.id.clock+u.struct.length<_.id.clock)if(u.struct.constructor===li)u.struct.length=_.id.clock+_.length-u.struct.id.clock;else{Fo(p,u.struct,u.offset);const C=_.id.clock-u.struct.id.clock-u.struct.length;u={struct:new li(it(P,u.struct.id.clock+u.struct.length),C),offset:0}}else{const C=u.struct.id.clock+u.struct.length-_.id.clock;C>0&&(u.struct.constructor===li?u.struct.length-=C:_=rS(_,C)),u.struct.mergeWith(_)||(Fo(p,u.struct,u.offset),u={struct:_,offset:0},x.next())}}else u={struct:x.curr,offset:0},x.next();for(let _=x.curr;_!==null&&_.id.client===P&&_.id.clock===u.struct.id.clock+u.struct.length&&_.constructor!==li;_=x.next())Fo(p,u.struct,u.offset),u={struct:_,offset:0}}u!==null&&(Fo(p,u.struct,u.offset),u=null),Ap(p);const m=a.map(x=>Lp(x)),v=M_(m);return su(f,v),f.toUint8Array()},iS=(i,t,o=Ja,a=Ml)=>{const d=Ym(t),u=new a,f=new Ip(u),p=new o(Go(i)),m=new Dp(p,!1);for(;m.curr;){const x=m.curr,P=x.id.client,_=d.get(P)||0;if(m.curr.constructor===li){m.next();continue}if(x.id.clock+x.length>_)for(Fo(f,x,Al(_-x.id.clock,0)),m.next();m.curr&&m.curr.id.client===P;)Fo(f,m.curr,0),m.next();else for(;m.curr&&m.curr.id.client===P&&m.curr.id.clock+m.curr.length<=_;)m.next()}Ap(f);const v=Lp(p);return su(u,v),u.toUint8Array()},$m=i=>{i.written>0&&(i.clientStructs.push({written:i.written,restEncoder:bt(i.encoder.restEncoder)}),i.encoder.restEncoder=rr(),i.written=0)},Fo=(i,t,o)=>{i.written>0&&i.currClient!==t.id.client&&$m(i),i.written===0&&(i.currClient=t.id.client,i.encoder.writeClient(t.id.client),be(i.encoder.restEncoder,t.id.clock+o)),t.write(i.encoder,o),i.written++},Ap=i=>{$m(i);const t=i.encoder.restEncoder;be(t,i.clientStructs.length);for(let o=0;o<i.clientStructs.length;o++){const a=i.clientStructs[o];be(t,a.written),hf(t,a.restEncoder)}},sS=(i,t,o,a)=>{const d=new o(Go(i)),u=new Dp(d,!1),f=new a,p=new Ip(f);for(let v=u.curr;v!==null;v=u.next())Fo(p,t(v),0);Ap(p);const m=Lp(d);return su(f,m),f.toUint8Array()},oS=i=>sS(i,x8,Ja,pd),R2="You must not compute changes after the event-handler fired.";class wf{constructor(t,o){this.target=t,this.currentTarget=t,this.transaction=o,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=lS(this.currentTarget,this.target))}deletes(t){return Um(this.transaction.deleteSet,t.id)}get keys(){if(this._keys===null){if(this.transaction.doc._transactionCleanups.length===0)throw Zi(R2);const t=new Map,o=this.target;this.transaction.changed.get(o).forEach(d=>{if(d!==null){const u=o._map.get(d);let f,p;if(this.adds(u)){let m=u.left;for(;m!==null&&this.adds(m);)m=m.left;if(this.deletes(u))if(m!==null&&this.deletes(m))f="delete",p=L0(m.content.getContent());else return;else m!==null&&this.deletes(m)?(f="update",p=L0(m.content.getContent())):(f="add",p=void 0)}else if(this.deletes(u))f="delete",p=L0(u.content.getContent());else return;t.set(d,{action:f,oldValue:p})}}),this._keys=t}return this._keys}get delta(){return this.changes.delta}adds(t){return t.id.clock>=(this.transaction.beforeState.get(t.id.client)||0)}get changes(){let t=this._changes;if(t===null){if(this.transaction.doc._transactionCleanups.length===0)throw Zi(R2);const o=this.target,a=bo(),d=bo(),u=[];if(t={added:a,deleted:d,delta:u,keys:this.keys},this.transaction.changed.get(o).has(null)){let p=null;const m=()=>{p&&u.push(p)};for(let v=o._start;v!==null;v=v.right)v.deleted?this.deletes(v)&&!this.adds(v)&&((p===null||p.delete===void 0)&&(m(),p={delete:0}),p.delete+=v.length,d.add(v)):this.adds(v)?((p===null||p.insert===void 0)&&(m(),p={insert:[]}),p.insert=p.insert.concat(v.content.getContent()),a.add(v)):((p===null||p.retain===void 0)&&(m(),p={retain:0}),p.retain+=v.length);p!==null&&p.retain===void 0&&m()}this._changes=t}return t}}const lS=(i,t)=>{const o=[];for(;t._item!==null&&t!==i;){if(t._item.parentSub!==null)o.unshift(t._item.parentSub);else{let a=0,d=t._item.parent._start;for(;d!==t._item&&d!==null;)!d.deleted&&d.countable&&(a+=d.length),d=d.right;o.unshift(a)}t=t._item.parent}return o},ir=()=>{T_("Invalid access: Add Yjs type to a document before reading data.")},ey=80;let Fp=0;class aS{constructor(t,o){t.marker=!0,this.p=t,this.index=o,this.timestamp=Fp++}}const uS=i=>{i.timestamp=Fp++},ty=(i,t,o)=>{i.p.marker=!1,i.p=t,t.marker=!0,i.index=o,i.timestamp=Fp++},cS=(i,t,o)=>{if(i.length>=ey){const a=i.reduce((d,u)=>d.timestamp<u.timestamp?d:u);return ty(a,t,o),a}else{const a=new aS(t,o);return i.push(a),a}},kf=(i,t)=>{if(i._start===null||t===0||i._searchMarker===null)return null;const o=i._searchMarker.length===0?null:i._searchMarker.reduce((u,f)=>Uh(t-u.index)<Uh(t-f.index)?u:f);let a=i._start,d=0;for(o!==null&&(a=o.p,d=o.index,uS(o));a.right!==null&&d<t;){if(!a.deleted&&a.countable){if(t<d+a.length)break;d+=a.length}a=a.right}for(;a.left!==null&&d>t;)a=a.left,!a.deleted&&a.countable&&(d-=a.length);for(;a.left!==null&&a.left.id.client===a.id.client&&a.left.id.clock+a.left.length===a.id.clock;)a=a.left,!a.deleted&&a.countable&&(d-=a.length);return o!==null&&Uh(o.index-d)<a.parent.length/ey?(ty(o,a,d),o):cS(i._searchMarker,a,d)},od=(i,t,o)=>{for(let a=i.length-1;a>=0;a--){const d=i[a];if(o>0){let u=d.p;for(u.marker=!1;u&&(u.deleted||!u.countable);)u=u.left,u&&!u.deleted&&u.countable&&(d.index-=u.length);if(u===null||u.marker===!0){i.splice(a,1);continue}d.p=u,u.marker=!0}(t<d.index||o>0&&t===d.index)&&(d.index=Al(t,d.index+o))}},xf=(i,t,o)=>{const a=i,d=t.changedParentTypes;for(;ts(d,i,()=>[]).push(o),i._item!==null;)i=i._item.parent;Xm(a._eH,o,t)};class qn{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=x2(),this._dEH=x2(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(t,o){this.doc=t,this._item=o}_copy(){throw Pi()}clone(){throw Pi()}_write(t){}get _first(){let t=this._start;for(;t!==null&&t.deleted;)t=t.right;return t}_callObserver(t,o){!t.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(t){C2(this._eH,t)}observeDeep(t){C2(this._dEH,t)}unobserve(t){E2(this._eH,t)}unobserveDeep(t){E2(this._dEH,t)}toJSON(){}}const ny=(i,t,o)=>{i.doc??ir(),t<0&&(t=i._length+t),o<0&&(o=i._length+o);let a=o-t;const d=[];let u=i._start;for(;u!==null&&a>0;){if(u.countable&&!u.deleted){const f=u.content.getContent();if(f.length<=t)t-=f.length;else{for(let p=t;p<f.length&&a>0;p++)d.push(f[p]),a--;t=0}}u=u.right}return d},ry=i=>{i.doc??ir();const t=[];let o=i._start;for(;o!==null;){if(o.countable&&!o.deleted){const a=o.content.getContent();for(let d=0;d<a.length;d++)t.push(a[d])}o=o.right}return t},ld=(i,t)=>{let o=0,a=i._start;for(i.doc??ir();a!==null;){if(a.countable&&!a.deleted){const d=a.content.getContent();for(let u=0;u<d.length;u++)t(d[u],o++,i)}a=a.right}},iy=(i,t)=>{const o=[];return ld(i,(a,d)=>{o.push(t(a,d,i))}),o},dS=i=>{let t=i._start,o=null,a=0;return{[Symbol.iterator](){return this},next:()=>{if(o===null){for(;t!==null&&t.deleted;)t=t.right;if(t===null)return{done:!0,value:void 0};o=t.content.getContent(),a=0,t=t.right}const d=o[a++];return o.length<=a&&(o=null),{done:!1,value:d}}}},sy=(i,t)=>{i.doc??ir();const o=kf(i,t);let a=i._start;for(o!==null&&(a=o.p,t-=o.index);a!==null;a=a.right)if(!a.deleted&&a.countable){if(t<a.length)return a.content.getContent()[t];t-=a.length}},$h=(i,t,o,a)=>{let d=o;const u=i.doc,f=u.clientID,p=u.store,m=o===null?t._start:o.right;let v=[];const x=()=>{v.length>0&&(d=new _n(it(f,In(p,f)),d,d&&d.lastId,m,m&&m.id,t,null,new Il(v)),d.integrate(i,0),v=[])};a.forEach(P=>{if(P===null)v.push(P);else switch(P.constructor){case Number:case Object:case Boolean:case Array:case String:v.push(P);break;default:switch(x(),P.constructor){case Uint8Array:case ArrayBuffer:d=new _n(it(f,In(p,f)),d,d&&d.lastId,m,m&&m.id,t,null,new gd(new Uint8Array(P))),d.integrate(i,0);break;case ou:d=new _n(it(f,In(p,f)),d,d&&d.lastId,m,m&&m.id,t,null,new md(P)),d.integrate(i,0);break;default:if(P instanceof qn)d=new _n(it(f,In(p,f)),d,d&&d.lastId,m,m&&m.id,t,null,new js(P)),d.integrate(i,0);else throw new Error("Unexpected content type in insert operation")}}}),x()},oy=()=>Zi("Length exceeded!"),ly=(i,t,o,a)=>{if(o>t._length)throw oy();if(o===0)return t._searchMarker&&od(t._searchMarker,o,a.length),$h(i,t,null,a);const d=o,u=kf(t,o);let f=t._start;for(u!==null&&(f=u.p,o-=u.index,o===0&&(f=f.prev,o+=f&&f.countable&&!f.deleted?f.length:0));f!==null;f=f.right)if(!f.deleted&&f.countable){if(o<=f.length){o<f.length&&jo(i,it(f.id.client,f.id.clock+o));break}o-=f.length}return t._searchMarker&&od(t._searchMarker,d,a.length),$h(i,t,f,a)},hS=(i,t,o)=>{let d=(t._searchMarker||[]).reduce((u,f)=>f.index>u.index?f:u,{index:0,p:t._start}).p;if(d)for(;d.right;)d=d.right;return $h(i,t,d,o)},ay=(i,t,o,a)=>{if(a===0)return;const d=o,u=a,f=kf(t,o);let p=t._start;for(f!==null&&(p=f.p,o-=f.index);p!==null&&o>0;p=p.right)!p.deleted&&p.countable&&(o<p.length&&jo(i,it(p.id.client,p.id.clock+o)),o-=p.length);for(;a>0&&p!==null;)p.deleted||(a<p.length&&jo(i,it(p.id.client,p.id.clock+a)),p.delete(i),a-=p.length),p=p.right;if(a>0)throw oy();t._searchMarker&&od(t._searchMarker,d,-u+a)},ef=(i,t,o)=>{const a=t._map.get(o);a!==void 0&&a.delete(i)},Op=(i,t,o,a)=>{const d=t._map.get(o)||null,u=i.doc,f=u.clientID;let p;if(a==null)p=new Il([a]);else switch(a.constructor){case Number:case Object:case Boolean:case Array:case String:case Date:case BigInt:p=new Il([a]);break;case Uint8Array:p=new gd(a);break;case ou:p=new md(a);break;default:if(a instanceof qn)p=new js(a);else throw new Error("Unexpected content type")}new _n(it(f,In(u.store,f)),d,d&&d.lastId,null,null,t,o,p).integrate(i,0)},zp=(i,t)=>{i.doc??ir();const o=i._map.get(t);return o!==void 0&&!o.deleted?o.content.getContent()[o.length-1]:void 0},uy=i=>{const t={};return i.doc??ir(),i._map.forEach((o,a)=>{o.deleted||(t[a]=o.content.getContent()[o.length-1])}),t},cy=(i,t)=>{i.doc??ir();const o=i._map.get(t);return o!==void 0&&!o.deleted},fS=(i,t)=>{const o={};return i._map.forEach((a,d)=>{let u=a;for(;u!==null&&(!t.sv.has(u.id.client)||u.id.clock>=(t.sv.get(u.id.client)||0));)u=u.left;u!==null&&Ga(u,t)&&(o[d]=u.content.getContent()[u.length-1])}),o},Ah=i=>(i.doc??ir(),R_(i._map.entries(),t=>!t[1].deleted));class pS extends wf{}class qa extends qn{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(t){const o=new qa;return o.push(t),o}_integrate(t,o){super._integrate(t,o),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new qa}clone(){const t=new qa;return t.insert(0,this.toArray().map(o=>o instanceof qn?o.clone():o)),t}get length(){return this.doc??ir(),this._length}_callObserver(t,o){super._callObserver(t,o),xf(this,t,new pS(this,t))}insert(t,o){this.doc!==null?Lt(this.doc,a=>{ly(a,this,t,o)}):this._prelimContent.splice(t,0,...o)}push(t){this.doc!==null?Lt(this.doc,o=>{hS(o,this,t)}):this._prelimContent.push(...t)}unshift(t){this.insert(0,t)}delete(t,o=1){this.doc!==null?Lt(this.doc,a=>{ay(a,this,t,o)}):this._prelimContent.splice(t,o)}get(t){return sy(this,t)}toArray(){return ry(this)}slice(t=0,o=this.length){return ny(this,t,o)}toJSON(){return this.map(t=>t instanceof qn?t.toJSON():t)}map(t){return iy(this,t)}forEach(t){ld(this,t)}[Symbol.iterator](){return dS(this)}_write(t){t.writeTypeRef(US)}}const gS=i=>new qa;class mS extends wf{constructor(t,o,a){super(t,o),this.keysChanged=a}}class Za extends qn{constructor(t){super(),this._prelimContent=null,t===void 0?this._prelimContent=new Map:this._prelimContent=new Map(t)}_integrate(t,o){super._integrate(t,o),this._prelimContent.forEach((a,d)=>{this.set(d,a)}),this._prelimContent=null}_copy(){return new Za}clone(){const t=new Za;return this.forEach((o,a)=>{t.set(a,o instanceof qn?o.clone():o)}),t}_callObserver(t,o){xf(this,t,new mS(this,t,o))}toJSON(){this.doc??ir();const t={};return this._map.forEach((o,a)=>{if(!o.deleted){const d=o.content.getContent()[o.length-1];t[a]=d instanceof qn?d.toJSON():d}}),t}get size(){return[...Ah(this)].length}keys(){return z0(Ah(this),t=>t[0])}values(){return z0(Ah(this),t=>t[1].content.getContent()[t[1].length-1])}entries(){return z0(Ah(this),t=>[t[0],t[1].content.getContent()[t[1].length-1]])}forEach(t){this.doc??ir(),this._map.forEach((o,a)=>{o.deleted||t(o.content.getContent()[o.length-1],a,this)})}[Symbol.iterator](){return this.entries()}delete(t){this.doc!==null?Lt(this.doc,o=>{ef(o,this,t)}):this._prelimContent.delete(t)}set(t,o){return this.doc!==null?Lt(this.doc,a=>{Op(a,this,t,o)}):this._prelimContent.set(t,o),o}get(t){return zp(this,t)}has(t){return cy(this,t)}clear(){this.doc!==null?Lt(this.doc,t=>{this.forEach(function(o,a,d){ef(t,d,a)})}):this._prelimContent.clear()}_write(t){t.writeTypeRef(jS)}}const yS=i=>new Za,Oo=(i,t)=>i===t||typeof i=="object"&&typeof t=="object"&&i&&t&&w8(i,t);class tp{constructor(t,o,a,d){this.left=t,this.right=o,this.index=a,this.currentAttributes=d}forward(){switch(this.right===null&&ai(),this.right.content.constructor){case Sn:this.right.deleted||lu(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}}const L2=(i,t,o)=>{for(;t.right!==null&&o>0;){switch(t.right.content.constructor){case Sn:t.right.deleted||lu(t.currentAttributes,t.right.content);break;default:t.right.deleted||(o<t.right.length&&jo(i,it(t.right.id.client,t.right.id.clock+o)),t.index+=t.right.length,o-=t.right.length);break}t.left=t.right,t.right=t.right.right}return t},Fh=(i,t,o,a)=>{const d=new Map,u=a?kf(t,o):null;if(u){const f=new tp(u.p.left,u.p,u.index,d);return L2(i,f,o-u.index)}else{const f=new tp(null,t._start,0,d);return L2(i,f,o)}},dy=(i,t,o,a)=>{for(;o.right!==null&&(o.right.deleted===!0||o.right.content.constructor===Sn&&Oo(a.get(o.right.content.key),o.right.content.value));)o.right.deleted||a.delete(o.right.content.key),o.forward();const d=i.doc,u=d.clientID;a.forEach((f,p)=>{const m=o.left,v=o.right,x=new _n(it(u,In(d.store,u)),m,m&&m.lastId,v,v&&v.id,t,null,new Sn(p,f));x.integrate(i,0),o.right=x,o.forward()})},lu=(i,t)=>{const{key:o,value:a}=t;a===null?i.delete(o):i.set(o,a)},hy=(i,t)=>{for(;i.right!==null;){if(!(i.right.deleted||i.right.content.constructor===Sn&&Oo(t[i.right.content.key]??null,i.right.content.value)))break;i.forward()}},fy=(i,t,o,a)=>{const d=i.doc,u=d.clientID,f=new Map;for(const p in a){const m=a[p],v=o.currentAttributes.get(p)??null;if(!Oo(v,m)){f.set(p,v);const{left:x,right:P}=o;o.right=new _n(it(u,In(d.store,u)),x,x&&x.lastId,P,P&&P.id,t,null,new Sn(p,m)),o.right.integrate(i,0),o.forward()}}return f},U0=(i,t,o,a,d)=>{o.currentAttributes.forEach((_,k)=>{d[k]===void 0&&(d[k]=null)});const u=i.doc,f=u.clientID;hy(o,d);const p=fy(i,t,o,d),m=a.constructor===String?new es(a):a instanceof qn?new js(a):new Fl(a);let{left:v,right:x,index:P}=o;t._searchMarker&&od(t._searchMarker,o.index,m.getLength()),x=new _n(it(f,In(u.store,f)),v,v&&v.lastId,x,x&&x.id,t,null,m),x.integrate(i,0),o.right=x,o.index=P,o.forward(),dy(i,t,o,p)},M2=(i,t,o,a,d)=>{const u=i.doc,f=u.clientID;hy(o,d);const p=fy(i,t,o,d);e:for(;o.right!==null&&(a>0||p.size>0&&(o.right.deleted||o.right.content.constructor===Sn));){if(!o.right.deleted)switch(o.right.content.constructor){case Sn:{const{key:m,value:v}=o.right.content,x=d[m];if(x!==void 0){if(Oo(x,v))p.delete(m);else{if(a===0)break e;p.set(m,v)}o.right.delete(i)}else o.currentAttributes.set(m,v);break}default:a<o.right.length&&jo(i,it(o.right.id.client,o.right.id.clock+a)),a-=o.right.length;break}o.forward()}if(a>0){let m="";for(;a>0;a--)m+=`
`;o.right=new _n(it(f,In(u.store,f)),o.left,o.left&&o.left.lastId,o.right,o.right&&o.right.id,t,null,new es(m)),o.right.integrate(i,0),o.forward()}dy(i,t,o,p)},py=(i,t,o,a,d)=>{let u=t;const f=Ar();for(;u&&(!u.countable||u.deleted);){if(!u.deleted&&u.content.constructor===Sn){const v=u.content;f.set(v.key,v)}u=u.right}let p=0,m=!1;for(;t!==u;){if(o===t&&(m=!0),!t.deleted){const v=t.content;switch(v.constructor){case Sn:{const{key:x,value:P}=v,_=a.get(x)??null;(f.get(x)!==v||_===P)&&(t.delete(i),p++,!m&&(d.get(x)??null)===P&&_!==P&&(_===null?d.delete(x):d.set(x,_))),!m&&!t.deleted&&lu(d,v);break}}}t=t.right}return p},vS=(i,t)=>{for(;t&&t.right&&(t.right.deleted||!t.right.countable);)t=t.right;const o=new Set;for(;t&&(t.deleted||!t.countable);){if(!t.deleted&&t.content.constructor===Sn){const a=t.content.key;o.has(a)?t.delete(i):o.add(a)}t=t.left}},_S=i=>{let t=0;return Lt(i.doc,o=>{let a=i._start,d=i._start,u=Ar();const f=q0(u);for(;d;){if(d.deleted===!1)switch(d.content.constructor){case Sn:lu(f,d.content);break;default:t+=py(o,a,d,u,f),u=q0(f),a=d;break}d=d.right}}),t},SS=i=>{const t=new Set,o=i.doc;for(const[a,d]of i.afterState.entries()){const u=i.beforeState.get(a)||0;d!==u&&Jm(i,o.store.clients.get(a),u,d,f=>{!f.deleted&&f.content.constructor===Sn&&f.constructor!==oi&&t.add(f.parent)})}Lt(o,a=>{bm(i,i.deleteSet,d=>{if(d instanceof oi||!d.parent._hasFormatting||t.has(d.parent))return;const u=d.parent;d.content.constructor===Sn?t.add(u):vS(a,d)});for(const d of t)_S(d)})},D2=(i,t,o)=>{const a=o,d=q0(t.currentAttributes),u=t.right;for(;o>0&&t.right!==null;){if(t.right.deleted===!1)switch(t.right.content.constructor){case js:case Fl:case es:o<t.right.length&&jo(i,it(t.right.id.client,t.right.id.clock+o)),o-=t.right.length,t.right.delete(i);break}t.forward()}u&&py(i,u,t.right,d,t.currentAttributes);const f=(t.left||t.right).parent;return f._searchMarker&&od(f._searchMarker,t.index,-a+o),t};class wS extends wf{constructor(t,o,a){super(t,o),this.childListChanged=!1,this.keysChanged=new Set,a.forEach(d=>{d===null?this.childListChanged=!0:this.keysChanged.add(d)})}get changes(){if(this._changes===null){const t={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=t}return this._changes}get delta(){if(this._delta===null){const t=this.target.doc,o=[];Lt(t,a=>{const d=new Map,u=new Map;let f=this.target._start,p=null;const m={};let v="",x=0,P=0;const _=()=>{if(p!==null){let k=null;switch(p){case"delete":P>0&&(k={delete:P}),P=0;break;case"insert":(typeof v=="object"||v.length>0)&&(k={insert:v},d.size>0&&(k.attributes={},d.forEach((C,N)=>{C!==null&&(k.attributes[N]=C)}))),v="";break;case"retain":x>0&&(k={retain:x},S8(m)||(k.attributes=m8({},m))),x=0;break}k&&o.push(k),p=null}};for(;f!==null;){switch(f.content.constructor){case js:case Fl:this.adds(f)?this.deletes(f)||(_(),p="insert",v=f.content.getContent()[0],_()):this.deletes(f)?(p!=="delete"&&(_(),p="delete"),P+=1):f.deleted||(p!=="retain"&&(_(),p="retain"),x+=1);break;case es:this.adds(f)?this.deletes(f)||(p!=="insert"&&(_(),p="insert"),v+=f.content.str):this.deletes(f)?(p!=="delete"&&(_(),p="delete"),P+=f.length):f.deleted||(p!=="retain"&&(_(),p="retain"),x+=f.length);break;case Sn:{const{key:k,value:C}=f.content;if(this.adds(f)){if(!this.deletes(f)){const N=d.get(k)??null;Oo(N,C)?C!==null&&f.delete(a):(p==="retain"&&_(),Oo(C,u.get(k)??null)?delete m[k]:m[k]=C)}}else if(this.deletes(f)){u.set(k,C);const N=d.get(k)??null;Oo(N,C)||(p==="retain"&&_(),m[k]=N)}else if(!f.deleted){u.set(k,C);const N=m[k];N!==void 0&&(Oo(N,C)?N!==null&&f.delete(a):(p==="retain"&&_(),C===null?delete m[k]:m[k]=C))}f.deleted||(p==="insert"&&_(),lu(d,f.content));break}}f=f.right}for(_();o.length>0;){const k=o[o.length-1];if(k.retain!==void 0&&k.attributes===void 0)o.pop();else break}}),this._delta=o}return this._delta}}class $a extends qn{constructor(t){super(),this._pending=t!==void 0?[()=>this.insert(0,t)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this.doc??ir(),this._length}_integrate(t,o){super._integrate(t,o);try{this._pending.forEach(a=>a())}catch(a){console.error(a)}this._pending=null}_copy(){return new $a}clone(){const t=new $a;return t.applyDelta(this.toDelta()),t}_callObserver(t,o){super._callObserver(t,o);const a=new wS(this,t,o);xf(this,t,a),!t.local&&this._hasFormatting&&(t._needFormattingCleanup=!0)}toString(){this.doc??ir();let t="",o=this._start;for(;o!==null;)!o.deleted&&o.countable&&o.content.constructor===es&&(t+=o.content.str),o=o.right;return t}toJSON(){return this.toString()}applyDelta(t,{sanitize:o=!0}={}){this.doc!==null?Lt(this.doc,a=>{const d=new tp(null,this._start,0,new Map);for(let u=0;u<t.length;u++){const f=t[u];if(f.insert!==void 0){const p=!o&&typeof f.insert=="string"&&u===t.length-1&&d.right===null&&f.insert.slice(-1)===`
`?f.insert.slice(0,-1):f.insert;(typeof p!="string"||p.length>0)&&U0(a,this,d,p,f.attributes||{})}else f.retain!==void 0?M2(a,this,d,f.retain,f.attributes||{}):f.delete!==void 0&&D2(a,d,f.delete)}}):this._pending.push(()=>this.applyDelta(t))}toDelta(t,o,a){this.doc??ir();const d=[],u=new Map,f=this.doc;let p="",m=this._start;function v(){if(p.length>0){const P={};let _=!1;u.forEach((C,N)=>{_=!0,P[N]=C});const k={insert:p};_&&(k.attributes=P),d.push(k),p=""}}const x=()=>{for(;m!==null;){if(Ga(m,t)||o!==void 0&&Ga(m,o))switch(m.content.constructor){case es:{const P=u.get("ychange");t!==void 0&&!Ga(m,t)?(P===void 0||P.user!==m.id.client||P.type!=="removed")&&(v(),u.set("ychange",a?a("removed",m.id):{type:"removed"})):o!==void 0&&!Ga(m,o)?(P===void 0||P.user!==m.id.client||P.type!=="added")&&(v(),u.set("ychange",a?a("added",m.id):{type:"added"})):P!==void 0&&(v(),u.delete("ychange")),p+=m.content.str;break}case js:case Fl:{v();const P={insert:m.content.getContent()[0]};if(u.size>0){const _={};P.attributes=_,u.forEach((k,C)=>{_[C]=k})}d.push(P);break}case Sn:Ga(m,t)&&(v(),lu(u,m.content));break}m=m.right}v()};return t||o?Lt(f,P=>{t&&$0(P,t),o&&$0(P,o),x()},"cleanup"):x(),d}insert(t,o,a){if(o.length<=0)return;const d=this.doc;d!==null?Lt(d,u=>{const f=Fh(u,this,t,!a);a||(a={},f.currentAttributes.forEach((p,m)=>{a[m]=p})),U0(u,this,f,o,a)}):this._pending.push(()=>this.insert(t,o,a))}insertEmbed(t,o,a){const d=this.doc;d!==null?Lt(d,u=>{const f=Fh(u,this,t,!a);U0(u,this,f,o,a||{})}):this._pending.push(()=>this.insertEmbed(t,o,a||{}))}delete(t,o){if(o===0)return;const a=this.doc;a!==null?Lt(a,d=>{D2(d,Fh(d,this,t,!0),o)}):this._pending.push(()=>this.delete(t,o))}format(t,o,a){if(o===0)return;const d=this.doc;d!==null?Lt(d,u=>{const f=Fh(u,this,t,!1);f.right!==null&&M2(u,this,f,o,a)}):this._pending.push(()=>this.format(t,o,a))}removeAttribute(t){this.doc!==null?Lt(this.doc,o=>{ef(o,this,t)}):this._pending.push(()=>this.removeAttribute(t))}setAttribute(t,o){this.doc!==null?Lt(this.doc,a=>{Op(a,this,t,o)}):this._pending.push(()=>this.setAttribute(t,o))}getAttribute(t){return zp(this,t)}getAttributes(){return uy(this)}_write(t){t.writeTypeRef(BS)}}const kS=i=>new $a;class j0{constructor(t,o=()=>!0){this._filter=o,this._root=t,this._currentNode=t._start,this._firstCall=!0,t.doc??ir()}[Symbol.iterator](){return this}next(){let t=this._currentNode,o=t&&t.content&&t.content.type;if(t!==null&&(!this._firstCall||t.deleted||!this._filter(o)))do if(o=t.content.type,!t.deleted&&(o.constructor===eu||o.constructor===Dl)&&o._start!==null)t=o._start;else for(;t!==null;){const a=t.next;if(a!==null){t=a;break}else t.parent===this._root?t=null:t=t.parent._item}while(t!==null&&(t.deleted||!this._filter(t.content.type)));return this._firstCall=!1,t===null?{value:void 0,done:!0}:(this._currentNode=t,{value:t.content.type,done:!1})}}class Dl extends qn{constructor(){super(),this._prelimContent=[]}get firstChild(){const t=this._first;return t?t.content.getContent()[0]:null}_integrate(t,o){super._integrate(t,o),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Dl}clone(){const t=new Dl;return t.insert(0,this.toArray().map(o=>o instanceof qn?o.clone():o)),t}get length(){return this.doc??ir(),this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(t){return new j0(this,t)}querySelector(t){t=t.toUpperCase();const a=new j0(this,d=>d.nodeName&&d.nodeName.toUpperCase()===t).next();return a.done?null:a.value}querySelectorAll(t){return t=t.toUpperCase(),bs(new j0(this,o=>o.nodeName&&o.nodeName.toUpperCase()===t))}_callObserver(t,o){xf(this,t,new ES(this,o,t))}toString(){return iy(this,t=>t.toString()).join("")}toJSON(){return this.toString()}toDOM(t=document,o={},a){const d=t.createDocumentFragment();return a!==void 0&&a._createAssociation(d,this),ld(this,u=>{d.insertBefore(u.toDOM(t,o,a),null)}),d}insert(t,o){this.doc!==null?Lt(this.doc,a=>{ly(a,this,t,o)}):this._prelimContent.splice(t,0,...o)}insertAfter(t,o){if(this.doc!==null)Lt(this.doc,a=>{const d=t&&t instanceof qn?t._item:t;$h(a,this,d,o)});else{const a=this._prelimContent,d=t===null?0:a.findIndex(u=>u===t)+1;if(d===0&&t!==null)throw Zi("Reference item not found");a.splice(d,0,...o)}}delete(t,o=1){this.doc!==null?Lt(this.doc,a=>{ay(a,this,t,o)}):this._prelimContent.splice(t,o)}toArray(){return ry(this)}push(t){this.insert(this.length,t)}unshift(t){this.insert(0,t)}get(t){return sy(this,t)}slice(t=0,o=this.length){return ny(this,t,o)}forEach(t){ld(this,t)}_write(t){t.writeTypeRef(VS)}}const xS=i=>new Dl;class eu extends Dl{constructor(t="UNDEFINED"){super(),this.nodeName=t,this._prelimAttrs=new Map}get nextSibling(){const t=this._item?this._item.next:null;return t?t.content.type:null}get prevSibling(){const t=this._item?this._item.prev:null;return t?t.content.type:null}_integrate(t,o){super._integrate(t,o),this._prelimAttrs.forEach((a,d)=>{this.setAttribute(d,a)}),this._prelimAttrs=null}_copy(){return new eu(this.nodeName)}clone(){const t=new eu(this.nodeName),o=this.getAttributes();return v8(o,(a,d)=>{t.setAttribute(d,a)}),t.insert(0,this.toArray().map(a=>a instanceof qn?a.clone():a)),t}toString(){const t=this.getAttributes(),o=[],a=[];for(const p in t)a.push(p);a.sort();const d=a.length;for(let p=0;p<d;p++){const m=a[p];o.push(m+'="'+t[m]+'"')}const u=this.nodeName.toLocaleLowerCase(),f=o.length>0?" "+o.join(" "):"";return`<${u}${f}>${super.toString()}</${u}>`}removeAttribute(t){this.doc!==null?Lt(this.doc,o=>{ef(o,this,t)}):this._prelimAttrs.delete(t)}setAttribute(t,o){this.doc!==null?Lt(this.doc,a=>{Op(a,this,t,o)}):this._prelimAttrs.set(t,o)}getAttribute(t){return zp(this,t)}hasAttribute(t){return cy(this,t)}getAttributes(t){return t?fS(this,t):uy(this)}toDOM(t=document,o={},a){const d=t.createElement(this.nodeName),u=this.getAttributes();for(const f in u){const p=u[f];typeof p=="string"&&d.setAttribute(f,p)}return ld(this,f=>{d.appendChild(f.toDOM(t,o,a))}),a!==void 0&&a._createAssociation(d,this),d}_write(t){t.writeTypeRef(GS),t.writeKey(this.nodeName)}}const CS=i=>new eu(i.readKey());class ES extends wf{constructor(t,o,a){super(t,a),this.childListChanged=!1,this.attributesChanged=new Set,o.forEach(d=>{d===null?this.childListChanged=!0:this.attributesChanged.add(d)})}}class tf extends Za{constructor(t){super(),this.hookName=t}_copy(){return new tf(this.hookName)}clone(){const t=new tf(this.hookName);return this.forEach((o,a)=>{t.set(a,o)}),t}toDOM(t=document,o={},a){const d=o[this.hookName];let u;return d!==void 0?u=d.createDom(this):u=document.createElement(this.hookName),u.setAttribute("data-yjs-hook",this.hookName),a!==void 0&&a._createAssociation(u,this),u}_write(t){t.writeTypeRef(HS),t.writeKey(this.hookName)}}const PS=i=>new tf(i.readKey());class nf extends $a{get nextSibling(){const t=this._item?this._item.next:null;return t?t.content.type:null}get prevSibling(){const t=this._item?this._item.prev:null;return t?t.content.type:null}_copy(){return new nf}clone(){const t=new nf;return t.applyDelta(this.toDelta()),t}toDOM(t=document,o,a){const d=t.createTextNode(this.toString());return a!==void 0&&a._createAssociation(d,this),d}toString(){return this.toDelta().map(t=>{const o=[];for(const d in t.attributes){const u=[];for(const f in t.attributes[d])u.push({key:f,value:t.attributes[d][f]});u.sort((f,p)=>f.key<p.key?-1:1),o.push({nodeName:d,attrs:u})}o.sort((d,u)=>d.nodeName<u.nodeName?-1:1);let a="";for(let d=0;d<o.length;d++){const u=o[d];a+=`<${u.nodeName}`;for(let f=0;f<u.attrs.length;f++){const p=u.attrs[f];a+=` ${p.key}="${p.value}"`}a+=">"}a+=t.insert;for(let d=o.length-1;d>=0;d--)a+=`</${o[d].nodeName}>`;return a}).join("")}toJSON(){return this.toString()}_write(t){t.writeTypeRef(WS)}}const NS=i=>new nf;class bp{constructor(t,o){this.id=t,this.length=o}get deleted(){throw Pi()}mergeWith(t){return!1}write(t,o,a){throw Pi()}integrate(t,o){throw Pi()}}const TS=0;class oi extends bp{get deleted(){return!0}delete(){}mergeWith(t){return this.constructor!==t.constructor?!1:(this.length+=t.length,!0)}integrate(t,o){o>0&&(this.id.clock+=o,this.length-=o),Qm(t.doc.store,this)}write(t,o){t.writeInfo(TS),t.writeLen(this.length-o)}getMissing(t,o){return null}}class gd{constructor(t){this.content=t}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new gd(this.content)}splice(t){throw Pi()}mergeWith(t){return!1}integrate(t,o){}delete(t){}gc(t){}write(t,o){t.writeBuf(this.content)}getRef(){return 3}}const RS=i=>new gd(i.readBuf());class ad{constructor(t){this.len=t}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new ad(this.len)}splice(t){const o=new ad(this.len-t);return this.len=t,o}mergeWith(t){return this.len+=t.len,!0}integrate(t,o){Jh(t.deleteSet,o.id.client,o.id.clock,this.len),o.markDeleted()}delete(t){}gc(t){}write(t,o){t.writeLen(this.len-o)}getRef(){return 1}}const LS=i=>new ad(i.readLen()),gy=(i,t)=>new ou({guid:i,...t,shouldLoad:t.shouldLoad||t.autoLoad||!1});class md{constructor(t){t._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=t;const o={};this.opts=o,t.gc||(o.gc=!1),t.autoLoad&&(o.autoLoad=!0),t.meta!==null&&(o.meta=t.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new md(gy(this.doc.guid,this.opts))}splice(t){throw Pi()}mergeWith(t){return!1}integrate(t,o){this.doc._item=o,t.subdocsAdded.add(this.doc),this.doc.shouldLoad&&t.subdocsLoaded.add(this.doc)}delete(t){t.subdocsAdded.has(this.doc)?t.subdocsAdded.delete(this.doc):t.subdocsRemoved.add(this.doc)}gc(t){}write(t,o){t.writeString(this.doc.guid),t.writeAny(this.opts)}getRef(){return 9}}const MS=i=>new md(gy(i.readString(),i.readAny()));class Fl{constructor(t){this.embed=t}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new Fl(this.embed)}splice(t){throw Pi()}mergeWith(t){return!1}integrate(t,o){}delete(t){}gc(t){}write(t,o){t.writeJSON(this.embed)}getRef(){return 5}}const DS=i=>new Fl(i.readJSON());class Sn{constructor(t,o){this.key=t,this.value=o}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new Sn(this.key,this.value)}splice(t){throw Pi()}mergeWith(t){return!1}integrate(t,o){const a=o.parent;a._searchMarker=null,a._hasFormatting=!0}delete(t){}gc(t){}write(t,o){t.writeKey(this.key),t.writeJSON(this.value)}getRef(){return 6}}const IS=i=>new Sn(i.readKey(),i.readJSON());class rf{constructor(t){this.arr=t}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new rf(this.arr)}splice(t){const o=new rf(this.arr.slice(t));return this.arr=this.arr.slice(0,t),o}mergeWith(t){return this.arr=this.arr.concat(t.arr),!0}integrate(t,o){}delete(t){}gc(t){}write(t,o){const a=this.arr.length;t.writeLen(a-o);for(let d=o;d<a;d++){const u=this.arr[d];t.writeString(u===void 0?"undefined":JSON.stringify(u))}}getRef(){return 2}}const AS=i=>{const t=i.readLen(),o=[];for(let a=0;a<t;a++){const d=i.readString();d==="undefined"?o.push(void 0):o.push(JSON.parse(d))}return new rf(o)},FS=qh("node_env")==="development";class Il{constructor(t){this.arr=t,FS&&dm(t)}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new Il(this.arr)}splice(t){const o=new Il(this.arr.slice(t));return this.arr=this.arr.slice(0,t),o}mergeWith(t){return this.arr=this.arr.concat(t.arr),!0}integrate(t,o){}delete(t){}gc(t){}write(t,o){const a=this.arr.length;t.writeLen(a-o);for(let d=o;d<a;d++){const u=this.arr[d];t.writeAny(u)}}getRef(){return 8}}const OS=i=>{const t=i.readLen(),o=[];for(let a=0;a<t;a++)o.push(i.readAny());return new Il(o)};class es{constructor(t){this.str=t}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new es(this.str)}splice(t){const o=new es(this.str.slice(t));this.str=this.str.slice(0,t);const a=this.str.charCodeAt(t-1);return a>=55296&&a<=56319&&(this.str=this.str.slice(0,t-1)+"",o.str=""+o.str.slice(1)),o}mergeWith(t){return this.str+=t.str,!0}integrate(t,o){}delete(t){}gc(t){}write(t,o){t.writeString(o===0?this.str:this.str.slice(o))}getRef(){return 4}}const zS=i=>new es(i.readString()),bS=[gS,yS,kS,CS,xS,PS,NS],US=0,jS=1,BS=2,GS=3,VS=4,HS=5,WS=6;class js{constructor(t){this.type=t}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new js(this.type._copy())}splice(t){throw Pi()}mergeWith(t){return!1}integrate(t,o){this.type._integrate(t.doc,o)}delete(t){let o=this.type._start;for(;o!==null;)o.deleted?o.id.clock<(t.beforeState.get(o.id.client)||0)&&t._mergeStructs.push(o):o.delete(t),o=o.right;this.type._map.forEach(a=>{a.deleted?a.id.clock<(t.beforeState.get(a.id.client)||0)&&t._mergeStructs.push(a):a.delete(t)}),t.changed.delete(this.type)}gc(t){let o=this.type._start;for(;o!==null;)o.gc(t,!0),o=o.right;this.type._start=null,this.type._map.forEach(a=>{for(;a!==null;)a.gc(t,!0),a=a.left}),this.type._map=new Map}write(t,o){this.type._write(t)}getRef(){return 7}}const YS=i=>new js(bS[i.readTypeRef()](i)),sf=(i,t,o)=>{const{client:a,clock:d}=t.id,u=new _n(it(a,d+o),t,it(a,d+o-1),t.right,t.rightOrigin,t.parent,t.parentSub,t.content.splice(o));return t.deleted&&u.markDeleted(),t.keep&&(u.keep=!0),t.redone!==null&&(u.redone=it(t.redone.client,t.redone.clock+o)),t.right=u,u.right!==null&&(u.right.left=u),i._mergeStructs.push(u),u.parentSub!==null&&u.right===null&&u.parent._map.set(u.parentSub,u),t.length=o,u};class _n extends bp{constructor(t,o,a,d,u,f,p,m){super(t,m.getLength()),this.origin=a,this.left=o,this.right=d,this.rightOrigin=u,this.parent=f,this.parentSub=p,this.redone=null,this.content=m,this.info=this.content.isCountable()?c2:0}set marker(t){(this.info&D0)>0!==t&&(this.info^=D0)}get marker(){return(this.info&D0)>0}get keep(){return(this.info&u2)>0}set keep(t){this.keep!==t&&(this.info^=u2)}get countable(){return(this.info&c2)>0}get deleted(){return(this.info&M0)>0}set deleted(t){this.deleted!==t&&(this.info^=M0)}markDeleted(){this.info|=M0}getMissing(t,o){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=In(o,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=In(o,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===Ya&&this.id.client!==this.parent.client&&this.parent.clock>=In(o,this.parent.client))return this.parent.client;if(this.origin&&(this.left=P2(t,o,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=jo(t,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===oi||this.right&&this.right.constructor===oi)this.parent=null;else if(!this.parent)this.left&&this.left.constructor===_n?(this.parent=this.left.parent,this.parentSub=this.left.parentSub):this.right&&this.right.constructor===_n&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===Ya){const a=b0(o,this.parent);a.constructor===oi?this.parent=null:this.parent=a.content.type}return null}integrate(t,o){if(o>0&&(this.id.clock+=o,this.left=P2(t,t.doc.store,it(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(o),this.length-=o),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let a=this.left,d;if(a!==null)d=a.right;else if(this.parentSub!==null)for(d=this.parent._map.get(this.parentSub)||null;d!==null&&d.left!==null;)d=d.left;else d=this.parent._start;const u=new Set,f=new Set;for(;d!==null&&d!==this.right;){if(f.add(d),u.add(d),Ih(this.origin,d.origin)){if(d.id.client<this.id.client)a=d,u.clear();else if(Ih(this.rightOrigin,d.rightOrigin))break}else if(d.origin!==null&&f.has(b0(t.doc.store,d.origin)))u.has(b0(t.doc.store,d.origin))||(a=d,u.clear());else break;d=d.right}this.left=a}if(this.left!==null){const a=this.left.right;this.right=a,this.left.right=this}else{let a;if(this.parentSub!==null)for(a=this.parent._map.get(this.parentSub)||null;a!==null&&a.left!==null;)a=a.left;else a=this.parent._start,this.parent._start=this;this.right=a}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(t)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),Qm(t.doc.store,this),this.content.integrate(t,this),T2(t,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(t)}else new oi(this.id,this.length).integrate(t,0)}get next(){let t=this.right;for(;t!==null&&t.deleted;)t=t.right;return t}get prev(){let t=this.left;for(;t!==null&&t.deleted;)t=t.left;return t}get lastId(){return this.length===1?this.id:it(this.id.client,this.id.clock+this.length-1)}mergeWith(t){if(this.constructor===t.constructor&&Ih(t.origin,this.lastId)&&this.right===t&&Ih(this.rightOrigin,t.rightOrigin)&&this.id.client===t.id.client&&this.id.clock+this.length===t.id.clock&&this.deleted===t.deleted&&this.redone===null&&t.redone===null&&this.content.constructor===t.content.constructor&&this.content.mergeWith(t.content)){const o=this.parent._searchMarker;return o&&o.forEach(a=>{a.p===t&&(a.p=this,!this.deleted&&this.countable&&(a.index-=this.length))}),t.keep&&(this.keep=!0),this.right=t.right,this.right!==null&&(this.right.left=this),this.length+=t.length,!0}return!1}delete(t){if(!this.deleted){const o=this.parent;this.countable&&this.parentSub===null&&(o._length-=this.length),this.markDeleted(),Jh(t.deleteSet,this.id.client,this.id.clock,this.length),T2(t,o,this.parentSub),this.content.delete(t)}}gc(t,o){if(!this.deleted)throw ai();this.content.gc(t),o?J_(t,this,new oi(this.id,this.length)):this.content=new ad(this.length)}write(t,o){const a=o>0?it(this.id.client,this.id.clock+o-1):this.origin,d=this.rightOrigin,u=this.parentSub,f=this.content.getRef()&df|(a===null?0:Vr)|(d===null?0:zs)|(u===null?0:ed);if(t.writeInfo(f),a!==null&&t.writeLeftID(a),d!==null&&t.writeRightID(d),a===null&&d===null){const p=this.parent;if(p._item!==void 0){const m=p._item;if(m===null){const v=K_(p);t.writeParentInfo(!0),t.writeString(v)}else t.writeParentInfo(!1),t.writeLeftID(m.id)}else p.constructor===String?(t.writeParentInfo(!0),t.writeString(p)):p.constructor===Ya?(t.writeParentInfo(!1),t.writeLeftID(p)):ai();u!==null&&t.writeString(u)}this.content.write(t,o)}}const my=(i,t)=>qS[t&df](i),qS=[()=>{ai()},LS,AS,RS,zS,DS,IS,YS,OS,MS,()=>{ai()}],XS=10;class li extends bp{get deleted(){return!0}delete(){}mergeWith(t){return this.constructor!==t.constructor?!1:(this.length+=t.length,!0)}integrate(t,o){ai()}write(t,o){t.writeInfo(XS),be(t.restEncoder,this.length-o)}getMissing(t,o){return null}}const yy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},vy="__ $YJS$ __";yy[vy]===!0&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438");yy[vy]=!0;const _y=new Map;class KS{constructor(t){this.room=t,this.onmessage=null,this._onChange=o=>o.key===t&&this.onmessage!==null&&this.onmessage({data:O8(o.newValue||"")}),f8(this._onChange)}postMessage(t){um.setItem(this.room,F8(L8(t)))}close(){p8(this._onChange)}}const QS=typeof BroadcastChannel>"u"?KS:BroadcastChannel,Up=i=>ts(_y,i,()=>{const t=bo(),o=new QS(i);return o.onmessage=a=>t.forEach(d=>d(a.data,"broadcastchannel")),{bc:o,subs:t}}),JS=(i,t)=>(Up(i).subs.add(t),t),ZS=(i,t)=>{const o=Up(i),a=o.subs.delete(t);return a&&o.subs.size===0&&(o.bc.close(),_y.delete(i)),a},Va=(i,t,o=null)=>{const a=Up(i);a.bc.postMessage(t),a.subs.forEach(d=>d(t,o))},Sy=0,jp=1,wy=2,np=(i,t)=>{be(i,Sy);const o=q_(t);en(i,o)},ky=(i,t,o)=>{be(i,jp),en(i,V_(t,o))},$S=(i,t,o)=>ky(t,o,nr(i)),xy=(i,t,o,a)=>{try{j_(t,nr(i),o)}catch(d){a!=null&&a(d),console.error("Caught error while handling a Yjs update",d)}},e9=(i,t)=>{be(i,wy),en(i,t)},t9=xy,n9=(i,t,o,a,d)=>{const u=qe(i);switch(u){case Sy:$S(i,t,o);break;case jp:xy(i,o,a,d);break;case wy:t9(i,o,a,d);break;default:throw new Error("Unknown message type")}return u},r9=0,i9=(i,t,o)=>{switch(qe(i)){case r9:o(t,zo(i))}},B0=3e4;class s9 extends I6{constructor(t){super(),this.doc=t,this.clientID=t.clientID,this.states=new Map,this.meta=new Map,this._checkInterval=setInterval(()=>{const o=Ll();this.getLocalState()!==null&&B0/2<=o-this.meta.get(this.clientID).lastUpdated&&this.setLocalState(this.getLocalState());const a=[];this.meta.forEach((d,u)=>{u!==this.clientID&&B0<=o-d.lastUpdated&&this.states.has(u)&&a.push(u)}),a.length>0&&Bp(this,a,"timeout")},Ni(B0/10)),t.on("destroy",()=>{this.destroy()}),this.setLocalState({})}destroy(){this.emit("destroy",[this]),this.setLocalState(null),super.destroy(),clearInterval(this._checkInterval)}getLocalState(){return this.states.get(this.clientID)||null}setLocalState(t){const o=this.clientID,a=this.meta.get(o),d=a===void 0?0:a.clock+1,u=this.states.get(o);t===null?this.states.delete(o):this.states.set(o,t),this.meta.set(o,{clock:d,lastUpdated:Ll()});const f=[],p=[],m=[],v=[];t===null?v.push(o):u==null?t!=null&&f.push(o):(p.push(o),Ha(u,t)||m.push(o)),(f.length>0||m.length>0||v.length>0)&&this.emit("change",[{added:f,updated:m,removed:v},"local"]),this.emit("update",[{added:f,updated:p,removed:v},"local"])}setLocalStateField(t,o){const a=this.getLocalState();a!==null&&this.setLocalState({...a,[t]:o})}getStates(){return this.states}}const Bp=(i,t,o)=>{const a=[];for(let d=0;d<t.length;d++){const u=t[d];if(i.states.has(u)){if(i.states.delete(u),u===i.clientID){const f=i.meta.get(u);i.meta.set(u,{clock:f.clock+1,lastUpdated:Ll()})}a.push(u)}}a.length>0&&(i.emit("change",[{added:[],updated:[],removed:a},o]),i.emit("update",[{added:[],updated:[],removed:a},o]))},Zc=(i,t,o=i.states)=>{const a=t.length,d=rr();be(d,a);for(let u=0;u<a;u++){const f=t[u],p=o.get(f)||null,m=i.meta.get(f).clock;be(d,f),be(d,m),Rl(d,JSON.stringify(p))}return bt(d)},o9=(i,t,o)=>{const a=Go(t),d=Ll(),u=[],f=[],p=[],m=[],v=qe(a);for(let x=0;x<v;x++){const P=qe(a);let _=qe(a);const k=JSON.parse(zo(a)),C=i.meta.get(P),N=i.states.get(P),I=C===void 0?0:C.clock;(I<_||I===_&&k===null&&i.states.has(P))&&(k===null?P===i.clientID&&i.getLocalState()!=null?_++:i.states.delete(P):i.states.set(P,k),i.meta.set(P,{clock:_,lastUpdated:d}),C===void 0&&k!==null?u.push(P):C!==void 0&&k===null?m.push(P):k!==null&&(Ha(k,N)||p.push(P),f.push(P)))}(u.length>0||p.length>0||m.length>0)&&i.emit("change",[{added:u,updated:p,removed:m},o]),(u.length>0||f.length>0||m.length>0)&&i.emit("update",[{added:u,updated:f,removed:m},o])},l9=i=>_8(i,(t,o)=>`${encodeURIComponent(o)}=${encodeURIComponent(t)}`).join("&"),Nl=0,Cy=3,Xa=1,a9=2,yd=[];yd[Nl]=(i,t,o,a,d)=>{be(i,Nl);const u=n9(t,i,o.doc,o);a&&u===jp&&!o.synced&&(o.synced=!0)};yd[Cy]=(i,t,o,a,d)=>{be(i,Xa),en(i,Zc(o.awareness,Array.from(o.awareness.getStates().keys())))};yd[Xa]=(i,t,o,a,d)=>{o9(o.awareness,nr(t),o)};yd[a9]=(i,t,o,a,d)=>{i9(t,o.doc,(u,f)=>u9(o,f))};const I2=3e4,u9=(i,t)=>console.warn(`Permission denied to access ${i.url}.
${t}`),Ey=(i,t,o)=>{const a=Go(t),d=rr(),u=qe(a),f=i.messageHandlers[u];return f?f(d,a,i,o,u):console.error("Unable to compute message"),d},rp=(i,t,o)=>{t===i.ws&&(i.emit("connection-close",[o,i]),i.ws=null,t.close(),i.wsconnecting=!1,i.wsconnected?(i.wsconnected=!1,i.synced=!1,Bp(i.awareness,Array.from(i.awareness.getStates().keys()).filter(a=>a!==i.doc.clientID),i),i.emit("status",[{status:"disconnected"}])):i.wsUnsuccessfulReconnects++,setTimeout(Py,pp(A6(2,i.wsUnsuccessfulReconnects)*100,i.maxBackoffTime),i))},Py=i=>{if(i.shouldConnect&&i.ws===null){const t=new i._WS(i.url,i.protocols);t.binaryType="arraybuffer",i.ws=t,i.wsconnecting=!0,i.wsconnected=!1,i.synced=!1,t.onmessage=o=>{i.wsLastMessageReceived=Ll();const a=Ey(i,new Uint8Array(o.data),!0);gp(a)>1&&t.send(bt(a))},t.onerror=o=>{i.emit("connection-error",[o,i])},t.onclose=o=>{rp(i,t,o)},t.onopen=()=>{i.wsLastMessageReceived=Ll(),i.wsconnecting=!1,i.wsconnected=!0,i.wsUnsuccessfulReconnects=0,i.emit("status",[{status:"connected"}]);const o=rr();if(be(o,Nl),np(o,i.doc),t.send(bt(o)),i.awareness.getLocalState()!==null){const a=rr();be(a,Xa),en(a,Zc(i.awareness,[i.doc.clientID])),t.send(bt(a))}},i.emit("status",[{status:"connecting"}])}},G0=(i,t)=>{const o=i.ws;i.wsconnected&&o&&o.readyState===o.OPEN&&o.send(t),i.bcconnected&&Va(i.bcChannel,t,i)};class c9 extends nm{constructor(t,o,a,{connect:d=!0,awareness:u=new s9(a),params:f={},protocols:p=[],WebSocketPolyfill:m=WebSocket,resyncInterval:v=-1,maxBackoffTime:x=2500,disableBc:P=!1}={}){for(super();t[t.length-1]==="/";)t=t.slice(0,t.length-1);this.serverUrl=t,this.bcChannel=t+"/"+o,this.maxBackoffTime=x,this.params=f,this.protocols=p,this.roomname=o,this.doc=a,this._WS=m,this.awareness=u,this.wsconnected=!1,this.wsconnecting=!1,this.bcconnected=!1,this.disableBc=P,this.wsUnsuccessfulReconnects=0,this.messageHandlers=yd.slice(),this._synced=!1,this.ws=null,this.wsLastMessageReceived=0,this.shouldConnect=d,this._resyncInterval=0,v>0&&(this._resyncInterval=setInterval(()=>{if(this.ws&&this.ws.readyState===WebSocket.OPEN){const _=rr();be(_,Nl),np(_,a),this.ws.send(bt(_))}},v)),this._bcSubscriber=(_,k)=>{if(k!==this){const C=Ey(this,new Uint8Array(_),!1);gp(C)>1&&Va(this.bcChannel,bt(C),this)}},this._updateHandler=(_,k)=>{if(k!==this){const C=rr();be(C,Nl),e9(C,_),G0(this,bt(C))}},this.doc.on("update",this._updateHandler),this._awarenessUpdateHandler=({added:_,updated:k,removed:C},N)=>{const I=_.concat(k).concat(C),j=rr();be(j,Xa),en(j,Zc(u,I)),G0(this,bt(j))},this._exitHandler=()=>{Bp(this.awareness,[a.clientID],"app closed")},Uo&&typeof process<"u"&&process.on("exit",this._exitHandler),u.on("update",this._awarenessUpdateHandler),this._checkInterval=setInterval(()=>{this.wsconnected&&I2<Ll()-this.wsLastMessageReceived&&rp(this,this.ws,null)},I2/10),d&&this.connect()}get url(){const t=l9(this.params);return this.serverUrl+"/"+this.roomname+(t.length===0?"":"?"+t)}get synced(){return this._synced}set synced(t){this._synced!==t&&(this._synced=t,this.emit("synced",[t]),this.emit("sync",[t]))}destroy(){this._resyncInterval!==0&&clearInterval(this._resyncInterval),clearInterval(this._checkInterval),this.disconnect(),Uo&&typeof process<"u"&&process.off("exit",this._exitHandler),this.awareness.off("update",this._awarenessUpdateHandler),this.doc.off("update",this._updateHandler),super.destroy()}connectBc(){if(this.disableBc)return;this.bcconnected||(JS(this.bcChannel,this._bcSubscriber),this.bcconnected=!0);const t=rr();be(t,Nl),np(t,this.doc),Va(this.bcChannel,bt(t),this);const o=rr();be(o,Nl),ky(o,this.doc),Va(this.bcChannel,bt(o),this);const a=rr();be(a,Cy),Va(this.bcChannel,bt(a),this);const d=rr();be(d,Xa),en(d,Zc(this.awareness,[this.doc.clientID])),Va(this.bcChannel,bt(d),this)}disconnectBc(){const t=rr();be(t,Xa),en(t,Zc(this.awareness,[this.doc.clientID],new Map)),G0(this,bt(t)),this.bcconnected&&(ZS(this.bcChannel,this._bcSubscriber),this.bcconnected=!1)}disconnect(){this.shouldConnect=!1,this.disconnectBc(),this.ws!==null&&rp(this,this.ws,null)}connect(){this.shouldConnect=!0,!this.wsconnected&&this.ws===null&&(Py(this),this.connectBc())}}const A2="ws://localhost:1234",d9="http://localhost:1234";async function h9(i){try{const t=await fetch(`${d9}/api/rooms/${encodeURIComponent(i)}/exists`);return t.ok?(await t.json()).exists===!0:!1}catch{return!1}}function f9({roomId:i,isCreating:t=!1}){var b;const{shapes:o,layers:a,setState:d}=Sr(),{setConnected:u,setRoom:f,setUser:p,userName:m,userColor:v,updateCursor:x,clearCursors:P}=dp(),[_,k]=ve.useState(null),[C,N]=ve.useState(!1),I=ve.useRef(null),j=ve.useRef(null),T=ve.useRef(!1),S=ve.useRef(bh());ve.useEffect(()=>{if(!i){u(!1),k(null);return}let Y=!1;return(async()=>{if(N(!0),k(null),!t){const pe=await h9(i);if(Y)return;if(!pe){k("Room not found. Please check the ID and try again."),N(!1),u(!1);return}}const U=t?`${A2}`:A2,B=new ou;I.current=B;const V=t?`${i}?create=true`:i,X=new c9(U,V,B);j.current=X;const $=B.getMap("shapes"),ne=B.getArray("layers"),ee=X.awareness;if(p(S.current,m,v),f(i),X.on("status",pe=>{if(Y)return;const D=pe.status==="connected";u(D),N(!1),!D&&pe.status}),X.on("connection-close",pe=>{Y||pe&&pe.code===4004&&(k("Room not found. Please check the ID and try again."),u(!1))}),ee.setLocalStateField("user",{id:S.current,name:m,color:v}),ee.on("change",()=>{if(Y)return;ee.getStates().forEach((D,z)=>{if(z===B.clientID)return;const W=D.user,G=D.cursor;W&&G&&x({id:W.id,name:W.name,color:W.color,x:G.x,y:G.y})})}),$.observe(()=>{if(T.current||Y)return;T.current=!0;const pe={};$.forEach((D,z)=>{pe[z]=D}),d({shapes:pe}),T.current=!1}),ne.observe(()=>{if(T.current||Y)return;T.current=!0;const pe=ne.toArray();d({layers:pe}),T.current=!1}),$.size>0||ne.length>0){const pe={};$.forEach((D,z)=>{pe[z]=D}),d({shapes:pe,layers:ne.toArray()})}})(),()=>{Y=!0,j.current&&(j.current.destroy(),j.current=null),I.current&&(I.current.destroy(),I.current=null),P(),u(!1)}},[i,t,m,v,d,u,f,p,x,P]),ve.useEffect(()=>{if(!I.current||!j.current||T.current)return;const Y=I.current,A=Y.getMap("shapes"),U=Y.getArray("layers");Y.transact(()=>{const B=new Set(Object.keys(o)),V=new Set;A.forEach((X,$)=>V.add($)),Object.entries(o).forEach(([X,$])=>{const ne=A.get(X);(!ne||JSON.stringify(ne)!==JSON.stringify($))&&A.set(X,$)}),V.forEach(X=>{B.has(X)||A.delete(X)}),(U.length!==a.length||JSON.stringify(U.toArray())!==JSON.stringify(a))&&(U.delete(0,U.length),a.forEach(X=>U.push([X])))})},[o,a]);const L=ve.useCallback((Y,A)=>{j.current&&j.current.awareness.setLocalStateField("cursor",{x:Y,y:A})},[]),M=ve.useCallback(()=>{j.current&&(j.current.destroy(),j.current=null),I.current&&(I.current.destroy(),I.current=null),P(),u(!1),f(null),k(null)},[P,u,f]);return{updateCursorPosition:L,disconnect:M,isConnected:((b=j.current)==null?void 0:b.wsconnected)??!1,error:_,isLoading:C}}const p9="_app_1mhhu_1",g9="_main_1mhhu_10",m9="_leftPanel_1mhhu_16",y9="_rightPanel_1mhhu_25",Oh={app:p9,main:g9,leftPanel:m9,rightPanel:y9};function v9(){const[i,t]=ve.useState(null),[o,a]=ve.useState(!1);ve.useEffect(()=>{const k=new URLSearchParams(window.location.search).get("room");k&&(a(!1),t(k))},[]),T6();const{updateCursorPosition:d,disconnect:u,error:f,isLoading:p}=f9({roomId:i,isCreating:o}),m=ve.useCallback((_,k)=>{i&&d(_,k)},[i,d]),v=ve.useCallback(_=>{a(!1),t(_);const k=new URL(window.location.href);k.searchParams.set("room",_),window.history.pushState({},"",k.toString())},[]),x=ve.useCallback(_=>{a(!0),t(_);const k=new URL(window.location.href);k.searchParams.set("room",_),window.history.pushState({},"",k.toString())},[]),P=ve.useCallback(()=>{u(),t(null),a(!1);const _=new URL(window.location.href);_.searchParams.delete("room"),window.history.pushState({},"",_.toString())},[u]);return K.jsxs("div",{className:Oh.app,children:[K.jsx(P5,{}),K.jsxs("div",{className:Oh.main,children:[K.jsx("div",{className:Oh.leftPanel,children:K.jsx(e6,{})}),K.jsx(I3,{onCursorMove:m}),K.jsxs("div",{className:Oh.rightPanel,children:[K.jsx(P6,{roomId:i,onJoinRoom:v,onCreateRoom:x,onLeaveRoom:P,error:f,isLoading:p}),K.jsx(Z5,{})]})]})]})}sv.createRoot(document.getElementById("root")).render(K.jsx(Yn.StrictMode,{children:K.jsx(v9,{})}));
